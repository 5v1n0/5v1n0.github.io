{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/transition/index.mjs","../../node_modules/svelte/store/index.mjs","../../node_modules/svelte/motion/index.mjs","../../src/circleOfFifths.js","../../src/circleOfColours.js","../../src/chordScale.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/@snlab/florence/src/components/Core/Graphic/GraphicContext/index.js","../../node_modules/@snlab/florence/src/components/Core/utils/padding.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/getRanges.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/createScales.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/polar.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/attachTransformations.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/createSectionContext.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/index.js","../../node_modules/@snlab/florence/src/components/Core/Graphic/EventManagerContext/index.js","../../node_modules/@snlab/florence/src/components/Core/Section/InteractionManagerContext/index.js","../../node_modules/detect-hover/lib/index.js","../../node_modules/detect-pointer/lib/index.js","../../node_modules/detect-touch-events/lib/index.js","../../node_modules/detect-passive-events/lib/index.js","../../node_modules/detect-it/lib/index.js","../../node_modules/@snlab/florence/src/interactivity/events/EventTracker.js","../../node_modules/@snlab/florence/src/interactivity/events/BaseEventManager.js","../../node_modules/@snlab/florence/src/utils/capitalize.js","../../node_modules/@snlab/florence/src/interactivity/events/MouseEventManager.js","../../node_modules/@snlab/florence/src/interactivity/events/TouchEventManager.js","../../node_modules/@snlab/florence/src/interactivity/events/EventManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/managers/BaseInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/BaseInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexPoint.js","../../node_modules/d3-geo/src/adder.js","../../node_modules/d3-geo/src/math.js","../../node_modules/d3-geo/src/noop.js","../../node_modules/d3-geo/src/stream.js","../../node_modules/d3-geo/src/identity.js","../../node_modules/d3-geo/src/path/area.js","../../node_modules/d3-geo/src/path/bounds.js","../../node_modules/d3-geo/src/path/centroid.js","../../node_modules/d3-geo/src/path/context.js","../../node_modules/d3-geo/src/path/measure.js","../../node_modules/d3-geo/src/path/string.js","../../node_modules/d3-geo/src/path/index.js","../../node_modules/@snlab/florence/src/utils/equals.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/calculateBbox.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/geometryDetectors.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/polygonArea.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/distance.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/calculateCentroid.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/closestPointOnLine.js","../../node_modules/two-product/two-product.js","../../node_modules/robust-sum/robust-sum.js","../../node_modules/two-sum/two-sum.js","../../node_modules/robust-scale/robust-scale.js","../../node_modules/robust-subtract/robust-diff.js","../../node_modules/robust-orientation/orientation.js","../../node_modules/robust-point-in-polygon/robust-pnp.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/pointInPolygon.js","../../node_modules/@snlab/rendervous/dist/rendervous.esm.js","../../node_modules/earcut/src/earcut.js","../../node_modules/topojson-client/src/identity.js","../../node_modules/topojson-client/src/feature.js","../../node_modules/topojson-client/src/transform.js","../../node_modules/topojson-client/src/reverse.js","../../node_modules/topojson-client/src/stitch.js","../../node_modules/topojson-client/src/merge.js","../../node_modules/@snlab/transshape/dist/transshape.esm.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/transition.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/createItemFromBbox.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexRectangle.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexPolygon.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexLine.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexArea.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexSymbol.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/MarkInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/SectionInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/BaseInteractionHandler.js","../../node_modules/rbush/rbush.min.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/pointCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/rectangleCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/polygonCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/lineCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/symbolCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/areaCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/MarkInteractionHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/createEvent.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/getLocalCoordinates.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/hitUtils.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/ClickHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MousedownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MousedragHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/SectionInteractionHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/WheelHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/getScrollLineHeight.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/ClickHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MousedownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MousemoveHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/MouseInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/numberOfTouches.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchdownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchdragHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/PinchHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchdownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchmoveHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/TouchInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/utils/bboxPoint.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexPoint.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexRectangle.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexPolygon.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexLine.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexArea.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/SelectManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/InteractionManager.js","../../node_modules/@snlab/florence/src/components/Core/Graphic/Graphic.svelte","../../node_modules/@snlab/florence/src/components/Core/Section/getClipProps.js","../../node_modules/@snlab/florence/src/components/Marks/utils/getKeyArray.js","../../node_modules/@snlab/florence/src/components/Marks/utils/createPixelGeometryFromGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Point/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Line/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Label/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Area/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/validateAesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/utils/geometryPropTools.js","../../node_modules/@snlab/florence/src/components/Marks/utils/propNeedsScaling.js","../../node_modules/@snlab/florence/src/components/Marks/Point/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/utils/createPixelGeometryFromXYArrays.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/geometryAlias.js","../../node_modules/@snlab/florence/src/components/Marks/Point/representPointAsPolygon.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Area/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Point/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/utils/generateArrayOfLength.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/pixelGeometryFuncs.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Line/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Line/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Area/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Line/representLineAsPolygon.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/representAsPolygonFuncs.js","../../node_modules/@snlab/florence/src/components/Marks/utils/transitions/createTransitionable.js","../../node_modules/@snlab/florence/src/components/Marks/utils/any.js","../../node_modules/@snlab/florence/src/components/Marks/utils/parseRenderSettings.js","../../node_modules/@snlab/florence/src/components/Marks/utils/generatePath.js","../../node_modules/@snlab/florence/src/components/Marks/utils/textAnchorPoint.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/Mark.svelte","../../node_modules/@snlab/florence/src/components/Marks/Mark/createDataNecessaryForIndexing.js","../../node_modules/@snlab/florence/src/components/Marks/Point/Point.svelte","../../node_modules/@snlab/florence/src/components/Marks/Line/Line.svelte","../../node_modules/@snlab/florence-datacontainer/dist/florence-datacontainer.umd.js","../../node_modules/d3-dsv/src/dsv.js","../../node_modules/d3-dsv/src/csv.js","../../src/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value' || descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j];\n                if (attributes[attribute.name]) {\n                    j++;\n                }\n                else {\n                    node.removeAttribute(attribute.name);\n                }\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.setAttribute('aria-hidden', 'true');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro â we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro â needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next, lookup.has(block.key));\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error(`Cannot have duplicate keys in a keyed each`);\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if ($$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.20.1' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","export { identity as linear } from '../internal';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicInOut, linear, cubicOut } from '../easing';\nimport { is_function, assign } from '../internal';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear }) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut }) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `overflow: hidden;` +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut }) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from '../store';\nimport { now, loop, assign } from '../internal';\nimport { linear } from '../easing';\n\nfunction is_date(obj) {\n    return Object.prototype.toString.call(obj) === '[object Date]';\n}\n\nfunction tick_spring(ctx, last_value, current_value, target_value) {\n    if (typeof current_value === 'number' || is_date(current_value)) {\n        // @ts-ignore\n        const delta = target_value - current_value;\n        // @ts-ignore\n        const velocity = (current_value - last_value) / (ctx.dt || 1 / 60); // guard div by 0\n        const spring = ctx.opts.stiffness * delta;\n        const damper = ctx.opts.damping * velocity;\n        const acceleration = (spring - damper) * ctx.inv_mass;\n        const d = (velocity + acceleration) * ctx.dt;\n        if (Math.abs(d) < ctx.opts.precision && Math.abs(delta) < ctx.opts.precision) {\n            return target_value; // settled\n        }\n        else {\n            ctx.settled = false; // signal loop to keep ticking\n            // @ts-ignore\n            return is_date(current_value) ?\n                new Date(current_value.getTime() + d) : current_value + d;\n        }\n    }\n    else if (Array.isArray(current_value)) {\n        // @ts-ignore\n        return current_value.map((_, i) => tick_spring(ctx, last_value[i], current_value[i], target_value[i]));\n    }\n    else if (typeof current_value === 'object') {\n        const next_value = {};\n        for (const k in current_value)\n            // @ts-ignore\n            next_value[k] = tick_spring(ctx, last_value[k], current_value[k], target_value[k]);\n        // @ts-ignore\n        return next_value;\n    }\n    else {\n        throw new Error(`Cannot spring ${typeof current_value} values`);\n    }\n}\nfunction spring(value, opts = {}) {\n    const store = writable(value);\n    const { stiffness = 0.15, damping = 0.8, precision = 0.01 } = opts;\n    let last_time;\n    let task;\n    let current_token;\n    let last_value = value;\n    let target_value = value;\n    let inv_mass = 1;\n    let inv_mass_recovery_rate = 0;\n    let cancel_task = false;\n    function set(new_value, opts = {}) {\n        target_value = new_value;\n        const token = current_token = {};\n        if (value == null || opts.hard || (spring.stiffness >= 1 && spring.damping >= 1)) {\n            cancel_task = true; // cancel any running animation\n            last_time = now();\n            last_value = new_value;\n            store.set(value = target_value);\n            return Promise.resolve();\n        }\n        else if (opts.soft) {\n            const rate = opts.soft === true ? .5 : +opts.soft;\n            inv_mass_recovery_rate = 1 / (rate * 60);\n            inv_mass = 0; // infinite mass, unaffected by spring forces\n        }\n        if (!task) {\n            last_time = now();\n            cancel_task = false;\n            task = loop(now => {\n                if (cancel_task) {\n                    cancel_task = false;\n                    task = null;\n                    return false;\n                }\n                inv_mass = Math.min(inv_mass + inv_mass_recovery_rate, 1);\n                const ctx = {\n                    inv_mass,\n                    opts: spring,\n                    settled: true,\n                    dt: (now - last_time) * 60 / 1000\n                };\n                const next_value = tick_spring(ctx, last_value, value, target_value);\n                last_time = now;\n                last_value = value;\n                store.set(value = next_value);\n                if (ctx.settled)\n                    task = null;\n                return !ctx.settled;\n            });\n        }\n        return new Promise(fulfil => {\n            task.promise.then(() => {\n                if (token === current_token)\n                    fulfil();\n            });\n        });\n    }\n    const spring = {\n        set,\n        update: (fn, opts) => set(fn(target_value, value), opts),\n        subscribe: store.subscribe,\n        stiffness,\n        damping,\n        precision\n    };\n    return spring;\n}\n\nfunction get_interpolator(a, b) {\n    if (a === b || a !== a)\n        return () => a;\n    const type = typeof a;\n    if (type !== typeof b || Array.isArray(a) !== Array.isArray(b)) {\n        throw new Error('Cannot interpolate values of different type');\n    }\n    if (Array.isArray(a)) {\n        const arr = b.map((bi, i) => {\n            return get_interpolator(a[i], bi);\n        });\n        return t => arr.map(fn => fn(t));\n    }\n    if (type === 'object') {\n        if (!a || !b)\n            throw new Error('Object cannot be null');\n        if (is_date(a) && is_date(b)) {\n            a = a.getTime();\n            b = b.getTime();\n            const delta = b - a;\n            return t => new Date(a + t * delta);\n        }\n        const keys = Object.keys(b);\n        const interpolators = {};\n        keys.forEach(key => {\n            interpolators[key] = get_interpolator(a[key], b[key]);\n        });\n        return t => {\n            const result = {};\n            keys.forEach(key => {\n                result[key] = interpolators[key](t);\n            });\n            return result;\n        };\n    }\n    if (type === 'number') {\n        const delta = b - a;\n        return t => a + t * delta;\n    }\n    throw new Error(`Cannot interpolate ${type} values`);\n}\nfunction tweened(value, defaults = {}) {\n    const store = writable(value);\n    let task;\n    let target_value = value;\n    function set(new_value, opts) {\n        if (value == null) {\n            store.set(value = new_value);\n            return Promise.resolve();\n        }\n        target_value = new_value;\n        let previous_task = task;\n        let started = false;\n        let { delay = 0, duration = 400, easing = linear, interpolate = get_interpolator } = assign(assign({}, defaults), opts);\n        const start = now() + delay;\n        let fn;\n        task = loop(now => {\n            if (now < start)\n                return true;\n            if (!started) {\n                fn = interpolate(value, new_value);\n                if (typeof duration === 'function')\n                    duration = duration(value, new_value);\n                started = true;\n            }\n            if (previous_task) {\n                previous_task.abort();\n                previous_task = null;\n            }\n            const elapsed = now - start;\n            if (elapsed > duration) {\n                store.set(value = new_value);\n                return false;\n            }\n            // @ts-ignore\n            store.set(value = fn(easing(elapsed / duration)));\n            return true;\n        });\n        return task.promise;\n    }\n    return {\n        set,\n        update: (fn, opts) => set(fn(target_value, value), opts),\n        subscribe: store.subscribe\n    };\n}\n\nexport { spring, tweened };\n","export const CircleOfFifths =[\n  {\n    \"OBJECT_ID\": 1,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"C\",\n    \"POLY_PATH\": \"M322.718,14.82\\n\\t\\tc-43.756-10.744-87.269-9.598-130.613,2.449c-3.948,1.096-3.92,2.857-2.89,6.058c5.6,17.395,11.053,34.837,16.556,52.264\\n\\t\\tc1.046,4.603,3.801,5.476,8.162,4.342c24.102-6.274,48.497-7.768,73.19-4.183c4.127,0.599,8.144,1.67,12.248,2.331\\n\\t\\tc4.887,0.784,7.18-0.644,8.558-5.352c4.951-16.904,9.289-33.985,14.668-50.767C323.315,19.721,324.537,17.224,322.718,14.82z\",\n    \"TEXT_PATH_1\": \"M256.874,45.003c0,1.024-0.512,1.536-1.536,1.536h-5.242c-0.996,0-1.493-0.512-1.493-1.536V31.274\\n\\t\\t\\tc0-1.031,0.498-1.547,1.493-1.547h5.242c1.024,0,1.536,0.516,1.536,1.547v3.932h-2.503v-3.319h-3.255V44.38h3.255v-3.534h2.503\\n\\t\\t\\tV45.003z\",\n    \"TEXT_PATH_2\": \"\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 2,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"G\",\n    \"POLY_PATH\": \"M440.206,79.639\\n\\t\\tc-31.085-30.477-67.817-51.122-109.628-62.903c-1.253-0.353-2.6-0.378-3.9-0.557c-1.283,0.499-0.811,1.512-0.72,2.417\\n\\t\\tc0.822,3.784-0.793,7.212-1.755,10.674c-4.206,15.184-8.897,30.232-12.698,45.529c-0.423,1.708-1.482,3.461-0.05,5.216\\n\\t\\tc8.444,3.904,17.396,6.49,25.904,10.274c18.698,8.313,35.473,19.46,50.648,33.095c5.797,5.208,7.646,5.232,13.396-0.121\\n\\t\\tc12.652-11.784,24.777-24.117,37.438-35.895C441.155,85.219,443.95,82.952,440.206,79.639z\",\n    \"TEXT_PATH_1\": \"M374.208,79.355c0,1.024-0.513,1.536-1.536,1.536h-5.285c-0.996,0-1.493-0.512-1.493-1.536V65.627\\n\\t\\t\\tc0-1.031,0.509-1.547,1.525-1.547h5.253c1.023,0,1.536,0.516,1.536,1.547v3.588h-2.524v-2.976h-3.276v12.493h3.276v-4.705h-1.869\\n\\t\\t\\tV71.89h4.394V79.355z\",\n    \"TEXT_PATH_2\": \"\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 3,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"D\",\n    \"POLY_PATH\": \"M500.479,165.448\\n\\t\\tc-7.655-19.595-17.646-37.902-30.037-54.917c-5.873-8.065-12.216-15.729-18.804-23.218c-2.199-2.501-3.503-2.505-5.912-0.141\\n\\t\\tc-15.057,14.759-30.281,29.346-45.453,43.99c-0.466,2.083,0.83,3.327,2.042,4.76c7.49,8.861,14.786,17.883,20.601,27.975\\n\\t\\tc7.037,12.223,13.244,24.825,17.409,38.354c0.778,2.519,1.229,5.177,3.043,7.257c2.241,2.374,4.857,2.271,7.781,1.437\\n\\t\\tc17.219-4.909,34.43-9.843,51.621-14.843c5.568-1.62,6.678-3.627,4.95-9.172C505.472,179.717,503.26,172.484,500.479,165.448z\",\n    \"TEXT_PATH_1\": \"M463.711,163.278c0,0.988-0.294,1.764-0.881,2.326c-0.588,0.563-1.379,0.843-2.374,0.843h-5.124v-16.812h5.124\\n\\t\\t\\tc0.995,0,1.786,0.285,2.374,0.854c0.587,0.569,0.881,1.348,0.881,2.336V163.278z M461.187,162.859v-9.657\\n\\t\\t\\tc0-0.938-0.491-1.407-1.472-1.407h-1.869v12.493h1.805C460.674,164.288,461.187,163.812,461.187,162.859z\",\n    \"TEXT_PATH_2\": \"\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 4,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"A\",\n    \"POLY_PATH\": \"M518.287,227.128\\n\\t\\tc3.97,20.661,5.272,41.475,3.857,62.477c-0.671,9.954-1.952,19.819-3.533,29.668c-0.529,3.287-1.629,3.987-4.928,3.271\\n\\t\\tc-20.606-4.463-41.264-8.69-61.905-12.994c-1.504-1.513-1.071-3.257-0.811-5.117c1.615-11.489,2.98-23.011,2.519-34.65\\n\\t\\tc-0.559-14.091-2.024-28.063-5.711-41.731c-0.685-2.544-1.72-5.035-1.295-7.762c0.631-3.203,2.899-4.51,5.818-5.362\\n\\t\\tc17.186-5.026,34.379-10.023,51.589-14.958c5.575-1.597,7.584-0.488,9.077,5.123C514.907,212.394,516.891,219.694,518.287,227.128z\",\n    \"TEXT_PATH_1\": \"M489.227,265.667h-2.492l-0.505-3.19h-3.147l-0.505,3.19h-2.481v-0.043l3.255-16.79h2.643L489.227,265.667z\\n\\t\\t\\t M485.875,260.318l-1.225-7.584l-1.235,7.584H485.875z\",\n    \"TEXT_PATH_2\": \"\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 5,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"E\",\n    \"POLY_PATH\": \"M514.266,332.542\\n\\t\\tc-10.057,42.354-30.133,79.402-59.229,111.654c-0.872,0.969-1.997,1.706-3.004,2.551c-1.352,0.263-1.49-0.847-1.897-1.662\\n\\t\\tc-1.321-3.64-4.516-5.68-7.174-8.095c-11.651-10.605-23.643-20.837-35.01-31.756c-1.27-1.219-3.101-2.138-2.823-4.384\\n\\t\\tc5.064-7.805,11.259-14.763,16.441-22.5c11.39-17.001,19.641-35.374,25.214-54.998c2.13-7.497,3.681-8.503,11.398-7.038\\n\\t\\tc16.985,3.226,33.819,7.198,50.809,10.414C512.094,327.314,515.668,327.745,514.266,332.542z\",\n    \"TEXT_PATH_1\": \"M466.18,386.071h-6.972V369.26h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V386.071z\",\n    \"TEXT_PATH_2\": \"\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 6,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"B\",\n    \"POLY_PATH\": \"M448.168,449.324\\n\\t\\tc-31.297,32.412-68.723,54.635-111.818,67.546c-3.924,1.178-4.84-0.329-5.673-3.585c-4.534-17.703-9.218-35.368-13.851-53.047\\n\\t\\tc-1.567-4.45,0.299-6.657,4.592-8.024c23.737-7.538,45.174-19.277,64.156-35.471c3.173-2.708,6.001-5.754,9.122-8.5\\n\\t\\tc3.716-3.268,6.416-3.283,10.093-0.034c13.198,11.664,25.975,23.804,39.47,35.137C446.063,444.857,448.427,446.32,448.168,449.324z\",\n    \"TEXT_PATH_1\": \"M384.2,469.541c0,1.025-0.513,1.537-1.536,1.537h-6.714v-16.813h6.671c0.995,0,1.493,0.516,1.493,1.547v4.33\\n\\t\\t\\tc0,0.572-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.318-1.311,0.826c0.853,0.523,1.304,0.811,1.354,0.859\\n\\t\\t\\tc0.387,0.338,0.58,0.799,0.58,1.387V469.541z M381.611,460.453v-4.07h-3.147v4.93h1.934L381.611,460.453z M381.676,468.961v-4.791\\n\\t\\t\\tl-1.235-0.816h-1.977v5.607H381.676z\",\n    \"TEXT_PATH_2\": \"\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 7,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"F#\",\n    \"POLY_PATH\": \"M312.838,460.248\\n\\t\\tc4.772,17.987,9.505,35.99,14.358,53.956c0.839,3.099,1.083,5.014-3.002,5.931c-45.261,10.169-90.077,8.971-134.542-4.547\\n\\t\\tc-4.296-1.307-5.376-2.678-3.871-7.193c5.302-15.923,10.106-32.014,15.1-48.04c3.737-9.525,3.728-9.492,14.101-6.636\\n\\t\\tc19.688,5.419,39.784,7.545,60.131,6.576c9.916-0.475,19.811-1.771,29.53-4.048C308.38,455.371,311.679,455.695,312.838,460.248z\",\n    \"TEXT_PATH_1\": \"M255.146,487.094h-4.351v4.975h3.717v2.18h-3.717v7.434h-2.514v-16.811h6.864V487.094z\",\n    \"TEXT_PATH_2\": \"M267.006,491.166h-2.02l-0.688,4.264h1.934v2.053h-2.267l-0.677,4.199h-2.224l0.677-4.199h-1.772l-0.666,4.199h-2.245\\n\\t\\t\\tl0.688-4.199h-1.676v-2.053h1.998l0.688-4.264h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245\\n\\t\\t\\tl-0.709,4.254h1.697V491.166z M262.763,491.166h-1.783l-0.688,4.264h1.783L262.763,491.166z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 8,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"Db\",\n    \"POLY_PATH\": \"M198.993,453.297\\n\\t\\tc-5.663,18.242-11.418,36.459-16.908,54.755c-1.073,3.576-2.37,4.34-5.891,3.004c-40.39-15.351-75.05-38.916-103.362-71.664\\n\\t\\tc-1.062-3.157,1.461-4.577,3.222-6.139c12.573-11.157,24.889-22.595,37.328-33.899c1.361-1.234,2.777-2.381,4.336-3.362\\n\\t\\tc2.495-1.574,4.604-1.365,6.596,0.968c15.237,17.849,33.905,31.379,54.154,42.918c5.242,2.987,11.023,4.717,16.425,7.316\\n\\t\\tC197.358,448.377,200.494,449.346,198.993,453.297z\",\n    \"TEXT_PATH_1\": \"M135.644,457.281c0,0.988-0.294,1.764-0.881,2.326c-0.587,0.563-1.379,0.844-2.374,0.844h-5.124v-16.813h5.124\\n\\t\\t\\tc0.995,0,1.787,0.285,2.374,0.854c0.587,0.569,0.881,1.349,0.881,2.337V457.281z M133.119,456.863v-9.658\\n\\t\\t\\tc0-0.938-0.491-1.406-1.472-1.406h-1.869v12.492h1.805C132.607,458.291,133.119,457.815,133.119,456.863z\",\n    \"TEXT_PATH_2\": \"M144.699,458.27c0,0.682-0.204,1.215-0.612,1.602s-0.953,0.58-1.633,0.58h-4.995v-16.813h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.268c0.723-0.115,1.296-0.172,1.719-0.172c0.895,0,1.343,0.439,1.343,1.32V458.27z\\n\\t\\t\\t M142.229,457.594v-5.941l-2.31,0.043v6.715h1.525C141.967,458.41,142.229,458.138,142.229,457.594z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 9,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"Ab\",\n    \"POLY_PATH\": \"M115.312,389.763\\n\\t\\tc-2.296,3.554-5.785,5.91-8.837,8.693c-12.062,11.004-24.229,21.893-36.218,32.975c-2.375,2.196-3.707,2.438-5.837-0.285\\n\\t\\tc-20.234-25.865-35.557-54.266-44.76-85.863c-1.185-3.73,1.12-5.231,4.076-6.088c12.777-3.704,25.432-7.823,38.276-11.292\\n\\t\\tc5.139-1.386,10.238-2.914,15.348-4.384c3.861-1.116,5.97-0.027,7.123,3.79c6.305,20.859,16.108,39.971,28.86,57.613\\n\\t\\tC114.363,386.331,115.97,387.619,115.312,389.763z\",\n    \"TEXT_PATH_1\": \"M67.71,377.676h-2.492l-0.505-3.19h-3.147l-0.505,3.19H58.58v-0.043l3.255-16.79h2.643L67.71,377.676z M64.359,372.327\\n\\t\\t\\tl-1.225-7.584l-1.235,7.584H64.359z\",\n    \"TEXT_PATH_2\": \"M76.229,375.496c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V375.496z\\n\\t\\t\\t M73.758,374.819v-5.94l-2.31,0.043v6.714h1.525C73.497,375.635,73.758,375.363,73.758,374.819z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 10,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"Eb\",\n    \"POLY_PATH\": \"M72.832,242.633\\n\\t\\tc-3.837-1.783-8.045-1.919-12.11-2.646c-16.071-2.882-32.17-5.608-48.22-8.596c-3.18-0.593-4.438-0.087-4.788,3.353\\n\\t\\tc-3.333,32.669-1.16,64.866,7.895,96.508c0.985,3.785,3.735,3.826,6.694,2.978c12.785-3.677,25.687-6.937,38.404-10.848\\n\\t\\tc5.087-1.566,10.215-2.994,15.323-4.471c3.862-1.115,5.065-3.162,4.006-7.005c-5.783-21.007-7.676-42.406-6.29-64.127\\n\\t\\tC73.858,246.042,74.532,244.095,72.832,242.633z\",\n    \"TEXT_PATH_1\": \"M41.833,284.554h-6.972v-16.812h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V284.554z\",\n    \"TEXT_PATH_2\": \"M50.663,282.374c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V282.374z\\n\\t\\t\\t M48.192,281.697v-5.94l-2.31,0.043v6.714h1.525C47.93,282.513,48.192,282.241,48.192,281.697z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 11,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"Bb\",\n    \"POLY_PATH\": \"M109.771,144.272\\n\\t\\tc-14.514-12.417-29.094-24.762-43.491-37.316c-2.814-2.455-4.318-2.409-6.584,0.599c-25.993,34.516-42.758,72.929-49.259,115.728\\n\\t\\tc0.785,3.238,3.676,3.095,5.999,3.477c16.584,2.739,33.102,5.852,49.652,8.786c1.81,0.32,3.619,0.535,5.461,0.535\\n\\t\\tc2.951,0.002,4.624-1.3,5.065-4.335c3.378-23.224,11.962-44.623,22.945-65.179c2.843-5.32,6.812-9.866,9.997-14.944\\n\\t\\tC111.01,149.306,113.146,146.815,109.771,144.272z\",\n    \"TEXT_PATH_1\": \"M55.33,177.509c0,1.024-0.512,1.536-1.536,1.536H47.08v-16.812h6.671c0.995,0,1.493,0.516,1.493,1.547v4.329\\n\\t\\t\\tc0,0.573-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.319-1.311,0.827c0.852,0.523,1.303,0.81,1.354,0.859\\n\\t\\t\\tc0.387,0.337,0.58,0.799,0.58,1.386V177.509z M52.741,168.421v-4.071h-3.147v4.931h1.934L52.741,168.421z M52.806,176.929v-4.791\\n\\t\\t\\tl-1.235-0.816h-1.977v5.607H52.806z\",\n    \"TEXT_PATH_2\": \"M64.418,176.865c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V176.865z\\n\\t\\t\\t M61.947,176.188v-5.94l-2.31,0.043v6.714h1.525C61.686,177.004,61.947,176.732,61.947,176.188z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 12,\n    \"TYPE\": \"MAJOR\",\n    \"KEY\": \"F:minor\",\n    \"POLY_PATH\": \"M202.391,77.71\\n\\t\\tc-5.549-17.763-11.141-35.518-16.609-53.307c-0.943-3.068-1.758-4.819-5.702-3.418C136.363,36.506,99.084,61.409,68.666,96.546\\n\\t\\tc-2.939,3.396-3.122,5.131,0.558,8.149c12.975,10.647,25.615,21.7,38.383,32.599c8.239,6.067,8.214,6.045,15.468-1.9\\n\\t\\tc13.77-15.079,29.64-27.591,47.373-37.614c8.643-4.884,17.705-9.063,27.144-12.315C201.219,84.212,203.835,82.18,202.391,77.71z\",\n    \"TEXT_PATH_1\": \"M139.7,68.548h-4.351v4.974h3.717v2.181h-3.717v7.434h-2.514V66.324h6.864V68.548z\",\n    \"TEXT_PATH_2\": \"\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 13,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"A:minor\",\n    \"POLY_PATH\": \"M208.085,86.906\\n\\t\\tc6.244,20.115,12.49,40.23,18.732,60.346c-0.43,1.035-0.177,1.995,0.316,2.93c1.835,3.34,4.8,3.177,7.85,2.392\\n\\t\\tc10.259-2.639,20.679-3.299,31.231-2.949c4.183,0.139,8.334,0.607,12.393,1.37c4.576,0.866,6.943-0.775,8.13-5.024\\n\\t\\tc2.324-8.326,4.903-16.583,7.232-24.903c3.001-10.725,5.907-21.474,9.139-32.135c0.529-1.747,1.158-3.492,0.646-5.372\\n\\t\\tc-4.723-3.592-10.543-3.827-15.987-4.58c-25.283-3.493-50.32-2.051-74.957,4.872C210.954,84.375,208.763,84.506,208.085,86.906z\",\n    \"TEXT_PATH_1\": \"M253.825,116.431h-2.492l-0.505-3.19h-3.147l-0.505,3.19h-2.481v-0.043l3.255-16.79h2.643L253.825,116.431z\\n\\t\\t\\t M250.473,111.082l-1.225-7.584l-1.235,7.584H250.473z\",\n    \"TEXT_PATH_2\": \"M267.07,116.431h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V116.431z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 14,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"E:minor\",\n    \"POLY_PATH\": \"M290.592,152.688\\n\\t\\tc9.764,2.167,18.64,6.474,27.348,11.227c6.883,3.758,12.798,8.85,18.78,13.784c3.113,2.568,5.272,2.012,7.726-0.384\\n\\t\\tc12.198-11.901,24.384-23.822,36.604-35.707c2.254-2.188,4.761-4.123,6.932-6.388c1.257-1.314,3.459-2.401,2.377-4.932\\n\\t\\tc-21.982-21.429-47.9-36.056-77.294-44.648c-1.819-0.533-3.534-1.484-4.426,1.737c-5.764,20.824-11.769,41.578-17.668,62.365\\n\\t\\tC290.703,150.685,290.713,151.704,290.592,152.688z\",\n    \"TEXT_PATH_1\": \"M328.4,137.431h-6.972V120.62h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V137.431z\",\n    \"TEXT_PATH_2\": \"M341.957,137.431h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.896,0,1.343,0.44,1.343,1.321V137.431z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 15,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"B:minor\",\n    \"POLY_PATH\": \"M395.083,134.199\\n\\t\\tc-8.664,6.751-16.017,14.908-23.94,22.447c-9.583,9.118-18.951,18.466-28.409,27.712c1.556,4.04,4.52,7.226,7.104,10.502\\n\\t\\tc8.237,10.449,13.555,22.245,17.455,34.805c1.784,4.12,5.081,3.668,8.447,2.682c8.943-2.617,17.929-5.104,26.844-7.808\\n\\t\\tc10.515-3.188,21.247-5.582,31.675-9.045c1.907-0.632,4.561-0.544,4.562-3.648l0.082,0.009c-0.941-9.429-5.073-17.832-8.696-26.359\\n\\t\\tc-4.89-11.513-11.104-22.365-18.471-32.438C406.796,146.304,402.351,138.959,395.083,134.199z\",\n    \"TEXT_PATH_1\": \"M388.595,194.657c0,1.024-0.513,1.536-1.536,1.536h-6.714v-16.812h6.671c0.995,0,1.493,0.516,1.493,1.547v4.329\\n\\t\\t\\tc0,0.573-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.319-1.311,0.827c0.853,0.523,1.304,0.81,1.354,0.859\\n\\t\\t\\tc0.387,0.337,0.58,0.799,0.58,1.386V194.657z M386.006,185.569v-4.071h-3.147v4.931h1.934L386.006,185.569z M386.07,194.077\\n\\t\\t\\tv-4.791l-1.235-0.816h-1.977v5.607H386.07z\",\n    \"TEXT_PATH_2\": \"M402.409,196.193h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.572-0.093,1.143-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V196.193z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 16,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"F#:minor\",\n    \"POLY_PATH\": \"M445.768,309.746\\n\\t\\tc-10.929-1.095-21.499-4.078-32.222-6.232c-12.968-2.606-25.875-5.521-38.809-8.305c-0.836-4.247-0.026-8.521,0.414-12.672\\n\\t\\tc1.399-13.232-0.388-26.046-3.784-38.751c-0.686-4.437,2.346-5.814,5.719-6.773c8.962-2.554,17.891-5.237,26.875-7.703\\n\\t\\tc10.594-2.907,20.952-6.603,31.621-9.23c1.95-0.479,4.149-1.97,5.805,0.659l0.064-0.052c4.229,8.479,5.212,17.79,6.691,26.936\\n\\t\\tc2,12.348,2.525,24.842,1.662,37.292C449.226,293.261,449.38,301.845,445.768,309.746z\",\n    \"TEXT_PATH_1\": \"M402.01,256.222h-4.351v4.974h3.717v2.181h-3.717v7.434h-2.514v-16.812h6.864V256.222z\",\n    \"TEXT_PATH_2\": \"M413.869,260.293h-2.02l-0.688,4.265h1.934v2.052h-2.267l-0.677,4.2h-2.224l0.677-4.2h-1.772l-0.666,4.2h-2.245l0.688-4.2\\n\\t\\t\\th-1.676v-2.052h1.998l0.688-4.265h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245l-0.709,4.254\\n\\t\\t\\th1.697V260.293z M409.626,260.293h-1.783l-0.688,4.265h1.783L409.626,260.293z\",\n    \"TEXT_PATH_3\": \"M427.2,270.81h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.572-0.093,1.143-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V270.81z\"\n  },\n  {\n    \"OBJECT_ID\": 17,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"C#:minor\",\n    \"POLY_PATH\": \"M347.502,349.796\\n\\t\\tc7.106-7.038,12.32-15.413,17.155-24.076c3.82-6.848,6.11-14.309,8.543-21.673c1.266-3.831,3.389-4.51,6.74-3.792\\n\\t\\tc16.666,3.568,33.331,7.161,50.004,10.702c3.075,0.651,6.227,0.951,9.27,1.711c1.764,0.442,4.207,0.188,4.641,2.906\\n\\t\\tc-7.179,29.849-21.312,56.038-41.602,78.975c-1.255,1.422-2.199,3.14-4.671,0.89c-15.976-14.548-32.119-28.906-48.189-43.35\\n\\t\\tC348.664,351.433,348.129,350.564,347.502,349.796z\",\n    \"TEXT_PATH_1\": \"M385.664,349.19c0,1.024-0.512,1.536-1.536,1.536h-5.242c-0.995,0-1.493-0.512-1.493-1.536v-13.729\\n\\t\\t\\tc0-1.031,0.498-1.547,1.493-1.547h5.242c1.024,0,1.536,0.516,1.536,1.547v3.932h-2.503v-3.319h-3.255v12.493h3.255v-3.534h2.503\\n\\t\\t\\tV349.19z\",\n    \"TEXT_PATH_2\": \"M398.071,340.21h-2.02l-0.688,4.265h1.934v2.052h-2.267l-0.677,4.2h-2.224l0.677-4.2h-1.772l-0.666,4.2h-2.245l0.688-4.2\\n\\t\\t\\th-1.676v-2.052h1.998l0.688-4.265h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245l-0.709,4.254\\n\\t\\t\\th1.697V340.21z M393.828,340.21h-1.783l-0.688,4.265h1.783L393.828,340.21z\",\n    \"TEXT_PATH_3\": \"M411.402,350.727h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.896,0,1.343,0.44,1.343,1.321V350.727z\"\n  },\n  {\n    \"OBJECT_ID\": 18,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"G#:minor\",\n    \"POLY_PATH\": \"M313.708,449.145\\n\\t\\tc-5.453-20.37-10.903-40.739-16.358-61.109c-0.917-0.646-1.215-1.595-1.296-2.651c-0.23-3.808,2.366-5.249,5.365-6.209\\n\\t\\tc10.09-3.233,19.258-8.228,28-14.149c3.465-2.346,6.727-4.955,9.754-7.766c3.408-3.172,6.287-3.043,9.559-0.077\\n\\t\\tc6.41,5.816,13,11.437,19.412,17.243c8.263,7.486,16.458,15.045,24.882,22.354c1.38,1.197,2.844,2.339,3.415,4.206\\n\\t\\tc-2.08,5.561-6.88,8.862-11.083,12.401c-19.527,16.435-41.483,28.557-66.023,35.823\\n\\t\\tC317.484,449.758,315.563,450.814,313.708,449.145z\",\n    \"TEXT_PATH_1\": \"M332.451,405.535c0,1.024-0.512,1.536-1.536,1.536h-5.285c-0.995,0-1.493-0.512-1.493-1.536v-13.729\\n\\t\\t\\tc0-1.031,0.508-1.547,1.525-1.547h5.253c1.024,0,1.536,0.516,1.536,1.547v3.588h-2.524v-2.976h-3.276v12.493h3.276v-4.705h-1.869\\n\\t\\t\\tv-2.138h4.394V405.535z\",\n    \"TEXT_PATH_2\": \"M344.891,396.555h-2.02l-0.688,4.265h1.934v2.052h-2.267l-0.677,4.2h-2.224l0.677-4.2h-1.772l-0.666,4.2h-2.245l0.688-4.2\\n\\t\\t\\th-1.676v-2.052h1.998l0.688-4.265h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245l-0.709,4.254\\n\\t\\t\\th1.697V396.555z M340.647,396.555h-1.783l-0.688,4.265h1.783L340.647,396.555z\",\n    \"TEXT_PATH_3\": \"M358.222,407.071h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.572-0.093,1.143-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V407.071z\"\n  },\n  {\n    \"OBJECT_ID\": 19,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"D#:minor\",\n    \"POLY_PATH\": \"M307.896,451.993\\n\\t\\tc-20.525,5.055-41.28,5.982-62.286,3.959c-11.456-1.102-22.602-3.472-33.625-6.603c-1.73-0.493-3.374-1.297-5.058-1.956\\n\\t\\tc5.464-17.742,10.987-35.466,16.329-53.246c0.798-2.66,2.217-5.045,2.61-7.938c0.411-3.038,2.491-4.234,5.917-3.094\\n\\t\\tc17.892,5.95,36.161,6.027,54.575,3.053c3.046-0.491,5.206,0.268,6.067,3.546c5.25,19.982,10.527,39.958,15.832,59.928\\n\\t\\tC308.497,450.554,308.301,451.254,307.896,451.993z\",\n    \"TEXT_PATH_1\": \"M250.389,424.901c0,0.988-0.294,1.764-0.881,2.325c-0.587,0.563-1.379,0.844-2.374,0.844h-5.124v-16.812h5.124\\n\\t\\t\\tc0.995,0,1.787,0.285,2.374,0.854c0.587,0.569,0.881,1.348,0.881,2.336V424.901z M247.864,424.482v-9.657\\n\\t\\t\\tc0-0.938-0.491-1.407-1.472-1.407h-1.869v12.493h1.805C247.352,425.911,247.864,425.436,247.864,424.482z\",\n    \"TEXT_PATH_2\": \"M262.764,417.554h-2.02l-0.688,4.265h1.934v2.052h-2.267l-0.677,4.2h-2.224l0.677-4.2h-1.772l-0.666,4.2h-2.245l0.688-4.2\\n\\t\\t\\th-1.676v-2.052h1.998l0.688-4.265h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245l-0.709,4.254\\n\\t\\t\\th1.697V417.554z M258.521,417.554h-1.783l-0.688,4.265h1.783L258.521,417.554z\",\n    \"TEXT_PATH_3\": \"M276.095,428.07h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V428.07z\"\n  },\n  {\n    \"OBJECT_ID\": 20,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"Bb:minor\",\n    \"POLY_PATH\": \"M221.495,380.471\\n\\t\\tc-6.186,20.104-12.511,40.166-18.45,60.342c-1.303,4.43-2.836,4.905-6.906,3.244c-16.4-6.704-31.542-15.496-45.549-26.298\\n\\t\\tc-1.034-0.799-1.867-1.937-3.361-1.928c-0.218-0.041-0.435-0.08-0.652-0.116c-1.934-1.113-3.367-2.804-4.977-4.294\\n\\t\\tc-0.098-0.2-0.191-0.398-0.285-0.601c-5.619-6.054-11.237-12.112-16.855-18.168c-1.357-2.426,0.539-3.792,1.926-5\\n\\t\\tc15.286-13.278,29.946-27.251,45.227-40.532c3.315-2.881,5.781-2.712,8.555,0.604c9.976,11.923,22.272,20.769,36.055,27.753\\n\\t\\tC218.361,376.562,221.605,376.859,221.495,380.471z\",\n    \"TEXT_PATH_1\": \"M166.887,396.754c0,1.024-0.512,1.536-1.536,1.536h-6.714v-16.812h6.671c0.995,0,1.493,0.516,1.493,1.547v4.329\\n\\t\\t\\tc0,0.573-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.319-1.311,0.827c0.852,0.523,1.303,0.81,1.354,0.859\\n\\t\\t\\tc0.387,0.337,0.58,0.799,0.58,1.386V396.754z M164.298,387.667v-4.071h-3.147v4.931h1.934L164.298,387.667z M164.362,396.174\\n\\t\\t\\tv-4.791l-1.235-0.816h-1.977v5.607H164.362z\",\n    \"TEXT_PATH_2\": \"M175.975,396.11c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V396.11z\\n\\t\\t\\t M173.504,395.433v-5.94l-2.31,0.043v6.714h1.525C173.242,396.25,173.504,395.978,173.504,395.433z\",\n    \"TEXT_PATH_3\": \"M189.703,398.291h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V398.291z\"\n  },\n  {\n    \"OBJECT_ID\": 21,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"F:minor\",\n    \"POLY_PATH\": \"M171.98,339.15\\n\\t\\tc-11.726,10.829-23.438,21.667-35.186,32.468c-4.528,4.164-9.36,8.022-13.636,12.429c-2.875,2.958-4.345,2.102-6.426-0.696\\n\\t\\tc-12.719-17.098-22.424-35.719-28.775-56.07c-0.396-1.266-0.701-2.559-1.051-3.84c-1.031-2.975,1.456-3.278,3.161-3.88\\n\\t\\tc4.224-1.492,8.559-2.665,12.878-3.838c14.575-3.954,28.957-8.557,43.466-12.729c1.914-0.55,3.827-1.139,5.842-1.164\\n\\t\\tc1.984-0.024,3.686,0.584,4.287,2.671c3.332,11.553,8.525,22.229,15.109,32.257C172.116,337.471,172.214,338.305,171.98,339.15z\",\n    \"TEXT_PATH_1\": \"M122.443,330.307h-4.351v4.974h3.717v2.181h-3.717v7.434h-2.514v-16.812h6.864V330.307z\",\n    \"TEXT_PATH_2\": \"M135.71,344.895h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V344.895z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 22,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"C:minor\",\n    \"POLY_PATH\": \"M147.756,255.25\\n\\t\\tc-15.692-2.91-31.379-5.837-47.076-8.715c-6.051-1.11-12.196-1.801-18.163-3.248c-4.01-0.971-4.796,0.536-5.066,4.014\\n\\t\\tc-1.647,21.247,0.065,42.175,5.539,62.779c0.34,1.281,0.771,2.539,1.158,3.807c0.713,3.069,2.979,2,4.742,1.599\\n\\t\\tc4.37-0.987,8.662-2.308,12.942-3.617c14.44-4.421,29.063-8.194,43.562-12.398c1.913-0.555,3.844-1.076,5.564-2.127\\n\\t\\tc1.691-1.04,2.806-2.461,2.203-4.545c-3.339-11.552-4.634-23.352-4.409-35.348C148.768,256.6,148.405,255.841,147.756,255.25z\",\n    \"TEXT_PATH_1\": \"M107.633,279.018c0,1.024-0.512,1.536-1.536,1.536h-5.242c-0.996,0-1.493-0.512-1.493-1.536V265.29\\n\\t\\t\\tc0-1.031,0.498-1.547,1.493-1.547h5.242c1.024,0,1.536,0.516,1.536,1.547v3.932h-2.503v-3.319h-3.255v12.493h3.255v-3.534h2.503\\n\\t\\t\\tV279.018z\",\n    \"TEXT_PATH_2\": \"M121.447,280.554h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V280.554z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 23,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"G:minor\",\n    \"POLY_PATH\": \"M167.627,193.898\\n\\t\\tc-15.949-13.714-31.994-27.317-47.773-41.222c-3.463-3.053-5.015-2.638-7.572,0.937c-10.304,14.414-24.234,46.744-24.234,46.744\\n\\t\\tl-1.839,5.345l-1.747,5.969c0,0-3.903,15.523-5.43,23.642c0.146,2.777,2.479,2.922,4.296,3.205\\n\\t\\tc20.011,3.088,39.862,7.095,59.871,10.188c4.341,0.669,6.338-0.786,6.917-5.071c2.086-15.406,7.776-29.444,15.714-42.7\\n\\t\\tC167.059,198.875,169.646,196.895,167.627,193.898z\",\n    \"TEXT_PATH_1\": \"M120.893,206.911c0,1.024-0.512,1.536-1.536,1.536h-5.285c-0.996,0-1.493-0.512-1.493-1.536v-13.729\\n\\t\\t\\tc0-1.031,0.508-1.547,1.525-1.547h5.253c1.024,0,1.536,0.516,1.536,1.547v3.588h-2.524v-2.976h-3.276v12.493h3.276v-4.705H116.5\\n\\t\\t\\tv-2.138h4.394V206.911z\",\n    \"TEXT_PATH_2\": \"M134.74,208.447h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V208.447z\",\n    \"TEXT_PATH_3\": \"\"\n  },\n  {\n    \"OBJECT_ID\": 24,\n    \"TYPE\": \"MINOR\",\n    \"KEY\": \"D:minor\",\n    \"POLY_PATH\": \"M202.608,87.328\\n\\t\\tc-20.06,6.665-38.115,16.944-54.81,29.85c-9.106,7.039-17.273,14.986-24.931,23.51c-1.201,1.34-2.163,2.896-3.237,4.35\\n\\t\\tc14.08,12.101,28.199,24.153,42.195,36.349c2.094,1.825,4.566,3.088,6.439,5.325c1.967,2.352,4.365,2.255,6.656-0.534\\n\\t\\tc11.967-14.571,27.383-24.376,44.548-31.674c2.84-1.208,4.263-3,3.244-6.233c-6.208-19.705-12.391-39.42-18.546-59.146\\n\\t\\tC203.886,88.225,203.345,87.737,202.608,87.328z\",\n    \"TEXT_PATH_1\": \"M174.559,142.278c0,0.988-0.294,1.764-0.881,2.326c-0.587,0.563-1.379,0.843-2.374,0.843h-5.124v-16.812h5.124\\n\\t\\t\\tc0.995,0,1.787,0.285,2.374,0.854c0.587,0.569,0.881,1.348,0.881,2.336V142.278z M172.034,141.859v-9.657\\n\\t\\t\\tc0-0.938-0.491-1.407-1.472-1.407h-1.869v12.493h1.805C171.522,143.288,172.034,142.812,172.034,141.859z\",\n    \"TEXT_PATH_2\": \"M188.341,145.447h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\\n\\t\\t\\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\\n\\t\\t\\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V145.447z\",\n    \"TEXT_PATH_3\": \"\"\n  }\n]","export const CircleOfColours = [\r\n  {\r\n    \"OBJECT_ID\": 1,\r\n    \"KEY\": \"C\",\r\n    \"POLY_PATH\": \"M208.085,86.906\\n\\t\\tc6.244,20.115,12.49,40.23,18.732,60.346c-0.43,1.035-0.177,1.995,0.316,2.93c1.835,3.34,4.8,3.177,7.85,2.392\\n\\t\\tc10.259-2.639,20.679-3.299,31.231-2.949c4.183,0.139,8.334,0.607,12.393,1.37c4.576,0.866,6.943-0.775,8.13-5.024\\n\\t\\tc2.324-8.326,4.903-16.583,7.232-24.903c3.001-10.725,5.907-21.474,9.139-32.135c0.529-1.747,1.158-3.492,0.646-5.372\\n\\t\\tc-4.723-3.592-10.543-3.827-15.987-4.58c-25.283-3.493-50.32-2.051-74.957,4.872C210.954,84.375,208.763,84.506,208.085,86.906z\",\r\n    \"TEXT_PATH_1\": \"M256.874,45.003c0,1.024-0.512,1.536-1.536,1.536h-5.242c-0.996,0-1.493-0.512-1.493-1.536V31.274\\n\\t\\t\\tc0-1.031,0.498-1.547,1.493-1.547h5.242c1.024,0,1.536,0.516,1.536,1.547v3.932h-2.503v-3.319h-3.255V44.38h3.255v-3.534h2.503\\n\\t\\t\\tV45.003z\",\r\n    \"TEXT_PATH_2\": \"\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 2,\r\n    \"KEY\": \"G\",\r\n    \"POLY_PATH\": \"M290.592,152.688\\n\\t\\tc9.764,2.167,18.64,6.474,27.348,11.227c6.883,3.758,12.798,8.85,18.78,13.784c3.113,2.568,5.272,2.012,7.726-0.384\\n\\t\\tc12.198-11.901,24.384-23.822,36.604-35.707c2.254-2.188,4.761-4.123,6.932-6.388c1.257-1.314,3.459-2.401,2.377-4.932\\n\\t\\tc-21.982-21.429-47.9-36.056-77.294-44.648c-1.819-0.533-3.534-1.484-4.426,1.737c-5.764,20.824-11.769,41.578-17.668,62.365\\n\\t\\tC290.703,150.685,290.713,151.704,290.592,152.688z\",\r\n    \"TEXT_PATH_1\": \"M374.208,79.355c0,1.024-0.513,1.536-1.536,1.536h-5.285c-0.996,0-1.493-0.512-1.493-1.536V65.627\\n\\t\\t\\tc0-1.031,0.509-1.547,1.525-1.547h5.253c1.023,0,1.536,0.516,1.536,1.547v3.588h-2.524v-2.976h-3.276v12.493h3.276v-4.705h-1.869\\n\\t\\t\\tV71.89h4.394V79.355z\",\r\n    \"TEXT_PATH_2\": \"\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 3,\r\n    \"KEY\": \"D\",\r\n    \"POLY_PATH\": \"M395.083,134.199\\n\\t\\tc-8.664,6.751-16.017,14.908-23.94,22.447c-9.583,9.118-18.951,18.466-28.409,27.712c1.556,4.04,4.52,7.226,7.104,10.502\\n\\t\\tc8.237,10.449,13.555,22.245,17.455,34.805c1.784,4.12,5.081,3.668,8.447,2.682c8.943-2.617,17.929-5.104,26.844-7.808\\n\\t\\tc10.515-3.188,21.247-5.582,31.675-9.045c1.907-0.632,4.561-0.544,4.562-3.648l0.082,0.009c-0.941-9.429-5.073-17.832-8.696-26.359\\n\\t\\tc-4.89-11.513-11.104-22.365-18.471-32.438C406.796,146.304,402.351,138.959,395.083,134.199z\",\r\n    \"TEXT_PATH_1\": \"M463.711,163.278c0,0.988-0.294,1.764-0.881,2.326c-0.588,0.563-1.379,0.843-2.374,0.843h-5.124v-16.812h5.124\\n\\t\\t\\tc0.995,0,1.786,0.285,2.374,0.854c0.587,0.569,0.881,1.348,0.881,2.336V163.278z M461.187,162.859v-9.657\\n\\t\\t\\tc0-0.938-0.491-1.407-1.472-1.407h-1.869v12.493h1.805C460.674,164.288,461.187,163.812,461.187,162.859z\",\r\n    \"TEXT_PATH_2\": \"\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 4,\r\n    \"KEY\": \"A\",\r\n    \"POLY_PATH\": \"M445.768,309.746\\n\\t\\tc-10.929-1.095-21.499-4.078-32.222-6.232c-12.968-2.606-25.875-5.521-38.809-8.305c-0.836-4.247-0.026-8.521,0.414-12.672\\n\\t\\tc1.399-13.232-0.388-26.046-3.784-38.751c-0.686-4.437,2.346-5.814,5.719-6.773c8.962-2.554,17.891-5.237,26.875-7.703\\n\\t\\tc10.594-2.907,20.952-6.603,31.621-9.23c1.95-0.479,4.149-1.97,5.805,0.659l0.064-0.052c4.229,8.479,5.212,17.79,6.691,26.936\\n\\t\\tc2,12.348,2.525,24.842,1.662,37.292C449.226,293.261,449.38,301.845,445.768,309.746z\",\r\n    \"TEXT_PATH_1\": \"M489.227,265.667h-2.492l-0.505-3.19h-3.147l-0.505,3.19h-2.481v-0.043l3.255-16.79h2.643L489.227,265.667z\\n\\t\\t\\t M485.875,260.318l-1.225-7.584l-1.235,7.584H485.875z\",\r\n    \"TEXT_PATH_2\": \"\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 5,\r\n    \"KEY\": \"E\",\r\n    \"POLY_PATH\": \"M347.502,349.796\\n\\t\\tc7.106-7.038,12.32-15.413,17.155-24.076c3.82-6.848,6.11-14.309,8.543-21.673c1.266-3.831,3.389-4.51,6.74-3.792\\n\\t\\tc16.666,3.568,33.331,7.161,50.004,10.702c3.075,0.651,6.227,0.951,9.27,1.711c1.764,0.442,4.207,0.188,4.641,2.906\\n\\t\\tc-7.179,29.849-21.312,56.038-41.602,78.975c-1.255,1.422-2.199,3.14-4.671,0.89c-15.976-14.548-32.119-28.906-48.189-43.35\\n\\t\\tC348.664,351.433,348.129,350.564,347.502,349.796z\",\r\n    \"TEXT_PATH_1\": \"M466.18,386.071h-6.972V369.26h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V386.071z\",\r\n    \"TEXT_PATH_2\": \"\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 6,\r\n    \"KEY\": \"B\",\r\n    \"POLY_PATH\": \"M313.708,449.145\\n\\t\\tc-5.453-20.37-10.903-40.739-16.358-61.109c-0.917-0.646-1.215-1.595-1.296-2.651c-0.23-3.808,2.366-5.249,5.365-6.209\\n\\t\\tc10.09-3.233,19.258-8.228,28-14.149c3.465-2.346,6.727-4.955,9.754-7.766c3.408-3.172,6.287-3.043,9.559-0.077\\n\\t\\tc6.41,5.816,13,11.437,19.412,17.243c8.263,7.486,16.458,15.045,24.882,22.354c1.38,1.197,2.844,2.339,3.415,4.206\\n\\t\\tc-2.08,5.561-6.88,8.862-11.083,12.401c-19.527,16.435-41.483,28.557-66.023,35.823\\n\\t\\tC317.484,449.758,315.563,450.814,313.708,449.145z\",\r\n    \"TEXT_PATH_1\": \"M384.2,469.541c0,1.025-0.513,1.537-1.536,1.537h-6.714v-16.813h6.671c0.995,0,1.493,0.516,1.493,1.547v4.33\\n\\t\\t\\tc0,0.572-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.318-1.311,0.826c0.853,0.523,1.304,0.811,1.354,0.859\\n\\t\\t\\tc0.387,0.338,0.58,0.799,0.58,1.387V469.541z M381.611,460.453v-4.07h-3.147v4.93h1.934L381.611,460.453z M381.676,468.961v-4.791\\n\\t\\t\\tl-1.235-0.816h-1.977v5.607H381.676z\",\r\n    \"TEXT_PATH_2\": \"\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 7,\r\n    \"KEY\": \"F#\",\r\n    \"POLY_PATH\": \"M307.896,451.993\\n\\t\\tc-20.525,5.055-41.28,5.982-62.286,3.959c-11.456-1.102-22.602-3.472-33.625-6.603c-1.73-0.493-3.374-1.297-5.058-1.956\\n\\t\\tc5.464-17.742,10.987-35.466,16.329-53.246c0.798-2.66,2.217-5.045,2.61-7.938c0.411-3.038,2.491-4.234,5.917-3.094\\n\\t\\tc17.892,5.95,36.161,6.027,54.575,3.053c3.046-0.491,5.206,0.268,6.067,3.546c5.25,19.982,10.527,39.958,15.832,59.928\\n\\t\\tC308.497,450.554,308.301,451.254,307.896,451.993z\",\r\n    \"TEXT_PATH_1\": \"M255.146,487.094h-4.351v4.975h3.717v2.18h-3.717v7.434h-2.514v-16.811h6.864V487.094z\",\r\n    \"TEXT_PATH_2\": \"M267.006,491.166h-2.02l-0.688,4.264h1.934v2.053h-2.267l-0.677,4.199h-2.224l0.677-4.199h-1.772l-0.666,4.199h-2.245\\n\\t\\t\\tl0.688-4.199h-1.676v-2.053h1.998l0.688-4.264h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245\\n\\t\\t\\tl-0.709,4.254h1.697V491.166z M262.763,491.166h-1.783l-0.688,4.264h1.783L262.763,491.166z\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 8,\r\n    \"KEY\": \"Db\",\r\n    \"POLY_PATH\": \"M221.495,380.471\\n\\t\\tc-6.186,20.104-12.511,40.166-18.45,60.342c-1.303,4.43-2.836,4.905-6.906,3.244c-16.4-6.704-31.542-15.496-45.549-26.298\\n\\t\\tc-1.034-0.799-1.867-1.937-3.361-1.928c-0.218-0.041-0.435-0.08-0.652-0.116c-1.934-1.113-3.367-2.804-4.977-4.294\\n\\t\\tc-0.098-0.2-0.191-0.398-0.285-0.601c-5.619-6.054-11.237-12.112-16.855-18.168c-1.357-2.426,0.539-3.792,1.926-5\\n\\t\\tc15.286-13.278,29.946-27.251,45.227-40.532c3.315-2.881,5.781-2.712,8.555,0.604c9.976,11.923,22.272,20.769,36.055,27.753\\n\\t\\tC218.361,376.562,221.605,376.859,221.495,380.471z\",\r\n    \"TEXT_PATH_1\": \"M135.644,457.281c0,0.988-0.294,1.764-0.881,2.326c-0.587,0.563-1.379,0.844-2.374,0.844h-5.124v-16.813h5.124\\n\\t\\t\\tc0.995,0,1.787,0.285,2.374,0.854c0.587,0.569,0.881,1.349,0.881,2.337V457.281z M133.119,456.863v-9.658\\n\\t\\t\\tc0-0.938-0.491-1.406-1.472-1.406h-1.869v12.492h1.805C132.607,458.291,133.119,457.815,133.119,456.863z\",\r\n    \"TEXT_PATH_2\": \"M144.699,458.27c0,0.682-0.204,1.215-0.612,1.602s-0.953,0.58-1.633,0.58h-4.995v-16.813h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.268c0.723-0.115,1.296-0.172,1.719-0.172c0.895,0,1.343,0.439,1.343,1.32V458.27z\\n\\t\\t\\t M142.229,457.594v-5.941l-2.31,0.043v6.715h1.525C141.967,458.41,142.229,458.138,142.229,457.594z\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 9,\r\n    \"KEY\": \"Ab\",\r\n    \"POLY_PATH\": \"M171.98,339.15\\n\\t\\tc-11.726,10.829-23.438,21.667-35.186,32.468c-4.528,4.164-9.36,8.022-13.636,12.429c-2.875,2.958-4.345,2.102-6.426-0.696\\n\\t\\tc-12.719-17.098-22.424-35.719-28.775-56.07c-0.396-1.266-0.701-2.559-1.051-3.84c-1.031-2.975,1.456-3.278,3.161-3.88\\n\\t\\tc4.224-1.492,8.559-2.665,12.878-3.838c14.575-3.954,28.957-8.557,43.466-12.729c1.914-0.55,3.827-1.139,5.842-1.164\\n\\t\\tc1.984-0.024,3.686,0.584,4.287,2.671c3.332,11.553,8.525,22.229,15.109,32.257C172.116,337.471,172.214,338.305,171.98,339.15z\",\r\n    \"TEXT_PATH_1\": \"M67.71,377.676h-2.492l-0.505-3.19h-3.147l-0.505,3.19H58.58v-0.043l3.255-16.79h2.643L67.71,377.676z M64.359,372.327\\n\\t\\t\\tl-1.225-7.584l-1.235,7.584H64.359z\",\r\n    \"TEXT_PATH_2\": \"M76.229,375.496c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V375.496z\\n\\t\\t\\t M73.758,374.819v-5.94l-2.31,0.043v6.714h1.525C73.497,375.635,73.758,375.363,73.758,374.819z\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 10,\r\n    \"KEY\": \"Eb\",\r\n    \"POLY_PATH\": \"M147.756,255.25\\n\\t\\tc-15.692-2.91-31.379-5.837-47.076-8.715c-6.051-1.11-12.196-1.801-18.163-3.248c-4.01-0.971-4.796,0.536-5.066,4.014\\n\\t\\tc-1.647,21.247,0.065,42.175,5.539,62.779c0.34,1.281,0.771,2.539,1.158,3.807c0.713,3.069,2.979,2,4.742,1.599\\n\\t\\tc4.37-0.987,8.662-2.308,12.942-3.617c14.44-4.421,29.063-8.194,43.562-12.398c1.913-0.555,3.844-1.076,5.564-2.127\\n\\t\\tc1.691-1.04,2.806-2.461,2.203-4.545c-3.339-11.552-4.634-23.352-4.409-35.348C148.768,256.6,148.405,255.841,147.756,255.25z\",\r\n    \"TEXT_PATH_1\": \"M41.833,284.554h-6.972v-16.812h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V284.554z\",\r\n    \"TEXT_PATH_2\": \"M50.663,282.374c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V282.374z\\n\\t\\t\\t M48.192,281.697v-5.94l-2.31,0.043v6.714h1.525C47.93,282.513,48.192,282.241,48.192,281.697z\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 11,\r\n    \"KEY\": \"Bb\",\r\n    \"POLY_PATH\": \"M167.627,193.898\\n\\t\\tc-15.949-13.714-31.994-27.317-47.773-41.222c-3.463-3.053-5.015-2.638-7.572,0.937c-10.304,14.414-24.234,46.744-24.234,46.744\\n\\t\\tl-1.839,5.345l-1.747,5.969c0,0-3.903,15.523-5.43,23.642c0.146,2.777,2.479,2.922,4.296,3.205\\n\\t\\tc20.011,3.088,39.862,7.095,59.871,10.188c4.341,0.669,6.338-0.786,6.917-5.071c2.086-15.406,7.776-29.444,15.714-42.7\\n\\t\\tC167.059,198.875,169.646,196.895,167.627,193.898z\",\r\n    \"TEXT_PATH_1\": \"M55.33,177.509c0,1.024-0.512,1.536-1.536,1.536H47.08v-16.812h6.671c0.995,0,1.493,0.516,1.493,1.547v4.329\\n\\t\\t\\tc0,0.573-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.319-1.311,0.827c0.852,0.523,1.303,0.81,1.354,0.859\\n\\t\\t\\tc0.387,0.337,0.58,0.799,0.58,1.386V177.509z M52.741,168.421v-4.071h-3.147v4.931h1.934L52.741,168.421z M52.806,176.929v-4.791\\n\\t\\t\\tl-1.235-0.816h-1.977v5.607H52.806z\",\r\n    \"TEXT_PATH_2\": \"M64.418,176.865c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\\n\\t\\t\\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V176.865z\\n\\t\\t\\t M61.947,176.188v-5.94l-2.31,0.043v6.714h1.525C61.686,177.004,61.947,176.732,61.947,176.188z\"\r\n  },\r\n  {\r\n    \"OBJECT_ID\": 12,\r\n    \"KEY\": \"F\",\r\n    \"POLY_PATH\": \"M202.608,87.328\\n\\t\\tc-20.06,6.665-38.115,16.944-54.81,29.85c-9.106,7.039-17.273,14.986-24.931,23.51c-1.201,1.34-2.163,2.896-3.237,4.35\\n\\t\\tc14.08,12.101,28.199,24.153,42.195,36.349c2.094,1.825,4.566,3.088,6.439,5.325c1.967,2.352,4.365,2.255,6.656-0.534\\n\\t\\tc11.967-14.571,27.383-24.376,44.548-31.674c2.84-1.208,4.263-3,3.244-6.233c-6.208-19.705-12.391-39.42-18.546-59.146\\n\\t\\tC203.886,88.225,203.345,87.737,202.608,87.328z\",\r\n    \"TEXT_PATH_1\": \"M139.7,68.548h-4.351v4.974h3.717v2.181h-3.717v7.434h-2.514V66.324h6.864V68.548z\",\r\n    \"TEXT_PATH_2\": \"\"\r\n  }\r\n]","export const ChordScale = [\r\n    {\r\n      \"CHORD\": \"C\",\r\n      \"ROOT\": \"C\",\r\n      \"THIRD\": \"E\",\r\n      \"FIFTH\": \"G\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Db\",\r\n      \"ROOT\": \"Db\",\r\n      \"THIRD\": \"F\",\r\n      \"FIFTH\": \"Ab\"\r\n    },\r\n    {\r\n      \"CHORD\": \"D\",\r\n      \"ROOT\": \"D\",\r\n      \"THIRD\": \"F#\",\r\n      \"FIFTH\": \"A\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Eb\",\r\n      \"ROOT\": \"Eb\",\r\n      \"THIRD\": \"G\",\r\n      \"FIFTH\": \"Bb\"\r\n    },\r\n    {\r\n      \"CHORD\": \"E\",\r\n      \"ROOT\": \"E\",\r\n      \"THIRD\": \"Ab\",\r\n      \"FIFTH\": \"B\"\r\n    },\r\n    {\r\n      \"CHORD\": \"F\",\r\n      \"ROOT\": \"F\",\r\n      \"THIRD\": \"A\",\r\n      \"FIFTH\": \"C\"\r\n    },\r\n    {\r\n      \"CHORD\": \"F#\",\r\n      \"ROOT\": \"F#\",\r\n      \"THIRD\": \"Bb\",\r\n      \"FIFTH\": \"Db\"\r\n    },\r\n    {\r\n      \"CHORD\": \"G\",\r\n      \"ROOT\": \"G\",\r\n      \"THIRD\": \"B\",\r\n      \"FIFTH\": \"D\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Ab\",\r\n      \"ROOT\": \"Ab\",\r\n      \"THIRD\": \"C\",\r\n      \"FIFTH\": \"Eb\"\r\n    },\r\n    {\r\n      \"CHORD\": \"A\",\r\n      \"ROOT\": \"A\",\r\n      \"THIRD\": \"Db\",\r\n      \"FIFTH\": \"E\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Bb\",\r\n      \"ROOT\": \"Bb\",\r\n      \"THIRD\": \"D\",\r\n      \"FIFTH\": \"F\"\r\n    },\r\n    {\r\n      \"CHORD\": \"B\",\r\n      \"ROOT\": \"B\",\r\n      \"THIRD\": \"Eb\",\r\n      \"FIFTH\": \"F#\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Cm\",\r\n      \"ROOT\": \"C\",\r\n      \"THIRD\": \"Eb\",\r\n      \"FIFTH\": \"G\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Dbm\",\r\n      \"ROOT\": \"Db\",\r\n      \"THIRD\": \"E\",\r\n      \"FIFTH\": \"Ab\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Dm\",\r\n      \"ROOT\": \"D\",\r\n      \"THIRD\": \"F\",\r\n      \"FIFTH\": \"A\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Ebm\",\r\n      \"ROOT\": \"Eb\",\r\n      \"THIRD\": \"F#\",\r\n      \"FIFTH\": \"Bb\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Em\",\r\n      \"ROOT\": \"E\",\r\n      \"THIRD\": \"G\",\r\n      \"FIFTH\": \"B\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Fm\",\r\n      \"ROOT\": \"F\",\r\n      \"THIRD\": \"Ab\",\r\n      \"FIFTH\": \"C\"\r\n    },\r\n    {\r\n      \"CHORD\": \"F#m\",\r\n      \"ROOT\": \"F#\",\r\n      \"THIRD\": \"A\",\r\n      \"FIFTH\": \"Db\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Gm\",\r\n      \"ROOT\": \"G\",\r\n      \"THIRD\": \"Bb\",\r\n      \"FIFTH\": \"D\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Abm\",\r\n      \"ROOT\": \"Ab\",\r\n      \"THIRD\": \"B\",\r\n      \"FIFTH\": \"Eb\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Am\",\r\n      \"ROOT\": \"A\",\r\n      \"THIRD\": \"C\",\r\n      \"FIFTH\": \"E\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Bbm\",\r\n      \"ROOT\": \"Bb\",\r\n      \"THIRD\": \"Db\",\r\n      \"FIFTH\": \"F\"\r\n    },\r\n    {\r\n      \"CHORD\": \"Bm\",\r\n      \"ROOT\": \"B\",\r\n      \"THIRD\": \"D\",\r\n      \"FIFTH\": \"F#\"\r\n    }\r\n  ]","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? new Rgb(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? new Rgb((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Â±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"Âµ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer âvalueâ part that can be\n        // grouped, and fractional or exponential âsuffixâ part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nclass GraphicContext {\n  constructor ({ renderer }) {\n    if (!renderer) {\n      this._rendererOptions = { output: 'svg' }\n    }\n\n    if (renderer) {\n      validateRendererOptions(renderer)\n      this._rendererOptions = renderer\n    }\n  }\n\n  output () {\n    return this._rendererOptions.output\n  }\n}\n\nfunction validateRendererOptions (options) {\n  if (!(\n    options.constructor === Object &&\n    'output' in options &&\n    ['svg'].includes(options.output)\n  )) {\n    throw new Error(`Invalid renderer options: ${JSON.stringify(options)}`)\n  }\n}\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const graphicContext = writable()\n  setContext(key, graphicContext)\n\n  return graphicContext\n}\n\nexport function update (graphicContext, options) {\n  graphicContext.set(new GraphicContext(options))\n}\n","export function parsePadding (_padding) {\n  const padding = _padding === undefined\n    ? 0\n    : _padding\n\n  if (padding.constructor === Number) {\n    return { left: padding, right: padding, top: padding, bottom: padding }\n  }\n\n  if (padding.constructor === Object) {\n    if (Object.keys(padding).length !== 4) throw invalidPaddingError\n\n    for (const key of ['left', 'right', 'top', 'bottom']) {\n      if (!(key in padding)) throw invalidPaddingError\n    }\n\n    return padding\n  }\n\n  throw invalidPaddingError\n}\n\nconst invalidPaddingError = new Error('Invalid padding specification')\n\nexport function applyPadding (range, offsetMin, offsetMax) {\n  ensurePaddingSmallerThanRange(range, offsetMin, offsetMax)\n\n  if (range[0] < range[1]) {\n    return [range[0] + offsetMin, range[1] - offsetMax]\n  } else {\n    return [range[0] - offsetMax, range[1] + offsetMin]\n  }\n}\n\nexport function removePadding (range, offsetMin, offsetMax) {\n  if (range[0] < range[1]) {\n    return [range[0] - offsetMin, range[1] + offsetMax]\n  } else {\n    return [range[0] + offsetMax, range[1] - offsetMin]\n  }\n}\n\nfunction ensurePaddingSmallerThanRange (range, min, max) {\n  if (Math.abs(range[0] - range[1]) < (min + max)) {\n    console.warn('Padding cannot exceed width or height')\n  }\n}\n","import { applyPadding } from '../../utils/padding.js'\n\nexport function getRanges ({ coordinates }) {\n  return {\n    rangeX: [coordinates.x1, coordinates.x2],\n    rangeY: [coordinates.y1, coordinates.y2]\n  }\n}\n\nexport function getFinalRanges (sectionContext, ranges, padding) {\n  const { flipX, flipY, zoomIdentity } = sectionContext\n  const { rangeX, rangeY } = ranges\n  const { left, right, top, bottom } = padding\n\n  let finalRangeX = applyFlip(rangeX, flipX)\n  finalRangeX = applyPadding(finalRangeX, left, right)\n\n  if (zoomIdentity) {\n    validateZoomFactor(zoomIdentity.kx)\n    finalRangeX = applyZoom(finalRangeX, zoomIdentity.kx, zoomIdentity.x)\n  }\n\n  let finalRangeY = applyFlip(rangeY, flipY)\n  finalRangeY = applyPadding(finalRangeY, top, bottom)\n\n  if (zoomIdentity) {\n    validateZoomFactor(zoomIdentity.ky)\n    finalRangeY = applyZoom(finalRangeY, zoomIdentity.ky, zoomIdentity.y)\n  }\n\n  return { finalRangeX, finalRangeY }\n}\n\nfunction applyFlip (range, flip) {\n  return flip\n    ? [range[1], range[0]]\n    : range\n}\n\nfunction applyZoom (range, k, translate) {\n  return [\n    range[0] * k + translate,\n    range[1] * k + translate\n  ]\n}\n\nfunction validateZoomFactor (k) {\n  if (k < 0) throw new Error('Zoom factors have to be positive')\n}\n","import { scaleLinear } from 'd3-scale'\n\nexport function createScales ({ scaleX, scaleY }, { rangeX, rangeY }) {\n  return {\n    scaleX: createScale(scaleX, rangeX),\n    scaleY: createScale(scaleY, rangeY)\n  }\n}\nfunction createScale (scale, range) {\n  if (scale) {\n    const newScale = scale.copy().range(range)\n    newScale.invert = createInvertMethod(newScale)\n\n    return newScale\n  }\n\n  if (!scale) {\n    return scaleLinear().domain(range).range(range)\n  }\n}\n\n/**\n * Taken from react-vis:\n * https://github.com/uber/react-vis/blob/master/src/utils/scales-utils.js#L161\n *\n * By default, d3.scaleBand and d3.scalePoint do not have an .invert method, which is why\n * we are doing this. There are some PRs open for this, though, so hopefully we can\n * get rid of this in the future:\n * - https://github.com/d3/d3-scale/pull/151\n * - https://github.com/d3/d3-scale/pull/60\n */\nfunction createInvertMethod (scale) {\n  if (scale.invert) {\n    return scale.invert\n  }\n\n  return function invert (value) {\n    const [lower, upper] = scale.range()\n    const start = Math.min(lower, upper)\n    const stop = Math.max(lower, upper)\n\n    const flipped = upper < lower\n\n    const domain = scale.domain()\n    const lastIndex = domain.length - 1\n\n    if (value < start + scale.padding() * scale.step()) {\n      return domain[0]\n    }\n\n    if (value > stop - scale.padding() * scale.step()) {\n      return domain[lastIndex]\n    }\n\n    let index\n\n    if (isPointScale(scale)) {\n      index = Math.round((value - start - scale.padding() * scale.step()) / scale.step())\n    }\n\n    if (isBandScale(scale)) {\n      index = Math.round((value - start - scale.padding() * scale.step()) / scale.step())\n      if (index > lastIndex) index = lastIndex\n    }\n\n    return domain[flipped ? lastIndex - index : index]\n  }\n}\n\nfunction isPointScale (scale) {\n  return !('paddingInner' in scale)\n}\n\nfunction isBandScale (scale) {\n  return 'paddingInner' in scale\n}\n\nexport function createFinalScales ({ rangeX, rangeY }, { finalRangeX, finalRangeY }) {\n  const finalScaleX = scaleLinear().domain(rangeX).range(finalRangeX)\n  const finalScaleY = scaleLinear().domain(rangeY).range(finalRangeY)\n\n  return { finalScaleX, finalScaleY }\n}\n","import { scaleLinear } from 'd3-scale'\n\nexport function createPolarTransformation (\n  { rangeX, rangeY },\n  { finalRangeX, finalRangeY }\n) {\n  const toTheta = scaleLinear().domain(rangeX).range([0, 2 * Math.PI])\n  const toRadius = scaleLinear().domain(rangeY).range([0, 1])\n\n  const fitX = scaleLinear().domain([-1, 1]).range(finalRangeX)\n  const fitY = scaleLinear().domain([-1, 1]).range(finalRangeY)\n\n  const transform = function transform ([x, y]) {\n    const theta = toTheta(x)\n    const radius = toRadius(y)\n    const coords = polarToCartesian(theta, radius)\n\n    return [fitX(coords[0]), fitY(coords[1])]\n  }\n\n  const invert = function invert ([x, y]) {\n    const smallCoords = [fitX.invert(x), fitY.invert(y)]\n    const [theta, radius] = cartesianToPolar(...smallCoords)\n\n    return [toTheta.invert(theta), toRadius.invert(radius)]\n  }\n\n  transform.invert = invert\n\n  return transform\n}\n\nfunction polarToCartesian (theta, radius) {\n  const x = radius * Math.sin(theta)\n  const y = radius * Math.cos(theta)\n\n  return [x, y]\n}\n\n// https://www.mathsisfun.com/polar-cartesian-coordinates.html\nfunction cartesianToPolar (x, y) {\n  const quadrant = getQuadrant(x, y)\n\n  const r = Math.sqrt(y ** 2 + x ** 2)\n  let theta = Math.atan(x / y)\n\n  if (quadrant === 2) {\n    theta += Math.PI * 2\n  }\n\n  if (quadrant === 3) {\n    theta += Math.PI\n  }\n\n  if (quadrant === 4) {\n    theta += Math.PI\n  }\n\n  return [theta, r]\n}\n\nfunction getQuadrant (x, y) {\n  if (x >= 0 && y >= 0) return 1\n  if (x < 0 && y >= 0) return 2\n  if (x < 0 && y < 0) return 3\n  if (x >= 0 && y < 0) return 4\n}\n","import { createPolarTransformation } from './polar.js'\n\nexport function attachTransformations (sectionContext) {\n  const {\n    transformation,\n    rangeX,\n    rangeY,\n    finalRangeX,\n    finalRangeY,\n    scaleX,\n    scaleY,\n    finalScaleX,\n    finalScaleY\n  } = sectionContext\n\n  if (transformation !== 'polar') {\n    sectionContext.getTotalTransformation = needsScaling => {\n      const { xNeedsScaling, yNeedsScaling } = parseNeedsScaling(needsScaling)\n\n      return ([x, y]) => ([\n        finalScaleX(xNeedsScaling ? scaleX(x) : x),\n        finalScaleY(yNeedsScaling ? scaleY(y) : y)\n      ])\n    }\n\n    sectionContext.inverseTotalTransformation = ([x, y]) => ([\n      scaleX.invert(finalScaleX.invert(x)),\n      scaleY.invert(finalScaleY.invert(y))\n    ])\n  }\n\n  if (transformation === 'polar') {\n    const getScaleTransformation = needsScaling => {\n      const { xNeedsScaling, yNeedsScaling } = parseNeedsScaling(needsScaling)\n\n      return ([x, y]) => ([\n        xNeedsScaling ? scaleX(x) : x,\n        yNeedsScaling ? scaleY(y) : y\n      ])\n    }\n\n    const postScaleTransformation = createPolarTransformation(\n      { rangeX, rangeY },\n      { finalRangeX, finalRangeY }\n    )\n\n    sectionContext.getScaleTransformation = getScaleTransformation\n    sectionContext.postScaleTransformation = postScaleTransformation\n\n    sectionContext.getTotalTransformation = needsScaling => {\n      const scaleTransformation = getScaleTransformation(needsScaling)\n\n      return point => (\n        postScaleTransformation(scaleTransformation(point))\n      )\n    }\n\n    const inverseScaleTransformation = ([x, y]) => ([\n      scaleX.invert(x),\n      scaleY.invert(y)\n    ])\n\n    sectionContext.inverseTotalTransformation = point => (\n      inverseScaleTransformation(postScaleTransformation.invert(point))\n    )\n  }\n}\n\nfunction parseNeedsScaling (needsScaling) {\n  if (needsScaling === undefined) {\n    return {\n      xNeedsScaling: true,\n      yNeedsScaling: true\n    }\n  }\n\n  if (needsScaling.constructor === Boolean) {\n    return {\n      xNeedsScaling: needsScaling,\n      yNeedsScaling: needsScaling\n    }\n  }\n\n  if (needsScaling.constructor === Object) {\n    return needsScaling\n  }\n}\n","import { parsePadding } from '../../utils/padding.js'\nimport { getRanges, getFinalRanges } from './getRanges.js'\nimport { createScales, createFinalScales } from './createScales.js'\nimport { attachTransformations } from './attachTransformations.js'\n\nexport function createSectionContext (sectionData) {\n  const padding = parsePadding(sectionData.padding)\n  const ranges = getRanges(sectionData)\n  const finalRanges = getFinalRanges(sectionData, ranges, padding)\n  const scales = createScales(sectionData, ranges)\n  const finalScales = createFinalScales(ranges, finalRanges)\n\n  const sectionContext = constructSectionContext(\n    sectionData,\n    padding,\n    ranges,\n    finalRanges,\n    scales,\n    finalScales\n  )\n\n  attachTransformations(sectionContext)\n\n  return sectionContext\n}\n\nfunction constructSectionContext (\n  { scaleX, scaleY, padding: _, ...sectionData },\n  padding,\n  ranges,\n  finalRanges,\n  scales,\n  finalScales\n) {\n  return {\n    ...sectionData,\n    padding,\n    ...ranges,\n    ...finalRanges,\n    ...scales,\n    ...finalScales,\n    bbox: getBbox(ranges),\n    paddedBbox: getPaddedBbox(ranges, padding)\n  }\n}\n\nfunction getBbox ({ rangeX, rangeY }) {\n  return {\n    minX: Math.min(...rangeX),\n    maxX: Math.max(...rangeX),\n    minY: Math.min(...rangeY),\n    maxY: Math.max(...rangeY)\n  }\n}\n\nfunction getPaddedBbox ({ rangeX, rangeY }, { left, right, top, bottom }) {\n  return {\n    minX: Math.min(...rangeX) + left,\n    maxX: Math.max(...rangeX) - right,\n    minY: Math.min(...rangeY) + top,\n    maxY: Math.max(...rangeY) - bottom\n  }\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\nimport { createSectionContext } from './createSectionContext'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const sectionContext = writable()\n  setContext(key, sectionContext)\n\n  return sectionContext\n}\n\nexport function update (sectionContext, options) {\n  sectionContext.set(createSectionContext(options))\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const eventManagerContext = writable()\n  setContext(key, eventManagerContext)\n\n  return eventManagerContext\n}\n\nexport function update (eventManagerContext, eventManager) {\n  eventManagerContext.set(eventManager)\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const interactionManagerContext = writable()\n  setContext(key, interactionManagerContext)\n\n  return interactionManagerContext\n}\n\nexport function update (interactionManagerContext, interactionManager) {\n  interactionManagerContext.set(interactionManager)\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar detectHover = {\n  update: function update() {\n    if (typeof window !== 'undefined' && typeof window.matchMedia === 'function') {\n      detectHover.hover = window.matchMedia('(hover: hover)').matches;\n      detectHover.none = window.matchMedia('(hover: none)').matches || window.matchMedia('(hover: on-demand)').matches;\n      detectHover.anyHover = window.matchMedia('(any-hover: hover)').matches;\n      detectHover.anyNone = window.matchMedia('(any-hover: none)').matches || window.matchMedia('(any-hover: on-demand)').matches;\n    }\n  }\n};\n\ndetectHover.update();\nexports.default = detectHover;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar detectPointer = {\n  update: function update() {\n    if (typeof window !== 'undefined' && typeof window.matchMedia === 'function') {\n      detectPointer.fine = window.matchMedia('(pointer: fine)').matches;\n      detectPointer.coarse = window.matchMedia('(pointer: coarse)').matches;\n      detectPointer.none = window.matchMedia('(pointer: none)').matches;\n      detectPointer.anyFine = window.matchMedia('(any-pointer: fine)').matches;\n      detectPointer.anyCoarse = window.matchMedia('(any-pointer: coarse)').matches;\n      detectPointer.anyNone = window.matchMedia('(any-pointer: none)').matches;\n    }\n  }\n};\n\ndetectPointer.update();\nexports.default = detectPointer;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar detectTouchEvents = {\n  update: function update() {\n    if (typeof window !== 'undefined') {\n      detectTouchEvents.hasSupport = 'ontouchstart' in window;\n      detectTouchEvents.browserSupportsApi = Boolean(window.TouchEvent);\n    }\n  }\n};\n\ndetectTouchEvents.update();\nexports.default = detectTouchEvents;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// adapted from https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\nvar detectPassiveEvents = {\n  update: function update() {\n    if (typeof window !== 'undefined' && typeof window.addEventListener === 'function') {\n      var passive = false;\n      var options = Object.defineProperty({}, 'passive', {\n        get: function get() {\n          passive = true;\n        }\n      });\n      // note: have to set and remove a no-op listener instead of null\n      // (which was used previously), becasue Edge v15 throws an error\n      // when providing a null callback.\n      // https://github.com/rafrex/detect-passive-events/pull/3\n      var noop = function noop() {};\n      window.addEventListener('testPassiveEventSupport', noop, options);\n      window.removeEventListener('testPassiveEventSupport', noop, options);\n      detectPassiveEvents.hasSupport = passive;\n    }\n  }\n};\n\ndetectPassiveEvents.update();\nexports.default = detectPassiveEvents;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _detectHover = require('detect-hover');\n\nvar _detectHover2 = _interopRequireDefault(_detectHover);\n\nvar _detectPointer = require('detect-pointer');\n\nvar _detectPointer2 = _interopRequireDefault(_detectPointer);\n\nvar _detectTouchEvents = require('detect-touch-events');\n\nvar _detectTouchEvents2 = _interopRequireDefault(_detectTouchEvents);\n\nvar _detectPassiveEvents = require('detect-passive-events');\n\nvar _detectPassiveEvents2 = _interopRequireDefault(_detectPassiveEvents);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * detectIt object structure\n * const detectIt = {\n *   deviceType: 'mouseOnly' / 'touchOnly' / 'hybrid',\n *   passiveEvents: boolean,\n *   hasTouch: boolean,\n *   hasMouse: boolean,\n *   maxTouchPoints: number,\n *   primaryHover: 'hover' / 'none',\n *   primaryPointer: 'fine' / 'coarse' / 'none',\n *   state: {\n *     detectHover,\n *     detectPointer,\n *     detectTouchEvents,\n *     detectPassiveEvents,\n *   },\n *   update() {...},\n * }\n */\n\nfunction determineDeviceType(hasTouch, anyHover, anyFine, state) {\n  // A hybrid device is one that both hasTouch and any input device can hover\n  // or has a fine pointer.\n  if (hasTouch && (anyHover || anyFine)) return 'hybrid';\n\n  // workaround for browsers that have the touch events api,\n  // and have implemented Level 4 media queries but not the\n  // hover and pointer media queries, so the tests are all false (notable Firefox)\n  // if it hasTouch, no pointer and hover support, and on an android assume it's touchOnly\n  // if it hasTouch, no pointer and hover support, and not on an android assume it's a hybrid\n  if (hasTouch && Object.keys(state.detectHover).filter(function (key) {\n    return key !== 'update';\n  }).every(function (key) {\n    return state.detectHover[key] === false;\n  }) && Object.keys(state.detectPointer).filter(function (key) {\n    return key !== 'update';\n  }).every(function (key) {\n    return state.detectPointer[key] === false;\n  })) {\n    if (window.navigator && /android/.test(window.navigator.userAgent.toLowerCase())) {\n      return 'touchOnly';\n    }\n    return 'hybrid';\n  }\n\n  // In almost all cases a device that doesnât support touch will have a mouse,\n  // but there may be rare exceptions. Note that it doesnât work to do additional tests\n  // based on hover and pointer media queries as older browsers donât support these.\n  // Essentially, 'mouseOnly' is the default.\n  return hasTouch ? 'touchOnly' : 'mouseOnly';\n}\n\nvar detectIt = {\n  state: {\n    detectHover: _detectHover2.default,\n    detectPointer: _detectPointer2.default,\n    detectTouchEvents: _detectTouchEvents2.default,\n    detectPassiveEvents: _detectPassiveEvents2.default\n  },\n  update: function update() {\n    detectIt.state.detectHover.update();\n    detectIt.state.detectPointer.update();\n    detectIt.state.detectTouchEvents.update();\n    detectIt.state.detectPassiveEvents.update();\n    detectIt.updateOnlyOwnProperties();\n  },\n  updateOnlyOwnProperties: function updateOnlyOwnProperties() {\n    if (typeof window !== 'undefined') {\n      detectIt.passiveEvents = detectIt.state.detectPassiveEvents.hasSupport || false;\n\n      detectIt.hasTouch = detectIt.state.detectTouchEvents.hasSupport || false;\n\n      detectIt.deviceType = determineDeviceType(detectIt.hasTouch, detectIt.state.detectHover.anyHover, detectIt.state.detectPointer.anyFine, detectIt.state);\n\n      detectIt.hasMouse = detectIt.deviceType !== 'touchOnly';\n\n      detectIt.primaryInput = detectIt.deviceType === 'mouseOnly' && 'mouse' || detectIt.deviceType === 'touchOnly' && 'touch' ||\n      // deviceType is hybrid:\n      detectIt.state.detectPointer.fine && 'mouse' || detectIt.state.detectPointer.coarse && 'touch' ||\n      // if there's no support for hover media queries but detectIt determined it's\n      // a hybrid  device, then assume it's a mouse first device\n      'mouse';\n\n      // issue with Windows Chrome on hybrid devices starting in version 59 where\n      // media queries represent a touch only device, so if the browser is an\n      // affected Windows Chrome version and hasTouch,\n      // then assume it's a hybrid with primaryInput mouse\n      // note that version 62 of Chrome fixes this issue\n      // see https://github.com/rafrex/detect-it/issues/8\n      var inVersionRange = function inVersionRange(version) {\n        return version >= 59 && version < 62;\n      };\n      var isAffectedWindowsChromeVersion = /windows/.test(window.navigator.userAgent.toLowerCase()) && /chrome/.test(window.navigator.userAgent.toLowerCase()) && inVersionRange(parseInt(/Chrome\\/([0-9.]+)/.exec(navigator.userAgent)[1], 10));\n\n      if (isAffectedWindowsChromeVersion && detectIt.hasTouch) {\n        detectIt.deviceType = 'hybrid';\n        detectIt.hasMouse = true;\n        detectIt.primaryInput = 'mouse';\n      }\n    }\n  }\n};\n\ndetectIt.updateOnlyOwnProperties();\nexports.default = detectIt;","let handler\n\nexport default class EventTracker {\n  constructor (eventManager, { eventName, nativeEventName, useWindow, preventDefault }) {\n    this._eventManager = eventManager\n    this._eventName = eventName\n    this._nativeEventName = nativeEventName\n    this._useWindow = useWindow\n    this._preventDefault = preventDefault\n\n    this._numberOfActiveListeners = 0\n    this._callbacks = {}\n  }\n\n  setNativeEventName (nativeEventName) {\n    this._nativeEventName = nativeEventName\n  }\n\n  addListener (listenerId, callback) {\n    this._callbacks[listenerId] = callback\n\n    if (this._eventManagerHasBeenMounted()) {\n      this._attachNativeListenerIfNecessary()\n    }\n  }\n\n  attachAllListeners () {\n    /* eslint-disable-next-line */\n    for (const _ in this._callbacks) {\n      this._attachNativeListenerIfNecessary()\n    }\n  }\n\n  removeListener (listenerId) {\n    delete this._callbacks[listenerId]\n\n    if (this._eventManagerHasBeenMounted()) {\n      this._removeNativeListenerIfNecessary()\n    }\n  }\n\n  _eventManagerHasBeenMounted () {\n    return this._eventManager._mounted\n  }\n\n  _attachNativeListenerIfNecessary () {\n    if (this._numberOfActiveListeners === 0) {\n      handler = this._handleEvent.bind(this)\n      const nativeEventName = this._nativeEventName\n\n      if (this._useWindow) {\n        window.addEventListener(nativeEventName, handler)\n      }\n\n      if (!this._useWindow) {\n        this._eventManager._domNode.addEventListener(nativeEventName, handler)\n      }\n    }\n\n    this._numberOfActiveListeners++\n  }\n\n  _removeNativeListenerIfNecessary () {\n    this._numberOfActiveListeners--\n\n    if (this._numberOfActiveListeners === 0) {\n      const nativeEventName = this._nativeEventName\n\n      if (this._useWindow) {\n        window.removeEventListener(nativeEventName, handler)\n      }\n\n      if (!this._useWindow) {\n        this._eventManager._domNode.removeEventListener(nativeEventName, handler)\n      }\n    }\n  }\n\n  _handleEvent (nativeEvent) {\n    if (this._preventDefault) nativeEvent.preventDefault()\n\n    const screenCoordinates = this._getScreenCoordinates(nativeEvent)\n    nativeEvent.eventName = this._eventName\n\n    for (const listenerId in this._callbacks) {\n      this._callbacks[listenerId](screenCoordinates, nativeEvent)\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    return this._eventManager._getScreenCoordinates(nativeEvent)\n  }\n}\n","import EventTracker from './EventTracker.js'\n\nexport default class BaseEventManager {\n  constructor (EXPOSED_EVENTS, managerType) {\n    this._domNode = undefined\n    this._svgPoint = undefined\n    this._mounted = false\n    this._trackers = {}\n    this._BROWSER_TYPE = undefined\n    this._managerType = managerType\n\n    for (const event of EXPOSED_EVENTS) {\n      this._trackers[event.eventName] = new EventTracker(this, event)\n    }\n  }\n\n  // Svelte can only bind to DOM nodes after initialization\n  addRootNode (domNode) {\n    this._domNode = domNode\n    this._svgPoint = this._domNode.createSVGPoint()\n\n    // set browser type only after mount\n    this._BROWSER_TYPE = window.navigator.pointerEnabled\n      ? 'IE11 / MSEdge'\n      : window.navigator.msPointerEnabled\n        ? 'IE10 / WP8'\n        : 'other'\n\n    this._mounted = true\n  }\n\n  attachEventListeners () {\n    if (this._mounted === false) throw new Error('root node must be added first')\n\n    for (const eventName in this._trackers) {\n      // set native event names here, just before attaching actual listeners\n      if (this._managerType === 'mouse') {\n        this._trackers[eventName].setNativeEventName(this._getNativeMouseEventName(eventName, this._BROWSER_TYPE))\n      }\n      if (this._managerType === 'touch') {\n        this._trackers[eventName].setNativeEventName(this._getNativeTouchEventName(eventName, this._BROWSER_TYPE))\n      }\n\n      this._trackers[eventName].attachAllListeners()\n    }\n  }\n\n  eventTracker (eventName) {\n    return this._trackers[eventName]\n  }\n}\n","export default str => str.charAt(0).toUpperCase() + str.slice(1)\n","import BaseEventManager from './BaseEventManager.js'\nimport capitalize from '../../utils/capitalize.js'\n\nexport default class MouseEventManager extends BaseEventManager {\n  constructor () {\n    super(EXPOSED_EVENTS, 'mouse')\n  }\n\n  _getNativeMouseEventName (exposedEventName, BROWSER_TYPE) {\n    // 'click' has the same name in every non-mobile browser\n    if (exposedEventName === 'click') return 'click'\n\n    // 'wheel' has the same name in every non-mobile browser\n    if (exposedEventName === 'wheel') return 'wheel'\n\n    // In this non-mobile browser type, events are called 'pointerup' etc\n    if (BROWSER_TYPE === 'IE11 / MSEdge') {\n      const lastPart = sliceOffMouse(exposedEventName)\n      return 'pointer' + lastPart\n    }\n\n    // In this non-mobile browser type, events are called 'MSPointerUp' etc\n    if (BROWSER_TYPE === 'IE10 / WP8') {\n      const lastPart = sliceOffMouse(exposedEventName)\n      return 'MSPointer' + capitalize(lastPart)\n    }\n\n    // In other non-mobile browsers, events are called like the exposed ones\n    if (BROWSER_TYPE === 'other') {\n      return exposedEventName\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    this._svgPoint.x = nativeEvent.clientX\n    this._svgPoint.y = nativeEvent.clientY\n\n    return this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())\n  }\n}\n\nconst EVENT_NAMES = ['mousedown', 'mouseup', 'mousemove', 'mouseout', 'click', 'wheel']\nconst WINDOW_EVENTS = ['mousemove', 'mouseup']\nconst PREVENT_DEFAULT = ['mousedown']\n\nconst EXPOSED_EVENTS = EVENT_NAMES.map(eventName => ({\n  eventName,\n  nativeEventName: undefined,\n  useWindow: WINDOW_EVENTS.includes(eventName),\n  preventDefault: PREVENT_DEFAULT.includes(eventName)\n}))\n\nconst sliceOffMouse = str => str.slice(5, str.length)\n","import BaseEventManager from './BaseEventManager.js'\nimport capitalize from '../../utils/capitalize.js'\n\nexport default class TouchEventManager extends BaseEventManager {\n  constructor () {\n    super(EXPOSED_EVENTS, 'touch')\n  }\n\n  _getNativeTouchEventName (exposedEventName, BROWSER_TYPE) {\n    // In this mobile browser type, events are called 'pointerup' etc\n    if (BROWSER_TYPE === 'IE11 / MSEdge') {\n      const lastPart = sliceOffTouch(exposedEventName)\n      return 'pointer' + lastPart\n    }\n\n    // In this mobile browser type, events are called 'MSPointerUp' etc\n    if (BROWSER_TYPE === 'IE10 / WP8') {\n      const lastPart = sliceOffTouch(exposedEventName)\n      return 'MSPointer' + capitalize(lastPart)\n    }\n\n    // In other mobile browsers, events are called like the exposed ones\n    if (BROWSER_TYPE === 'other') {\n      return exposedEventName\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    const touches = getTouches(nativeEvent)\n\n    if (touches.length === 1) {\n      return this._getScreenCoordinatesSingle(touches[0])\n    }\n\n    if (touches.length > 1) {\n      return this._getScreenCoordinatesMulti(touches)\n    }\n  }\n\n  _getScreenCoordinatesSingle (touch) {\n    this._svgPoint.x = touch.clientX\n    this._svgPoint.y = touch.clientY\n\n    return this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())\n  }\n\n  _getScreenCoordinatesMulti (touches) {\n    const touchesInScreenCoordinates = []\n\n    for (const touch of touches) {\n      touchesInScreenCoordinates.push(this._getScreenCoordinatesSingle(touch))\n    }\n\n    return touchesInScreenCoordinates\n  }\n}\n\nconst EVENT_NAMES = ['touchstart', 'touchend', 'touchmove', 'touchcancel']\n\nconst EXPOSED_EVENTS = EVENT_NAMES.map(eventName => ({\n  eventName,\n  nativeEventName: undefined,\n  useWindow: false,\n  preventDefault: true\n}))\n\nconst sliceOffTouch = str => str.slice(5, str.length)\n\nfunction getTouches (nativeEvent) {\n  return nativeEvent.touches\n}\n","import detectIt from 'detect-it'\n\nimport MouseEventManager from './MouseEventManager.js'\nimport TouchEventManager from './TouchEventManager.js'\n\nexport default class EventManager {\n  constructor () {\n    if (detectIt.hasMouse) {\n      this._mouseEventManager = new MouseEventManager()\n    }\n\n    if (detectIt.hasTouch) {\n      this._touchEventManager = new TouchEventManager()\n    }\n  }\n\n  // Initialization\n  addRootNode (domNode) {\n    this._forEachManager(manager => { manager.addRootNode(domNode) })\n  }\n\n  attachEventListeners () {\n    this._forEachManager(manager => { manager.attachEventListeners() })\n  }\n\n  mouse () {\n    return this._mouseEventManager\n  }\n\n  touch () {\n    return this._touchEventManager\n  }\n\n  _forEachManager (callback) {\n    if (this._mouseEventManager) callback(this._mouseEventManager)\n    if (this._touchEventManager) callback(this._touchEventManager)\n  }\n}\n","export default class BaseInteractionManager {\n  constructor () {\n    this._id = undefined\n    this._eventManager = undefined\n\n    this._section = undefined\n\n    this._markInteractionInterface = undefined\n    this._sectionInteractionInterface = undefined\n  }\n\n  // Initialization\n  setId (id) {\n    this._id = id\n  }\n\n  linkEventManager (eventManager) {\n    this._eventManager = eventManager\n  }\n\n  // Section context loading\n  loadSection (sectionData) {\n    this._section = sectionData\n  }\n\n  // Mark and layer interactions interface\n  marks () {\n    return this._markInteractionInterface\n  }\n\n  // Section interactions interface\n  section () {\n    return this._sectionInteractionInterface\n  }\n}\n","import capitalize from '../../../../utils/capitalize.js'\n\nexport default class BaseInteractionInterface {\n  constructor (interactionManager, InteractionHandlers) {\n    this._interactionManager = interactionManager\n    this._handlers = {}\n\n    for (const handlerName in InteractionHandlers) {\n      this._handlers[handlerName] = new InteractionHandlers[handlerName](this._interactionManager)\n    }\n  }\n\n  _getHandler (interactionName) {\n    const handlerName = interactionNameToHandlerName(interactionName)\n    return this._handlers[handlerName]\n  }\n}\n\nconst interactionNameToHandlerName = interactionName => {\n  return capitalize(interactionName) + 'Handler'\n}\n","export function indexPoint (markData) {\n  const pointAttributes = markData.attributes\n\n  const item = calculateBboxPoint(pointAttributes)\n\n  item.attributes = pointAttributes\n  item.markType = 'Point'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPointLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const pointAttributes = getPointAttributes(layerAttributes, key)\n    const item = calculateBboxPoint(pointAttributes)\n\n    item.key = key\n    item.index = i\n    item.attributes = pointAttributes\n    item.markType = 'Point'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction calculateBboxPoint (pointAttributes) {\n  const x = pointAttributes.pixelGeometry.coordinates[0]\n  const y = pointAttributes.pixelGeometry.coordinates[1]\n\n  return {\n    minX: x - pointAttributes.radius,\n    maxX: x + pointAttributes.radius,\n    minY: y - pointAttributes.radius,\n    maxY: y + pointAttributes.radius\n  }\n}\n\nfunction getPointAttributes (layerAttributes, key) {\n  return {\n    pixelGeometry: layerAttributes.pixelGeometryObject[key],\n    radius: layerAttributes.radiusObject[key]\n  }\n}\n","// Adds floating point numbers with twice the normal precision.\n// Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n// Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n// 305â363 (1997).\n// Code adapted from GeographicLib by Charles F. F. Karney,\n// http://geographiclib.sourceforge.net/\n\nexport default function() {\n  return new Adder;\n}\n\nfunction Adder() {\n  this.reset();\n}\n\nAdder.prototype = {\n  constructor: Adder,\n  reset: function() {\n    this.s = // rounded value\n    this.t = 0; // exact error\n  },\n  add: function(y) {\n    add(temp, y, this.t);\n    add(this, temp.s, this.s);\n    if (this.s) this.t += temp.t;\n    else this.s = temp.t;\n  },\n  valueOf: function() {\n    return this.s;\n  }\n};\n\nvar temp = new Adder;\n\nfunction add(adder, a, b) {\n  var x = adder.s = a + b,\n      bv = x - a,\n      av = x - bv;\n  adder.t = (a - av) + (b - bv);\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","export default function(x) {\n  return x;\n}\n","import adder from \"../adder.js\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = adder(),\n    areaRingSum = adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum.reset();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum.reset();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import adder from \"../adder.js\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum.reset();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","export default function PathString() {\n  this._string = [];\n}\n\nPathString.prototype = {\n  _radius: 4.5,\n  _circle: circle(4.5),\n  pointRadius: function(_) {\n    if ((_ = +_) !== this._radius) this._radius = _, this._circle = null;\n    return this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._string.push(\"Z\");\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._string.push(\"M\", x, \",\", y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._string.push(\"L\", x, \",\", y);\n        break;\n      }\n      default: {\n        if (this._circle == null) this._circle = circle(this._radius);\n        this._string.push(\"M\", x, \",\", y, this._circle);\n        break;\n      }\n    }\n  },\n  result: function() {\n    if (this._string.length) {\n      var result = this._string.join(\"\");\n      this._string = [];\n      return result;\n    } else {\n      return null;\n    }\n  }\n};\n\nfunction circle(radius) {\n  return \"m0,\" + radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius\n      + \"z\";\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  var pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    return arguments.length ? (projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream, path) : projection;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  return path.projection(projection).context(context);\n}\n","export function isInvalid (value) {\n  if (value === undefined || value === null) { return true }\n\n  if (value.constructor === Number) {\n    return !isFinite(value)\n  }\n\n  return false\n}\n\nexport function isValid (value) {\n  return !isInvalid(value)\n}\n\nexport function isDefined (value) {\n  return value !== undefined\n}\n\nexport function isUndefined (value) {\n  return value === undefined\n}\n","import { geoPath } from 'd3-geo'\nimport { isInvalid } from '../equals.js'\n\nexport function calculateBboxGeometries (geometries) {\n  let bbox = [[Infinity, Infinity], [-Infinity, -Infinity]]\n\n  for (let i = 0; i < geometries.length; i++) {\n    const geometry = geometries[i]\n\n    if (!isInvalid(geometry)) {\n      bbox = updateBbox(bbox, geometry)\n    }\n  }\n\n  const bboxObj = {\n    x: [bbox[0][0], bbox[1][0]],\n    y: [bbox[0][1], bbox[1][1]]\n  }\n\n  return bboxObj\n}\n\nexport function calculateBboxGeometry (geometry) {\n  const bbox = path.bounds(geometry)\n\n  const bboxObj = {\n    x: [bbox[0][0], bbox[1][0]],\n    y: [bbox[0][1], bbox[1][1]]\n  }\n\n  return bboxObj\n}\n\nconst path = geoPath()\n\nfunction updateBbox (bbox, geometry) {\n  const newBbox = path.bounds(geometry)\n\n  bbox[0][0] = bbox[0][0] < newBbox[0][0] ? bbox[0][0] : newBbox[0][0]\n  bbox[0][1] = bbox[0][1] < newBbox[0][1] ? bbox[0][1] : newBbox[0][1]\n  bbox[1][0] = bbox[1][0] > newBbox[1][0] ? bbox[1][0] : newBbox[1][0]\n  bbox[1][1] = bbox[1][1] > newBbox[1][1] ? bbox[1][1] : newBbox[1][1]\n\n  return bbox\n}\n","export function isLinearRing (ring) {\n  return ring.constructor === Array\n}\n\nexport function isPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'Polygon'\n}\n\nexport function isMultiPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiPolygon'\n}\n\nexport function isPolygonOrMultiPolygon (geometry) {\n  return isPolygon(geometry) || isMultiPolygon(geometry)\n}\n\nexport function isLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'LineString'\n}\n\nexport function isMultiLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiLineString'\n}\n\nexport function isLineStringOrMultiLineString (geometry) {\n  return isLineString(geometry) || isMultiLineString(geometry)\n}\n","import { isLinearRing, isPolygon, isMultiPolygon } from './geometryDetectors.js'\n\nexport function polygonArea (polygon) {\n  if (isLinearRing(polygon)) {\n    return getRingArea(polygon)\n  }\n\n  if (isPolygon(polygon)) {\n    return getPolygonArea(polygon)\n  }\n\n  if (isMultiPolygon(polygon)) {\n    return getMultiPolygonArea(polygon)\n  }\n\n  throw new Error('Invalid input')\n}\n\nexport function linearRingIsClockwise (ring) {\n  return getSignedRingArea(ring) < 0\n}\n\nfunction getRingArea (ring) {\n  return Math.abs(getSignedRingArea(ring))\n}\n\n// Taken from: https://stackoverflow.com/a/33670691/7237112\nfunction getSignedRingArea (ring) {\n  let total = 0\n\n  for (let i = 0, l = ring.length; i < l; i++) {\n    const addX = ring[i][0]\n    const addY = ring[i === ring.length - 1 ? 0 : i + 1][1]\n    const subX = ring[i === ring.length - 1 ? 0 : i + 1][0]\n    const subY = ring[i][1]\n\n    total += (addX * addY * 0.5)\n    total -= (subX * subY * 0.5)\n  }\n\n  return total\n}\n\nfunction getPolygonArea (polygon) {\n  let totalArea = getRingArea(polygon.coordinates[0])\n\n  for (let i = 1; i < polygon.coordinates.length; i++) {\n    const holeArea = getRingArea(polygon.coordinates[i])\n    totalArea -= holeArea\n  }\n\n  return totalArea\n}\n\nfunction getMultiPolygonArea (multiPolygon) {\n  let totalArea = 0\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    totalArea += getPolygonArea(multiPolygon.coordinates[i])\n  }\n\n  return totalArea\n}\n","export function pointDistance (point1, point2) {\n  return Math.sqrt(\n    (point1[0] - point2[0]) ** 2 +\n    (point1[1] - point2[1]) ** 2\n  )\n}\n\nexport function linearRingLength (linearRing) {\n  let totalLength = 0\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i]\n    const to = linearRing[i + 1]\n\n    totalLength += pointDistance(from, to)\n  }\n\n  return totalLength\n}\n","import {\n  isLinearRing, isPolygon, isMultiPolygon, isLineString, isMultiLineString\n} from './geometryDetectors.js'\nimport { polygonArea } from './polygonArea.js'\nimport { linearRingLength } from './distance.js'\n\nexport default function calculateCentroid (geometry) {\n  if (isLinearRing(geometry)) {\n    return calculateLinearRingCentroid(geometry)\n  }\n\n  if (isPolygon(geometry)) {\n    return calculatePolygonCentroid(geometry)\n  }\n\n  if (isMultiPolygon(geometry)) {\n    return calculateMultiPolygonCentroid(geometry)\n  }\n\n  if (isLineString(geometry)) {\n    return calculateLineStringCentroid(geometry)\n  }\n\n  if (isMultiLineString(geometry)) {\n    return calculateMultiLineStringCentroid(geometry)\n  }\n}\n\n// https://stackoverflow.com/a/33852627/7237112\nfunction calculateLinearRingCentroid (ring) {\n  const nPts = ring.length\n  const off = ring[0]\n  let twicearea = 0\n  let x = 0\n  let y = 0\n  let p1\n  let p2\n  let f\n\n  for (let i = 0, j = nPts - 1; i < nPts; j = i++) {\n    p1 = ring[i]\n    p2 = ring[j]\n    f = (p1[0] - off[0]) * (p2[1] - off[1]) - (p2[0] - off[0]) * (p1[1] - off[1])\n    twicearea += f\n    x += (p1[0] + p2[0] - 2 * off[0]) * f\n    y += (p1[1] + p2[1] - 2 * off[1]) * f\n  }\n\n  f = twicearea * 3\n\n  return [x / f + off[0], y / f + off[1]]\n}\n\nfunction calculatePolygonCentroid (polygon) {\n  // We will ignore holes and just take the outer ring\n  return calculateLinearRingCentroid(polygon.coordinates[0])\n}\n\nfunction calculateMultiPolygonCentroid (multiPolygon) {\n  // We will take the centroid of each polygon (ignoring holes)\n  // and take the weighted (by area) center of these.\n  let x = 0\n  let y = 0\n  let totalArea = 0\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    const polygon = multiPolygon.coordinates[i]\n    const polygonCentroid = calculateLinearRingCentroid(polygon[0])\n    const area = polygonArea(polygon[0])\n\n    x += polygonCentroid[0] * area\n    y += polygonCentroid[1] * area\n    totalArea += area\n  }\n\n  return [x / totalArea, y / totalArea]\n}\n\nfunction calculateLineStringCentroid (lineString) {\n  return calculateLinearRingCentroid(lineString.coordinates)\n}\n\nfunction calculateMultiLineStringCentroid (multiLineString) {\n  // We will take the centroid of each LineString\n  // and take the weighted (by length) center of these.\n  let x = 0\n  let y = 0\n  let totalLength = 0\n\n  for (let i = 0; i < multiLineString.coordinates.length; i++) {\n    const lineString = multiLineString.coordinates[i]\n    const lineStringCentroid = calculateLinearRingCentroid(lineString)\n    const length = linearRingLength(lineString)\n\n    x += lineStringCentroid[0] * length\n    y += lineStringCentroid[1] * length\n    totalLength += length\n  }\n\n  return [x / totalLength, y / totalLength]\n}\n","import { pointDistance } from './distance.js'\n\nexport function pointIntersectsLineSegment (point, lineSegment, lineWidth) {\n  const distance = distanceClosestPointOnLineSegment(point, lineSegment)\n\n  return distance < (lineWidth / 2)\n}\n\nexport function distanceClosestPointOnLineSegment (point, lineSegment) {\n  const closestPoint = closestPointOnLineSegment(point, lineSegment)\n  return pointDistance(point, closestPoint)\n}\n\n// https://stackoverflow.com/a/6853926/7237112\nexport function closestPointOnLineSegment (point, lineSegment) {\n  // Point coordinates\n  const x = point[0]\n  const y = point[1]\n\n  // Line segment coordinates\n  const x1 = lineSegment[0][0]\n  const y1 = lineSegment[0][1]\n  const x2 = lineSegment[1][0]\n  const y2 = lineSegment[1][1]\n\n  const A = x - x1\n  const B = y - y1\n  const C = x2 - x1\n  const D = y2 - y1\n\n  const dot = A * C + B * D\n  const lengthSquared = C * C + D * D\n  let param = -1\n  if (lengthSquared !== 0) { // in case of 0 length line\n    param = dot / lengthSquared\n  }\n\n  let xx, yy\n\n  if (param < 0) {\n    xx = x1\n    yy = y1\n  } else if (param > 1) {\n    xx = x2\n    yy = y2\n  } else {\n    xx = x1 + param * C\n    yy = y1 + param * D\n  }\n\n  return [xx, yy]\n}\n","\"use strict\"\n\nmodule.exports = twoProduct\n\nvar SPLITTER = +(Math.pow(2, 27) + 1.0)\n\nfunction twoProduct(a, b, result) {\n  var x = a * b\n\n  var c = SPLITTER * a\n  var abig = c - a\n  var ahi = c - abig\n  var alo = a - ahi\n\n  var d = SPLITTER * b\n  var bbig = d - b\n  var bhi = d - bbig\n  var blo = b - bhi\n\n  var err1 = x - (ahi * bhi)\n  var err2 = err1 - (alo * bhi)\n  var err3 = err2 - (ahi * blo)\n\n  var y = alo * blo - err3\n\n  if(result) {\n    result[0] = y\n    result[1] = x\n    return result\n  }\n\n  return [ y, x ]\n}","\"use strict\"\n\nmodule.exports = linearExpansionSum\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction linearExpansionSum(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = fastTwoSum\n\nfunction fastTwoSum(a, b, result) {\n\tvar x = a + b\n\tvar bv = x - a\n\tvar av = x - bv\n\tvar br = b - bv\n\tvar ar = a - av\n\tif(result) {\n\t\tresult[0] = ar + br\n\t\tresult[1] = x\n\t\treturn result\n\t}\n\treturn [ar+br, x]\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar twoSum = require(\"two-sum\")\n\nmodule.exports = scaleLinearExpansion\n\nfunction scaleLinearExpansion(e, scale) {\n  var n = e.length\n  if(n === 1) {\n    var ts = twoProduct(e[0], scale)\n    if(ts[0]) {\n      return ts\n    }\n    return [ ts[1] ]\n  }\n  var g = new Array(2 * n)\n  var q = [0.1, 0.1]\n  var t = [0.1, 0.1]\n  var count = 0\n  twoProduct(e[0], scale, q)\n  if(q[0]) {\n    g[count++] = q[0]\n  }\n  for(var i=1; i<n; ++i) {\n    twoProduct(e[i], scale, t)\n    var pq = q[1]\n    twoSum(pq, t[0], q)\n    if(q[0]) {\n      g[count++] = q[0]\n    }\n    var a = t[1]\n    var b = q[1]\n    var x = a + b\n    var bv = x - a\n    var y = b - bv\n    q[1] = x\n    if(y) {\n      g[count++] = y\n    }\n  }\n  if(q[1]) {\n    g[count++] = q[1]\n  }\n  if(count === 0) {\n    g[count++] = 0.0\n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = robustSubtract\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction robustSubtract(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], -f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = -f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = -f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar robustSum = require(\"robust-sum\")\nvar robustScale = require(\"robust-scale\")\nvar robustSubtract = require(\"robust-subtract\")\n\nvar NUM_EXPAND = 5\n\nvar EPSILON     = 1.1102230246251565e-16\nvar ERRBOUND3   = (3.0 + 16.0 * EPSILON) * EPSILON\nvar ERRBOUND4   = (7.0 + 56.0 * EPSILON) * EPSILON\n\nfunction cofactor(m, c) {\n  var result = new Array(m.length-1)\n  for(var i=1; i<m.length; ++i) {\n    var r = result[i-1] = new Array(m.length-1)\n    for(var j=0,k=0; j<m.length; ++j) {\n      if(j === c) {\n        continue\n      }\n      r[k++] = m[i][j]\n    }\n  }\n  return result\n}\n\nfunction matrix(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = new Array(n)\n    for(var j=0; j<n; ++j) {\n      result[i][j] = [\"m\", j, \"[\", (n-i-1), \"]\"].join(\"\")\n    }\n  }\n  return result\n}\n\nfunction sign(n) {\n  if(n & 1) {\n    return \"-\"\n  }\n  return \"\"\n}\n\nfunction generateSum(expr) {\n  if(expr.length === 1) {\n    return expr[0]\n  } else if(expr.length === 2) {\n    return [\"sum(\", expr[0], \",\", expr[1], \")\"].join(\"\")\n  } else {\n    var m = expr.length>>1\n    return [\"sum(\", generateSum(expr.slice(0, m)), \",\", generateSum(expr.slice(m)), \")\"].join(\"\")\n  }\n}\n\nfunction determinant(m) {\n  if(m.length === 2) {\n    return [[\"sum(prod(\", m[0][0], \",\", m[1][1], \"),prod(-\", m[0][1], \",\", m[1][0], \"))\"].join(\"\")]\n  } else {\n    var expr = []\n    for(var i=0; i<m.length; ++i) {\n      expr.push([\"scale(\", generateSum(determinant(cofactor(m, i))), \",\", sign(i), m[0][i], \")\"].join(\"\"))\n    }\n    return expr\n  }\n}\n\nfunction orientation(n) {\n  var pos = []\n  var neg = []\n  var m = matrix(n)\n  var args = []\n  for(var i=0; i<n; ++i) {\n    if((i&1)===0) {\n      pos.push.apply(pos, determinant(cofactor(m, i)))\n    } else {\n      neg.push.apply(neg, determinant(cofactor(m, i)))\n    }\n    args.push(\"m\" + i)\n  }\n  var posExpr = generateSum(pos)\n  var negExpr = generateSum(neg)\n  var funcName = \"orientation\" + n + \"Exact\"\n  var code = [\"function \", funcName, \"(\", args.join(), \"){var p=\", posExpr, \",n=\", negExpr, \",d=sub(p,n);\\\nreturn d[d.length-1];};return \", funcName].join(\"\")\n  var proc = new Function(\"sum\", \"prod\", \"scale\", \"sub\", code)\n  return proc(robustSum, twoProduct, robustScale, robustSubtract)\n}\n\nvar orientation3Exact = orientation(3)\nvar orientation4Exact = orientation(4)\n\nvar CACHED = [\n  function orientation0() { return 0 },\n  function orientation1() { return 0 },\n  function orientation2(a, b) { \n    return b[0] - a[0]\n  },\n  function orientation3(a, b, c) {\n    var l = (a[1] - c[1]) * (b[0] - c[0])\n    var r = (a[0] - c[0]) * (b[1] - c[1])\n    var det = l - r\n    var s\n    if(l > 0) {\n      if(r <= 0) {\n        return det\n      } else {\n        s = l + r\n      }\n    } else if(l < 0) {\n      if(r >= 0) {\n        return det\n      } else {\n        s = -(l + r)\n      }\n    } else {\n      return det\n    }\n    var tol = ERRBOUND3 * s\n    if(det >= tol || det <= -tol) {\n      return det\n    }\n    return orientation3Exact(a, b, c)\n  },\n  function orientation4(a,b,c,d) {\n    var adx = a[0] - d[0]\n    var bdx = b[0] - d[0]\n    var cdx = c[0] - d[0]\n    var ady = a[1] - d[1]\n    var bdy = b[1] - d[1]\n    var cdy = c[1] - d[1]\n    var adz = a[2] - d[2]\n    var bdz = b[2] - d[2]\n    var cdz = c[2] - d[2]\n    var bdxcdy = bdx * cdy\n    var cdxbdy = cdx * bdy\n    var cdxady = cdx * ady\n    var adxcdy = adx * cdy\n    var adxbdy = adx * bdy\n    var bdxady = bdx * ady\n    var det = adz * (bdxcdy - cdxbdy) \n            + bdz * (cdxady - adxcdy)\n            + cdz * (adxbdy - bdxady)\n    var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz)\n                  + (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz)\n                  + (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz)\n    var tol = ERRBOUND4 * permanent\n    if ((det > tol) || (-det > tol)) {\n      return det\n    }\n    return orientation4Exact(a,b,c,d)\n  }\n]\n\nfunction slowOrient(args) {\n  var proc = CACHED[args.length]\n  if(!proc) {\n    proc = CACHED[args.length] = orientation(args.length)\n  }\n  return proc.apply(undefined, args)\n}\n\nfunction generateOrientationProc() {\n  while(CACHED.length <= NUM_EXPAND) {\n    CACHED.push(orientation(CACHED.length))\n  }\n  var args = []\n  var procArgs = [\"slow\"]\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    args.push(\"a\" + i)\n    procArgs.push(\"o\" + i)\n  }\n  var code = [\n    \"function getOrientation(\", args.join(), \"){switch(arguments.length){case 0:case 1:return 0;\"\n  ]\n  for(var i=2; i<=NUM_EXPAND; ++i) {\n    code.push(\"case \", i, \":return o\", i, \"(\", args.slice(0, i).join(), \");\")\n  }\n  code.push(\"}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation\")\n  procArgs.push(code.join(\"\"))\n\n  var proc = Function.apply(undefined, procArgs)\n  module.exports = proc.apply(undefined, [slowOrient].concat(CACHED))\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    module.exports[i] = CACHED[i]\n  }\n}\n\ngenerateOrientationProc()","module.exports = robustPointInPolygon\n\nvar orient = require('robust-orientation')\n\nfunction robustPointInPolygon(vs, point) {\n  var x = point[0]\n  var y = point[1]\n  var n = vs.length\n  var inside = 1\n  var lim = n\n  for(var i = 0, j = n-1; i<lim; j=i++) {\n    var a = vs[i]\n    var b = vs[j]\n    var yi = a[1]\n    var yj = b[1]\n    if(yj < yi) {\n      if(yj < y && y < yi) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (0 < s)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yi < yk) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (0 < s)|0\n          }\n        }\n      }\n    } else if(yi < yj) {\n      if(yi < y && y < yj) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (s < 0)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yk < yi) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (s < 0)|0\n          }\n        }\n      }\n    } else if(y === yi) {\n      var x0 = Math.min(a[0], b[0])\n      var x1 = Math.max(a[0], b[0])\n      if(i === 0) {\n        while(j>0) {\n          var k = (j+n-1)%n\n          var p = vs[k]\n          if(p[1] !== y) {\n            break\n          }\n          var px = p[0]\n          x0 = Math.min(x0, px)\n          x1 = Math.max(x1, px)\n          j = k\n        }\n        if(j === 0) {\n          if(x0 <= x && x <= x1) {\n            return 0\n          }\n          return 1 \n        }\n        lim = j+1\n      }\n      var y0 = vs[(j+n-1)%n][1]\n      while(i+1<lim) {\n        var p = vs[i+1]\n        if(p[1] !== y) {\n          break\n        }\n        var px = p[0]\n        x0 = Math.min(x0, px)\n        x1 = Math.max(x1, px)\n        i += 1\n      }\n      if(x0 <= x && x <= x1) {\n        return 0\n      }\n      var y1 = vs[(i+1)%n][1]\n      if(x < x0 && (y0 < y !== y1 < y)) {\n        inside ^= 1\n      }\n    }\n  }\n  return 2 * inside - 1\n}","import robustPointInPolygon from 'robust-point-in-polygon'\n\nexport default function (point, geometry) {\n  switch (geometry.type) {\n    case 'Polygon': return pointInPolygon(point, geometry)\n    case 'MultiPolygon': return pointInMultiPolygon(point, geometry)\n  }\n}\n\nfunction pointInPolygon (point, geometry) {\n  const coordinates = geometry.coordinates\n  return pointInPolygonCoordinates(point, coordinates)\n}\n\nfunction pointInPolygonCoordinates (point, coordinates) {\n  const outerRing = coordinates[0]\n\n  if (!pointInRing(point, outerRing)) return false\n\n  for (let i = 1; i < coordinates.length; i++) {\n    const hole = coordinates[i]\n\n    if (pointInRing(point, hole)) return false\n  }\n\n  return true\n}\n\nfunction pointInMultiPolygon (point, geometry) {\n  const coordinates = geometry.coordinates\n\n  for (let i = 0; i < coordinates.length; i++) {\n    const polygonCoordinates = coordinates[i]\n\n    if (pointInPolygonCoordinates(point, polygonCoordinates)) return true\n  }\n\n  return false\n}\n\nfunction pointInRing (point, coordinates) {\n  return robustPointInPolygon(coordinates, point) === -1\n}\n","import { scaleLinear } from 'd3-scale';\n\nconst invalidInputError = new Error('Invalid input');\n\nfunction getInput (geometry) {\n  if ('coordinates' in geometry) {\n    return 'geojson'\n  }\n\n  if ('x' in geometry && 'y' in geometry) {\n    if (geometry.type !== 'Point') {\n      ensureSameLength(geometry.x, geometry.y);\n    }\n\n    return 'xy'\n  }\n\n  throw invalidInputError\n}\n\nfunction ensureSameLength (x, y) {\n  if (x !== undefined && y !== undefined) {\n    if (x.constructor === Array && y.constructor === Array) {\n      if (x.length === y.length && x.length > 1) {\n        return\n      }\n    }\n  }\n\n  throw invalidInputError\n}\n\nfunction roundPoint ([x, y], decimals) {\n  const zeroes = 10 ** decimals;\n\n  return [\n    Math.round(x * zeroes) / zeroes,\n    Math.round(y * zeroes) / zeroes\n  ]\n}\n\nfunction pointDistance (p1, p2) {\n  return Math.sqrt(\n    (p1[0] - p2[0]) ** 2 +\n    (p1[1] - p2[1]) ** 2\n  )\n}\n\nfunction transformLinearRing (linearRing, transformation, settings) {\n  if (!settings.simplify || linearRing.length < 3) {\n    return transformLinearRingUnsimplified(linearRing, transformation)\n  }\n\n  if (settings.simplify === true) {\n    return transformLinearRingSimplified(linearRing, transformation, settings.simplificationTreshold)\n  }\n}\n\nfunction transformLinearRingUnsimplified (linearRing, transformation) {\n  const transformedLinearRing = [];\n\n  for (let i = 0; i < linearRing.length; i++) {\n    transformedLinearRing.push(transformation(linearRing[i]));\n  }\n\n  return transformedLinearRing\n}\n\nfunction transformLinearRingSimplified (linearRing, transformation, simplificationTreshold = 1) {\n  const transformedLinearRing = [transformation(linearRing[0])];\n\n  let start = transformedLinearRing[0];\n  let end;\n\n  for (let i = 1; i < linearRing.length - 1; i++) {\n    end = transformation(linearRing[i]);\n\n    const dontSkip = pointDistance(start, end) >= simplificationTreshold;\n\n    if (dontSkip) {\n      transformedLinearRing.push(end);\n      start = end;\n    }\n  }\n\n  const lastPoint = transformation(linearRing[linearRing.length - 1]);\n  transformedLinearRing.push(lastPoint);\n\n  return transformedLinearRing\n}\n\nfunction transformSetOfLinearRings (linearRings, transformation, settings) {\n  const transformedLinearRings = [];\n\n  for (let i = 0; i < linearRings.length; i++) {\n    transformedLinearRings.push(transformLinearRing(linearRings[i], transformation, settings));\n  }\n\n  return transformedLinearRings\n}\n\nfunction transformXYArrays ({ x, y }, transformation, settings) {\n  if (!settings.simplify || x.length < 3) {\n    return transformXYArraysUnsimplified(x, y, transformation)\n  }\n\n  if (settings.simplify === true) {\n    return transformXYArraysSimplified(x, y, transformation, settings.simplificationTreshold)\n  }\n}\n\nfunction transformXYArraysUnsimplified (x, y, transformation) {\n  const transformedLinearRing = [];\n\n  for (let i = 0; i < x.length; i++) {\n    transformedLinearRing.push(transformation([x[i], y[i]]));\n  }\n\n  return transformedLinearRing\n}\n\nfunction transformXYArraysSimplified (x, y, transformation, simplificationTreshold = 1) {\n  const transformedLinearRing = [transformation([x[0], y[0]])];\n\n  let start = transformedLinearRing[0];\n  let end;\n\n  for (let i = 1; i < x.length - 1; i++) {\n    end = transformation([x[i], y[i]]);\n\n    const dontSkip = pointDistance(start, end) >= simplificationTreshold;\n\n    if (dontSkip) {\n      transformedLinearRing.push(end);\n      start = end;\n    }\n  }\n\n  const lastIndex = x.length - 1;\n  const lastPoint = transformation([x[lastIndex], y[lastIndex]]);\n  transformedLinearRing.push(lastPoint);\n\n  return transformedLinearRing\n}\n\nconst transformFunctions = {\n  transformPoint,\n  transformMultiPoint,\n  transformLineString,\n  transformMultiLineString,\n  transformPolygon,\n  transformMultiPolygon\n};\n\nfunction transformGeometry (geometry, _transformation, settings = {}) {\n  const functionName = 'transform' + geometry.type;\n\n  const transformation = settings.decimals\n    ? point => roundPoint(_transformation(point), settings.decimals)\n    : _transformation;\n\n  return transformFunctions[functionName](geometry, transformation, settings)\n}\n\nfunction transformPoint (point, transformation) {\n  const input = getInput(point);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Point',\n      coordinates: transformation(point.coordinates)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Point',\n      coordinates: transformation([\n        point.x,\n        point.y\n      ])\n    }\n  }\n}\n\nfunction transformMultiPoint (multiPoint, transformation) {\n  const input = getInput(multiPoint);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiPoint',\n      coordinates: transformLinearRing(multiPoint.coordinates, transformation, {})\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPoint',\n      coordinates: transformXYArrays(multiPoint, transformation, {})\n    }\n  }\n}\n\nfunction transformLineString (lineString, transformation, settings) {\n  const input = getInput(lineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'LineString',\n      coordinates: transformLinearRing(lineString.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'LineString',\n      coordinates: transformXYArrays(lineString, transformation, settings)\n    }\n  }\n}\n\nfunction transformMultiLineString (multiLineString, transformation, settings) {\n  const input = getInput(multiLineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiLineString',\n      coordinates: transformSetOfLinearRings(multiLineString.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiLineString',\n      coordinates: [\n        transformXYArrays(multiLineString, transformation, settings)\n      ]\n    }\n  }\n}\n\nfunction transformPolygon (polygon, transformation, settings) {\n  const input = getInput(polygon);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Polygon',\n      coordinates: transformSetOfLinearRings(polygon.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Polygon',\n      coordinates: [\n        transformXYArrays(polygon, transformation, settings)\n      ]\n    }\n  }\n}\n\nfunction transformMultiPolygon (multiPolygon, transformation, settings) {\n  const input = getInput(multiPolygon);\n\n  if (input === 'geojson') {\n    const polygons = multiPolygon.coordinates;\n    const transformedPolygons = [];\n\n    for (let i = 0; i < polygons.length; i++) {\n      transformedPolygons.push(transformSetOfLinearRings(polygons[i], transformation, settings));\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: transformedPolygons\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPolygon',\n      coordinates: [\n        [transformXYArrays(multiPolygon, transformation, settings)]\n      ]\n    }\n  }\n}\n\nfunction getNumberOfInterpolatedPoints (\n  from,\n  to,\n  toPolar,\n  context,\n  { interpolationTreshold = 1 }\n) {\n  const fromScaledDown = toPolar(from);\n  const toScaledDown = toPolar(to);\n\n  const totalScaleFactor = getTotalScaleFactor(context);\n\n  if (straightInYDimension(fromScaledDown, toScaledDown, totalScaleFactor)) {\n    return 0\n  }\n\n  const functionalForm = getFunctionalForm(fromScaledDown, toScaledDown);\n  const scaledDownLength = getPolarLength(functionalForm);\n\n  const realLength = scaledDownLength * totalScaleFactor;\n  const numberOfPointsNeeded = realLength / interpolationTreshold;\n\n  return Math.floor(numberOfPointsNeeded)\n}\n\nfunction getFunctionalForm (from, to) {\n  const pointsSorted = from[0] < to[0]\n    ? [from, to]\n    : [to, from];\n\n  const [[x1, y1], [x2, y2]] = pointsSorted;\n\n  const a = (y2 - y1) / (x2 - x1);\n  const b = y1 - (x1 * a);\n  const interval = [x1, x2];\n\n  return { a, b, interval }\n}\n\nfunction straightInYDimension (from, to, totalScaleFactor) {\n  return Math.abs(from[0] - to[0]) * totalScaleFactor < 1\n}\n\nfunction getPolarLength ({ a, b, interval }) {\n  const [c, d] = interval;\n\n  if (a === 0) {\n    return (d - c) * b\n  }\n\n  const aSq = a ** 2;\n  const bSq = b ** 2;\n\n  /*\n   * This is the integral of:\n   * sqrt( (a * theta + b) ** 2 + a ** 2 )\n   * between c and d\n   */\n  return (\n    aSq * Math.asinh((a * d + b) / a) + (a * d + b) *\n    Math.sqrt(aSq * d ** 2 + 2 * a * b * d + bSq + aSq) -\n    aSq * Math.asinh((a * c + b) / a) + (-a * c - b) *\n    Math.sqrt(aSq * c ** 2 + 2 * a * b * c + bSq + aSq)\n  ) / (2 * a)\n}\n\nfunction getTotalScaleFactor ({ finalRangeX, finalRangeY }) {\n  const totalScaleFactorX = Math.abs(finalRangeX[0] - finalRangeX[1]) / 2;\n  const totalScaleFactorY = Math.abs(finalRangeY[0] - finalRangeY[1]) / 2;\n\n  return Math.max(totalScaleFactorX, totalScaleFactorY)\n}\n\nfunction interpolatePoints (\n  transformedLinearRing,\n  from,\n  to,\n  postScaleTransformation,\n  numberOfPointsNeeded\n) {\n  const interpolator = interpolate(from, to);\n\n  for (let i = 0; i < numberOfPointsNeeded; i++) {\n    const t = (i + 1) / (numberOfPointsNeeded + 1);\n    transformedLinearRing.push(\n      postScaleTransformation(interpolator(t))\n    );\n  }\n}\n\nfunction interpolate (a, b) {\n  const dx = b[0] - a[0];\n  const dy = b[1] - a[1];\n\n  return t => ([\n    a[0] + t * dx,\n    a[1] + t * dy\n  ])\n}\n\nfunction interpolateLinearRing (linearRing, context, transformations, settings) {\n  if (!settings.simplify || linearRing.length < 3) {\n    return interpolateLinearRingUnsimplified(linearRing, context, transformations, settings)\n  }\n\n  if (settings.simplify === true) {\n    return interpolateLinearRingSimplified()\n  }\n}\n\nfunction interpolateLinearRingUnsimplified (linearRing, context, transformations, settings) {\n  const interpolatedLinearRing = [];\n  const { scaleTransformation, postScaleTransformation, toPolar } = transformations;\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i];\n    const to = linearRing[i + 1];\n    const fromScaled = scaleTransformation(from);\n    const toScaled = scaleTransformation(to);\n\n    interpolatedLinearRing.push(postScaleTransformation(fromScaled));\n\n    const numberOfPointsNeeded = getNumberOfInterpolatedPoints(\n      fromScaled,\n      toScaled,\n      toPolar,\n      context,\n      settings\n    );\n\n    if (numberOfPointsNeeded > 0) {\n      interpolatePoints(\n        interpolatedLinearRing,\n        fromScaled,\n        toScaled,\n        postScaleTransformation,\n        numberOfPointsNeeded\n      );\n    }\n  }\n\n  const lastPoint = linearRing[linearRing.length - 1];\n  interpolatedLinearRing.push(postScaleTransformation(\n    scaleTransformation(lastPoint)\n  ));\n\n  return interpolatedLinearRing\n}\n\nfunction interpolateLinearRingSimplified (linearRing, context, transformations, settings) {\n\n}\n\nfunction interpolateSetOfLinearRings (linearRings, context, transformations, settings) {\n  const interpolatedLinearRings = [];\n\n  for (let i = 0; i < linearRings.length; i++) {\n    interpolatedLinearRings.push(interpolateLinearRing(linearRings[i], context, transformations, settings));\n  }\n\n  return interpolatedLinearRings\n}\n\nfunction interpolateXYArrays ({ x, y }, context, transformations, settings) {\n  if (!settings.simplify || x.length < 3) {\n    return interpolateXYArraysUnsimplified(x, y, context, transformations, settings)\n  }\n\n  if (settings.simplify === true) {\n    return interpolateXYArraysSimplified()\n  }\n}\n\nfunction interpolateXYArraysUnsimplified (x, y, context, transformations, settings) {\n  const interpolatedLinearRing = [];\n  const { scaleTransformation, postScaleTransformation, toPolar } = transformations;\n\n  for (let i = 0; i < x.length - 1; i++) {\n    const from = [x[i], y[i]];\n    const to = [x[i + 1], y[i + 1]];\n    const fromScaled = scaleTransformation(from);\n    const toScaled = scaleTransformation(to);\n\n    interpolatedLinearRing.push(postScaleTransformation(fromScaled));\n\n    const numberOfPointsNeeded = getNumberOfInterpolatedPoints(\n      fromScaled,\n      toScaled,\n      toPolar,\n      context,\n      settings\n    );\n\n    if (numberOfPointsNeeded > 0) {\n      interpolatePoints(\n        interpolatedLinearRing,\n        fromScaled,\n        toScaled,\n        postScaleTransformation,\n        numberOfPointsNeeded\n      );\n    }\n  }\n\n  const lastIndex = x.length - 1;\n  const lastPoint = [x[lastIndex], y[lastIndex]];\n  interpolatedLinearRing.push(postScaleTransformation(\n    scaleTransformation(lastPoint)\n  ));\n\n  return interpolatedLinearRing\n}\n\nfunction interpolateXYArraysSimplified (x, y, context, transformations, settings) {\n\n}\n\nconst interpolateFunctions = {\n  interpolateLineString,\n  interpolateMultiLineString,\n  interpolatePolygon,\n  interpolateMultiPolygon\n};\n\nfunction polarGeometry (geometry, context, _transformations, settings = {}) {\n  const functionName = 'interpolate' + geometry.type;\n\n  const { scaleTransformation, postScaleTransformation: _postScaleTransformation } = _transformations;\n\n  const postScaleTransformation = settings.decimals !== undefined\n    ? point => roundPoint(_postScaleTransformation(point), settings.decimals)\n    : _postScaleTransformation;\n\n  const toTheta = scaleLinear().domain(context.rangeX).range([0, 2 * Math.PI]);\n  const toRadius = scaleLinear().domain(context.rangeY).range([0, 1]);\n  const toPolar = ([x, y]) => ([toTheta(x), toRadius(y)]);\n\n  const transformations = { scaleTransformation, postScaleTransformation, toPolar };\n\n  return interpolateFunctions[functionName](geometry, context, transformations, settings)\n}\n\nfunction interpolateLineString (lineString, context, transformations, settings) {\n  const input = getInput(lineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'LineString',\n      coordinates: interpolateLinearRing(lineString.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'LineString',\n      coordinates: interpolateXYArrays(lineString, context, transformations, settings)\n    }\n  }\n}\n\nfunction interpolateMultiLineString (multiLineString, context, transformations, settings) {\n  const input = getInput(multiLineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiLineString',\n      coordinates: interpolateSetOfLinearRings(multiLineString.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiLineString',\n      coordinates: [\n        interpolateXYArrays(multiLineString, context, transformations, settings)\n      ]\n    }\n  }\n}\n\nfunction interpolatePolygon (polygon, context, transformations, settings) {\n  const input = getInput(polygon);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Polygon',\n      coordinates: interpolateSetOfLinearRings(polygon.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Polygon',\n      coordinates: [\n        interpolateXYArrays(polygon, context, transformations, settings)\n      ]\n    }\n  }\n}\n\nfunction interpolateMultiPolygon (multiPolygon, context, transformations, settings) {\n  const input = getInput(multiPolygon);\n\n  if (input === 'geojson') {\n    const polygons = multiPolygon.coordinates;\n    const transformedPolygons = [];\n\n    for (let i = 0; i < polygons.length; i++) {\n      transformedPolygons.push(interpolateSetOfLinearRings(polygons[i], context, transformations, settings));\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: transformedPolygons\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPolygon',\n      coordinates: [\n        [interpolateXYArrays(multiPolygon, context, transformations, settings)]\n      ]\n    }\n  }\n}\n\nexport { polarGeometry, transformGeometry };\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n\n        // filter collinear points around the cuts\n        filterPoints(outerNode, outerNode.next);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m; // hole touches outer segment; pick leftmost endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","export default function(x) {\n  return x;\n}\n","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","export default function(topology, arcs) {\n  var stitchedArcs = {},\n      fragmentByStart = {},\n      fragmentByEnd = {},\n      fragments = [],\n      emptyIndex = -1;\n\n  // Stitch empty arcs first, since they may be subsumed by other arcs.\n  arcs.forEach(function(i, j) {\n    var arc = topology.arcs[i < 0 ? ~i : i], t;\n    if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n      t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n    }\n  });\n\n  arcs.forEach(function(i) {\n    var e = ends(i),\n        start = e[0],\n        end = e[1],\n        f, g;\n\n    if (f = fragmentByEnd[start]) {\n      delete fragmentByEnd[f.end];\n      f.push(i);\n      f.end = end;\n      if (g = fragmentByStart[end]) {\n        delete fragmentByStart[g.start];\n        var fg = g === f ? f : f.concat(g);\n        fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else if (f = fragmentByStart[end]) {\n      delete fragmentByStart[f.start];\n      f.unshift(i);\n      f.start = start;\n      if (g = fragmentByEnd[start]) {\n        delete fragmentByEnd[g.end];\n        var gf = g === f ? f : g.concat(f);\n        fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else {\n      f = [i];\n      fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n    }\n  });\n\n  function ends(i) {\n    var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n    if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n    else p1 = arc[arc.length - 1];\n    return i < 0 ? [p1, p0] : [p0, p1];\n  }\n\n  function flush(fragmentByEnd, fragmentByStart) {\n    for (var k in fragmentByEnd) {\n      var f = fragmentByEnd[k];\n      delete fragmentByStart[f.start];\n      delete f.start;\n      delete f.end;\n      f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n      fragments.push(f);\n    }\n  }\n\n  flush(fragmentByEnd, fragmentByStart);\n  flush(fragmentByStart, fragmentByEnd);\n  arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n  return fragments;\n}\n","import {object} from \"./feature.js\";\nimport stitch from \"./stitch.js\";\n\nfunction planarRingArea(ring) {\n  var i = -1, n = ring.length, a, b = ring[n - 1], area = 0;\n  while (++i < n) a = b, b = ring[i], area += a[0] * b[1] - a[1] * b[0];\n  return Math.abs(area); // Note: doubled area!\n}\n\nexport default function(topology) {\n  return object(topology, mergeArcs.apply(this, arguments));\n}\n\nexport function mergeArcs(topology, objects) {\n  var polygonsByArc = {},\n      polygons = [],\n      groups = [];\n\n  objects.forEach(geometry);\n\n  function geometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\n      case \"Polygon\": extract(o.arcs); break;\n      case \"MultiPolygon\": o.arcs.forEach(extract); break;\n    }\n  }\n\n  function extract(polygon) {\n    polygon.forEach(function(ring) {\n      ring.forEach(function(arc) {\n        (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n      });\n    });\n    polygons.push(polygon);\n  }\n\n  function area(ring) {\n    return planarRingArea(object(topology, {type: \"Polygon\", arcs: [ring]}).coordinates[0]);\n  }\n\n  polygons.forEach(function(polygon) {\n    if (!polygon._) {\n      var group = [],\n          neighbors = [polygon];\n      polygon._ = 1;\n      groups.push(group);\n      while (polygon = neighbors.pop()) {\n        group.push(polygon);\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n              if (!polygon._) {\n                polygon._ = 1;\n                neighbors.push(polygon);\n              }\n            });\n          });\n        });\n      }\n    }\n  });\n\n  polygons.forEach(function(polygon) {\n    delete polygon._;\n  });\n\n  return {\n    type: \"MultiPolygon\",\n    arcs: groups.map(function(polygons) {\n      var arcs = [], n;\n\n      // Extract the exterior (unique) arcs.\n      polygons.forEach(function(polygon) {\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n              arcs.push(arc);\n            }\n          });\n        });\n      });\n\n      // Stitch the arcs into one or more rings.\n      arcs = stitch(topology, arcs);\n\n      // If more than one ring is returned,\n      // at most one of these rings can be the exterior;\n      // choose the one with the greatest absolute area.\n      if ((n = arcs.length) > 1) {\n        for (var i = 1, k = area(arcs[0]), ki, t; i < n; ++i) {\n          if ((ki = area(arcs[i])) > k) {\n            t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n          }\n        }\n      }\n\n      return arcs;\n    }).filter(function(arcs) {\n      return arcs.length > 0;\n    })\n  };\n}\n","import { interpolate } from 'd3-interpolate';\nimport earcut from 'earcut';\nimport { feature, mergeArcs } from 'topojson-client';\nimport { bisector } from 'd3-array';\n\nfunction pointDistance (point1, point2) {\n  return Math.sqrt(\n    (point1[0] - point2[0]) ** 2 +\n    (point1[1] - point2[1]) ** 2\n  )\n}\n\nfunction linearRingLength (linearRing) {\n  let totalLength = 0;\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i];\n    const to = linearRing[i + 1];\n\n    totalLength += pointDistance(from, to);\n  }\n\n  return totalLength\n}\n\n/*\n  Why this weird map function when there is Array.map?\n  Well, usually premature optimization is the root of all evil,\n  but Array.map is just really really slow.\n\n  See, for example,  https://jsperf.com/map-reduce-named-functions/2\n  Array.map is more than 6x slower than a classical for loop,\n  and almost 4x slower than a custom implementation like this one.\n*/\nfunction map (array, callback) {\n  const result = [];\n\n  for (let i = 0; i < array.length; i++) {\n    result.push(callback(array[i], i));\n  }\n\n  return result\n}\n\nfunction every (array, condition) {\n  for (let i = 0; i < array.length; i++) {\n    if (condition(array[i], i)) return false\n  }\n\n  return true\n}\n\nfunction getOrderDescending (array) {\n  const indexArray = map(array, (_, i) => i);\n  indexArray.sort((a, b) => array[b] - array[a]);\n\n  return indexArray\n}\n\nfunction sortIntoOrder (array, order) {\n  return map(order, i => array[i])\n}\n\nfunction getInsertionIndexDescending (arraySortedDescending, value) {\n  if (arraySortedDescending.length === 0) return 0\n\n  for (let i = arraySortedDescending.length - 1; i >= 0; i--) {\n    const arrayValue = arraySortedDescending[i];\n\n    if (value <= arrayValue) return i\n  }\n\n  return 0\n}\n\nfunction removeClosingPoint (linearRing) {\n  linearRing.pop();\n\n  return linearRing\n}\n\nfunction closeRing (linearRing) {\n  let firstPoint = linearRing[0];\n  linearRing.push(firstPoint);\n\n  return linearRing\n}\n\nfunction insertPointsLinearRing (inputLinearRing, numberOfAdditionalPoints) {\n  let linearRing = cloneLinearRing(inputLinearRing);\n  linearRing = removeClosingPoint(linearRing);\n  linearRing = insertPoints(linearRing, numberOfAdditionalPoints, { ring: true });\n  linearRing = closeRing(linearRing);\n\n  return linearRing\n}\n\nfunction insertPointsLineString (inputLineString, numberOfAdditionalPoints) {\n  const lineString = cloneLinearRing(inputLineString);\n  return insertPoints(lineString, numberOfAdditionalPoints, { ring: false })\n}\n\nfunction insertPoints (lineString, numberOfAdditionalPoints, { ring }) {\n  const edgeLengths = getEdgeLengths(lineString, ring);\n  let orderedEdgeIds = getOrderDescending(edgeLengths);\n\n  for (let i = 0; i < numberOfAdditionalPoints; i++) {\n    const longestEdgeId = orderedEdgeIds[0];\n\n    const edge = getEdge(lineString, longestEdgeId);\n\n    const edgeLength = edgeLengths[longestEdgeId];\n\n    const newEdges = splitEdge(edge);\n    const newEdgesLength = edgeLength / 2;\n\n    // Remove old edge\n    orderedEdgeIds.shift();\n    lineString[longestEdgeId] = null;\n    edgeLengths[longestEdgeId] = null;\n\n    // Insert new edges\n    orderedEdgeIds = insertOrderedId(orderedEdgeIds, edgeLengths, longestEdgeId, newEdgesLength);\n\n    lineString[longestEdgeId] = newEdges[0][0];\n    lineString.splice(longestEdgeId + 1, 0, newEdges[1][0]);\n\n    edgeLengths[longestEdgeId] = newEdgesLength;\n    edgeLengths.splice(longestEdgeId + 1, 0, newEdgesLength);\n  }\n\n  return lineString\n}\n\nfunction cloneLinearRing (linearRing) {\n  const clonedLinearRing = [];\n\n  for (let i = 0; i < linearRing.length; i++) {\n    clonedLinearRing.push(linearRing[i].slice(0));\n  }\n\n  return clonedLinearRing\n}\n\nfunction getEdgeLengths (linearRing, ring) {\n  const edgeLengths = [];\n  const edges = ring ? linearRing.length : linearRing.length - 1;\n\n  for (let i = 0; i < edges; i++) {\n    const edge = getEdge(linearRing, i);\n\n    edgeLengths.push(pointDistance(edge[0], edge[1]));\n  }\n\n  return edgeLengths\n}\n\nfunction getEdge (linearRing, index) {\n  return [\n    linearRing[index], linearRing[(index + 1) % linearRing.length]\n  ]\n}\n\nfunction splitEdge (edge) {\n  const pointInBetween = interpolate(edge[0], edge[1])(0.5);\n\n  return [\n    [edge[0], pointInBetween],\n    [pointInBetween, edge[1]]\n  ]\n}\n\nfunction insertOrderedId (orderedIds, edgeLengths, valueIndex, newValue) {\n  // Insert new Ids right place\n  let idsWereInserted = false;\n\n  for (let i = 0; i < orderedIds.length; i++) {\n    const index = orderedIds[i];\n\n    // Increase all indices after the valueIndex with 1\n    if (index > valueIndex) orderedIds[i] = orderedIds[i] + 1;\n\n    const currentArrayValue = edgeLengths[index];\n    if (currentArrayValue === null) continue\n\n    if (newValue >= currentArrayValue) {\n      orderedIds.splice(i, 0, valueIndex);\n      orderedIds.splice(i + 1, 0, valueIndex + 1);\n\n      idsWereInserted = true;\n      break\n    }\n  }\n\n  if (!idsWereInserted) {\n    orderedIds.push(valueIndex);\n    orderedIds.push(valueIndex + 1);\n  }\n\n  return orderedIds\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nfunction rotatePointsLinearRing (inputLinearRing, toLinearRing) {\n  let fromLinearRing = cloneLinearRing(inputLinearRing);\n  fromLinearRing = removeClosingPoint(fromLinearRing);\n\n  const fromLength = fromLinearRing.length;\n  let min = Infinity;\n  let bestOffset;\n  let sumOfSquares;\n  let spliced;\n\n  for (let offset = 0; offset < fromLength; offset++) {\n    sumOfSquares = 0;\n\n    toLinearRing.forEach((point, i) => {\n      const distance = pointDistance(fromLinearRing[(offset + i) % fromLength], point);\n      sumOfSquares += distance * distance;\n    });\n\n    if (sumOfSquares < min) {\n      min = sumOfSquares;\n      bestOffset = offset;\n    }\n  }\n\n  if (bestOffset) {\n    spliced = fromLinearRing.splice(0, bestOffset);\n    fromLinearRing.splice(fromLinearRing.length, 0, ...spliced);\n  }\n\n  fromLinearRing = closeRing(fromLinearRing);\n\n  return fromLinearRing\n}\n\nfunction isLinearRing (ring) {\n  return ring.constructor === Array\n}\n\nfunction isPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'Polygon'\n}\n\nfunction isMultiPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiPolygon'\n}\n\nfunction isPolygonOrMultiPolygon (geometry) {\n  return isPolygon(geometry) || isMultiPolygon(geometry)\n}\n\nfunction isLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'LineString'\n}\n\nfunction isMultiLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiLineString'\n}\n\nfunction isLineStringOrMultiLineString (geometry) {\n  return isLineString(geometry) || isMultiLineString(geometry)\n}\n\nfunction polygonArea (polygon) {\n  if (isLinearRing(polygon)) {\n    return getRingArea(polygon)\n  }\n\n  if (isPolygon(polygon)) {\n    return getPolygonArea(polygon)\n  }\n\n  if (isMultiPolygon(polygon)) {\n    return getMultiPolygonArea(polygon)\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction linearRingIsClockwise (ring) {\n  return getSignedRingArea(ring) < 0\n}\n\nfunction getRingArea (ring) {\n  return Math.abs(getSignedRingArea(ring))\n}\n\n// Taken from: https://stackoverflow.com/a/33670691/7237112\nfunction getSignedRingArea (ring) {\n  let total = 0;\n\n  for (let i = 0, l = ring.length; i < l; i++) {\n    const addX = ring[i][0];\n    const addY = ring[i === ring.length - 1 ? 0 : i + 1][1];\n    const subX = ring[i === ring.length - 1 ? 0 : i + 1][0];\n    const subY = ring[i][1];\n\n    total += (addX * addY * 0.5);\n    total -= (subX * subY * 0.5);\n  }\n\n  return total\n}\n\nfunction getPolygonArea (polygon) {\n  let totalArea = getRingArea(polygon.coordinates[0]);\n\n  for (let i = 1; i < polygon.coordinates.length; i++) {\n    const holeArea = getRingArea(polygon.coordinates[i]);\n    totalArea -= holeArea;\n  }\n\n  return totalArea\n}\n\nfunction getMultiPolygonArea (multiPolygon) {\n  let totalArea = 0;\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    totalArea += getPolygonArea(multiPolygon.coordinates[i]);\n  }\n\n  return totalArea\n}\n\nfunction matchLinearRings (fromRings, toRings) {\n  if (tooManyRings(fromRings)) {\n    return map(fromRings, (_, i) => i)\n  }\n\n  return bestOrder(fromRings, toRings)\n}\n\nfunction tooManyRings (rings) {\n  // with more than 9 rings, everything will be too chaotic to notice this stuff anyway.\n  return rings.length > 9\n}\n\nfunction bestOrder (fromRings, toRings) {\n  const fromAreas = map(fromRings, polygonArea);\n  const toAreas = map(toRings, polygonArea);\n\n  const fromAreasOrderDescending = getOrderDescending(fromAreas);\n  const toAreasOrderDescending = getOrderDescending(toAreas);\n\n  const pairs = {};\n\n  for (let i = 0; i < toAreasOrderDescending.length; i++) {\n    const fromIndex = fromAreasOrderDescending[i];\n    const toIndex = toAreasOrderDescending[i];\n\n    pairs[toIndex] = fromIndex;\n  }\n\n  const fromOrder = [];\n\n  for (let i = 0; i < toRings.length; i++) {\n    fromOrder.push(pairs[i]);\n  }\n\n  return fromOrder\n}\n\nfunction calculateCentroid (geometry) {\n  if (isLinearRing(geometry)) {\n    return calculateLinearRingCentroid(geometry)\n  }\n\n  if (isPolygon(geometry)) {\n    return calculatePolygonCentroid(geometry)\n  }\n\n  if (isMultiPolygon(geometry)) {\n    return calculateMultiPolygonCentroid(geometry)\n  }\n}\n\n// https://stackoverflow.com/a/33852627/7237112\nfunction calculateLinearRingCentroid (ring) {\n  const nPts = ring.length;\n  const off = ring[0];\n  let twicearea = 0;\n  let x = 0;\n  let y = 0;\n  let p1;\n  let p2;\n  let f;\n\n  for (let i = 0, j = nPts - 1; i < nPts; j = i++) {\n    p1 = ring[i];\n    p2 = ring[j];\n    f = (p1[0] - off[0]) * (p2[1] - off[1]) - (p2[0] - off[0]) * (p1[1] - off[1]);\n    twicearea += f;\n    x += (p1[0] + p2[0] - 2 * off[0]) * f;\n    y += (p1[1] + p2[1] - 2 * off[1]) * f;\n  }\n\n  f = twicearea * 3;\n\n  return [x / f + off[0], y / f + off[1]]\n}\n\nfunction calculatePolygonCentroid (polygon) {\n  // We will ignore holes and just take the outer ring\n  return calculateLinearRingCentroid(polygon.coordinates[0])\n}\n\nfunction calculateMultiPolygonCentroid (multiPolygon) {\n  // We will take the centroid of each polygon (ignoring holes)\n  // and take the weighted (by area) center of these.\n  let x = 0;\n  let y = 0;\n  let totalArea = 0;\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    const polygon = multiPolygon.coordinates[i];\n    const polygonCentroid = calculateLinearRingCentroid(polygon[0]);\n    const area = polygonArea(polygon[0]);\n\n    x += polygonCentroid[0] * area;\n    y += polygonCentroid[1] * area;\n    totalArea += area;\n  }\n\n  return [x / totalArea, y / totalArea]\n}\n\nfunction polygonToPolygon (from, to) {\n  const fromOuterRing = from.coordinates[0];\n  const toOuterRing = to.coordinates[0];\n\n  const [fromOuterRingPrepared, toOuterRingPrepared] = prepareLinearRings(fromOuterRing, toOuterRing);\n\n  if (neitherHasHoles(from, to)) {\n    return createInterpolatorNoHoles(from, to, fromOuterRingPrepared, toOuterRingPrepared)\n  }\n\n  const holeInterpolators = createHoleInterpolators(from, to);\n\n  return createInterpolatorWithHoles(\n    from, to, fromOuterRingPrepared, toOuterRingPrepared, holeInterpolators\n  )\n}\n\nfunction prepareLinearRings (fromRing, toRing) {\n  const lengthDifference = fromRing.length - toRing.length;\n\n  if (lengthDifference > 0) {\n    toRing = insertPointsLinearRing(toRing, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromRing = insertPointsLinearRing(fromRing, -lengthDifference);\n  }\n\n  const rotatedFromRing = rotatePointsLinearRing(fromRing, toRing);\n\n  return [rotatedFromRing, toRing]\n}\n\nfunction createInterpolatorNoHoles (from, to, fromOuterRingPrepared, toOuterRingPrepared) {\n  const outerRingInterpolator = interpolate(fromOuterRingPrepared, toOuterRingPrepared);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    const interpolatedLinearRing = outerRingInterpolator(t);\n\n    return {\n      type: 'Polygon',\n      coordinates: [interpolatedLinearRing]\n    }\n  }\n}\n\nfunction neitherHasHoles (from, to) {\n  return from.coordinates.length === 1 && to.coordinates.length === 1\n}\n\nfunction getHoles (polygon, numberOfHoles) {\n  const holes = [];\n\n  for (let i = 1; i <= numberOfHoles; i++) {\n    holes.push(polygon.coordinates[i]);\n  }\n\n  return holes\n}\n\nfunction createHoleInterpolators (from, to) {\n  let holeInterpolators = [];\n\n  const numberOfMatchableHoles = Math.min(from.coordinates.length, to.coordinates.length) - 1;\n\n  if (numberOfMatchableHoles > 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createMatchableHoleInterpolators(from, to, numberOfMatchableHoles)\n    );\n  }\n\n  const differenceBetweenNumberOfHoles = from.coordinates.length - to.coordinates.length;\n\n  if (differenceBetweenNumberOfHoles > 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createHoleImploders(from, differenceBetweenNumberOfHoles)\n    );\n  }\n\n  if (differenceBetweenNumberOfHoles < 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createHoleExploders(to, -differenceBetweenNumberOfHoles)\n    );\n  }\n\n  return holeInterpolators\n}\n\nfunction createMatchableHoleInterpolators (from, to, numberOfMatchableHoles) {\n  const holeInterpolators = [];\n\n  const fromHoles = getHoles(from, numberOfMatchableHoles);\n  const toHoles = getHoles(to, numberOfMatchableHoles);\n\n  const fromOrder = matchLinearRings(fromHoles, toHoles);\n  const fromHolesSorted = map(fromOrder, i => fromHoles[i]);\n\n  for (let i = 0; i < numberOfMatchableHoles; i++) {\n    const fromHole = fromHolesSorted[i];\n    const toHole = toHoles[i];\n\n    const [fromHolePrepared, toHolePrepared] = prepareLinearRings(fromHole, toHole);\n\n    const holeInterpolator = interpolate(fromHolePrepared, toHolePrepared);\n\n    holeInterpolators.push(holeInterpolator);\n  }\n\n  return holeInterpolators\n}\n\nfunction createHoleImploders (polygon, differenceBetweenNumberOfHoles) {\n  const interpolators = [];\n\n  const firstHoleThatNeedsImplodingIndex = polygon.coordinates.length - differenceBetweenNumberOfHoles;\n\n  for (let i = firstHoleThatNeedsImplodingIndex; i < polygon.coordinates.length; i++) {\n    const hole = polygon.coordinates[i];\n    const holeCentroid = calculateCentroid(hole);\n    const smallRectangleAroundCentroid = makeSmallRectangleAroundPoint(holeCentroid);\n\n    const [preparedPolygon, preparedImplodePoint] = prepareLinearRings(hole, smallRectangleAroundCentroid);\n\n    interpolators.push(interpolate(preparedPolygon, preparedImplodePoint));\n  }\n\n  return interpolators\n}\n\nfunction createHoleExploders (polygon, differenceBetweenNumberOfHoles) {\n  return map(createHoleImploders(polygon, differenceBetweenNumberOfHoles), holeInterpolator => {\n    return t => holeInterpolator(1 - t)\n  })\n}\n\nfunction makeSmallRectangleAroundPoint ([x, y]) {\n  const epsilon = 1e-6;\n\n  const x1 = x - epsilon;\n  const x2 = x + epsilon;\n  const y1 = y - epsilon;\n  const y2 = y + epsilon;\n\n  return [[x1, y1], [x1, y2], [x2, y2], [x2, y1], [x1, y1]]\n}\n\nfunction createInterpolatorWithHoles (\n  from, to, fromOuterRingPrepared, toOuterRingPrepared, holeInterpolators\n) {\n  const outerRingInterpolator = interpolate(fromOuterRingPrepared, toOuterRingPrepared);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    const interpolatedLinearRing = outerRingInterpolator(t);\n\n    return {\n      type: 'Polygon',\n      coordinates: [\n        interpolatedLinearRing,\n        ...map(holeInterpolators, holeInterpolator => holeInterpolator(t))\n      ]\n    }\n  }\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nfunction createTopology (vertices, triangleIndices) {\n  const arcIndices = {};\n  const topology = createEmptyTopology();\n\n  for (let i = 0; i < triangleIndices.length; i += 3) {\n    const geometry = [];\n\n    const triangleIndexArcs = createTriangleIndexArcs(triangleIndices, i);\n\n    triangleIndexArcs.forEach(arc => {\n      const slug = createArcSlug(arc);\n\n      const coordinates = map(arc, pointIndex => getPoint(vertices, pointIndex));\n\n      if (slug in arcIndices) {\n        geometry.push(~arcIndices[slug]); // Not sure what this is doing\n      } else {\n        geometry.push((arcIndices[slug] = topology.arcs.length));\n        topology.arcs.push(coordinates);\n      }\n    });\n\n    const area = getTriangleArea(vertices, triangleIndexArcs);\n    const polygon = createTopoPolygon(area, geometry);\n\n    topology.objects.triangles.geometries.push(polygon);\n  }\n\n  // Sort smallest first\n  // TODO sorted insertion?\n  topology.objects.triangles.geometries.sort((a, b) => a.area - b.area);\n\n  return topology\n}\n\nfunction createEmptyTopology () {\n  return {\n    type: 'Topology',\n    objects: {\n      triangles: {\n        type: 'GeometryCollection',\n        geometries: []\n      }\n    },\n    arcs: []\n  }\n}\n\nfunction createTriangleIndexArcs (triangleIndices, i) {\n  const a = triangleIndices[i];\n  const b = triangleIndices[i + 1];\n  const c = triangleIndices[i + 2];\n\n  return [[a, b], [b, c], [c, a]]\n}\n\nfunction createArcSlug (arc) {\n  return arc[0] < arc[1] ? arc.join(',') : arc[1] + ',' + arc[0]\n}\n\nfunction getPoint (vertices, i) {\n  return [vertices[i * 2], vertices[(i * 2) + 1]]\n}\n\nfunction createTopoPolygon (area, geometry) {\n  return {\n    type: 'Polygon',\n    area,\n    arcs: [geometry]\n  }\n}\n\nfunction getTriangleArea (vertices, triangleIndexArcs) {\n  return Math.abs(\n    polygonArea(map(triangleIndexArcs, arc => getPoint(vertices, arc[0])))\n  )\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nconst bisect = bisector(d => d.area).left;\n\nfunction findNeighbor (geoms) {\n  // we assume the first geom is the candidate for which\n  // we want to find a neighbor\n  const sourceArcs = geoms[0].arcs[0].map(arc => arc < 0 ? ~arc : arc);\n\n  let neighbor;\n\n  // start loop at index 1, first possible neighbor\n  for (let index = 1; index < geoms.length; index++) {\n    const targetArcs = geoms[index].arcs[0].map(arc => arc < 0 ? ~arc : arc);\n    if (sourceArcs.some(arc => targetArcs.includes(arc))) {\n      neighbor = index;\n      break\n    }\n  }\n  return neighbor\n}\n\nfunction collapseTopology (topology, numberOfPieces) {\n  const triangleGeometries = topology.objects.triangles.geometries;\n\n  while (triangleGeometries.length > numberOfPieces) {\n    mergeSmallestFeature();\n  }\n\n  if (numberOfPieces > triangleGeometries.length) {\n    throw new RangeError('Can\\'t collapse topology into ' + numberOfPieces + ' pieces.')\n  }\n\n  const geojson = feature(topology, topology.objects.triangles);\n  const geojsonTriangleGeometries = map(geojson.features, feature => feature.geometry);\n\n  return geojsonTriangleGeometries\n\n  function mergeSmallestFeature () {\n    const smallest = triangleGeometries[0];\n    const neighborIndex = findNeighbor(triangleGeometries);\n    const neighbor = triangleGeometries[neighborIndex];\n    const merged = mergeArcs(topology, [smallest, neighbor]);\n\n    // MultiPolygon -> Polygon\n    merged.area = smallest.area + neighbor.area;\n    merged.type = 'Polygon';\n    merged.arcs = merged.arcs[0];\n\n    // Delete smallest and its chosen neighbor\n    triangleGeometries.splice(neighborIndex, 1);\n    triangleGeometries.shift();\n\n    // Add new merged shape in sorted order\n    triangleGeometries.splice(bisect(triangleGeometries, merged.area), 0, merged);\n  }\n}\n\nfunction createGeometries (vertices, triangleIndices) {\n  const geometries = [];\n\n  for (let i = 0; i < triangleIndices.length; i += 3) {\n    const triangleIndexArcs = createTriangleIndexArcs(triangleIndices, i);\n\n    let outerRing = map(triangleIndexArcs, arc => getPoint(vertices, arc[0]));\n    outerRing.push(getPoint(vertices, triangleIndexArcs[0][0])); // close ring\n\n    // earcut doesn't always give counterclockwise rings back\n    if (linearRingIsClockwise(outerRing)) {\n      outerRing = outerRing.reverse();\n    }\n\n    geometries.push({\n      type: 'Polygon',\n      coordinates: [outerRing]\n    });\n  }\n\n  return geometries\n}\n\nfunction sliceUpTriangles (geometries, numberOfPieces) {\n  const areas = map(geometries, polygonArea);\n\n  const order = getOrderDescending(areas);\n\n  const areasSorted = sortIntoOrder(areas, order);\n  const geometriesSorted = sortIntoOrder(geometries, order);\n\n  while (geometriesSorted.length < numberOfPieces) {\n    areasSorted.shift();\n    const biggestTriangle = geometriesSorted.shift();\n\n    const cutTriangles = cutTriangleInTwo(biggestTriangle);\n\n    const areaCutTriangles = map(cutTriangles, polygonArea);\n\n    for (let i = 0; i < cutTriangles.length; i++) {\n      const areaCutTriangle = areaCutTriangles[i];\n      const cutTriangle = cutTriangles[i];\n\n      const insertionIndex = getInsertionIndexDescending(areasSorted, areaCutTriangle);\n\n      areasSorted.splice(insertionIndex, 0, areaCutTriangle);\n      geometriesSorted.splice(insertionIndex, 0, cutTriangle);\n    }\n  }\n\n  return geometriesSorted\n}\n\nfunction cutTriangleInTwo (triangle) {\n  const a = triangle.coordinates[0][0];\n  const b = triangle.coordinates[0][1];\n  const c = triangle.coordinates[0][2];\n\n  const pointBetweenAB = interpolate(a, b)(0.5);\n\n  const firstTriangle = createTriangleGeometry([a, pointBetweenAB, c, a]);\n  const secondTriangle = createTriangleGeometry([b, c, pointBetweenAB, b]);\n\n  return [firstTriangle, secondTriangle]\n}\n\nfunction createTriangleGeometry (points) {\n  return {\n    type: 'Polygon',\n    coordinates: [points]\n  }\n}\n\n/*\n  Inspired by flubber:\n  https://github.com/veltman/flubber\n*/\n\nconst dimensions = 2;\n\nfunction cutPolygon (polygon, numberOfPieces) {\n  if (numberOfPieces < 2) throw new Error('Cannot cut polygon in less than 2 pieces')\n\n  const flattenedPolygon = earcut.flatten(polygon.coordinates);\n  const triangleIndices = earcut(flattenedPolygon.vertices, flattenedPolygon.holes, dimensions);\n\n  const numberOfTriangles = getNumberOfTriangles(triangleIndices);\n\n  if (numberOfTriangles >= numberOfPieces) {\n    const topology = createTopology(flattenedPolygon.vertices, triangleIndices);\n    return collapseTopology(topology, numberOfPieces)\n  }\n\n  if (numberOfTriangles < numberOfPieces) {\n    const triangleGeometries = createGeometries(flattenedPolygon.vertices, triangleIndices);\n    return sliceUpTriangles(triangleGeometries, numberOfPieces)\n  }\n}\n\nfunction getNumberOfTriangles (triangleIndices) {\n  return triangleIndices.length / 3\n}\n\nfunction cutPolygons (polygons, numberOfDesiredAdditionalPolygons) {\n  if (numberOfDesiredAdditionalPolygons < 1) throw wrongNumberOfPolygonsError\n\n  const polygonAreas = map(polygons, polygonArea);\n  const numberOfCutsPerPolygon = assignCuts(polygonAreas, numberOfDesiredAdditionalPolygons);\n\n  let resultingPolygons = [];\n\n  for (let i = 0; i < polygons.length; i++) {\n    const polygon = polygons[i];\n    const numberOfCuts = numberOfCutsPerPolygon[i];\n\n    if (numberOfCuts === 0) {\n      resultingPolygons.push(polygon);\n    }\n\n    if (numberOfCuts > 0) {\n      const numberOfDesiredPolygons = numberOfCuts + 1;\n      resultingPolygons = resultingPolygons.concat(cutPolygon(polygon, numberOfDesiredPolygons));\n    }\n  }\n\n  return resultingPolygons\n}\n\nconst wrongNumberOfPolygonsError = new Error('Number of desired additional polygons must be larger than 0');\n\n// https://stackoverflow.com/a/38905829/7237112\nfunction assignCuts (polygonAreas, numberOfPieces) {\n  const numberOfCutsPerPolygon = [];\n  let totalArea = sum(polygonAreas);\n\n  for (let i = 0; i < polygonAreas.length; i++) {\n    const area = polygonAreas[i];\n    const numberOfCuts = Math.round(area / totalArea * numberOfPieces);\n\n    numberOfCutsPerPolygon.push(numberOfCuts);\n    totalArea -= area;\n    numberOfPieces -= numberOfCuts;\n  }\n\n  return numberOfCutsPerPolygon\n}\n\nfunction sum (array) {\n  let sum = 0;\n\n  for (let i = 0; i < array.length; i++) {\n    sum += array[i];\n  }\n\n  return sum\n}\n\nfunction combineIntoMultiPolygon (inputGeometries) {\n  const multiPolygon = createEmptyMultiPolygon();\n\n  for (const inputGeometry of inputGeometries) {\n    if (inputGeometry.type === 'Polygon') {\n      multiPolygon.coordinates.push(inputGeometry.coordinates);\n    }\n\n    if (inputGeometry.type === 'MultiPolygon') {\n      for (const polygon of inputGeometry.coordinates) {\n        multiPolygon.coordinates.push(polygon);\n      }\n    }\n  }\n\n  return multiPolygon\n}\n\nfunction splitMultiPolygon (multiPolygon) {\n  const polygons = [];\n\n  for (const polygonCoordinates of multiPolygon.coordinates) {\n    const polygon = createEmptyPolygon();\n    polygon.coordinates = polygonCoordinates;\n\n    polygons.push(polygon);\n  }\n\n  return polygons\n}\n\nfunction createEmptyMultiPolygon () {\n  return { type: 'MultiPolygon', coordinates: [] }\n}\n\nfunction createEmptyPolygon () {\n  return { type: 'Polygon', coordinates: undefined }\n}\n\nfunction multiPolygonToMultiPolygon (from, to) {\n  let fromPolygons = splitMultiPolygon(from);\n  let toPolygons = splitMultiPolygon(to);\n\n  const lengthDifference = fromPolygons.length - toPolygons.length;\n\n  if (lengthDifference > 0) {\n    toPolygons = cutPolygons(toPolygons, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromPolygons = cutPolygons(fromPolygons, -lengthDifference);\n  }\n\n  return createInterpolatorPolygons(from, to, fromPolygons, toPolygons)\n}\n\nfunction createInterpolatorPolygons (from, to, fromPolygons, toPolygons) {\n  const fromOuterRings = map(fromPolygons, polygon => polygon.coordinates[0]);\n  const toOuterRings = map(toPolygons, polygon => polygon.coordinates[0]);\n\n  const fromOrder = matchLinearRings(fromOuterRings, toOuterRings);\n  fromPolygons = map(fromOrder, i => fromPolygons[i]);\n\n  const polygonInterpolators = [];\n\n  for (let i = 0; i < fromPolygons.length; i++) {\n    const fromPolygon = fromPolygons[i];\n    const toPolygon = toPolygons[i];\n\n    polygonInterpolators.push(polygonToPolygon(fromPolygon, toPolygon));\n  }\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return combineIntoMultiPolygon(\n      map(polygonInterpolators, polygonInterpolator => polygonInterpolator(t))\n    )\n  }\n}\n\nfunction multiPolygonToPolygon (from, to) {\n  const fromPolygons = splitMultiPolygon(from);\n  let toPolygons = [to];\n\n  const numberOfFromPolygons = fromPolygons.length;\n  const numberOfAdditionalToPolygonsRequried = numberOfFromPolygons - 1;\n\n  if (numberOfAdditionalToPolygonsRequried > 0) {\n    toPolygons = cutPolygon(to, numberOfFromPolygons);\n  }\n\n  return createInterpolatorPolygons(from, to, fromPolygons, toPolygons)\n}\n\nfunction polygonToMultiPolygon (from, to) {\n  const reverseInterpolator = multiPolygonToPolygon(to, from);\n\n  return function interpolator (t) {\n    return reverseInterpolator(1 - t)\n  }\n}\n\nfunction lineStringtoLineString (from, to) {\n  const [preparedFromCoordinates, preparedToCoordinates] = prepareCoordinates(\n    from.coordinates, to.coordinates\n  );\n\n  return createInterpolator(from, to, preparedFromCoordinates, preparedToCoordinates)\n}\n\nfunction prepareCoordinates (fromCoordinates, toCoordinates) {\n  const lengthDifference = fromCoordinates.length - toCoordinates.length;\n\n  let preparedFromCoordinates = fromCoordinates;\n  let preparedToCoordinates = toCoordinates;\n\n  if (lengthDifference > 0) {\n    preparedToCoordinates = insertPointsLineString(toCoordinates, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    preparedFromCoordinates = insertPointsLineString(fromCoordinates, -lengthDifference);\n  }\n\n  preparedFromCoordinates = reverseIfBetterMatching(preparedFromCoordinates, preparedToCoordinates);\n\n  return [preparedFromCoordinates, preparedToCoordinates]\n}\n\nfunction createInterpolator (from, to, preparedFromCoordinates, preparedToCoordinates) {\n  const coordinateInterpolator = interpolate(preparedFromCoordinates, preparedToCoordinates);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return {\n      type: 'LineString',\n      coordinates: coordinateInterpolator(t)\n    }\n  }\n}\n\nfunction reverseIfBetterMatching (from, to) {\n  const normalTotalSquareDistance = getTotalSquaredDistancePositions(from, to);\n  const fromReversed = cloneLinearRing(from).reverse();\n  const reversedTotalSquareDistance = getTotalSquaredDistancePositions(fromReversed, to);\n\n  if (normalTotalSquareDistance <= reversedTotalSquareDistance) {\n    return from\n  } else {\n    return fromReversed\n  }\n}\n\nfunction getTotalSquaredDistancePositions (from, to) {\n  let totalSquaredDistance = 0;\n\n  for (let i = 0; i < from.length; i++) {\n    totalSquaredDistance += pointDistance(from[i], to[i]);\n  }\n\n  return totalSquaredDistance\n}\n\nfunction movePointAlongLine (a, b, distance) {\n  const unitVector = getUnitVector(a, b);\n  return movePoint(a, unitVector, distance)\n}\n\nfunction getUnitVector (a, b) {\n  const magnitude = pointDistance(a, b);\n  const dx = b[0] - a[0];\n  const dy = b[1] - a[1];\n\n  return [dx / magnitude, dy / magnitude]\n}\n\nfunction movePoint (point, unitVector, distance) {\n  return [\n    point[0] + unitVector[0] * distance,\n    point[1] + unitVector[1] * distance\n  ]\n}\n\nfunction multiLineStringToLineString (from, to) {\n  const numberOfFromLineStrings = from.coordinates.length;\n  const preparedToCoordinates = cutLineString(to.coordinates, numberOfFromLineStrings);\n  const lineStringInterpolators = createLineStringInterpolators(from.coordinates, preparedToCoordinates);\n\n  return createMultiLineStringInterpolator(from, to, lineStringInterpolators)\n}\n\nfunction lineStringToMultiLineString (from, to) {\n  const reverseInterpolator = multiLineStringToLineString(to, from);\n\n  return function interpolator (t) {\n    return reverseInterpolator(1 - t)\n  }\n}\n\nfunction cutLineString (toCoordinates, numberOfLineStrings) {\n  const multiLineStringCoordinates = [];\n\n  const totalLengthTo = linearRingLength(toCoordinates);\n  const desiredSegmentSize = totalLengthTo / numberOfLineStrings;\n\n  const lastPointIndex = toCoordinates.length - 1;\n\n  let currentSegment = [];\n  let elapsedDistanceSinceLastCut = 0;\n\n  for (let i = 0; i < lastPointIndex; i++) {\n    const a = toCoordinates[i];\n    currentSegment.push(a);\n    const b = toCoordinates[i + 1];\n\n    const distanceAB = pointDistance(a, b);\n    const distanceIncludingCurrentSegment = elapsedDistanceSinceLastCut + distanceAB;\n\n    if (distanceIncludingCurrentSegment < desiredSegmentSize) {\n      elapsedDistanceSinceLastCut += distanceAB;\n    }\n\n    if (distanceIncludingCurrentSegment >= desiredSegmentSize) {\n      const numberOfCuts = Math.floor(distanceIncludingCurrentSegment / desiredSegmentSize);\n\n      const cutCoordinates = calculateCutCoordinates(\n        a, b, elapsedDistanceSinceLastCut, desiredSegmentSize, numberOfCuts\n      );\n\n      currentSegment = currentSegment.concat(cutCoordinates);\n      multiLineStringCoordinates.push(currentSegment);\n\n      const lastCut = cutCoordinates[cutCoordinates.length - 1];\n\n      if (pointsEqual(lastCut, b)) {\n        currentSegment = [];\n      } else {\n        currentSegment = [lastCut];\n      }\n\n      elapsedDistanceSinceLastCut = pointDistance(lastCut, b);\n    }\n  }\n\n  return multiLineStringCoordinates\n}\n\nfunction calculateCutCoordinates (a, b, offset, size, numberOfCuts) {\n  const cuts = [];\n\n  for (let i = 1; i <= numberOfCuts; i++) {\n    cuts.push(movePointAlongLine(a, b, ((size * i) - offset)));\n  }\n\n  return cuts\n}\n\nfunction pointsEqual (a, b) {\n  return a[0] === b[0] && a[1] === b[1]\n}\n\nfunction createLineStringInterpolators (fromCoordinates, toCoordinates) {\n  const interpolators = [];\n\n  for (let i = 0; i < fromCoordinates.length; i++) {\n    const fromLineString = fromCoordinates[i];\n    const toLineString = toCoordinates[i];\n\n    const [preparedFromLineString, preparedToLineString] = prepareCoordinates(fromLineString, toLineString);\n    const interpolator = interpolate(preparedFromLineString, preparedToLineString);\n    interpolators.push(interpolator);\n  }\n\n  return interpolators\n}\n\nfunction createMultiLineStringInterpolator (from, to, lineStringInterpolators) {\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return {\n      type: 'MultiLineString',\n      coordinates: map(\n        lineStringInterpolators,\n        lineStringInterpolator => lineStringInterpolator(t)\n      )\n    }\n  }\n}\n\nfunction matchLineStrings (input, target) {\n  const inputOrder = getInputOrder(input, target);\n  return inputOrder.map(i => input[i])\n}\n\nfunction getInputOrder (input, target) {\n  const inputLengths = map(input, linearRingLength);\n  const targetLengths = map(target, linearRingLength);\n\n  const inputLengthOrderDescending = getOrderDescending(inputLengths);\n  const targetLengthOrderDescending = getOrderDescending(targetLengths);\n\n  const pairs = {};\n\n  for (let i = 0; i < targetLengthOrderDescending.length; i++) {\n    const inputIndex = inputLengthOrderDescending[i];\n    const targetIndex = targetLengthOrderDescending[i];\n\n    pairs[inputIndex] = targetIndex;\n  }\n\n  const inputOrder = [];\n\n  for (let i = 0; i < target.length; i++) {\n    inputOrder.push(pairs[i]);\n  }\n\n  return inputOrder\n}\n\nfunction multiLineStringToMultiLineString (from, to) {\n  let fromLineStrings = from.coordinates;\n  let toLineStrings = to.coordinates;\n\n  const lengthDifference = fromLineStrings.length - toLineStrings.length;\n\n  if (lengthDifference > 0) {\n    toLineStrings = splitLineStrings(toLineStrings, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromLineStrings = splitLineStrings(fromLineStrings, -lengthDifference);\n  }\n\n  fromLineStrings = matchLineStrings(fromLineStrings, toLineStrings);\n\n  const lineStringInterpolators = createLineStringInterpolators(fromLineStrings, toLineStrings);\n\n  return createMultiLineStringInterpolator(from, to, lineStringInterpolators)\n}\n\nfunction splitLineStrings (lineStrings, numberOfDesiredLineStrings) {\n  const lineStringLengths = getLengths(lineStrings);\n  const numberOfCutsPerLineString = assignCuts(lineStringLengths, numberOfDesiredLineStrings);\n\n  let resultingLineStrings = [];\n\n  for (let i = 0; i < numberOfCutsPerLineString.length; i++) {\n    const lineString = lineStrings[i];\n    const numberOfCuts = numberOfCutsPerLineString[i];\n\n    if (numberOfCuts === 0) {\n      resultingLineStrings.push(lineString);\n    }\n\n    if (numberOfCuts > 0) {\n      const numberOfDesiredPieces = numberOfCuts + 1;\n\n      resultingLineStrings = resultingLineStrings.concat(\n        cutLineString(lineString, numberOfDesiredPieces)\n      );\n    }\n  }\n\n  return resultingLineStrings\n}\n\nfunction getLengths (lineStrings) {\n  const lengths = [];\n\n  for (let i = 0; i < lineStrings.length; i++) {\n    lengths.push(\n      linearRingLength(lineStrings[i])\n    );\n  }\n\n  return lengths\n}\n\nfunction transshape (from, to) {\n  ensureValidInput(from, to);\n\n  // Polygon transitions\n  if (from.type === 'Polygon' && to.type === 'Polygon') {\n    return polygonToPolygon(from, to)\n  }\n\n  if (from.type === 'MultiPolygon' && to.type === 'Polygon') {\n    return multiPolygonToPolygon(from, to)\n  }\n\n  if (from.type === 'Polygon' && to.type === 'MultiPolygon') {\n    return polygonToMultiPolygon(from, to)\n  }\n\n  if (from.type === 'MultiPolygon' && to.type === 'MultiPolygon') {\n    return multiPolygonToMultiPolygon(from, to)\n  }\n\n  // LineString transitions\n  if (from.type === 'LineString' && to.type === 'LineString') {\n    return lineStringtoLineString(from, to)\n  }\n\n  if (from.type === 'MultiLineString' && to.type === 'LineString') {\n    return multiLineStringToLineString(from, to)\n  }\n\n  if (from.type === 'LineString' && to.type === 'MultiLineString') {\n    return lineStringToMultiLineString(from, to)\n  }\n\n  if (from.type === 'MultiLineString' && to.type === 'MultiLineString') {\n    return multiLineStringToMultiLineString(from, to)\n  }\n}\n\nfunction ensureValidInput (from, to) {\n  if (bothPolygons(from, to) || bothLines(from, to)) {\n    return\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction bothPolygons (from, to) {\n  return isPolygonOrMultiPolygon(from) && isPolygonOrMultiPolygon(to)\n}\n\nfunction bothLines (from, to) {\n  return isLineStringOrMultiLineString(from) && isLineStringOrMultiLineString(to)\n}\n\nfunction implode (geometry) {\n  ensureValidInput$1(geometry);\n\n  const centroid = calculateCentroid(geometry);\n  const implosionPoint = createSmallPolygonAroundPoint(centroid);\n\n  return transshape(geometry, implosionPoint)\n}\n\nfunction explode (geometry) {\n  ensureValidInput$1(geometry);\n\n  const centroid = calculateCentroid(geometry);\n  const explosionPoint = createSmallPolygonAroundPoint(centroid);\n\n  return transshape(explosionPoint, geometry)\n}\n\nfunction ensureValidInput$1 (geometry) {\n  if (!isPolygonOrMultiPolygon(geometry)) {\n    throw new Error('Invalid input')\n  }\n}\n\nfunction createSmallPolygonAroundPoint (point) {\n  const linearRingAroundPoint = makeSmallRectangleAroundPoint(point);\n  return {\n    type: 'Polygon',\n    coordinates: [linearRingAroundPoint]\n  }\n}\n\nfunction transshapeLayer (fromLayer, toLayer) {\n  ensureValidInput$2(fromLayer);\n\n  const keyOverlap = getKeyOverlap(fromLayer, toLayer);\n  const interpolatorObject = constructInterpolatorObject(fromLayer, toLayer, keyOverlap);\n\n  return createLayerInterpolator(fromLayer, toLayer, interpolatorObject)\n}\n\nfunction ensureValidInput$2 (fromLayer, toLayer) {\n  return every(Object.values(fromLayer), isPolygonOrMultiPolygon) &&\n    every(Object.values(fromLayer), isPolygonOrMultiPolygon)\n}\n\nfunction getKeyOverlap (fromLayer, toLayer) {\n  const keyOverlap = {};\n\n  for (const key in fromLayer) {\n    keyOverlap[key] = 'from';\n  }\n\n  for (const key in toLayer) {\n    if (keyOverlap[key]) {\n      keyOverlap[key] = 'both';\n    } else {\n      keyOverlap[key] = 'to';\n    }\n  }\n\n  return keyOverlap\n}\n\nfunction constructInterpolatorObject (fromLayer, toLayer, keyOverlap) {\n  const interpolatorObject = {};\n\n  for (const key in keyOverlap) {\n    const overlap = keyOverlap[key];\n\n    if (overlap === 'both') {\n      interpolatorObject[key] = transshape(fromLayer[key], toLayer[key]);\n    }\n\n    if (overlap === 'from') {\n      interpolatorObject[key] = implode(fromLayer[key]);\n    }\n\n    if (overlap === 'to') {\n      interpolatorObject[key] = explode(toLayer[key]);\n    }\n  }\n\n  return interpolatorObject\n}\n\nfunction createLayerInterpolator (fromLayer, toLayer, interpolatorObject) {\n  return function interpolator (t) {\n    if (t === 0) return fromLayer\n    if (t === 1) return toLayer\n\n    const layerObject = {};\n\n    for (const key in interpolatorObject) {\n      layerObject[key] = interpolatorObject[key](t);\n    }\n\n    return layerObject\n  }\n}\n\nexport { cutPolygon, cutPolygons, explode, implode, insertPointsLinearRing, matchLinearRings, rotatePointsLinearRing, transshape, transshapeLayer };\n","import { interpolate } from 'd3-interpolate'\nimport { transshape } from '@snlab/transshape'\n\nexport function transitionGeometry (fromGeometry, toGeometry) {\n  if (pointTransition(fromGeometry, toGeometry)) {\n    return interpolate(fromGeometry, toGeometry)\n  }\n\n  if (polygonTransition(fromGeometry, toGeometry)) {\n    return transshape(fromGeometry, toGeometry)\n  }\n\n  if (lineStringTransition(fromGeometry, toGeometry)) {\n    return transshape(fromGeometry, toGeometry)\n  }\n\n  throw new Error('Invalid input')\n}\n\nexport function transitionGeometries (fromLayer, toLayer) {\n  const firstFromGeometry = getFirstGeometry(fromLayer)\n  const firstToGeometry = getFirstGeometry(toLayer)\n\n  if (pointTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, interpolate)\n  }\n\n  if (polygonTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, transshape)\n  }\n\n  if (lineStringTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, transshape)\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction pointTransition (fromGeometry, toGeometry) {\n  return fromGeometry.type === 'Point' && toGeometry.type === 'Point'\n}\n\nconst polygonTypes = ['Polygon', 'MultiPolygon']\n\nfunction polygonTransition (fromGeometry, toGeometry) {\n  return polygonTypes.includes(fromGeometry.type) &&\n    polygonTypes.includes(toGeometry.type)\n}\n\nconst lineStringTypes = ['LineString', 'MultiLineString']\n\nfunction lineStringTransition (fromGeometry, toGeometry) {\n  return lineStringTypes.includes(fromGeometry.type) &&\n    lineStringTypes.includes(toGeometry.type)\n}\n\nfunction getFirstGeometry (layer) {\n  return layer[Object.keys(layer)[0]]\n}\n\nfunction transitionLayer (fromLayer, toLayer, interpolationMethod) {\n  const interpolatorObject = {}\n\n  for (const key in toLayer) {\n    if (key in fromLayer) {\n      interpolatorObject[key] = interpolationMethod(fromLayer[key], toLayer[key])\n    } else {\n      interpolatorObject[key] = () => toLayer[key]\n    }\n  }\n\n  return function interpolator (t) {\n    if (t === 0) return fromLayer\n    if (t === 1) return toLayer\n\n    const layer = {}\n    for (const key in interpolatorObject) {\n      layer[key] = interpolatorObject[key](t)\n    }\n\n    return layer\n  }\n}\n","export default function (bbox) {\n  return {\n    minX: bbox.x[0],\n    maxX: bbox.x[1],\n    minY: bbox.y[0],\n    maxY: bbox.y[1]\n  }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexRectangle (markData) {\n  const rectangleAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(rectangleAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = rectangleAttributes\n  item.markType = 'Rectangle'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexRectangleLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const rectangleAttributes = getRectangleAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(rectangleAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = rectangleAttributes\n    item.markType = 'Rectangle'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getRectangleAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexPolygon (markData) {\n  const polygonAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(polygonAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = polygonAttributes\n  item.markType = 'Polygon'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPolygonLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const polygonAttributes = getPolygonAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(polygonAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = polygonAttributes\n    item.markType = 'Polygon'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPolygonAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexLine (markData) {\n  const lineAttributes = markData.attributes\n  const markId = markData.markId\n\n  const pixelGeometry = lineAttributes.pixelGeometry\n  const lineStringCoords = pixelGeometry.coordinates\n\n  if (pixelGeometry.type === 'LineString') {\n    return indexLineString(lineStringCoords, lineAttributes, markId)\n  }\n\n  if (pixelGeometry.type === 'MultiLineString') {\n    return indexMultiLineString(lineStringCoords, lineAttributes, markId)\n  }\n}\n\nfunction indexLineString (lineStringCoords, lineAttributes, markId, lineStringIndex) {\n  const indexableSegments = []\n\n  for (let i = 0; i < lineStringCoords.length - 1; i++) {\n    const segment = [lineStringCoords[i], lineStringCoords[i + 1]]\n\n    const item = createSegmentItem(segment, lineAttributes, i)\n    if (lineStringIndex) {\n      // Only for MultiLineStrings\n      item.lineStringIndex = lineStringIndex\n    }\n    item.markId = markId\n    indexableSegments.push(item)\n  }\n\n  return indexableSegments\n}\n\nfunction indexMultiLineString (lineStringCoords, lineAttributes, markId) {\n  let indexableSegments = []\n\n  for (let lineStringIndex = 0; lineStringIndex < lineStringCoords.length; lineStringIndex++) {\n    indexableSegments = indexableSegments.concat(indexLineString(\n      lineStringCoords[lineStringIndex], lineAttributes, markId, lineStringIndex\n    ))\n  }\n\n  return indexableSegments\n}\n\nfunction createSegmentItem (segment, attributes, i) {\n  const segmentGeometry = { type: 'LineString', coordinates: segment }\n  const bbox = calculateBboxGeometry(segmentGeometry)\n  let item = createItemFromBbox(bbox)\n  item = takeIntoAccountStrokeWidth(item, attributes.strokeWidth)\n\n  item.attributes = {}\n  item.attributes.strokeWidth = attributes.strokeWidth\n  item.attributes.segmentGeometry = segmentGeometry\n  item.markType = 'Line'\n  item.segmentIndex = i\n\n  return item\n}\n\nfunction takeIntoAccountStrokeWidth (item, strokeWidth) {\n  const halfStrokeWidth = strokeWidth / 2\n\n  const newBbox = {\n    minX: item.minX - halfStrokeWidth,\n    maxX: item.maxX + halfStrokeWidth,\n    minY: item.minY - halfStrokeWidth,\n    maxY: item.maxY + halfStrokeWidth\n  }\n\n  return Object.assign(item, newBbox)\n}\n\nexport function indexLineLayer ({ layerAttributes, keyArray, layerId }) {\n  let items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n    const lineAttributes = createLineAttributes(layerAttributes, key)\n    const pixelGeometry = lineAttributes.pixelGeometry\n    const lineStringCoords = pixelGeometry.coordinates\n\n    if (pixelGeometry.type === 'LineString') {\n      let segments = indexLineString(\n        lineStringCoords, lineAttributes, key\n      )\n\n      segments = modifyForLayer(segments, layerId, key, i)\n      items = items.concat(segments)\n    }\n\n    if (pixelGeometry.type === 'MultiLineString') {\n      let segments = indexMultiLineString(\n        lineStringCoords, lineAttributes, key\n      )\n\n      segments = modifyForLayer(segments, layerId, key, i)\n      items = items.concat(segments)\n    }\n  }\n\n  return items\n}\n\nfunction createLineAttributes (attributes, key) {\n  return {\n    pixelGeometry: attributes.pixelGeometryObject[key],\n    strokeWidth: attributes.strokeWidthObject[key]\n  }\n}\n\nfunction modifyForLayer (segments, layerId, key, index) {\n  for (let i = 0; i < segments.length; i++) {\n    const segmentItem = segments[i]\n    delete segmentItem.markId\n\n    segmentItem.layerId = layerId\n    segmentItem.key = key\n    segmentItem.index = index\n  }\n\n  return segments\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexArea (markData) {\n  const areaAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(areaAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = areaAttributes\n  item.markType = 'Area'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexAreaLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const areaAttributes = getAreaAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(areaAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = areaAttributes\n    item.markType = 'Area'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getAreaAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexSymbol (markData) {\n  const symbolAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(symbolAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = symbolAttributes\n  item.markType = 'Symbol'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexSymbolLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const symbolAttributes = getSymbolAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(symbolAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = symbolAttributes\n    item.markType = 'Symbol'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getSymbolAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { indexPoint, indexPointLayer } from './indexPoint.js'\nimport { indexRectangle, indexRectangleLayer } from './indexRectangle.js'\nimport { indexPolygon, indexPolygonLayer } from './indexPolygon.js'\nimport { indexLine, indexLineLayer } from './indexLine.js'\nimport { indexArea, indexAreaLayer } from './indexArea.js'\nimport { indexSymbol, indexSymbolLayer } from './indexSymbol.js'\n\nexport const markIndexing = {\n  Point: indexPoint,\n  Rectangle: indexRectangle,\n  Polygon: indexPolygon,\n  Line: indexLine,\n  Label: indexPoint,\n  Area: indexArea,\n  Symbol: indexSymbol\n}\n\nexport const layerIndexing = {\n  Point: indexPointLayer,\n  Rectangle: indexRectangleLayer,\n  Polygon: indexPolygonLayer,\n  Line: indexLineLayer,\n  Label: indexPointLayer,\n  Area: indexAreaLayer,\n  Symbol: indexSymbolLayer\n}\n","import BaseInteractionInterface from './BaseInteractionInterface.js'\nimport { markIndexing, layerIndexing } from './createIndexableData'\n\nexport default class MarkInteractionInterface extends BaseInteractionInterface {\n  constructor (interactionManager, InteractionHandlers) {\n    super(interactionManager, InteractionHandlers)\n\n    this._indexableMarks = {}\n    this._indexableLayers = {}\n  }\n\n  // Mark loading and removing\n  loadMark (markType, markData) {\n    const indexingFunction = markIndexing[markType]\n    const indexableMark = indexingFunction(markData)\n\n    const markId = markData.markId\n    this._indexableMarks[markId] = indexableMark\n  }\n\n  markIsLoaded (markId) {\n    return markId in this._indexableMarks\n  }\n\n  removeMark (markId) {\n    delete this._indexableMarks[markId]\n  }\n\n  // Layer loading and removing\n  loadLayer (layerType, layerData) {\n    const indexingFunction = layerIndexing[layerType]\n    const indexableLayer = indexingFunction(layerData)\n\n    const layerId = layerData.layerId\n    this._indexableLayers[layerId] = indexableLayer\n  }\n\n  layerIsLoaded (layerId) {\n    return layerId in this._indexableLayers\n  }\n\n  removeLayer (layerId) {\n    delete this._indexableLayers[layerId]\n  }\n\n  // Add/remove mark interactions\n  addMarkInteraction (interactionName, markId, callback) {\n    this._getHandler(interactionName).addMarkInteraction(markId, callback)\n  }\n\n  removeAllMarkInteractions (markId) {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasMark(markId)) {\n        handler.removeMarkInteraction(markId)\n      }\n    }\n  }\n\n  // Add/remove layer interactions\n  addLayerInteraction (interactionName, layerId, callback) {\n    this._getHandler(interactionName).addLayerInteraction(layerId, callback)\n  }\n\n  removeAllLayerInteractions (layerId) {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasLayer(layerId)) {\n        handler.removeLayerInteraction(layerId)\n      }\n    }\n  }\n}\n","import BaseInteractionInterface from './BaseInteractionInterface.js'\n\nexport default class SectionInteractionInterface extends BaseInteractionInterface {\n  addInteraction (interactionName, callback) {\n    this._getHandler(interactionName).addInteraction(callback)\n  }\n\n  removeAllInteractions () {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasInteraction()) {\n        handler.removeInteraction()\n      }\n    }\n  }\n}\n","export default class BaseInteractionHandler {\n  constructor (interactionManager, { eventName, interactionName }) {\n    this._interactionManager = interactionManager\n    this._eventName = eventName\n    this._interactionName = interactionName\n  }\n\n  interactionManager () {\n    return this._interactionManager\n  }\n\n  eventManager () {\n    return this._interactionManager._eventManager\n  }\n\n  section () {\n    return this._interactionManager._section\n  }\n\n  id () {\n    return this._interactionManager._id\n  }\n\n  _addEventListener () {\n    const handler = this._handleEvent.bind(this)\n\n    const eventManager = this.eventManager()\n    const listenerId = this.getId()\n\n    const events = isArray(this._eventName) ? this._eventName : [this._eventName]\n\n    for (const event of events) {\n      eventManager\n        .eventTracker(event)\n        .addListener(listenerId, handler)\n    }\n  }\n\n  _removeEventListener () {\n    const eventManager = this.eventManager()\n    const listenerId = this.getId()\n\n    const events = isArray(this._eventName) ? this._eventName : [this._eventName]\n\n    for (const event of events) {\n      eventManager\n        .eventTracker(event)\n        .removeListener(listenerId)\n    }\n  }\n}\n\nfunction isArray (value) {\n  return value.constructor === Array\n}\n","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).RBush=i()}(this,function(){\"use strict\";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});\n","import { pointDistance } from '../../../../utils/geometryUtils'\n\nexport default function pointCollision (coordinates, pointAttributes) {\n  const distance = pointDistance(\n    [coordinates.x, coordinates.y],\n    pointAttributes.pixelGeometry.coordinates\n  )\n\n  return distance < pointAttributes.radius\n}\n","import pointCollision from './pointCollision.js'\nimport rectangleCollision from './rectangleCollision.js'\nimport polygonCollision from './polygonCollision.js'\nimport lineCollision from './lineCollision.js'\nimport symbolCollision from './symbolCollision.js'\nimport areaCollision from './areaCollision.js'\n\nexport default {\n  Point: pointCollision,\n  Rectangle: rectangleCollision,\n  Polygon: polygonCollision,\n  Line: lineCollision,\n  Label: pointCollision,\n  Symbol: symbolCollision,\n  Area: areaCollision\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function rectangleCollision (coordinates, rectangleAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, rectangleAttributes.screenGeometry)\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function polygonCollision (coordinates, polygonAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, polygonAttributes.screenGeometry)\n}\n","import { pointIntersectsLineSegment } from '../../../../utils/geometryUtils'\n\nexport default function lineCollision (coordinates, lineAttributes) {\n  const mouseCoordinates = [coordinates.x, coordinates.y]\n  return pointIntersectsLineSegment(\n    mouseCoordinates,\n    lineAttributes.segmentGeometry.coordinates,\n    lineAttributes.strokeWidth\n  )\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function symbolCollision (coordinates, symbolAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, symbolAttributes.screenGeometry)\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function areaCollision (coordinates, areaAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, areaAttributes.screenGeometry)\n}\n","import RBush from 'rbush'\nimport collisionTests from './collisionTests'\n\nexport default class SpatialIndex {\n  constructor (interactionHandler, getMark, getLayer) {\n    this._rbush = new RBush()\n    this._interactionHandler = interactionHandler\n\n    this._getMark = getMark.bind(interactionHandler)\n    this._getLayer = getLayer.bind(interactionHandler)\n  }\n\n  // Layer indexing and unindexing\n  indexLayer (layerId) {\n    const layer = this._getLayer(layerId)\n    this._rbush.load(layer)\n  }\n\n  unindexLayer (layerId) {\n    const layer = this._getLayer(layerId)\n\n    for (let i = 0; i < layer.length; i++) {\n      const item = layer[i]\n      this._rbush.remove(item)\n    }\n  }\n\n  // Mark loading and removing\n  indexMark (markId) {\n    const mark = this._getMark(markId)\n\n    if (multipleSegments(mark)) {\n      this._rbush.load(mark)\n    } else {\n      this._rbush.insert(mark)\n    }\n  }\n\n  unindexMark (markId) {\n    const mark = this._getMark(markId)\n\n    if (multipleSegments(mark)) {\n      for (let i = 0; i < mark.length; i++) {\n        const item = mark[i]\n        this._rbush.remove(item)\n      }\n    } else {\n      this._rbush.remove(mark)\n    }\n  }\n\n  // Query functions\n  queryMouseCoordinates (mouseCoordinates, radius) {\n    const searchArea = searchAreaFromCoordinates(mouseCoordinates, radius)\n    const indexQueryResults = this._rbush.search(searchArea)\n\n    return this._getHits(mouseCoordinates, indexQueryResults)\n  }\n\n  queryBoundingBox (boundingBox) {\n    return this._rbush.search(boundingBox)\n  }\n\n  // Internal\n  _getHits (coordinates, indexQueryResults) {\n    const hits = []\n\n    for (let i = 0; i < indexQueryResults.length; i++) {\n      const indexQueryResult = indexQueryResults[i]\n      const collisionTest = collisionTests[indexQueryResult.markType]\n\n      if (collisionTest(coordinates, indexQueryResult.attributes)) {\n        hits.push(indexQueryResult)\n      }\n    }\n\n    return hits\n  }\n}\n\nfunction searchAreaFromCoordinates (coordinates, radius = 3) {\n  return {\n    minX: coordinates.x - radius,\n    maxX: coordinates.x + radius,\n    minY: coordinates.y - radius,\n    maxY: coordinates.y + radius\n  }\n}\n\nfunction multipleSegments (indexableItem) {\n  return indexableItem.constructor === Array\n}\n","import BaseInteractionHandler from './BaseInteractionHandler.js'\nimport SpatialIndex from '../../SpatialIndex'\n\nexport default class MarkInteractionHandler extends BaseInteractionHandler {\n  constructor (interactionManager, options) {\n    super(interactionManager, options)\n\n    const getMark = function (markId) {\n      return this._interactionManager.marks()._indexableMarks[markId]\n    }\n\n    const getLayer = function (layerId) {\n      return this._interactionManager.marks()._indexableLayers[layerId]\n    }\n\n    this._spatialIndex = new SpatialIndex(this, getMark, getLayer)\n\n    this._numberOfInteractions = 0\n\n    this._markCallbacks = {}\n    this._layerCallbacks = {}\n  }\n\n  // Add/remove mark interactions\n  addMarkInteraction (markId, callback) {\n    this._addEventListenerIfNecessary()\n    this._numberOfInteractions++\n    this._markCallbacks[markId] = callback\n\n    this._spatialIndex.indexMark(markId)\n  }\n\n  hasMark (markId) {\n    return markId in this._markCallbacks\n  }\n\n  removeMarkInteraction (markId) {\n    this._removeEventListenerIfNecessary()\n    delete this._markCallbacks[markId]\n    this._numberOfInteractions--\n\n    this._spatialIndex.unindexMark(markId)\n  }\n\n  // Add/remove layer interactions\n  addLayerInteraction (layerId, callback) {\n    if (!(layerId in this._layerCallbacks)) {\n      this._addEventListenerIfNecessary()\n      this._numberOfInteractions++\n      this._layerCallbacks[layerId] = callback\n\n      this._spatialIndex.indexLayer(layerId)\n    }\n  }\n\n  hasLayer (layerId) {\n    return layerId in this._layerCallbacks\n  }\n\n  removeLayerInteraction (layerId) {\n    if (layerId in this._layerCallbacks) {\n      this._numberOfInteractions--\n      delete this._layerCallbacks[layerId]\n      this._removeEventListenerIfNecessary()\n\n      this._spatialIndex.unindexLayer(layerId)\n    }\n  }\n\n  _addEventListenerIfNecessary () {\n    if (this._numberOfInteractions === 0) {\n      this._addEventListener()\n    }\n  }\n\n  _removeEventListenerIfNecessary () {\n    if (this._numberOfInteractions === 0) {\n      this._removeEventListener()\n    }\n  }\n\n  getId () {\n    return `${this.id()}-mark-${this._interactionName}`\n  }\n}\n","export function createMarkEvent (eventType, eventOptions, hit, nativeEvent) {\n  eventOptions.markType = hit.markType\n  eventOptions.hitBbox = extractBbox(hit)\n  eventOptions.hitSource = 'mark'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nexport function createLayerEvent (eventType, eventOptions, hit, nativeEvent) {\n  eventOptions.markType = hit.markType\n  eventOptions.hitBbox = extractBbox(hit)\n  eventOptions.key = hit.key\n  eventOptions.index = hit.index\n  eventOptions.hitSource = 'layer'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nexport function createSectionEvent (eventType, eventOptions, nativeEvent) {\n  eventOptions.hitSource = 'section'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nfunction extractBbox (hit) {\n  return { minX: hit.minX, maxX: hit.maxX, minY: hit.minY, maxY: hit.maxY }\n}\n\nfunction createEvent (eventType, eventOptions, nativeEvent) {\n  const event = eventOptions\n\n  event.type = eventType\n  event.nativeType = nativeEvent.type\n\n  for (const key of INTERESTING_NATIVE_KEYS) {\n    event[key] = nativeEvent[key]\n  }\n\n  return event\n}\n\nconst INTERESTING_NATIVE_KEYS = [\n  'altKey', 'ctrlKey', 'shiftKey',\n  'clientX', 'clientY',\n  'pageX', 'pageY',\n  'screenX', 'screenY',\n  'timeStamp'\n]\n\nexport function createSelectMarkEvent (eventType, hit) {\n  const event = {\n    type: eventType,\n    markType: hit.markType,\n    hitSource: 'mark'\n  }\n\n  return event\n}\n\nexport function createSelectLayerEvent (eventType, hit) {\n  const event = {\n    type: eventType,\n    markType: hit.markType,\n    key: hit.key,\n    index: hit.index,\n    hitSource: 'layer'\n  }\n\n  return event\n}\n","export function getLocalCoordinates (screenCoordinates, interactionManager) {\n  const section = interactionManager._section\n  const inverseTotalTransformation = section.inverseTotalTransformation\n\n  const { minX, maxX, minY, maxY } = section.paddedBbox\n\n  const clampedX = clamp(screenCoordinates.x, minX, maxX)\n  const clampedY = clamp(screenCoordinates.y, minY, maxY)\n\n  const [localX, localY] = inverseTotalTransformation([clampedX, clampedY])\n\n  return { x: localX, y: localY }\n}\n\nexport function clamp (value, min, max) {\n  return Math.max(min, Math.min(value, max))\n}\n","export function coordinatesAreInsideSection (hit, section) {\n  const bbox = section.bbox\n\n  return (\n    hit.x >= bbox.minX &&\n    hit.x <= bbox.maxX &&\n    hit.y >= bbox.minY &&\n    hit.y <= bbox.maxY\n  )\n}\n\nexport function hitIsMark (hit) {\n  return 'markId' in hit\n}\n\nexport function hitIsInLayer (hit) {\n  return 'layerId' in hit\n}\n\nexport function getHitId (hit) {\n  if (hitIsMark(hit)) return hit.markId\n  if (hitIsInLayer(hit)) return hit.layerId + '-' + hit.key\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class ClickHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'click',\n      eventName: 'click'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const clickEvent = createMarkEvent('click', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](clickEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const clickEvent = createLayerEvent('click', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](clickEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MouseoverHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n\n    this._previousMouseoverIds = {}\n    this._currentMouseoverIds = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentMouseoverIds[hitId] = true\n\n      if (!(hitId in this._previousMouseoverIds)) {\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousMouseoverIds = this._currentMouseoverIds\n    this._currentMouseoverIds = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mouseoverEvent = createMarkEvent('mouseover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mouseoverEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mouseoverEvent = createLayerEvent('mouseover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mouseoverEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MouseoutHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseout',\n      eventName: 'mousemove'\n    })\n\n    this._previousMouseoverHits = {}\n    this._currentMouseoverHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentMouseoverHits[hitId] = hit\n    }\n\n    for (const hitId in this._previousMouseoverHits) {\n      if (!(hitId in this._currentMouseoverHits)) {\n        const hit = this._previousMouseoverHits[hitId]\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousMouseoverHits = this._currentMouseoverHits\n    this._currentMouseoverHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mouseoutEvent = createMarkEvent('mouseout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mouseoutEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mouseoutEvent = createLayerEvent('mouseout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mouseoutEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class MousedownHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedown',\n      eventName: 'mousedown'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const mousedownEvent = createMarkEvent('mousedown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](mousedownEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const mousedownEvent = createLayerEvent('mousedown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](mousedownEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class MouseupHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseup',\n      eventName: 'mouseup'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const mouseupEvent = createMarkEvent('mouseup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](mouseupEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const mouseupEvent = createLayerEvent('mouseup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](mouseupEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MousedragHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedrag',\n      eventName: ['mousedown', 'mousemove', 'mouseup']\n    })\n\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (nativeEvent.eventName === 'mousedown') {\n      this._handleMousedown(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'mousemove') {\n      this._handleMousemove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'mouseup') {\n      this._handleMouseup(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleMousedown (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'start')\n    }\n  }\n\n  _handleMousemove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'drag')\n    }\n  }\n\n  _handleMouseup (screenCoordinates, nativeEvent) {\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'end')\n    }\n\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent, dragType) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mousedragEvent = createMarkEvent('mousedrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mousedragEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mousedragEvent = createLayerEvent('mousedrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mousedragEvent)\n    }\n  }\n}\n","import BaseInteractionHandler from './BaseInteractionHandler.js'\n\nexport default class SectionInteractionHandler extends BaseInteractionHandler {\n  constructor (interactionManager, options) {\n    super(interactionManager, options)\n    this._callback = undefined\n  }\n\n  addInteraction (callback) {\n    this._addEventListener()\n    this._callback = callback\n  }\n\n  hasInteraction () {\n    return this._callback !== undefined\n  }\n\n  removeInteraction () {\n    if (this._callback) {\n      this._callback = undefined\n      this._removeEventListener()\n    }\n  }\n\n  getId () {\n    return `${this.id()}-section-${this._interactionName}`\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport getScrollLineHeight from '../../utils/getScrollLineHeight.js'\n\nexport default class WheelHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'wheel',\n      eventName: 'wheel'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    nativeEvent.preventDefault()\n    nativeEvent.stopPropagation()\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n      const delta = getDelta(nativeEvent)\n\n      const wheelEvent = createSectionEvent('wheel', {\n        screenCoordinates,\n        localCoordinates,\n        delta\n      }, nativeEvent)\n\n      this._callback(wheelEvent)\n    }\n  }\n}\n\nlet scrollLineHeight\n\nfunction getDelta (nativeEvent) {\n  let delta\n\n  // Legacy\n  // IE pixels\n  if ('wheelDelta' in nativeEvent && nativeEvent.wheelDelta !== 0) {\n    delta = -nativeEvent.wheelDelta\n  }\n\n  // Mozilla\n  if ('detail' in nativeEvent && nativeEvent.detail !== 0) {\n    delta = -nativeEvent.detail\n  }\n\n  // Most other cases\n  if ('deltaY' in nativeEvent && nativeEvent.deltaY !== 0) {\n    delta = -nativeEvent.deltaY\n  }\n\n  if (!scrollLineHeight) {\n    scrollLineHeight = getScrollLineHeight()\n  }\n\n  return delta * (nativeEvent.deltaMode ? scrollLineHeight : 1) / 500\n}\n","// Taken from:\n// https://stackoverflow.com/a/37474225/7237112\n\nexport default function getScrollLineHeight () {\n  var r\n  var iframe = document.createElement('iframe')\n  iframe.src = '#'\n  document.body.appendChild(iframe)\n  var iwin = iframe.contentWindow\n  var idoc = iwin.document\n  idoc.open()\n  idoc.write('<!DOCTYPE html><html><head></head><body><span>a</span></body></html>')\n  idoc.close()\n  var span = idoc.body.firstElementChild\n  r = span.offsetHeight\n  document.body.removeChild(iframe)\n\n  return r\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class ClickHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'click',\n      eventName: 'click'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const clickEvent = createSectionEvent('click', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(clickEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MousedownHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedown',\n      eventName: 'mousedown'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mousedownEvent = createSectionEvent('mousedown', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mousedownEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseupHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseup',\n      eventName: 'mouseup'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mouseupEvent = createSectionEvent('mouseup', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mouseupEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseoverHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n\n    this._mouseCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._mouseCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const mousedownEvent = createSectionEvent('mouseover', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(mousedownEvent)\n        this._mouseCurrentlyOverSection = true\n      }\n    } else {\n      if (this._mouseCurrentlyOverSection) {\n        this._mouseCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseoutHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseout',\n      eventName: 'mousemove'\n    })\n\n    this._mouseCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._mouseCurrentlyOverSection) {\n        this._mouseCurrentlyOverSection = true\n      }\n    } else {\n      if (this._mouseCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const mouseoutEvent = createSectionEvent('mouseout', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(mouseoutEvent)\n        this._mouseCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MousemoveHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mousemoveEvent = createSectionEvent('mousemove', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mousemoveEvent)\n    }\n  }\n}\n","import BaseInteractionManager from '../base/managers/BaseInteractionManager.js'\nimport MarkInteractionInterface from '../base/interfaces/MarkInteractionInterface.js'\nimport SectionInteractionInterface from '../base/interfaces/SectionInteractionInterface.js'\n\nimport * as MarkInteractionHandlers from './mark'\nimport * as SectionInteractionHandlers from './section'\n\nexport default class MouseInteractionManager extends BaseInteractionManager {\n  constructor () {\n    super()\n\n    this._markInteractionInterface = new MarkInteractionInterface(this, MarkInteractionHandlers)\n    this._sectionInteractionInterface = new SectionInteractionInterface(this, SectionInteractionHandlers)\n  }\n}\n","export default function numberOfTouches (screenCoordinates) {\n  if (screenCoordinates.constructor === Object) return 1\n\n  return screenCoordinates.length\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdownHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdown',\n      eventName: 'touchstart'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const touchdownEvent = createMarkEvent('touchdown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](touchdownEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const touchdownEvent = createLayerEvent('touchdown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](touchdownEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchupHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchup',\n      eventName: ['touchend', 'touchcancel']\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const touchupEvent = createMarkEvent('touchup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](touchupEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const touchupEvent = createLayerEvent('touchup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](touchupEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoverHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchover',\n      eventName: ['touchstart', 'touchmove']\n    })\n\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._previousHits[hitId] = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = true\n\n      if (!(hitId in this._previousHits)) {\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousHits = this._currentHits\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchoverEvent = createMarkEvent('touchover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchoverEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchoverEvent = createLayerEvent('touchover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchoverEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoutHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchout',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend()\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._previousHits[hitId] = hit\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n    }\n\n    for (const hitId in this._previousHits) {\n      if (!(hitId in this._currentHits)) {\n        const hit = this._previousHits[hitId]\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousHits = this._currentHits\n    this._currentHits = {}\n  }\n\n  _handleTouchend () {\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchoutEvent = createMarkEvent('touchout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchoutEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchoutEvent = createLayerEvent('touchout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchoutEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdragHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdrag',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'start')\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'drag')\n    }\n  }\n\n  _handleTouchend (screenCoordinates, nativeEvent) {\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'end')\n    }\n\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent, dragType) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchdragEvent = createMarkEvent('touchdrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchdragEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchdragEvent = createLayerEvent('touchdrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchdragEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class PinchHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'pinch',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._previousTouchDistance = undefined\n  }\n\n  _handleEvent (screenCoordinatesArray, nativeEvent) {\n    if (nativeEvent.type === 'touchstart') {\n      this._handleTouchstart(screenCoordinatesArray, nativeEvent)\n    }\n\n    if (nativeEvent.type === 'touchmove') {\n      this._handleTouchmove(screenCoordinatesArray, nativeEvent)\n    }\n\n    if (nativeEvent.type === 'touchend') {\n      this._handleTouchend(screenCoordinatesArray, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinatesArray, nativeEvent) {\n    if (numberOfTouches(screenCoordinatesArray) !== 2) {\n      return\n    }\n\n    const section = this.section()\n\n    if (allCoordinatesAreInsideSection(screenCoordinatesArray, section)) {\n      this._previousTouchDistance = getDistance(screenCoordinatesArray)\n    }\n  }\n\n  _handleTouchmove (screenCoordinatesArray, nativeEvent) {\n    if (numberOfTouches(screenCoordinatesArray) !== 2) {\n      return\n    }\n\n    if (this._previousTouchDistance === undefined) return\n\n    const section = this.section()\n\n    if (allCoordinatesAreInsideSection(screenCoordinatesArray, section)) {\n      const sectionHeight = section.maxY - section.minY\n\n      const center = getCenter(screenCoordinatesArray)\n\n      const touchDistance = getDistance(screenCoordinatesArray)\n      const touchDelta = this._previousTouchDistance - touchDistance\n      const relativeTouchDelta = touchDelta / sectionHeight\n\n      this._previousTouchDistance = touchDistance\n      this._fireCallback(screenCoordinatesArray, nativeEvent, relativeTouchDelta, center)\n    }\n  }\n\n  _handleTouchend (screenCoordinatesArray, nativeEvent) {\n    this._previousTouchDistance = undefined\n  }\n\n  _fireCallback (screenCoordinatesArray, nativeEvent, delta, center) {\n    const screenCenter = center\n    const localCenter = getLocalCoordinates(screenCenter, this.interactionManager())\n    const screenCoordinates = screenCoordinatesArray\n    const localCoordinates = screenCoordinatesArray.map(screenCoordinates => {\n      return getLocalCoordinates(screenCoordinates, this.interactionManager())\n    })\n\n    const pinchEvent = createSectionEvent('pinch', {\n      screenCenter,\n      localCenter,\n      screenCoordinates,\n      localCoordinates,\n      delta\n    }, nativeEvent)\n\n    this._callback(pinchEvent)\n  }\n}\n\nfunction allCoordinatesAreInsideSection (screenCoordinatesArray, section) {\n  return screenCoordinatesArray.every(screenCoordinates => {\n    return coordinatesAreInsideSection(screenCoordinates, section)\n  })\n}\n\nfunction getDistance (screenCoordinatesArray) {\n  const [coords1, coords2] = screenCoordinatesArray\n  return Math.sqrt((coords2.x - coords1.x) ** 2 + (coords2.y - coords1.y) ** 2)\n}\n\nfunction getCenter (screenCoordinatesArray) {\n  const [coords1, coords2] = screenCoordinatesArray\n  return { x: (coords2.x + coords1.x) / 2, y: (coords2.y + coords1.y) / 2 }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdownHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdown',\n      eventName: 'touchstart'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchdownEvent = createSectionEvent('touchdown', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchdownEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchmoveHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchmove',\n      eventName: 'touchmove'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchmoveEvent = createSectionEvent('touchmove', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchmoveEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchupHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchup',\n      eventName: ['touchend', 'touchcancel']\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchupEvent = createSectionEvent('touchup', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchupEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoverHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchover',\n      eventName: ['touchstart', 'touchmove']\n    })\n\n    this._fingerCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      this._fingerCurrentlyOverSection = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._fingerCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const touchoverEvent = createSectionEvent('touchover', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(touchoverEvent)\n        this._fingerCurrentlyOverSection = true\n      }\n    } else {\n      if (this._fingerCurrentlyOverSection) {\n        this._fingerCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoutHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchout',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._fingerCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend()\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      this._fingerCurrentlyOverSection = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._fingerCurrentlyOverSection) {\n        this._fingerCurrentlyOverSection = true\n      }\n    } else {\n      if (this._fingerCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const touchoutEvent = createSectionEvent('touchout', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(touchoutEvent)\n        this._fingerCurrentlyOverSection = false\n      }\n    }\n  }\n\n  _handleTouchend () {\n    this._fingerCurrentlyOverSection = false\n  }\n}\n","import BaseInteractionManager from '../base/managers/BaseInteractionManager.js'\nimport MarkInteractionInterface from '../base/interfaces/MarkInteractionInterface.js'\nimport SectionInteractionInterface from '../base/interfaces/SectionInteractionInterface.js'\n\nimport * as MarkInteractionHandlers from './mark'\nimport * as SectionInteractionHandlers from './section'\n\nexport default class TouchInteractionManager extends BaseInteractionManager {\n  constructor () {\n    super()\n\n    this._markInteractionInterface = new MarkInteractionInterface(this, MarkInteractionHandlers)\n    this._sectionInteractionInterface = new SectionInteractionInterface(this, SectionInteractionHandlers)\n  }\n}\n","export default function (point) {\n  return {\n    x: [point[0], point[0]],\n    y: [point[1], point[1]]\n  }\n}\n","import bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexPoint (markData) {\n  const pointAttributes = markData.attributes\n\n  const bbox = bboxPoint(pointAttributes.pixelGeometry.coordinates)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = pointAttributes\n  item.markType = 'Point'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPointLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const pointAttributes = getPointAttributes(layerAttributes, key)\n    const bbox = bboxPoint(pointAttributes.pixelGeometry.coordinates)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = pointAttributes\n    item.markType = 'Point'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPointAttributes (layerAttributes, key) {\n  return {\n    pixelGeometry: layerAttributes.pixelGeometryObject[key],\n    radius: layerAttributes.radiusObject[key]\n  }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexRectangle (markData) {\n  const rectangleAttributes = markData.attributes\n\n  const centroid = calculateCentroid(rectangleAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = rectangleAttributes\n  item.markType = 'Rectangle'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexRectangleLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const rectangleAttributes = getRectangleAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(rectangleAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = rectangleAttributes\n    item.markType = 'Rectangle'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getRectangleAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexPolygon (markData) {\n  const polygonAttributes = markData.attributes\n\n  const centroid = calculateCentroid(polygonAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = polygonAttributes\n  item.markType = 'Polygon'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPolygonLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const polygonAttributes = getPolygonAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(polygonAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = polygonAttributes\n    item.markType = 'Polygon'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPolygonAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexLine (markData) {\n  const lineAttributes = markData.attributes\n\n  const centroid = calculateCentroid(lineAttributes.pixelGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = lineAttributes\n  item.markType = 'Line'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexLineLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const lineAttributes = getLineAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(lineAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = lineAttributes\n    item.markType = 'Line'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getLineAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.pixelGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexArea (markData) {\n  const areaAttributes = markData.attributes\n\n  const centroid = calculateCentroid(areaAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = areaAttributes\n  item.markType = 'Area'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexAreaLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const areaAttributes = getAreaAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(areaAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = areaAttributes\n    item.markType = 'Area'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getAreaAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { indexPoint, indexPointLayer } from './indexPoint.js'\nimport { indexRectangle, indexRectangleLayer } from './indexRectangle.js'\nimport { indexPolygon, indexPolygonLayer } from './indexPolygon.js'\nimport { indexLine, indexLineLayer } from './indexLine.js'\nimport { indexArea, indexAreaLayer } from './indexArea.js'\n\nexport const markIndexing = {\n  Point: indexPoint,\n  Rectangle: indexRectangle,\n  Polygon: indexPolygon,\n  Line: indexLine,\n  Label: indexPoint,\n  Area: indexArea\n}\n\nexport const layerIndexing = {\n  Point: indexPointLayer,\n  Rectangle: indexRectangleLayer,\n  Polygon: indexPolygonLayer,\n  Line: indexLineLayer,\n  Label: indexPointLayer,\n  Area: indexAreaLayer\n}\n","import SpatialIndex from '../SpatialIndex'\nimport { markIndexing, layerIndexing } from './createIndexableData'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../utils/hitUtils.js'\nimport { createSelectMarkEvent, createSelectLayerEvent } from '../utils/createEvent.js'\nimport { calculateBboxGeometry, pointInPolygon } from '../../../utils/geometryUtils'\n\nexport default class SelectManager {\n  constructor () {\n    this._selectableMarks = {}\n    this._selectableLayers = {}\n\n    this._markCallbacks = {}\n    this._layerCallbacks = {}\n\n    this._previousSelection = {}\n    this._currentSelection = {}\n\n    const getMark = function (markId) {\n      return this._selectableMarks[markId]\n    }\n\n    const getLayer = function (layerId) {\n      return this._selectableLayers[layerId]\n    }\n\n    this._spatialIndex = new SpatialIndex(this, getMark, getLayer)\n\n    this._selectPolygon = { start: undefined, points: [] }\n  }\n\n  // Loading/indexing\n  loadMark (markType, markData, callbacks) {\n    const indexingFunction = markIndexing[markType]\n    const indexableMark = indexingFunction(markData)\n\n    const markId = markData.markId\n\n    this._selectableMarks[markId] = indexableMark\n    this._markCallbacks[markId] = callbacks\n\n    this._spatialIndex.indexMark(markId)\n  }\n\n  markIsLoaded (markId) {\n    return markId in this._selectableMarks\n  }\n\n  removeMark (markId) {\n    this._spatialIndex.unindexMark(markId)\n\n    delete this._selectableMarks[markId]\n    delete this._markCallbacks[markId]\n  }\n\n  loadLayer (layerType, layerData, callbacks) {\n    const indexingFunction = layerIndexing[layerType]\n    const indexableLayer = indexingFunction(layerData)\n\n    const layerId = layerData.layerId\n\n    this._selectableLayers[layerId] = indexableLayer\n    this._layerCallbacks[layerId] = callbacks\n\n    this._spatialIndex.indexLayer(layerId)\n  }\n\n  layerIsLoaded (layerId) {\n    return layerId in this._selectableLayers\n  }\n\n  removeLayer (layerId) {\n    this._spatialIndex.unindexLayer(layerId)\n\n    delete this._selectableLayers[layerId]\n    delete this._layerCallbacks[layerId]\n  }\n\n  // Rectangle\n  selectRectangle (rectangle) {\n    const hits = this._spatialIndex.queryBoundingBox(rectangleToRBushBbox(rectangle))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentSelection[hitId] = hit\n\n      this._fireSelectCallback(hit)\n    }\n  }\n\n  updateSelectRectangle (rectangle) {\n    this._previousSelection = this._currentSelection\n    this._currentSelection = {}\n\n    const hits = this._spatialIndex.queryBoundingBox(rectangleToRBushBbox(rectangle))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentSelection[hitId] = hit\n\n      if (!(hitId in this._previousSelection)) {\n        this._fireSelectCallback(hit)\n      }\n    }\n\n    for (const hitId in this._previousSelection) {\n      if (!(hitId in this._currentSelection)) {\n        const hit = this._previousSelection[hitId]\n\n        this._fireDeselectCallback(hit)\n      }\n    }\n  }\n\n  resetSelectRectangle () {\n    for (const hitId in this._currentSelection) {\n      const hit = this._currentSelection[hitId]\n\n      this._fireDeselectCallback(hit)\n    }\n\n    this._previousSelection = {}\n    this._currentSelection = {}\n  }\n\n  // Polygon\n  startSelectPolygon (startCoordinates) {\n    this._selectPolygon.start = parseCoordinates(startCoordinates)\n  }\n\n  addPointToSelectPolygon (coordinates) {\n    this._selectPolygon.points.push(parseCoordinates(coordinates))\n\n    if (this._selectPolygon.points.length > 1) {\n      const lastThreePointsPolygon = this._getLastThreePointsPolygon()\n      const bbox = calculateBboxGeometry(lastThreePointsPolygon)\n\n      const hits = this._spatialIndex.queryBoundingBox(bboxToRBushBbox(bbox))\n\n      for (let i = 0; i < hits.length; i++) {\n        const hit = hits[i]\n        const hitCentroid = [hit.minX, hit.minY]\n\n        if (pointInPolygon(hitCentroid, lastThreePointsPolygon)) {\n          const hitId = getHitId(hit)\n\n          if (hitId in this._currentSelection) {\n            this._fireDeselectCallback(hit)\n            delete this._currentSelection[hitId]\n          } else {\n            this._fireSelectCallback(hit)\n            this._currentSelection[hitId] = hit\n          }\n        }\n      }\n    }\n  }\n\n  moveSelectPolygon (_delta) {\n    this._previousSelection = this._currentSelection\n    this._currentSelection = {}\n\n    const delta = parseCoordinates(_delta)\n\n    const start = this._selectPolygon.start\n    const points = this._selectPolygon.points\n\n    this._selectPolygon.start = [start[0] + delta[0], start[1] + delta[1]]\n    this._selectPolygon.points = points.map(point => [point[0] + delta[0], point[1] + delta[1]])\n\n    const polygon = this.getSelectPolygon()\n    const bbox = calculateBboxGeometry(polygon)\n\n    const hits = this._spatialIndex.queryBoundingBox(bboxToRBushBbox(bbox))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitCentroid = [hit.minX, hit.minY]\n\n      if (pointInPolygon(hitCentroid, polygon)) {\n        const hitId = getHitId(hit)\n\n        this._currentSelection[hitId] = hit\n\n        if (!(hitId in this._previousSelection)) {\n          this._fireSelectCallback(hit)\n        }\n      }\n    }\n\n    for (const hitId in this._previousSelection) {\n      if (!(hitId in this._currentSelection)) {\n        const hit = this._previousSelection[hitId]\n\n        this._fireDeselectCallback(hit)\n      }\n    }\n  }\n\n  getSelectPolygon () {\n    if (this._selectPolygon.start) {\n      return {\n        type: 'Polygon',\n        coordinates: [[\n          this._selectPolygon.start,\n          ...this._selectPolygon.points,\n          this._selectPolygon.start\n        ]]\n      }\n    }\n  }\n\n  resetSelectPolygon () {\n    for (const hitId in this._currentSelection) {\n      const hit = this._currentSelection[hitId]\n\n      this._fireDeselectCallback(hit)\n    }\n\n    this._selectPolygon = { start: undefined, points: [] }\n    this._currentSelection = {}\n  }\n\n  _fireSelectCallback (hit) {\n    if (hitIsMark(hit)) {\n      const selectEvent = createSelectMarkEvent('select', hit)\n      const callback = this._markCallbacks[hit.markId].onSelect\n\n      if (callback) callback(selectEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const selectEvent = createSelectLayerEvent('select', hit)\n      const callback = this._layerCallbacks[hit.layerId].onSelect\n\n      if (callback) callback(selectEvent)\n    }\n  }\n\n  _fireDeselectCallback (hit) {\n    if (hitIsMark(hit)) {\n      const deselectEvent = createSelectMarkEvent('deselect', hit)\n      const callback = this._markCallbacks[hit.markId].onDeselect\n\n      if (callback) callback(deselectEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const deselectEvent = createSelectLayerEvent('deselect', hit)\n      const callback = this._layerCallbacks[hit.layerId].onDeselect\n\n      if (callback) callback(deselectEvent)\n    }\n  }\n\n  _getLastThreePointsPolygon () {\n    const points = this._selectPolygon.points\n    const lastPointIndex = points.length - 1\n    const start = this._selectPolygon.start\n\n    return {\n      type: 'Polygon',\n      coordinates: [\n        [start, points[lastPointIndex - 1], points[lastPointIndex], start]\n      ]\n    }\n  }\n}\n\nfunction rectangleToRBushBbox (rectangle) {\n  return {\n    minX: Math.min(rectangle.x1, rectangle.x2),\n    maxX: Math.max(rectangle.x1, rectangle.x2),\n    minY: Math.min(rectangle.y1, rectangle.y2),\n    maxY: Math.max(rectangle.y1, rectangle.y2)\n  }\n}\n\nfunction parseCoordinates (coordinates) {\n  if (is2dArray(coordinates)) return coordinates\n  if (isXYObject(coordinates)) return [coordinates.x, coordinates.y]\n\n  throw new Error(`Invalid input: ${coordinates}`)\n}\n\nfunction is2dArray (coordinates) {\n  return coordinates.constructor === Array &&\n    coordinates.length === 2 &&\n    coordinates.every(c => c && c.constructor === Number)\n}\n\nfunction isXYObject (coordinates) {\n  return 'x' in coordinates && 'y' in coordinates &&\n    coordinates.x.constructor === Number &&\n    coordinates.y.constructor === Number\n}\n\nfunction bboxToRBushBbox (bbox) {\n  return {\n    minX: Math.min(...bbox.x),\n    maxX: Math.max(...bbox.x),\n    minY: Math.min(...bbox.y),\n    maxY: Math.max(...bbox.y)\n  }\n}\n","import detectIt from 'detect-it'\n\nimport MouseInteractionManager from './mouse/MouseInteractionManager.js'\nimport TouchInteractionManager from './touch/TouchInteractionManager.js'\nimport SelectManager from './select/SelectManager.js'\n\nexport default class InteractionManager {\n  constructor () {\n    if (detectIt.hasMouse) {\n      this._mouseInteractionManager = new MouseInteractionManager()\n    }\n\n    if (detectIt.hasTouch) {\n      this._touchInteractionManager = new TouchInteractionManager()\n    }\n\n    this._selectManager = new SelectManager()\n  }\n\n  // Initialization\n  setId (id) {\n    this._forEachManager(manager => { manager.setId(id) })\n  }\n\n  linkEventManager (eventManager) {\n    if (this._mouseInteractionManager) {\n      this._mouseInteractionManager.linkEventManager(eventManager.mouse())\n    }\n\n    if (this._touchInteractionManager) {\n      this._touchInteractionManager.linkEventManager(eventManager.touch())\n    }\n  }\n\n  // Section context loading\n  loadSection (sectionContext) {\n    this._forEachManager(manager => { manager.loadSection(sectionContext) })\n  }\n\n  mouse () {\n    return this._mouseInteractionManager\n  }\n\n  touch () {\n    return this._touchInteractionManager\n  }\n\n  select () {\n    return this._selectManager\n  }\n\n  _forEachManager (callback) {\n    if (this._mouseInteractionManager) callback(this._mouseInteractionManager)\n    if (this._touchInteractionManager) callback(this._touchInteractionManager)\n  }\n}\n","<script context=\"module\">\n  let idCounter = 0\n  function getId () {\n    return 'gr' + idCounter++\n  }\n</script>\n\n<script>\n  import { onMount } from 'svelte'\n  import * as GraphicContext from './GraphicContext'\n  import * as SectionContext from '../Section/SectionContext'\n  import * as EventManagerContext from './EventManagerContext'\n  import * as InteractionManagerContext from '../Section/InteractionManagerContext'\n\n  import EventManager from '../../../interactivity/events/EventManager.js'\n  import InteractionManager from '../../../interactivity/interactions/InteractionManager.js'\n\n  import { getClipPropsPadding, getClipPropsNoPadding } from '../Section/getClipProps.js'\n\n  const graphicId = getId()\n\n  export let renderer = undefined\n  \n  export let width = 500\n  export let height = 500\n  export let viewBox = undefined\n  export let preserveAspectRatio = 'xMidYMid meet'\n\n  export let scaleX = undefined\n  export let scaleY = undefined\n  export let transformation = undefined\n  export let flipX = false\n  export let flipY = false\n  export let padding = 0\n  export let zoomIdentity = undefined\n  export let blockReindexing = false\n\n  export let backgroundColor = undefined\n  export let paddingColor = undefined\n\n  const graphicContext = GraphicContext.init()\n  const sectionContext = SectionContext.init()\n  const eventManagerContext = EventManagerContext.init()\n  const interactionManagerContext = InteractionManagerContext.init()\n\n  $: {\n    GraphicContext.update(graphicContext, { renderer })\n  }\n\n  let rootNode\n\n  // set up event and interaction manager\n  const eventManager = new EventManager()\n  EventManagerContext.update(eventManagerContext, eventManager)\n  const interactionManager = new InteractionManager()\n\n  interactionManager.setId(graphicId)\n  interactionManager.linkEventManager(eventManager)\n  InteractionManagerContext.update(interactionManagerContext, interactionManager)\n\n  // Keep SectionContext and InteractionManagerContext up to date\n  let numberWidth = width\n  let numberHeight = height\n  $: coordinates = { x1: 0, y1: 0, x2: numberWidth, y2: numberHeight }\n\n  $: {\n    const sectionData = {\n      sectionId: graphicId,\n      coordinates,\n      scaleX,\n      scaleY,\n      padding,\n      flipX,\n      flipY,\n      blockReindexing,\n      transformation,\n      zoomIdentity\n    }\n\n    SectionContext.update(sectionContext, sectionData)\n    $interactionManagerContext.loadSection($sectionContext)\n  }\n\n  $: clipPropsPadding = getClipPropsPadding(coordinates, padding)\n  $: clipPropsNoPadding = getClipPropsNoPadding(coordinates)\n\n  const originalViewBox = viewBox\n  let originalViewBoxArray\n  \n  if (originalViewBox !== undefined) {\n    originalViewBoxArray = originalViewBox.split(' ')\n  }\n  $: {\n    if (width.constructor === Number && height.constructor === Number) {\n      numberWidth = width\n      numberHeight = height\n    } else if (originalViewBox !== undefined) {\n      numberWidth = Number(originalViewBoxArray[2])\n      numberHeight = Number(originalViewBoxArray[3])\n    } else if (originalViewBox === undefined) {\n      numberWidth = 100\n      numberHeight = 100\n    }\n  }\n  $: {\n    if (originalViewBox === undefined) {\n      viewBox = `0 0 ${numberWidth} ${numberHeight}`\n    }\n  }\n\n  onMount(() => {\n    // only on mount can we bind the svg root node and attach actual event listeners\n    eventManager.addRootNode(rootNode)\n    eventManager.attachEventListeners()\n  })\n</script>\n\n<svg\n  {width}\n  {height}\n  {viewBox}\n  {preserveAspectRatio}\n  bind:this={rootNode}\n>\n  <defs>\n    <mask id={`${graphicId}-mask-padding-bg`}>\n      <rect {...clipPropsNoPadding} fill=\"white\" />\n      <rect {...clipPropsPadding} fill=\"black\" />\n    </mask>\n  </defs>\n\n  {#if backgroundColor}\n    <rect \n      class=\"content-background\"\n      {...clipPropsPadding}\n      fill={backgroundColor}\n    />\n  {/if}\n\n  {#if paddingColor}\n    <rect \n      class=\"padding-background\"\n      mask={`url(#${graphicId}-mask-padding-bg)`}\n      {...clipPropsNoPadding}\n      fill={paddingColor} \n    />\n  {/if}\n\n  <slot />\n</svg>","import { parsePadding } from '../utils/padding.js'\n\nexport function getClipPropsNoPadding ({ x1, x2, y1, y2 }) {\n  return {\n    x: Math.min(x1, x2),\n    y: Math.min(y1, y2),\n    width: Math.abs(x1 - x2),\n    height: Math.abs(y1 - y2)\n  }\n}\n\nexport function getClipPropsPadding ({ x1, x2, y1, y2 }, padding) {\n  const { left, right, top, bottom } = parsePadding(padding)\n\n  return {\n    x: Math.min(x1, x2) + left,\n    y: Math.min(y1, y2) + top,\n    width: Math.abs(x1 - x2) - (left + right),\n    height: Math.abs(y1 - y2) - (top + bottom)\n  }\n}\n","export default function (keyProp, length) {\n  if (keyProp) {\n    if (keyProp.constructor !== Array) throw new Error('\\'key\\' must be Array')\n    if (keyProp.length !== length) throw new Error('\\'key\\' must be of same length as positioning props')\n\n    return keyProp\n  } else {\n    return new Array(length).fill(0).map((_, i) => i)\n  }\n}\n","import { transformGeometry, polarGeometry } from '../../../utils/geometryUtils'\nimport { isDefined } from '../../../utils/equals.js'\nimport getKeyArray from './getKeyArray.js'\n\nexport function createPixelGeometryFromGeometry (\n  geometry,\n  sectionContext,\n  renderSettings,\n  geometryNeedsScaling\n) {\n  ensureValidGeometry(geometry)\n\n  const interpolationNecessary = (\n    sectionContext.transformation === 'polar' &&\n    renderSettings.interpolate === true\n  )\n\n  if (interpolationNecessary) {\n    const scaleTransformation = sectionContext.getScaleTransformation(geometryNeedsScaling)\n    const postScaleTransformation = sectionContext.postScaleTransformation\n\n    return polarGeometry(\n      geometry,\n      sectionContext,\n      { scaleTransformation, postScaleTransformation },\n      renderSettings\n    )\n  }\n\n  if (!interpolationNecessary) {\n    const totalTransformation = sectionContext.getTotalTransformation(geometryNeedsScaling)\n\n    return transformGeometry(geometry, totalTransformation, renderSettings)\n  }\n}\n\nexport function ensureValidGeometry (geometry) {\n  if (\n    isDefined(geometry) &&\n    geometry.constructor === Object &&\n    'type' in geometry &&\n    'coordinates' in geometry\n  ) {\n    return\n  }\n\n  throw new Error('Invalid geometry')\n}\n\nexport function createPixelGeometryObjectFromGeometry (\n  geometry,\n  keyProp,\n  sectionContext,\n  renderSettings,\n  geometryNeedsScaling\n) {\n  const keyArray = getKeyArray(keyProp, geometry.length)\n  const pixelGeometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    pixelGeometryObject[key] = createPixelGeometryFromGeometry(\n      geometry[i],\n      sectionContext,\n      renderSettings,\n      geometryNeedsScaling\n    )\n  }\n\n  return pixelGeometryObject\n}\n","import { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { isDefined, isUndefined, isInvalid } from '../../../utils/equals.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  const scaledCoordinates = scaleCoordinates(geometryProps, sectionContext)\n  const scaledGeometry = createScaledGeometry(scaledCoordinates)\n\n  return createPixelGeometryFromGeometry(\n    scaledGeometry,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nexport function scaleCoordinates (geometryProps, sectionContext) {\n  ensureValidCombination(geometryProps)\n  validateTypes(geometryProps)\n\n  const { x1, x2, y1, y2 } = geometryProps\n\n  const scaledCoordinates = {}\n\n  if (wereSpecified(x1, x2)) {\n    scaledCoordinates.x1 = scaleCoordinate(x1, 'x1', sectionContext)\n    scaledCoordinates.x2 = scaleCoordinate(x2, 'x2', sectionContext)\n  } else {\n    scaledCoordinates.x1 = sectionContext.rangeX[0]\n    scaledCoordinates.x2 = sectionContext.rangeX[1]\n  }\n\n  if (wereSpecified(y1, y2)) {\n    scaledCoordinates.y1 = scaleCoordinate(y1, 'y1', sectionContext)\n    scaledCoordinates.y2 = scaleCoordinate(y2, 'y2', sectionContext)\n  } else {\n    scaledCoordinates.y1 = sectionContext.rangeY[0]\n    scaledCoordinates.y2 = sectionContext.rangeY[1]\n  }\n\n  return scaledCoordinates\n}\n\nconst s = JSON.stringify\n\nexport function ensureValidCombination (c) {\n  if (onlyOne(c.x1, c.x2)) {\n    throw new Error(`Rectangle: invalid combination of 'x1' and 'x2': ${s(c.x1)}, ${s(c.x2)}. Either provide both or none.`)\n  }\n\n  if (onlyOne(c.y1, c.y2)) {\n    throw new Error(`Rectangle: invalid combination of 'y1' and 'y2': ${s(c.y1)}, ${s(c.y2)}. Either provide both or none.`)\n  }\n}\n\nfunction onlyOne (a, b) {\n  return isUndefined(a) ? isDefined(b) : isUndefined(b)\n}\n\nconst invalidCoordinateValueError = (value, name) => new Error(`Rectangle: invalid coordinate value for '${name}': ${s(value)}`)\n\nfunction validateTypes (geometryProps) {\n  for (const coordinateName in geometryProps) {\n    const coordinate = geometryProps[coordinateName]\n\n    if (isDefined(coordinate)) {\n      if (isInvalid(coordinate)) throw invalidCoordinateValueError(coordinate, coordinateName)\n\n      if (![Number, String, Date, Function].includes(coordinate.constructor)) {\n        throw invalidCoordinateValueError(coordinate, coordinateName)\n      }\n    }\n  }\n}\n\nfunction wereSpecified (a, b) {\n  return isDefined(a) && isDefined(b)\n}\n\nfunction scaleCoordinate (coordinate, coordinateName, sectionContext) {\n  if (coordinate.constructor === Function) {\n    return coordinate(sectionContext)\n  } else {\n    const scale = ['x1', 'x2'].includes(coordinateName) ? sectionContext.scaleX : sectionContext.scaleY\n    const scaledCoordinate = scale(coordinate)\n    throwErrorIfInvalidScaledCoordinate(coordinate, scaledCoordinate, coordinateName)\n\n    return scaledCoordinate\n  }\n}\n\nfunction throwErrorIfInvalidScaledCoordinate (input, output, coordinateName) {\n  const parentScale = ['x1', 'x2'].includes(coordinateName) ? 'scaleX' : 'scaleY'\n  if (isInvalid(output)) throw new Error(`Scale '${parentScale}' received '${s(input)}' and returned '${s(output)}`)\n}\n\nexport function createScaledGeometry (c) {\n  return {\n    type: 'Polygon',\n    coordinates: [\n      [\n        [c.x1, c.y1],\n        [c.x2, c.y1],\n        [c.x2, c.y2],\n        [c.x1, c.y2],\n        [c.x1, c.y1]\n      ]\n    ]\n  }\n}\n","/**\n * Point props default and required or not are defined here.\n */\n\nexport default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  radius: {\n    required: false,\n    default: 3\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x1: {\n    required: false\n  },\n  x2: {\n    required: false\n  },\n  y1: {\n    required: false\n  },\n  y2: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  strokeWidth: {\n    required: false,\n    default: 3\n  },\n  stroke: {\n    required: false,\n    default: 'black'\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  },\n  text: {\n    required: false\n  },\n  fontFamily: {\n    required: false,\n    default: 'Helvetica'\n  },\n  fontSize: {\n    required: false,\n    default: 16\n  },\n  fontWeight: {\n    required: false,\n    default: 'normal'\n  },\n  rotation: {\n    required: false,\n    default: 0\n  },\n  anchorPoint: {\n    required: false,\n    default: 'center'\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  shape: {\n    required: false\n  },\n  size: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x1: {\n    required: false\n  },\n  x2: {\n    required: false\n  },\n  y1: {\n    required: false\n  },\n  y2: {\n    required: false\n  },\n  independentAxis: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  strokeOpacity: {\n    required: false\n  },\n  fillOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","import pointAesthetics from '../Point/aesthetics.js'\nimport rectangleAesthetics from '../Rectangle/aesthetics.js'\nimport polygonAesthetics from '../Polygon/aesthetics.js'\nimport lineAesthetics from '../Line/aesthetics.js'\nimport labelAesthetics from '../Label/aesthetics.js'\nimport symbolAesthetics from '../Symbol/aesthetics.js'\nimport areaAesthetics from '../Area/aesthetics.js'\n\nimport { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport default function (type, aesthetics) {\n  if (type === 'Point') {\n    return validateAesthetics(aesthetics, pointAesthetics)\n  }\n\n  if (type === 'Rectangle') {\n    return validateAesthetics(aesthetics, rectangleAesthetics)\n  }\n\n  if (type === 'Polygon') {\n    return validateAesthetics(aesthetics, polygonAesthetics)\n  }\n\n  if (type === 'Line') {\n    return validateAesthetics(aesthetics, lineAesthetics)\n  }\n\n  if (type === 'Label') {\n    return validateAesthetics(aesthetics, labelAesthetics)\n  }\n\n  if (type === 'Symbol') {\n    return validateAesthetics(aesthetics, symbolAesthetics)\n  }\n\n  if (type === 'Area') {\n    return validateAesthetics(aesthetics, areaAesthetics)\n  }\n}\n\nfunction validateAesthetics (passedAesthetics, allowedAesthetics) {\n  const aesthetics = {}\n\n  for (const aestheticName in passedAesthetics) {\n    const aestheticValue = passedAesthetics[aestheticName]\n    const aestheticRequirements = allowedAesthetics[aestheticName]\n\n    if (isDefined(aestheticValue)) {\n      if (!(aestheticName in allowedAesthetics)) throw aestheticNotAllowedError(aestheticName)\n      aesthetics[aestheticName] = aestheticValue\n    }\n\n    if (isUndefined(aestheticValue)) {\n      if (aestheticName in allowedAesthetics) {\n        if (aestheticRequirements.required) throw aestheticRequiredError(aestheticName)\n        if (isDefined(aestheticRequirements.default)) {\n          aesthetics[aestheticName] = aestheticRequirements.default\n        } else {\n          aesthetics[aestheticName] = aestheticValue\n        }\n      }\n    }\n  }\n\n  return aesthetics\n}\n\nconst aestheticNotAllowedError = name => {\n  return new Error(`Aesthetic '${name}' not allowed`)\n}\n\nconst aestheticRequiredError = name => {\n  return new Error(`Required aesthetic '${name}' is missing`)\n}\n","import { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport function ensureValidGeometryProps ({ x, y, geometry }, markType) {\n  if (isDefined(x) && isDefined(y) && isUndefined(geometry)) return\n\n  if (isUndefined(x) && isUndefined(y) && isDefined(geometry)) return\n\n  throw new Error(`${markType}: Invalid combination of 'x', 'y', and 'geometry' props`)\n}\n\nexport function getInputType ({ x, y, geometry }) {\n  if (isUndefined(geometry)) return 'xy'\n  if (isDefined(geometry)) return 'geometry'\n}\n\nexport function validateXYProps (x, y) {\n  if (![Array, Function].includes(x.constructor)) {\n    throw new Error('\\'x\\' prop must be Array or Function')\n  }\n\n  if (![Array, Function].includes(y.constructor)) {\n    throw new Error('\\'y\\' prop must be Array or Function')\n  }\n}\n\nexport function validateGeometryProp (geometry) {\n  if (![Object, Function].includes(geometry.constructor)) {\n    throw new Error('\\'geometry\\' prop must be Object or Function')\n  }\n}\n\nexport function validateXYPropsLayer (x, y) {\n  if (![Array, Function].includes(x.constructor)) {\n    throw new Error('\\'x\\' prop must be Array or Function')\n  }\n\n  if (![Array, Function].includes(y.constructor)) {\n    throw new Error('\\'y\\' prop must be Array or Function')\n  }\n}\n\nexport function validateGeometryPropLayer (geometry) {\n  if (![Array, Function].includes(geometry.constructor)) {\n    throw new Error('\\'geometry\\' prop must be Array or Function')\n  }\n}\n","export default function propNeedsScaling (prop) {\n  return prop.constructor !== Function\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { transformGeometry } from '../../../utils/geometryUtils/index.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = xNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    const totalTransformation = sectionContext.getTotalTransformation({ xNeedsScaling, yNeedsScaling })\n\n    return transformGeometry({ type: 'Point', x, y }, totalTransformation, renderSettings)\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    const totalTransformation = sectionContext.getTotalTransformation(needsScaling)\n\n    return transformGeometry(geometry, totalTransformation, renderSettings)\n  }\n}\n","import { transformGeometry, polarGeometry } from '../../../utils/geometryUtils'\nimport getKeyArray from './getKeyArray.js'\n\nexport function createPixelGeometryFromXYArrays (\n  { x, y },\n  sectionContext,\n  renderSettings,\n  geometryType,\n  needsScaling\n) {\n  validateXYArrays(x, y)\n\n  const rendervousInput = createRendervousInput(x, y, geometryType)\n\n  const interpolationNecessary = (\n    sectionContext.transformation === 'polar' &&\n    renderSettings.interpolate === true\n  )\n\n  if (interpolationNecessary) {\n    const scaleTransformation = sectionContext.getScaleTransformation(needsScaling)\n    const postScaleTransformation = sectionContext.postScaleTransformation\n\n    return polarGeometry(\n      rendervousInput,\n      sectionContext,\n      { scaleTransformation, postScaleTransformation },\n      renderSettings\n    )\n  }\n\n  if (!interpolationNecessary) {\n    const totalTransformation = sectionContext.getTotalTransformation(needsScaling)\n\n    return transformGeometry(rendervousInput, totalTransformation, renderSettings)\n  }\n}\n\nexport function validateXYArrays (x, y) {\n  if (x.constructor !== Array) {\n    throw new Error('\\'x\\' prop must be Array or function that returns array')\n  }\n\n  if (y.constructor !== Array) {\n    throw new Error('\\'y\\' prop must be Array or function that returns array')\n  }\n\n  if (x.length !== y.length) {\n    throw new Error('Arrays passed to \\'x\\' and \\'y\\' must have the same length')\n  }\n}\n\nfunction createRendervousInput (x, y, geometryType) {\n  return {\n    type: geometryType,\n    x,\n    y\n  }\n}\n\nexport function createPixelGeometryObjectFromXYArrays (\n  { x, y },\n  keyProp,\n  sectionContext,\n  renderSettings,\n  geometryType,\n  needsScaling\n) {\n  validateXYArrays(x, y)\n\n  const keyArray = getKeyArray(keyProp, x.length)\n  const pixelGeometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    pixelGeometryObject[key] = createPixelGeometryFromXYArrays(\n      { x: x[i], y: y[i] },\n      sectionContext,\n      renderSettings,\n      geometryType,\n      needsScaling\n    )\n  }\n\n  return pixelGeometryObject\n}\n","export default {\n  cross: [\n    [-0.5, -1], [0.5, -1], [0.5, -0.5], [1, -0.5], [1, 0.5], [0.5, 0.5], [0.5, 1], [-0.5, 1], [-0.5, 0.5], [-1, 0.5], [-1, -0.5], [-0.5, -0.5], [-0.5, -1], [-0.5, -1]\n  ],\n  'cross-sharp': [\n    [0, -1], [0.2, -0.2], [1, 0], [0.2, 0.2], [0, 1], [-0.2, 0.2], [-1, 0], [-0.2, -0.2], [0, -1]\n  ],\n  diamond: [\n    [0, -1], [1, 0], [0, 1], [-1, 0], [0, -1], [0, -1]\n  ],\n  'triangle-up': [\n    [0, -1], [1, 1], [-1, 1], [0, -1], [0, -1]\n  ],\n  'triangle-down': [\n    [1, -1], [0, 1], [-1, -1], [1, -1], [1, -1]\n  ],\n  'triangle-right': [\n    [-1, -1], [1, 0], [-1, 1], [-1, -1], [-1, -1]\n  ],\n  'triangle-left': [\n    [1, -1], [-1, 0], [1, 1], [1, -1], [1, -1]\n  ],\n  star4: [\n    [0, 0.71], [1, 1], [0.71, 0], [1, -1], [0, -0.71], [-1, -1], [-0.71, 0], [-1, 1], [0, 0.71], [0, 0.71]\n  ],\n  star5: [\n    [0, 0.5], [0.6, 0.8], [0.5, 0.1], [1, -0.3], [0.3, -0.4], [0, -1], [-0.3, -0.4], [-1, -0.3], [-0.5, 0.1], [-0.6, 0.8], [0, 0.5], [0, 0.5]\n  ],\n  star: [\n    [0, 0.5], [0.6, 0.8], [0.5, 0.1], [1, -0.3], [0.3, -0.4], [0, -1], [-0.3, -0.4], [-1, -0.3], [-0.5, 0.1], [-0.6, 0.8], [0, 0.5], [0, 0.5]\n  ],\n  star6: [\n    [0, 0.58], [0.5, 1], [0.43, 0.29], [1, 0], [0.43, -0.29], [0.5, -1], [0, -0.58], [-0.5, -1], [-0.43, -0.29], [-1, 0], [-0.43, 0.29], [-0.5, 1], [0, 0.58]\n  ],\n  star8: [\n    [0, 0.54], [0.41, 1], [0.38, 0.38], [1, 0.41], [0.54, 0], [1, -0.41], [0.38, -0.38], [0.41, -1], [0, -0.54], [-0.41, -1], [-0.38, -0.38], [-1, -0.41], [-0.54, 0], [-1, 0.41], [-0.38, 0.38], [-0.41, 1], [0, 0.54]\n  ],\n  pentagon: [\n    [-1, -0.24], [0, -1], [1, -0.24], [0.62, 1], [-0.62, 1], [-1, -0.24], [-1, -0.24]\n  ],\n  hexagon: [\n    [-1, 0], [-0.57, -1], [0.57, -1], [1, 0], [0.57, 1], [-0.57, 1], [-1, 0], [-1, 0]\n  ],\n  heptagon: [\n    [-1, 0.29], [-0.8, -0.6], [0, -1], [0.8, -0.6], [1, 0.29], [0.45, 1], [-0.45, 1], [-1, 0.29], [-1, 0.29]\n  ],\n  septagon: [\n    [-1, 0.29], [-0.8, -0.6], [0, -1], [0.8, -0.6], [1, 0.29], [0.45, 1], [-0.45, 1], [-1, 0.29], [-1, 0.29]\n  ],\n  octagon: [\n    [-1, -0.41], [-0.41, -1], [0.41, -1], [1, -0.41], [1, 0.41], [0.41, 1], [-0.41, 1], [-1, 0.41], [-1, -0.41], [-1, -0.41]\n  ],\n  nonagon: [\n    [0.35, -1], [0.88, -0.55], [1, 0.15], [0.65, 0.76], [0, 1], [-0.65, 0.76], [-1, 0.15], [-0.88, -0.55], [-0.35, -1], [0.35, -1], [0.35, -1]\n  ],\n  decagon: [\n    [-1, 0], [-0.81, -0.62], [-0.31, -1], [0.31, -1], [0.81, -0.62], [1, 0], [0.81, 0.62], [0.31, 1], [-0.31, 1], [-0.81, 0.62], [-1, 0], [-1, 0]\n  ]\n}\n","// https://stackoverflow.com/a/155678/7237112\nexport function representPointAsPolygon (point, { radius }) {\n  const x = point.coordinates[0]\n  const y = point.coordinates[1]\n\n  const circumference = Math.PI * 2 * radius\n  const steps = Math.max(Math.ceil(circumference), 9)\n\n  const polygon = {\n    type: 'Polygon',\n    coordinates: [[]]\n  }\n\n  for (let i = 0; i < steps; i++) {\n    polygon.coordinates[0].push(\n      [\n        x + radius * Math.cos(Math.PI * i / steps * 2 - Math.PI / 2),\n        y + radius * Math.sin(Math.PI * i / steps * 2 - Math.PI / 2)\n      ]\n    )\n  }\n\n  // close polygon\n  polygon.coordinates[0].push(polygon.coordinates[0][0])\n\n  return polygon\n}\n\nexport function representPointsAsPolygons (points, { radiusObject }) {\n  const polygons = {}\n\n  for (const key in points) {\n    polygons[key] = representPointAsPolygon(points[key], { radius: radiusObject[key] })\n  }\n\n  return polygons\n}\n","import createPixelGeometryPoint from '../Point/createPixelGeometry.js'\nimport { createScaledGeometry as createSquareGeometry } from '../Rectangle/createPixelGeometry.js'\nimport geometryAlias from './geometryAlias.js'\nimport { transformGeometry } from '../../../utils/geometryUtils'\nimport { representPointAsPolygon } from '../Point/representPointAsPolygon.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  const pointGeometry = createPixelGeometryPoint(\n    geometryProps,\n    sectionContext,\n    renderSettings\n  )\n\n  const symbolGeometry = createSymbolGeometry(pointGeometry, geometryProps)\n\n  return symbolGeometry\n}\n\nexport function createSymbolGeometry (pointGeometry, geometryProps) {\n  const [cx, cy] = pointGeometry.coordinates\n\n  const shape = geometryProps.shape || 'circle'\n  const size = geometryProps.size || 8\n\n  if (shape === 'circle') {\n    return createPoint(cx, cy, size)\n  }\n\n  if (shape === 'square') {\n    return createSquare(cx, cy, size)\n  }\n\n  if (shape in geometryAlias) {\n    const coordinates = [geometryAlias[shape]]\n    const geometry = {\n      type: 'Polygon',\n      coordinates\n    }\n\n    return createSymbolFromGeometry(cx, cy, geometry, size)\n  }\n\n  return createSymbolFromGeometry(cx, cy, shape, size)\n}\n\nfunction createPoint (cx, cy, size) {\n  const radius = size / 2\n  const pointGeometry = {\n    type: 'Point',\n    coordinates: [cx, cy]\n  }\n  return representPointAsPolygon(pointGeometry, { radius })\n}\n\nfunction createSquare (cx, cy, size) {\n  const halfSize = size / 2\n\n  const x1 = cx - halfSize\n  const x2 = cx + halfSize\n  const y1 = cy - halfSize\n  const y2 = cy + halfSize\n\n  return createSquareGeometry({ x1, x2, y1, y2 })\n}\n\nfunction createSymbolFromGeometry (cx, cy, geometry, size) {\n  const halfSize = size / 2\n  const transformation = p => [p[0] * halfSize + cx, p[1] * halfSize + cy]\n\n  return transformGeometry(geometry, transformation)\n}\n","import { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  // filter for allowed props; leave any undefined props in place\n  const allowedProps =\n    (({\n      x1 = undefined,\n      y1 = undefined,\n      x2 = undefined,\n      y2 = undefined,\n      independentAxis = undefined\n    }) => ({ x1, y1, x2, y2, independentAxis }))(geometryProps)\n\n  const scaledGeometry = createScaledGeometry(scaleCoordinates(augmentProps(validateProps(normalize(\n    allowedProps,\n    sectionContext\n  ))), sectionContext))\n\n  return createPixelGeometryFromGeometry(\n    scaledGeometry,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction normalize ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const normalized = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    const extracted = typeof v === 'function' ? v(sectionContext) : v\n\n    acc[k] = {\n      type: extracted === undefined ? 'none' : Array.isArray(extracted) ? 'array' : 'singleton',\n      ...(Array.isArray(extracted) && { arrayLength: extracted.length }),\n      value: extracted,\n      scaled: typeof v === 'function'\n    }\n    return acc\n  }, {})\n  normalized.independentAxis = independentAxis && independentAxis.toLowerCase()\n  return normalized\n}\n\nexport function validateProps (normalized) {\n  const { independentAxis, ...coordinateProps } = normalized\n\n  const definedTypes = ['singleton', 'array']\n  const definedProps = Object.entries(coordinateProps)\n    .filter(([k, v]) => definedTypes.includes(v.type))\n    .reduce((acc, [k, v]) => {\n      acc[k] = coordinateProps[k]\n      return acc\n    }, {})\n\n  const definedKeys = Object.keys(definedProps)\n\n  // reject if props do not include x1 and y1\n  const containsx1y1 = ['x1', 'y1'].every(k => definedKeys.includes(k))\n  if (!containsx1y1) { throw new Error('At least x1 and y1 must be provided') }\n\n  // reject if at least x1 or y1 is not an array\n  if (definedProps.x1.type === 'singleton' && definedProps.y1.type === 'singleton') {\n    throw new Error('At least x1 or y1 must be passed an array')\n  }\n\n  // reject if independentAxis does not align with x/y types\n  if (!independentAxis || independentAxis === 'x') {\n    // check that x is the independent variable\n    // reject if x1 is not given an array of at least length 2 - x must not be constant\n    // x1 should also be distinct (for all types) and monotonically increasing for Number/Date types, but no checks will be performed for these\n    if (definedProps.x1.type === 'singleton' || (definedProps.x1.type === 'array' && definedProps.x1.arrayLength < 2)) {\n      throw new Error('x1 must be passed an array of at least length 2 when independentAxis is \"x\" or undefined')\n    }\n    // reject if x1, y1 and x2 are provided but independentAxis is not y\n    if (definedKeys.includes('x2')) {\n      throw new Error('independentAxis must be \"y\" when x1, y1 and x2 are specified')\n    }\n  } else if (independentAxis === 'y') {\n    // check that y is the independent variable\n    // reject if y1 is not given an array of at least length 2 - y must not be constant\n    // y1 should also be distinct (for all types) and monotonically increasing for Number/Date types, but no checks will be performed for these\n    if (definedProps.y1.type === 'singleton' || (definedProps.y1.type === 'array' && definedProps.y1.arrayLength < 2)) {\n      throw new Error('y1 must be passed an array of at least length 2 when independentAxis is \"y\"')\n    }\n    // reject if x1, y1 and y2 are provided but independentAxis is not x\n    if (definedKeys.includes('y2')) {\n      throw new Error('independentAxis must be \"x\" when x1, y1 and y2 are specified')\n    }\n  } else {\n    // reject if defined independentAxis is passed a value other than X or Y\n    throw new Error('independentAxis must be passed \"x\" or \"y\" or left blank')\n  }\n\n  // reject if arrays given are not of equal length\n  const arrayLengths = Object.values(definedProps)\n    .filter(v => v.type === 'array')\n    .map(v => v.value.length)\n\n  const arrayLengthsEqual = arrayLengths.every((val, idx, arr) => val === arr[0])\n  if (!arrayLengthsEqual) { throw new Error('Arrays given must be of equal length') }\n\n  return normalized\n}\n\nexport function augmentProps ({ independentAxis, x1, y1, x2, y2 }) {\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n\n  const [indKey, indVal] = indAx === 'x' ? ['x1', x1] : ['y1', y1]\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n  const length = indVal.arrayLength\n\n  const depVal1Map = {\n    singleton: {\n      value: Array(length).fill(depVal1.value),\n      type: 'array',\n      arrayLength: length\n    },\n    array: depVal1\n  }\n  const depVal2Map = {\n    singleton: {\n      value: Array(length).fill(depVal2.value),\n      type: 'array',\n      arrayLength: length\n    },\n    none: {\n      value: Array(length).fill(0),\n      type: 'array',\n      arrayLength: length\n    },\n    array: depVal2\n  }\n\n  return {\n    independentAxis: indAx,\n    [indKey]: indVal,\n    [depKey1]: depVal1Map[depVal1.type],\n    [depKey2]: depVal2Map[depVal2.type]\n  }\n}\n\nconst scaleMap = { x1: 'scaleX', y1: 'scaleY', x2: 'scaleX', y2: 'scaleY' }\n\nexport function scaleCoordinates ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const scaledProps = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    if (v.scaled) {\n      acc[k] = v.value\n    } else {\n      const scale = sectionContext[scaleMap[k]]\n      acc[k] = v.value.map(d => scale(d))\n    }\n    return acc\n  }, {})\n  return { independentAxis, ...scaledProps }\n}\n\nexport function createScaledGeometry ({ x1, y1, x2, y2, independentAxis }) {\n  // polygon outer ring is defined counterclockwise\n\n  let bottomPoints, topPoints\n\n  if (independentAxis === 'x') {\n    bottomPoints = y2.map((y2, i) => [x1[i], y2])\n    topPoints = y1.map((y1, i) => [x1[i], y1]).reverse()\n  } else { // y independent\n    bottomPoints = x2.map((x2, i) => [x2, y1[i]])\n    topPoints = x1.map((x1, i) => [x1, y1[i]]).reverse()\n  }\n\n  const origin = [bottomPoints[0]]\n  const allPoints = [bottomPoints.concat(topPoints, origin)]\n\n  const scaledGeometryArray = { type: 'Polygon', coordinates: allPoints }\n  return scaledGeometryArray\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType,\n  validateXYProps,\n  validateGeometryPropLayer\n} from '../utils/geometryPropTools.js'\n\nimport { validateXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { ensureValidGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport getKeyArray from '../utils/getKeyArray.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    return createPixelGeometryObjectFromCoordinates(\n      geometryProps,\n      keyProp,\n      sectionContext,\n      renderSettings\n    )\n  }\n\n  if (inputType === 'geometry') {\n    return createPixelGeometryObjectFromGeometry(\n      geometryProps,\n      keyProp,\n      sectionContext,\n      renderSettings\n    )\n  }\n}\n\nfunction createPixelGeometryObjectFromCoordinates (\n  { x, y },\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  validateXYProps(x, y)\n\n  const xNeedsScaling = propNeedsScaling(x)\n  const yNeedsScaling = propNeedsScaling(y)\n\n  const xScaled = xNeedsScaling\n    ? x\n    : x(sectionContext)\n\n  const yScaled = yNeedsScaling\n    ? y\n    : y(sectionContext)\n\n  const { xArray, yArray } = applyRecyclingIfNecessary(xScaled, yScaled)\n  validateXYArrays(xArray, yArray)\n\n  const keyArray = getKeyArray(keyProp, xArray.length)\n\n  const totalTransformation = sectionContext.getTotalTransformation({ xNeedsScaling, yNeedsScaling })\n\n  return transformXYArraysIntoGeometryObject(xArray, yArray, keyArray, totalTransformation)\n}\n\nfunction applyRecyclingIfNecessary (xScaled, yScaled) {\n  if (xScaled.constructor !== Array && yScaled.constructor !== Array) {\n    throw new Error('Invalid input: cannot recycle all geometry props')\n  }\n\n  return {\n    xArray: xScaled.constructor === Array ? xScaled : recycle(xScaled, yScaled.length),\n    yArray: yScaled.constructor === Array ? yScaled : recycle(yScaled, xScaled.length)\n  }\n}\n\nfunction recycle (value, length) {\n  return new Array(length).fill(value)\n}\n\nfunction transformXYArraysIntoGeometryObject (xArray, yArray, keyArray, transformation) {\n  const geometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    geometryObject[key] = {\n      type: 'Point',\n      coordinates: transformation([\n        xArray[i],\n        yArray[i]\n      ])\n    }\n  }\n\n  return geometryObject\n}\n\nfunction createPixelGeometryObjectFromGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  validateGeometryPropLayer(geometryProps.geometry)\n\n  const geometryNeedsScaling = propNeedsScaling(geometryProps.geometry)\n\n  const geometry = geometryNeedsScaling\n    ? geometryProps.geometry\n    : geometryProps.geometry(sectionContext)\n\n  ensureValidGeometry(geometry)\n\n  const keyArray = getKeyArray(keyProp, geometry.length)\n\n  const totalTransformation = sectionContext.getTotalTransformation(geometryNeedsScaling)\n\n  return transformGeometryArrayIntoGeometryObject(\n    geometry,\n    keyArray,\n    totalTransformation\n  )\n}\n\nfunction transformGeometryArrayIntoGeometryObject (geometryArray, keyArray, transformation) {\n  const geometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    geometryObject[key] = {\n      type: 'Point',\n      coordinates: transformation(geometryArray[i].coordinates)\n    }\n  }\n\n  return geometryObject\n}\n","export default function (value, length) {\n  return new Array(length).fill(value)\n}\n","import { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { createScaledGeometry, ensureValidCombination } from './createPixelGeometry.js'\nimport generateArrayOfLength from '../utils/generateArrayOfLength.js'\nimport { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  const { scaledCoordinates, length } = scaleCoordinates(geometryProps, sectionContext)\n  const scaledGeometryArray = createScaledGeometryArray(scaledCoordinates, length)\n\n  return createPixelGeometryObjectFromGeometry(\n    scaledGeometryArray,\n    keyProp,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction scaleCoordinates (coordinateProps, sectionContext) {\n  ensureValidCombination(coordinateProps)\n\n  const coordinatesThatNeedScaling = whichCoordinatesNeedScaling(coordinateProps)\n\n  const nonMissingCoordinates = getMissingCoordinatesFromContext(coordinateProps, sectionContext)\n  const coordinateValues = getCoordinateValues(nonMissingCoordinates, sectionContext)\n\n  const length = getNRectangles(coordinateValues)\n\n  const coordinatesThatArePrimitive = whichCoordinatesArePrimitive(coordinateValues)\n\n  const scaledCoordinates = _scaleCoordinates(\n    coordinateValues,\n    sectionContext,\n    coordinatesThatNeedScaling,\n    coordinatesThatArePrimitive,\n    length\n  )\n\n  return { scaledCoordinates, length }\n}\n\nconst coordinateNames = ['x1', 'x2', 'y1', 'y2']\n\nfunction whichCoordinatesNeedScaling (coordinates) {\n  const coordinatesThatNeedScaling = {}\n\n  for (const coordinateName of coordinateNames) {\n    const coordinateValue = coordinates[coordinateName]\n    coordinatesThatNeedScaling[coordinateName] = isDefined(coordinateValue) && coordinateValue.constructor !== Function\n  }\n\n  return coordinatesThatNeedScaling\n}\n\nfunction getMissingCoordinatesFromContext (coordinates, sectionContext) {\n  const nonMissingCoordinates = {}\n\n  for (const coordinateName of coordinateNames) {\n    const coordinateValue = coordinates[coordinateName]\n    nonMissingCoordinates[coordinateName] = isUndefined(coordinateValue)\n      ? getMissingCoordinateFromContext(coordinateName, sectionContext)\n      : coordinateValue\n  }\n\n  return nonMissingCoordinates\n}\n\nconst coordMap = { x1: 'minX', x2: 'maxX', y1: 'minY', y2: 'maxY' }\n\nfunction getMissingCoordinateFromContext (coordinateName, sectionContext) {\n  return sectionContext.paddedBbox[coordMap[coordinateName]]\n}\n\nfunction getCoordinateValues (nonMissingCoordinates, sectionContext) {\n  const coordinateValues = {}\n\n  for (const coordinateName in nonMissingCoordinates) {\n    const coordinateValue = nonMissingCoordinates[coordinateName]\n    if (coordinateValue.constructor === Function) {\n      coordinateValues[coordinateName] = coordinateValue(sectionContext)\n    } else {\n      coordinateValues[coordinateName] = coordinateValue\n    }\n  }\n\n  return coordinateValues\n}\n\nconst invalidCoordinateError = new Error('RectangleLayer: invalid coordinate specification')\n\nfunction getNRectangles (coordinateValues) {\n  let atLeastOneArray = false\n  let length\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n\n    if (coordinateValue.constructor === Array) {\n      atLeastOneArray = true\n      length = length || coordinateValue.length\n\n      if (length !== coordinateValue.length) throw invalidCoordinateError\n    }\n  }\n\n  if (!atLeastOneArray) throw invalidCoordinateError\n\n  return length\n}\n\nfunction whichCoordinatesArePrimitive (coordinateValues) {\n  const coordinatesThatArePrimitive = {}\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n\n    coordinatesThatArePrimitive[coordinateName] = coordinateValue.constructor !== Array\n  }\n\n  return coordinatesThatArePrimitive\n}\n\nfunction _scaleCoordinates (\n  coordinateValues, scales, coordinatesThatNeedScaling, coordinatesThatArePrimitive, length\n) {\n  const scaledCoordinates = {}\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n    let array\n    const scale = coordinateName.startsWith('x') ? scales.scaleX : scales.scaleY\n\n    if (coordinatesThatArePrimitive[coordinateName]) array = generateArrayOfLength(coordinateValue, length)\n    if (!coordinatesThatArePrimitive[coordinateName]) array = coordinateValue\n\n    scaledCoordinates[coordinateName] = coordinatesThatNeedScaling[coordinateName]\n      ? array.map(scale)\n      : array\n  }\n\n  return scaledCoordinates\n}\n\nfunction createScaledGeometryArray (scaledCoordinates, length) {\n  const scaledGeometryArray = []\n\n  for (let i = 0; i < length; i++) {\n    scaledGeometryArray.push(\n      createScaledGeometry({\n        x1: scaledCoordinates.x1[i],\n        x2: scaledCoordinates.x2[i],\n        y1: scaledCoordinates.y1[i],\n        y2: scaledCoordinates.y2[i]\n      })\n    )\n  }\n\n  return scaledGeometryArray\n}\n","import createPixelGeometryObjectPoint from '../Point/createPixelGeometryObject.js'\nimport { createSymbolGeometry } from './createPixelGeometry.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  const pointGeometryObject = createPixelGeometryObjectPoint(\n    geometryProps,\n    keyProp,\n    sectionContext,\n    renderSettings\n  )\n\n  const symbolGeometryObject = createSymbolGeometryObject(pointGeometryObject, geometryProps)\n\n  return symbolGeometryObject\n}\n\nfunction createSymbolGeometryObject (pointGeometryObject, geometryProps) {\n  const keys = Object.keys(pointGeometryObject)\n\n  const shapeGetter = createPropGetter(geometryProps.shape, keys)\n  const sizeGetter = createPropGetter(geometryProps.size, keys)\n\n  const symbolGeometryObject = {}\n\n  for (const key in pointGeometryObject) {\n    const shape = shapeGetter(key)\n    const size = sizeGetter(key)\n\n    symbolGeometryObject[key] = createSymbolGeometry(pointGeometryObject[key], { shape, size })\n  }\n\n  return symbolGeometryObject\n}\n\nfunction createPropGetter (prop, keys) {\n  if (prop === undefined) return () => {}\n\n  if (prop.constructor === Function) {\n    return prop\n  }\n\n  const propObject = createPropObject(prop, keys)\n  return key => propObject[key]\n}\n\nfunction createPropObject (prop, keys) {\n  const length = keys.length\n  const propObject = {}\n\n  if (prop.constructor === Array) {\n    validatePropArrayLength(prop, length)\n\n    for (let i = 0; i < length; i++) {\n      const key = keys[i]\n      propObject[key] = prop[i]\n    }\n  } else {\n    for (let i = 0; i < length; i++) {\n      const key = keys[i]\n      propObject[key] = prop\n    }\n  }\n\n  return propObject\n}\n\nfunction validatePropArrayLength (prop, length) {\n  if (prop.length !== length) {\n    throw new Error('If provided as Arrays, all positioning props must be the same length')\n  }\n}\n","import createPixelGeometryPoint from '../Point/createPixelGeometry.js'\nimport createPixelGeometryRectangle from '../Rectangle/createPixelGeometry.js'\nimport createPixelGeometryPolygon from '../Polygon/createPixelGeometry.js'\nimport createPixelGeometryLine from '../Line/createPixelGeometry.js'\nimport createPixelGeometrySymbol from '../Symbol/createPixelGeometry.js'\nimport createPixelGeometryArea from '../Area/createPixelGeometry.js'\n\nimport createPixelGeometryObjectPoint from '../Point/createPixelGeometryObject.js'\nimport createPixelGeometryObjectRectangle from '../Rectangle/createPixelGeometryObject.js'\nimport createPixelGeometryObjectPolygon from '../Polygon/createPixelGeometryObject.js'\nimport createPixelGeometryObjectLine from '../Line/createPixelGeometryObject.js'\nimport createPixelGeometryObjectSymbol from '../Symbol/createPixelGeometryObject.js'\nimport createPixelGeometryObjectArea from '../Area/createPixelGeometryObject.js'\n\nexport const markPixelGeometryFuncs = new Proxy({\n  Point: createPixelGeometryPoint,\n  Rectangle: createPixelGeometryRectangle,\n  Polygon: createPixelGeometryPolygon,\n  Line: createPixelGeometryLine,\n  Label: createPixelGeometryPoint,\n  Symbol: createPixelGeometrySymbol,\n  Area: createPixelGeometryArea\n}, {\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return obj[prop]\n    } else {\n      throw new Error(`Invalid Mark type: '${prop}'`)\n    }\n  }\n})\n\nexport const layerPixelGeometryFuncs = new Proxy({\n  Point: createPixelGeometryObjectPoint,\n  Rectangle: createPixelGeometryObjectRectangle,\n  Polygon: createPixelGeometryObjectPolygon,\n  Line: createPixelGeometryObjectLine,\n  Label: createPixelGeometryObjectPoint,\n  Symbol: createPixelGeometryObjectSymbol,\n  Area: createPixelGeometryObjectArea\n}, {\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return obj[prop]\n    } else {\n      throw new Error(`Invalid Layer type: '${prop}'`)\n    }\n  }\n})\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryFromXYArrays(\n      { x, y },\n      sectionContext,\n      renderSettings,\n      'Polygon',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryFromGeometry(\n      geometry,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryFromXYArrays(\n      { x, y },\n      sectionContext,\n      renderSettings,\n      'LineString',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryFromGeometry(\n      geometry,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryObjectFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryObjectFromXYArrays(\n      { x, y },\n      keyProp,\n      sectionContext,\n      renderSettings,\n      'Polygon',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryObjectFromGeometry(\n      geometry,\n      keyProp,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryObjectFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryObjectFromXYArrays(\n      { x, y },\n      keyProp,\n      sectionContext,\n      renderSettings,\n      'LineString',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryObjectFromGeometry(\n      geometry,\n      keyProp,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { validateProps, augmentProps, scaleCoordinates, createScaledGeometry } from './createPixelGeometry.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  // filter for allowed props; leave any undefined props in place\n  const allowedProps =\n    (({\n      x1 = undefined,\n      y1 = undefined,\n      x2 = undefined,\n      y2 = undefined,\n      independentAxis = undefined\n    }) => ({ x1, y1, x2, y2, independentAxis }))(geometryProps)\n\n  const { numAreas, independentAxis, ...augmentedAreas } =\n    augmentAreas(\n      validateAreas(\n        normalizeAreas(\n          allowedProps,\n          sectionContext)))\n\n  // pivot data for use with area mark methods\n  const areasAsArray = [...Array(numAreas).keys()].map(areaIndex =>\n    Object.entries(augmentedAreas).reduce((acc, [k, v]) => {\n      const isNestedArray = v.type === 'array of arrays'\n\n      acc[k] = {\n        type: isNestedArray ? 'array' : 'none',\n        value: isNestedArray ? v.value[areaIndex] : v.value,\n        ...(isNestedArray && { arrayLength: v.value[areaIndex].length }),\n        scaled: v.scaled\n      }\n\n      acc.independentAxis = independentAxis\n      return acc\n    }, {})\n  )\n\n  const scaledGeometryArray = areasAsArray.map(area => {\n    return createScaledGeometry(\n      scaleCoordinates(\n        augmentProps(\n          validateProps(\n            area)),\n        sectionContext))\n  })\n\n  return createPixelGeometryObjectFromGeometry(\n    scaledGeometryArray,\n    keyProp,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction normalizeAreas ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const normalized = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    const extracted = typeof v === 'function' ? v(sectionContext) : v\n\n    const isUndefined = (x) => typeof x === 'undefined'\n    const isSingleton = (x) => !isUndefined(x) && !Array.isArray(x)\n    const isNestedArray = (xs) => !isUndefined(xs) && !isSingleton(xs) && xs.every(x => Array.isArray(x))\n\n    acc[k] = {\n      type: isUndefined(extracted)\n        ? 'none'\n        : isSingleton(extracted)\n          ? 'singleton'\n          : isNestedArray(extracted)\n            ? 'array of arrays'\n            : 'array',\n      ...(isNestedArray(extracted) && { numAreas: extracted.length }),\n      value: extracted,\n      scaled: typeof v === 'function'\n    }\n    return acc\n  }, {})\n\n  normalized.independentAxis = independentAxis && independentAxis.toLowerCase()\n  return normalized\n}\n\nfunction validateAreas (normalizedAreas) {\n  const { independentAxis, ...coordinateProps } = normalizedAreas\n  const { x1, x2, y1, y2 } = coordinateProps\n\n  // reject singletons\n  Object.values(coordinateProps).forEach(v => {\n    if (v.type === 'singleton') {\n      throw new Error('Props passed to the AreaLayer must be either an array or an array of arrays')\n    }\n  })\n\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n\n  // only x1 can be broadcasted when x is the independent variable\n  // only y1 can be broadcasted when y is the independent variable\n  if (depVal1.type === 'array' || depVal2.type === 'array') {\n    throw new Error(`${depKey1} and ${depKey2} must be passed an array of arrays when independentAxis is \"${indAx}\"`)\n  }\n\n  // reject if number of areas per prop are not equal\n  const numAreasAll = Object.values(coordinateProps)\n    .filter(v => v.type === 'array of arrays')\n    .map(v => v.numAreas)\n\n  const numAreasEqual = numAreasAll.every((val, idx, arr) => val === arr[0])\n  if (!numAreasEqual) {\n    throw new Error('Number of areas declared per prop must be equal')\n  }\n\n  const numAreas = numAreasAll[0]\n  return { numAreas, independentAxis, ...normalizedAreas }\n}\n\nfunction augmentAreas ({ numAreas, independentAxis, x1, y1, x2, y2 }) {\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n  const [indKey1, indVal1] = indAx === 'x' ? ['x1', x1] : ['y1', y1]\n  const [indKey2, indVal2] = indAx === 'x' ? ['x2', x2] : ['y2', y2]\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n\n  const indValMap = {\n    array: {\n      value: Array(numAreas).fill(indVal1.value),\n      type: 'array of arrays',\n      numAreas: numAreas,\n      scaled: indVal1.scaled\n    },\n    'array of arrays': indVal1\n  }\n\n  return {\n    numAreas: numAreas,\n    independentAxis: indAx,\n    [indKey1]: indValMap[indVal1.type],\n    [indKey2]: indVal2,\n    [depKey1]: depVal1,\n    [depKey2]: depVal2\n  }\n}\n","import { pointDistance } from '../../../utils/geometryUtils'\n\nexport function representLineAsPolygon (lineString, { strokeWidth }) {\n  const lineCoordinates = lineString.coordinates\n\n  if (lineString.type === 'LineString') {\n    const outerRing = createOuterRing(lineCoordinates, strokeWidth)\n\n    return {\n      type: 'Polygon',\n      coordinates: [outerRing]\n    }\n  }\n\n  if (lineString.type === 'MultiLineString') {\n    const polygons = []\n\n    for (let i = 0; i < lineCoordinates.length; i++) {\n      polygons.push(\n        [createOuterRing(lineCoordinates[i], strokeWidth)]\n      )\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: polygons\n    }\n  }\n}\n\nfunction createOuterRing (lineCoordinates, strokeWidth) {\n  const length = lineCoordinates.length\n  const lastIndex = length - 1\n  const distance = strokeWidth / 2\n\n  const coordinatesBottom = new Array(length)\n  const coordinatesTop = new Array(length)\n\n  for (let i = 0; i < length; i++) {\n    if (i === 0) {\n      const [bottomPoint, topPoint] = getCornerPointsStart(lineCoordinates, distance)\n      coordinatesBottom[0] = bottomPoint\n      coordinatesTop[lastIndex] = topPoint\n    }\n\n    if (i === lastIndex) {\n      const [bottomPoint, topPoint] = getCornerPointsEnd(lineCoordinates, distance)\n      coordinatesBottom[lastIndex] = bottomPoint\n      coordinatesTop[0] = topPoint\n    }\n\n    if (i > 0 && i < lastIndex) {\n      const [bottomPoint, topPoint] = getCornerPointsIndex(lineCoordinates, i, distance)\n      coordinatesBottom[i] = bottomPoint\n      coordinatesTop[lastIndex - i] = topPoint\n    }\n  }\n\n  const outerRing = coordinatesBottom.concat(coordinatesTop)\n\n  // Close ring if necessary\n  if (ringIsNotClosed(outerRing)) {\n    outerRing.push(outerRing[0])\n  }\n\n  return outerRing\n}\n\nexport function representLinesAsPolygons (lines, { strokeWidthObject }) {\n  const polygons = {}\n\n  for (const key in lines) {\n    polygons[key] = representLineAsPolygon(lines[key], { strokeWidth: strokeWidthObject[key] })\n  }\n\n  return polygons\n}\n\nfunction getCornerPointsStart (lineCoordinates, distance) {\n  const segment = getNextSegment(0, lineCoordinates)\n  const cornerPoint = segment[0]\n\n  return getParallelPoints(segment, cornerPoint, distance)\n}\n\nfunction getCornerPointsEnd (lineCoordinates, distance) {\n  const segment = getPreviousSegment(lineCoordinates.length - 1, lineCoordinates)\n  const cornerPoint = segment[1]\n\n  return getParallelPoints(segment, cornerPoint, distance)\n}\n\nfunction getCornerPointsIndex (lineCoordinates, index, distance) {\n  const previousSegment = getPreviousSegment(index, lineCoordinates)\n  const nextSegment = getNextSegment(index, lineCoordinates)\n\n  const previousUnitVector = getUnitVector(previousSegment)\n  const nextUnitVector = getUnitVector(nextSegment)\n\n  if (previousUnitVector[0] === nextUnitVector[0] && previousUnitVector[1] === nextUnitVector[1]) {\n    // unit vectors are the same, we can just use the existing line point\n\n    const currentCornerPerpendicularPoints = getParallelPoints(\n      previousSegment, previousSegment[1], distance\n    )\n\n    return currentCornerPerpendicularPoints\n  } else {\n    const previousCornerPerpendicularPoints = getParallelPoints(\n      previousSegment, previousSegment[0], distance\n    )\n    const nextCornerPerpendicularPoints = getParallelPoints(\n      nextSegment, nextSegment[1], distance\n    )\n\n    const bottomPoint = findIntersection(\n      previousCornerPerpendicularPoints[0],\n      previousUnitVector,\n      nextCornerPerpendicularPoints[0],\n      nextUnitVector\n    )\n    const topPoint = findIntersection(\n      previousCornerPerpendicularPoints[1],\n      previousUnitVector,\n      nextCornerPerpendicularPoints[1],\n      nextUnitVector\n    )\n\n    return [bottomPoint, topPoint]\n  }\n}\n\nconst getPreviousSegment = (i, coordinates) => [coordinates[i - 1], coordinates[i]]\nconst getNextSegment = (i, coordinates) => [coordinates[i], coordinates[i + 1]]\n\nfunction getUnitVector (segment) {\n  const [a, b] = segment\n\n  const magnitude = pointDistance(a, b)\n  const dx = b[0] - a[0]\n  const dy = b[1] - a[1]\n\n  return [dx / magnitude, dy / magnitude]\n}\n\nconst getNormalVector = vector => [-vector[1], vector[0]]\n\nfunction movePoint (point, unitVector, distance) {\n  return [\n    point[0] + unitVector[0] * distance,\n    point[1] + unitVector[1] * distance\n  ]\n}\n\nexport function getParallelPoints (segment, point, distance) {\n  const unitVector = getUnitVector(segment)\n  const normalVector = getNormalVector(unitVector)\n\n  const bottomPoint = movePoint(point, normalVector, distance)\n  const topPoint = movePoint(point, normalVector, -distance)\n\n  return [bottomPoint, topPoint]\n}\n\nfunction findIntersection (point1, vector1, point2, vector2) {\n  const lambda1 = findLambda(point1, vector1, point2, vector2)\n  return [\n    point1[0] + (vector1[0] * lambda1),\n    point1[1] + (vector1[1] * lambda1)\n  ]\n}\n\nexport function findLambda (p1, v1, p2, v2) {\n  const deltaX = p1[0] - p2[0]\n  const deltaY = p1[1] - p2[1]\n  const v1x = v1[0]\n  const v2x = v2[0]\n  const v1y = v1[1]\n  const v2y = v2[1]\n\n  const lambda1 = ((v2x * deltaY) - (deltaX * v2y)) /\n    ((v1x * v2y) - (v2x * v1y))\n  return lambda1\n}\n\nfunction ringIsNotClosed (ring) {\n  const first = ring[0]\n  const last = ring[ring.length - 1]\n\n  const closed = first[0] === last[0] && first[1] === last[1]\n\n  return !closed\n}\n","import { representPointAsPolygon, representPointsAsPolygons } from '../Point/representPointAsPolygon.js'\nimport { representLineAsPolygon, representLinesAsPolygons } from '../Line/representLineAsPolygon.js'\n\nexport const markRepresentAsPolygonFuncs = {\n  Point: representPointAsPolygon,\n  Line: representLineAsPolygon\n}\n\nexport const layerRepresentAsPolygonFuncs = {\n  Point: representPointsAsPolygons,\n  Line: representLinesAsPolygons\n}\n","import { writable } from 'svelte/store'\nimport { tweened } from 'svelte/motion'\nimport { cubicOut } from 'svelte/easing'\nimport { interpolate } from 'd3-interpolate'\nimport { transitionGeometry } from '../../../../utils/geometryUtils/index.js'\nimport { isUndefined } from '../../../../utils/equals.js'\n\n/**\n * Returns either a Svelte store, or a Svelte 'tweened' store,\n * depending on whether the user specified transition options.\n * The way the tweened store is set up depends on the type of aesthetic,\n * and which options the user has chosen.\n *\n * @param {String} aestheticName The name of the aesthetic a store is created for.\n * @param {*} aestheticValue The initial value of the store.\n * @param {Number|Object} transitionOptions A number indicating the transtion duration, or an Object\n * with aesthetic names as keys, and Numbers OR Objects as values.\n * @returns {writable|tweened}\n */\nexport function createTransitionable (aestheticName, aestheticValue, transitionOptions) {\n  if (isUndefined(transitionOptions) || isUndefined(aestheticValue)) {\n    return writable(aestheticValue)\n  }\n\n  if (transitionOptions.constructor === Number) {\n    const options = createOptionsFromDuration(aestheticName, transitionOptions)\n    return tweened(aestheticValue, options)\n  }\n\n  if (transitionOptions.constructor === Object) {\n    if (!(aestheticName in transitionOptions)) return writable(aestheticValue)\n\n    const aestheticTransition = transitionOptions[aestheticName]\n\n    if (aestheticTransition && aestheticTransition.constructor === Number) {\n      const options = createOptionsFromDuration(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n\n    if (aestheticTransition && aestheticTransition.constructor === Object) {\n      const options = createOptionsFromOptions(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n  }\n\n  throw new Error(`Invalid transition for ${aestheticName}`)\n}\n\nfunction createOptionsFromDuration (aestheticName, duration) {\n  if (aestheticName === 'geometry') {\n    return { duration, easing: cubicOut, interpolate: transitionGeometry }\n  } else {\n    return { duration, easing: cubicOut, interpolate }\n  }\n}\n\nexport function transitionsEqual (a, b) {\n  if (a === undefined || b === undefined) return a === b\n\n  if (a.constructor !== Object) return a === b\n\n  return transitionObjectsEqual(a, b)\n}\n\nfunction transitionObjectsEqual (a, b) {\n  if (b.constructor !== Object) return false\n\n  if (numberOfKeys(a) !== numberOfKeys(b)) return false\n\n  for (const aesthetic in a) {\n    const aestheticA = a[aesthetic]\n    const aestheticB = b[aesthetic]\n    if (aestheticA.constructor !== Object) return aestheticA === aestheticB\n    if (!aestheticTransitionObjectsEqual(aestheticA, aestheticB)) return false\n  }\n\n  return true\n}\n\nfunction aestheticTransitionObjectsEqual (a, b) {\n  if (b.constructor !== Object) return false\n\n  if (numberOfKeys(a) !== numberOfKeys(b)) return false\n\n  for (const key in a) {\n    if (a[key] !== b[key]) return false\n  }\n\n  return true\n}\n\nfunction numberOfKeys (obj) {\n  return Object.keys(obj).length\n}\n\nfunction createOptionsFromOptions (aestheticName, transitionOptions) {\n  if (aestheticName === 'geometry') {\n    return Object.assign({ interpolate: transitionGeometry }, transitionOptions)\n  } else {\n    return Object.assign({ interpolate }, transitionOptions)\n  }\n}\n","export default function (...args) {\n  for (const arg of args) {\n    if (arg !== undefined) return true\n  }\n\n  return false\n}\n","export default function parseRenderSettings (renderSettings) {\n  const defaultRenderSettings = {\n    simplify: false,\n    simplificationTreshold: 1,\n    interpolate: true,\n    interpolationTreshold: 5,\n    decimals: 2\n  }\n\n  const parsedRenderSettings = Object.assign(defaultRenderSettings, renderSettings)\n\n  return parsedRenderSettings\n}\n","import { geoPath } from 'd3-geo'\n\nconst geoPathGenerator = geoPath()\n\nexport default function (geometry) {\n  return geoPathGenerator(geometry)\n}\n","export default function textAnchorPoint (anchorPoint) {\n// For setting the anchor point on a SVG text element\n  switch (anchorPoint) {\n    case 'center':\n      return { textAnchor: 'middle', dominantBaseline: 'middle' }\n    case 'lb':\n      return { textAnchor: 'start', dominantBaseline: 'alphabetic' }\n    case 'lt':\n      return { textAnchor: 'start', dominantBaseline: 'hanging' }\n    case 'rt':\n      return { textAnchor: 'end', dominantBaseline: 'hanging' }\n    case 'rb':\n      return { textAnchor: 'end', dominantBaseline: 'alphabetic' }\n    case 'l':\n      return { textAnchor: 'start', dominantBaseline: 'middle' }\n    case 'r':\n      return { textAnchor: 'end', dominantBaseline: 'middle' }\n    case 'b':\n      return { textAnchor: 'middle', dominantBaseline: 'alphabetic' }\n    case 't':\n      return { textAnchor: 'middle', dominantBaseline: 'hanging' }\n    default: {\n      return { textAnchor: 'middle', dominantBaseline: 'middle' }\n    }\n  }\n}\n","<script context=\"module\">\n  let idCounter = 0\n  function getId () {\n    return 'mark' + idCounter++\n  }\n</script>\n\n<script>\n  import { beforeUpdate, afterUpdate, onMount, onDestroy } from 'svelte'\n  import detectIt from 'detect-it'\n\n  import * as GraphicContext from '../../Core/Graphic/GraphicContext'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n  import * as InteractionManagerContext from '../../Core/Section/InteractionManagerContext'\n  \n  import validateAesthetics from './validateAesthetics.js'\n  import { markPixelGeometryFuncs } from './pixelGeometryFuncs.js'\n  import { markRepresentAsPolygonFuncs } from './representAsPolygonFuncs.js'\n  import { createDataNecessaryForIndexingMark } from './createDataNecessaryForIndexing.js'\n  import { createTransitionable, transitionsEqual } from '../utils/transitions'\n  import any from '../utils/any.js'\n  import parseRenderSettings from '../utils/parseRenderSettings.js'\n\n  import generatePath from '../utils/generatePath.js'\n\n  import textAnchorPoint from '../utils/textAnchorPoint.js'\n\n  const markId = getId()\n\n  let initPhase = true\n  const initDone = () => !initPhase\n\n  export let type\n  \n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let x1 = undefined\n  export let x2 = undefined\n  export let y1 = undefined\n  export let y2 = undefined\n  export let geometry = undefined\n  export let shape = undefined\n  export let size = undefined\n  export let independentAxis = undefined\n\n  // Aesthetics: other\n  export let radius = undefined\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n\n  // Aesthetics: text-specific\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let _asPolygon = true\n\n  // Validate aesthetics every time input changes\n  let aesthetics = validateAesthetics(\n    type,\n    {\n      x,\n      y,\n      x1,\n      x2,\n      y1,\n      y2,\n      geometry,\n      shape,\n      size,\n      independentAxis,\n      radius,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeOpacity,\n      fillOpacity,\n      opacity,\n      text,\n      fontFamily,\n      fontSize,\n      fontWeight,\n      rotation,\n      anchorPoint\n    }\n  )\n  $: {\n    if (initDone()) {\n      aesthetics = validateAesthetics(\n        type,\n        {\n          x,\n          y,\n          x1,\n          x2,\n          y1,\n          y2,\n          geometry,\n          shape,\n          size,\n          independentAxis,\n          radius,\n          fill,\n          stroke,\n          strokeWidth,\n          strokeOpacity,\n          fillOpacity,\n          opacity,\n          text,\n          fontFamily,\n          fontSize,\n          fontWeight,\n          rotation,\n          anchorPoint\n        }\n      )\n    }\n  }\n\n  // Create 'positioning' aesthetics object\n  let positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n  $: {\n    if (initDone()) {\n      positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n    }\n  }\n\n  // Select appriopriate geometry conversion functions\n  let createPixelGeometry = markPixelGeometryFuncs[type]\n  let representAsPolygon = markRepresentAsPolygonFuncs[type]\n\n  $: {\n    if (initDone()) {\n      createPixelGeometry = markPixelGeometryFuncs[type]\n      representAsPolygon = markRepresentAsPolygonFuncs[type]\n    }\n  }\n\n  // Check if mark must be represented as polygon\n  let asPolygon = _asPolygon === true && markRepresentAsPolygonFuncs[type] !== undefined\n  $: {\n    if (initDone()) {\n      asPolygon = _asPolygon === true && markRepresentAsPolygonFuncs[type] !== undefined\n    }\n  }\n\n  // Contexts\n  const graphicContext = GraphicContext.subscribe()\n  const sectionContext = SectionContext.subscribe()\n  const interactionManagerContext = InteractionManagerContext.subscribe()\n\n  // Initiate geometries\n  let pixelGeometry\n  let screenGeometry\n\n  updatePixelGeometry()\n  updateScreenGeometry()\n\n  // Initiate transitionables\n  let tr_screenGeometry = createTransitionable('geometry', screenGeometry, transition)\n  let tr_radius = createTransitionable('radius', aesthetics.radius, transition)\n  let tr_fill = createTransitionable('fill', aesthetics.fill, transition)\n  let tr_stroke = createTransitionable('stroke', aesthetics.stroke, transition)\n  let tr_strokeWidth = createTransitionable('strokeWidth', aesthetics.strokeWidth, transition)\n  let tr_fillOpacity = createTransitionable('fillOpacity', aesthetics.fillOpacity, transition)\n  let tr_strokeOpacity = createTransitionable('strokeOpacity', aesthetics.strokeOpacity, transition)\n  let tr_opacity = createTransitionable('opacity', aesthetics.opacity, transition)\n  \n  // text transtitionables\n  let tr_fontSize = createTransitionable('fontSize', aesthetics.fontSize, transition)\n  let tr_fontWeight = createTransitionable('fontWeight', aesthetics.fontWeight, transition)\n  let tr_rotation = createTransitionable('rotation', aesthetics.rotation, transition)\n\n  // Handle changes to geometry\n  $: {\n    if (initDone()) {\n      scheduleUpdatePixelGeometry(\n        positioningAesthetics,\n        $sectionContext,\n        parseRenderSettings(renderSettings)\n      )\n    }\n  }\n\n  // Handle radius and strokeWidth changes if Point or Line is not represented as Polygon\n  $: {\n    if (initDone()) {\n      if (!asPolygon) {\n        tr_radius.set(aesthetics.radius)\n        tr_strokeWidth.set(aesthetics.strokeWidth)\n      }\n\n      if (asPolygon) {\n        scheduleUpdateScreenGeometry()\n      }\n    }\n  }\n\n  // Handle other changes\n  $: { if (initDone()) tr_fill.set(aesthetics.fill) }\n  $: { if (initDone()) tr_stroke.set(aesthetics.stroke) }\n  $: { if (initDone()) tr_strokeWidth.set(aesthetics.strokeWidth) }\n  $: { if (initDone()) tr_fillOpacity.set(aesthetics.fillOpacity) }\n  $: { if (initDone()) tr_strokeOpacity.set(aesthetics.strokeOpacity) }\n  $: { if (initDone()) tr_opacity.set(aesthetics.opacity) }\n  \n  // text aes changes\n  $: { if (initDone()) tr_fontSize.set(aesthetics.fontSize) }\n  $: { if (initDone()) tr_fontWeight.set(aesthetics.fontWeight) }\n  $: { if (initDone()) tr_rotation.set(aesthetics.rotation) }\n\n  // non-transitionable aesthetics that need additional calculation\n  let rotateTransform = `rotate(${$tr_rotation}, ${$tr_screenGeometry.coordinates[0]}, ${$tr_screenGeometry.coordinates[1]})`\n  let parsedTextAnchorPoint = textAnchorPoint(aesthetics.anchorPoint)\n\n  let previousTransition\n\n  let pixelGeometryRecalculationNecessary = false\n  let screenGeometryRecalculationNecessary = false\n\n  $: {\n    if (initDone()) {\n      if (pixelGeometryRecalculationNecessary) updatePixelGeometry()\n\n      if (screenGeometryRecalculationNecessary) {\n        updateScreenGeometry()\n        tr_screenGeometry.set(screenGeometry)\n  \n        updateInteractionManagerIfNecessary()\n      }\n\n      pixelGeometryRecalculationNecessary = false\n      screenGeometryRecalculationNecessary = false\n    }\n  }\n\n  $: { if (initDone()) rotateTransform = `rotate(${$tr_rotation}, ${$tr_screenGeometry.coordinates[0]}, ${$tr_screenGeometry.coordinates[1]})` };\n  $: { if (initDone()) parsedTextAnchorPoint = textAnchorPoint(aesthetics.anchorPoint) }\n\n  // Update transitionables when transition settings change\n  beforeUpdate(() => {\n    if (!transitionsEqual(previousTransition, transition)) {\n      previousTransition = transition\n      tr_screenGeometry = createTransitionable('geometry', $tr_screenGeometry, transition)\n      tr_radius = createTransitionable('radius', $tr_radius, transition)\n      tr_fill = createTransitionable('fill', $tr_fill, transition)\n      tr_stroke = createTransitionable('stroke', $tr_stroke, transition)\n      tr_strokeWidth = createTransitionable('strokeWidth', $tr_strokeWidth, transition)\n      tr_fillOpacity = createTransitionable('fillOpacity', $tr_fillOpacity, transition)\n      tr_strokeOpacity = createTransitionable('strokeOpacity', $tr_strokeOpacity, transition)\n      tr_opacity = createTransitionable('opacity', $tr_opacity, transition)\n\n      tr_fontSize = createTransitionable('fontSize', $tr_fontSize, transition)\n      tr_fontWeight = createTransitionable('fontWeight', $tr_fontWeight, transition)\n      tr_rotation = createTransitionable('rotation', $tr_rotation, transition)\n    }\n  })\n\n  afterUpdate(() => {\n    initPhase = false\n  })\n\n  // Interactivity\n  $: isInteractiveMouse = detectIt.hasMouse && any(onClick, onMousedown, onMouseup, onMouseover, onMouseout, onMousedrag)\n  $: isInteractiveTouch = detectIt.hasTouch && any(onTouchdown, onTouchup, onTouchover, onTouchout, onTouchdrag)\n\n  $: isSelectable = onSelect !== undefined || onDeselect !== undefined\n\n  onMount(() => {\n    updateInteractionManagerIfNecessary()\n  })\n\n  onDestroy(() => {\n    removeMarkFromSpatialIndexIfNecessary()\n  })\n\n  // Helpers\n  function scheduleUpdatePixelGeometry () {\n    pixelGeometryRecalculationNecessary = true\n    screenGeometryRecalculationNecessary = true\n  }\n\n  function updatePixelGeometry () {\n    pixelGeometry = createPixelGeometry(\n      positioningAesthetics,\n      $sectionContext,\n      parseRenderSettings(renderSettings)\n    )\n  }\n\n  function scheduleUpdateScreenGeometry () {\n    screenGeometryRecalculationNecessary = true\n  }\n\n  function updateScreenGeometry () {\n    if (asPolygon) {\n      screenGeometry = representAsPolygon(pixelGeometry, aesthetics)\n    } else {\n      screenGeometry = pixelGeometry\n    }\n  }\n\n  function updateInteractionManagerIfNecessary () {\n    if (initPhase || !(blockReindexing || $sectionContext.blockReindexing)) {\n      removeMarkFromSpatialIndexIfNecessary()\n\n      if (isInteractiveMouse) {\n        const markInterface = $interactionManagerContext.mouse().marks()\n\n        markInterface.loadMark(type, createDataNecessaryForIndexing())\n\n        if (onClick) markInterface.addMarkInteraction('click', markId, onClick)\n        if (onMousedown) markInterface.addMarkInteraction('mousedown', markId, onMousedown)\n        if (onMouseup) markInterface.addMarkInteraction('mouseup', markId, onMouseup)\n        if (onMouseout) markInterface.addMarkInteraction('mouseout', markId, onMouseout)\n        if (onMouseover) markInterface.addMarkInteraction('mouseover', markId, onMouseover)\n        if (onMousedrag) markInterface.addMarkInteraction('mousedrag', markId, onMousedrag)\n      }\n\n      if (isInteractiveTouch) {\n        const markInterface = $interactionManagerContext.touch().marks()\n\n        markInterface.loadMark(type, createDataNecessaryForIndexing())\n\n        if (onTouchdown) markInterface.addMarkInteraction('touchdown', markId, onTouchdown)\n        if (onTouchup) markInterface.addMarkInteraction('touchup', markId, onTouchup)\n        if (onTouchover) markInterface.addMarkInteraction('touchover', markId, onTouchover)\n        if (onTouchout) markInterface.addMarkInteraction('touchout', markId, onTouchout)\n        if (onTouchdrag) markInterface.addMarkInteraction('touchdrag', markId, onTouchdrag)\n      }\n    }\n\n    removeMarkFromSelectIfNecessary()\n  \n    if (isSelectable) {\n      const selectManager = $interactionManagerContext.select()\n\n      selectManager.loadMark(\n        type, createDataNecessaryForIndexing(), { onSelect, onDeselect }\n      )\n    }\n  }\n\n  function removeMarkFromSpatialIndexIfNecessary () {\n    if (detectIt.hasMouse) {\n      const markMouseInterface = $interactionManagerContext.mouse().marks()\n\n      if (markMouseInterface.markIsLoaded(markId)) {\n        markMouseInterface.removeAllMarkInteractions(markId)\n        markMouseInterface.removeMark(markId)\n      }\n    }\n\n    if (detectIt.hasTouch) {\n      const markTouchInterface = $interactionManagerContext.touch().marks()\n\n      if (markTouchInterface.markIsLoaded(markId)) {\n        markTouchInterface.removeAllMarkInteractions(markId)\n        markTouchInterface.removeMark(markId)\n      }\n    }\n  }\n\n  function removeMarkFromSelectIfNecessary () {\n    const selectManager = $interactionManagerContext.select()\n\n    if (selectManager.markIsLoaded(markId)) {\n      selectManager.removeMark(markId)\n    }\n  }\n\n  function createDataNecessaryForIndexing () {\n    return createDataNecessaryForIndexingMark(\n      type, markId, { screenGeometry, pixelGeometry }, aesthetics\n    )\n  }\n\n  $: renderPolygon = !['Point', 'Line', 'Label'].includes(type) || asPolygon\n  $: renderCircle = type === 'Point' && !asPolygon\n  $: renderLine = type === 'Line' && !asPolygon\n  $: renderLabel = type === 'Label'\n</script>\n\n{#if $graphicContext.output() === 'svg'}\n\n  {#if renderPolygon}\n\n    <path\n      class={type.toLowerCase()}\n      d={generatePath($tr_screenGeometry)}\n      fill={$tr_fill}\n      stroke={$tr_stroke}\n      stroke-width={$tr_strokeWidth}\n      fill-opacity={$tr_fillOpacity}\n      stroke-opacity={$tr_strokeOpacity}\n      opacity={$tr_opacity}\n    />\n\n  {/if}\n\n  {#if renderCircle}\n\n    <circle \n      class=\"point\"\n      cx={$tr_screenGeometry.coordinates[0]}\n      cy={$tr_screenGeometry.coordinates[1]}\n      r={$tr_radius}\n      fill={$tr_fill}\n      stroke={$tr_stroke}\n      stroke-width={$tr_strokeWidth}\n      fill-opacity={$tr_fillOpacity}\n      stroke-opacity={$tr_strokeOpacity}\n      opacity={$tr_opacity}\n    />\n\n  {/if}\n\n  {#if renderLine}\n\n    <path\n      class=\"line\"\n      d={generatePath($tr_screenGeometry)}\n      fill=\"none\"\n      stroke-width={$tr_strokeWidth}\n      stroke={$tr_stroke}\n      opacity={$tr_opacity}\n    />\n  \n  {/if}\n\n  {#if renderLabel}\n\n    <text \n      class=\"label\"\n      x={$tr_screenGeometry.coordinates[0]}\n      y={$tr_screenGeometry.coordinates[1]}\n      fill={$tr_fill}\n      stroke={$tr_stroke}\n      stroke-width={$tr_strokeWidth}\n      fill-opacity={$tr_fillOpacity}\n      stroke-opacity={$tr_strokeOpacity}\n      opacity={$tr_opacity}\n      transform={rotateTransform}\n      font-family={fontFamily}\n      font-size={$tr_fontSize + 'px'}\n      font-weight={$tr_fontWeight}\n      text-anchor={parsedTextAnchorPoint.textAnchor}\n      dominant-baseline={parsedTextAnchorPoint.dominantBaseline}\n    >\n      {aesthetics.text}\n    </text>\n\n  {/if}\n\n{/if}\n","export function createDataNecessaryForIndexingMark (type, markId, geometryTypes, aesthetics) {\n  const markData = { markId }\n  let attributes\n\n  if (type === 'Point') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      radius: aesthetics.radius\n    }\n  }\n\n  if (type === 'Label') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      radius: aesthetics.fontSize\n    }\n  }\n\n  if (type === 'Rectangle') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Polygon') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Line') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      strokeWidth: aesthetics.strokeWidth\n    }\n  }\n\n  if (type === 'Symbol') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Area') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  markData.attributes = attributes\n\n  return markData\n}\n\nexport function createDataNecessaryForIndexingLayer (\n  type, layerId, keyArray, geometryObjects, aestheticsObjects\n) {\n  const layerData = { layerId, keyArray }\n  let layerAttributes\n\n  if (type === 'Point') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      radiusObject: aestheticsObjects.radiusObject\n    }\n  }\n\n  if (type === 'Label') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      radiusObject: aestheticsObjects.fontSizeObject\n    }\n  }\n\n  if (type === 'Rectangle') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Polygon') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Line') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      strokeWidthObject: aestheticsObjects.strokeWidthObject\n    }\n  }\n\n  if (type === 'Symbol') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Area') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  layerData.layerAttributes = layerAttributes\n\n  return layerData\n}\n","<script>\n  import Mark from '../Mark/Mark.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let radius = undefined\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n</script>\n\n<Mark\n  type=\"Point\"\n  {x} {y} {geometry} {radius} \n  {fill} {stroke} {strokeWidth}\n  {strokeOpacity} {fillOpacity} {opacity}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {renderSettings} {blockReindexing}\n  _asPolygon={false}\n/>","<script>\n  import Mark from '../Mark/Mark.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let strokeWidth = undefined\n  export let stroke = undefined\n  export let opacity = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n</script>\n\n<Mark \n  type=\"Line\"\n  {x} {y} {geometry}\n  {strokeWidth} {stroke} {opacity}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {renderSettings} {blockReindexing}\n  _asPolygon={false}\n/>","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global['florence-datacontainer'] = factory());\n}(this, (function () { 'use strict';\n\n  // Should be no imports here!\n  var _a; // SOme things that should be evaluated before all else...\n\n\n  var hasSymbol = typeof Symbol !== \"undefined\";\n  var hasMap = typeof Map !== \"undefined\";\n  var hasSet = typeof Set !== \"undefined\";\n  /**\r\n   * The sentinel value returned by producers to replace the draft with undefined.\r\n   */\n\n  var NOTHING = hasSymbol ? Symbol(\"immer-nothing\") : (_a = {}, _a[\"immer-nothing\"] = true, _a);\n  /**\r\n   * To let Immer treat your class instances as plain immutable objects\r\n   * (albeit with a custom prototype), you must define either an instance property\r\n   * or a static property on each of your custom classes.\r\n   *\r\n   * Otherwise, your class instance will never be drafted, which means it won't be\r\n   * safe to mutate in a produce callback.\r\n   */\n\n  var DRAFTABLE = hasSymbol ? Symbol(\"immer-draftable\") : \"__$immer_draftable\";\n  var DRAFT_STATE = hasSymbol ? Symbol(\"immer-state\") : \"__$immer_state\";\n  var iteratorSymbol = hasSymbol ? Symbol.iterator : \"@@iterator\";\n\n  /* istanbul ignore next */\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) { if (b.hasOwnProperty(p)) { d[p] = b[p]; } }\n    };\n\n    return extendStatics(d, b);\n  }; // Ugly hack to resolve #502 and inherit built in Map / Set\n\n\n  function __extends(d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = ( // @ts-ignore\n    __.prototype = b.prototype, new __());\n  }\n\n  var Archtype;\n\n  (function (Archtype) {\n    Archtype[Archtype[\"Object\"] = 0] = \"Object\";\n    Archtype[Archtype[\"Array\"] = 1] = \"Array\";\n    Archtype[Archtype[\"Map\"] = 2] = \"Map\";\n    Archtype[Archtype[\"Set\"] = 3] = \"Set\";\n  })(Archtype || (Archtype = {}));\n\n  var ProxyType;\n\n  (function (ProxyType) {\n    ProxyType[ProxyType[\"ProxyObject\"] = 0] = \"ProxyObject\";\n    ProxyType[ProxyType[\"ProxyArray\"] = 1] = \"ProxyArray\";\n    ProxyType[ProxyType[\"ES5Object\"] = 2] = \"ES5Object\";\n    ProxyType[ProxyType[\"ES5Array\"] = 3] = \"ES5Array\";\n    ProxyType[ProxyType[\"Map\"] = 4] = \"Map\";\n    ProxyType[ProxyType[\"Set\"] = 5] = \"Set\";\n  })(ProxyType || (ProxyType = {}));\n\n  /** Returns true if the given value is an Immer draft */\n\n  function isDraft(value) {\n    return !!value && !!value[DRAFT_STATE];\n  }\n  /** Returns true if the given value can be drafted by Immer */\n\n  function isDraftable(value) {\n    if (!value) { return false; }\n    return isPlainObject(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!value.constructor[DRAFTABLE] || isMap(value) || isSet(value);\n  }\n  function isPlainObject(value) {\n    if (!value || typeof value !== \"object\") { return false; }\n    var proto = Object.getPrototypeOf(value);\n    return !proto || proto === Object.prototype;\n  }\n  var ownKeys = typeof Reflect !== \"undefined\" && Reflect.ownKeys ? Reflect.ownKeys : typeof Object.getOwnPropertySymbols !== \"undefined\" ? function (obj) {\n    return Object.getOwnPropertyNames(obj).concat(Object.getOwnPropertySymbols(obj));\n  } :\n  /* istanbul ignore next */\n  Object.getOwnPropertyNames;\n  function each(obj, iter) {\n    if (getArchtype(obj) === Archtype.Object) {\n      ownKeys(obj).forEach(function (key) {\n        return iter(key, obj[key], obj);\n      });\n    } else {\n      obj.forEach(function (entry, index) {\n        return iter(index, entry, obj);\n      });\n    }\n  }\n  function isEnumerable(base, prop) {\n    var desc = Object.getOwnPropertyDescriptor(base, prop);\n    return desc && desc.enumerable ? true : false;\n  }\n  function getArchtype(thing) {\n    /* istanbul ignore next */\n    if (!thing) { die(); }\n\n    if (thing[DRAFT_STATE]) {\n      switch (thing[DRAFT_STATE].type) {\n        case ProxyType.ES5Object:\n        case ProxyType.ProxyObject:\n          return Archtype.Object;\n\n        case ProxyType.ES5Array:\n        case ProxyType.ProxyArray:\n          return Archtype.Array;\n\n        case ProxyType.Map:\n          return Archtype.Map;\n\n        case ProxyType.Set:\n          return Archtype.Set;\n      }\n    }\n\n    return Array.isArray(thing) ? Archtype.Array : isMap(thing) ? Archtype.Map : isSet(thing) ? Archtype.Set : Archtype.Object;\n  }\n  function has(thing, prop) {\n    return getArchtype(thing) === Archtype.Map ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);\n  }\n  function get(thing, prop) {\n    // @ts-ignore\n    return getArchtype(thing) === Archtype.Map ? thing.get(prop) : thing[prop];\n  }\n  function set(thing, propOrOldValue, value) {\n    switch (getArchtype(thing)) {\n      case Archtype.Map:\n        thing.set(propOrOldValue, value);\n        break;\n\n      case Archtype.Set:\n        thing.delete(propOrOldValue);\n        thing.add(value);\n        break;\n\n      default:\n        thing[propOrOldValue] = value;\n    }\n  }\n  function is(x, y) {\n    // From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n    if (x === y) {\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      return x !== x && y !== y;\n    }\n  }\n  function isMap(target) {\n    return hasMap && target instanceof Map;\n  }\n  function isSet(target) {\n    return hasSet && target instanceof Set;\n  }\n  function latest(state) {\n    return state.copy || state.base;\n  }\n  function shallowCopy(base, invokeGetters) {\n    if (invokeGetters === void 0) {\n      invokeGetters = false;\n    }\n\n    if (Array.isArray(base)) { return base.slice(); }\n    var clone = Object.create(Object.getPrototypeOf(base));\n    ownKeys(base).forEach(function (key) {\n      if (key === DRAFT_STATE) {\n        return; // Never copy over draft state.\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, key);\n      var value = desc.value;\n\n      if (desc.get) {\n        if (!invokeGetters) {\n          throw new Error(\"Immer drafts cannot have computed properties\");\n        }\n\n        value = desc.get.call(base);\n      }\n\n      if (desc.enumerable) {\n        clone[key] = value;\n      } else {\n        Object.defineProperty(clone, key, {\n          value: value,\n          writable: true,\n          configurable: true\n        });\n      }\n    });\n    return clone;\n  }\n  function freeze(obj, deep) {\n    if (!isDraftable(obj) || isDraft(obj) || Object.isFrozen(obj)) { return; }\n    var type = getArchtype(obj);\n\n    if (type === Archtype.Set) {\n      obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;\n    } else if (type === Archtype.Map) {\n      obj.set = obj.clear = obj.delete = dontMutateFrozenCollections;\n    }\n\n    Object.freeze(obj);\n    if (deep) { each(obj, function (_, value) {\n      return freeze(value, true);\n    }); }\n  }\n\n  function dontMutateFrozenCollections() {\n    throw new Error(\"This object has been frozen and should not be mutated\");\n  }\n\n  function createHiddenProperty(target, prop, value) {\n    Object.defineProperty(target, prop, {\n      value: value,\n      enumerable: false,\n      writable: true\n    });\n  }\n  /* istanbul ignore next */\n\n  function die() {\n    throw new Error(\"Illegal state, please file a bug\");\n  }\n\n  /** Each scope represents a `produce` call. */\n\n  var ImmerScope =\n  /** @class */\n  function () {\n    function ImmerScope(parent, immer) {\n      this.drafts = [];\n      this.parent = parent;\n      this.immer = immer; // Whenever the modified draft contains a draft from another scope, we\n      // need to prevent auto-freezing so the unowned draft can be finalized.\n\n      this.canAutoFreeze = true;\n    }\n\n    ImmerScope.prototype.usePatches = function (patchListener) {\n      if (patchListener) {\n        this.patches = [];\n        this.inversePatches = [];\n        this.patchListener = patchListener;\n      }\n    };\n\n    ImmerScope.prototype.revoke = function () {\n      this.leave();\n      this.drafts.forEach(revoke); // @ts-ignore\n\n      this.drafts = null;\n    };\n\n    ImmerScope.prototype.leave = function () {\n      if (this === ImmerScope.current) {\n        ImmerScope.current = this.parent;\n      }\n    };\n\n    ImmerScope.enter = function (immer) {\n      var scope = new ImmerScope(ImmerScope.current, immer);\n      ImmerScope.current = scope;\n      return scope;\n    };\n\n    return ImmerScope;\n  }();\n\n  function revoke(draft) {\n    var state = draft[DRAFT_STATE];\n    if (state.type === ProxyType.ProxyObject || state.type === ProxyType.ProxyArray) { state.revoke(); }else { state.revoked = true; }\n  }\n\n  function processResult(immer, result, scope) {\n    var baseDraft = scope.drafts[0];\n    var isReplaced = result !== undefined && result !== baseDraft;\n    immer.willFinalize(scope, result, isReplaced);\n\n    if (isReplaced) {\n      if (baseDraft[DRAFT_STATE].modified) {\n        scope.revoke();\n        throw new Error(\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\"); // prettier-ignore\n      }\n\n      if (isDraftable(result)) {\n        // Finalize the result in case it contains (or is) a subset of the draft.\n        result = finalize(immer, result, scope);\n        if (!scope.parent) { maybeFreeze(immer, result); }\n      }\n\n      if (scope.patches) {\n        scope.patches.push({\n          op: \"replace\",\n          path: [],\n          value: result\n        });\n        scope.inversePatches.push({\n          op: \"replace\",\n          path: [],\n          value: baseDraft[DRAFT_STATE].base\n        });\n      }\n    } else {\n      // Finalize the base draft.\n      result = finalize(immer, baseDraft, scope, []);\n    }\n\n    scope.revoke();\n\n    if (scope.patches) {\n      scope.patchListener(scope.patches, scope.inversePatches);\n    }\n\n    return result !== NOTHING ? result : undefined;\n  }\n\n  function finalize(immer, draft, scope, path) {\n    var state = draft[DRAFT_STATE];\n\n    if (!state) {\n      if (Object.isFrozen(draft)) { return draft; }\n      return finalizeTree(immer, draft, scope);\n    } // Never finalize drafts owned by another scope.\n\n\n    if (state.scope !== scope) {\n      return draft;\n    }\n\n    if (!state.modified) {\n      maybeFreeze(immer, state.base, true);\n      return state.base;\n    }\n\n    if (!state.finalized) {\n      state.finalized = true;\n      finalizeTree(immer, state.draft, scope, path); // We cannot really delete anything inside of a Set. We can only replace the whole Set.\n\n      if (immer.onDelete && state.type !== ProxyType.Set) {\n        // The `assigned` object is unreliable with ES5 drafts.\n        if (immer.useProxies) {\n          var assigned = state.assigned;\n          each(assigned, function (prop, exists) {\n            if (!exists) { immer.onDelete(state, prop); }\n          });\n        } else {\n          var base = state.base,\n              copy_1 = state.copy;\n          each(base, function (prop) {\n            if (!has(copy_1, prop)) { immer.onDelete(state, prop); }\n          });\n        }\n      }\n\n      if (immer.onCopy) {\n        immer.onCopy(state);\n      } // At this point, all descendants of `state.copy` have been finalized,\n      // so we can be sure that `scope.canAutoFreeze` is accurate.\n\n\n      if (immer.autoFreeze && scope.canAutoFreeze) {\n        freeze(state.copy, false);\n      }\n\n      if (path && scope.patches) {\n        generatePatches(state, path, scope.patches, scope.inversePatches);\n      }\n    }\n\n    return state.copy;\n  }\n\n  function finalizeTree(immer, root, scope, rootPath) {\n    var state = root[DRAFT_STATE];\n\n    if (state) {\n      if (state.type === ProxyType.ES5Object || state.type === ProxyType.ES5Array) {\n        // Create the final copy, with added keys and without deleted keys.\n        state.copy = shallowCopy(state.draft, true);\n      }\n\n      root = state.copy;\n    }\n\n    each(root, function (key, value) {\n      return finalizeProperty(immer, scope, root, state, root, key, value, rootPath);\n    });\n    return root;\n  }\n\n  function finalizeProperty(immer, scope, root, rootState, parentValue, prop, childValue, rootPath) {\n    if (childValue === parentValue) {\n      throw Error(\"Immer forbids circular references\");\n    } // In the `finalizeTree` method, only the `root` object may be a draft.\n\n\n    var isDraftProp = !!rootState && parentValue === root;\n    var isSetMember = isSet(parentValue);\n\n    if (isDraft(childValue)) {\n      var path = rootPath && isDraftProp && !isSetMember && // Set objects are atomic since they have no keys.\n      !has(rootState.assigned, prop) // Skip deep patches for assigned keys.\n      ? rootPath.concat(prop) : undefined; // Drafts owned by `scope` are finalized here.\n\n      childValue = finalize(immer, childValue, scope, path);\n      set(parentValue, prop, childValue); // Drafts from another scope must prevent auto-freezing.\n\n      if (isDraft(childValue)) {\n        scope.canAutoFreeze = false;\n      }\n    } // Unchanged draft properties are ignored.\n    else if (isDraftProp && is(childValue, get(rootState.base, prop))) {\n        return;\n      } // Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n      // TODO: the recursion over here looks weird, shouldn't non-draft stuff have it's own recursion?\n      // especially the passing on of root and rootState doesn't make sense...\n      else if (isDraftable(childValue)) {\n          each(childValue, function (key, grandChild) {\n            return finalizeProperty(immer, scope, root, rootState, childValue, key, grandChild, rootPath);\n          });\n          if (!scope.parent) { maybeFreeze(immer, childValue); }\n        }\n\n    if (isDraftProp && immer.onAssign && !isSetMember) {\n      immer.onAssign(rootState, prop, childValue);\n    }\n  }\n\n  function maybeFreeze(immer, value, deep) {\n    if (deep === void 0) {\n      deep = false;\n    }\n\n    if (immer.autoFreeze && !isDraft(value)) {\n      freeze(value, deep);\n    }\n  }\n\n  /**\r\n   * Returns a new draft of the `base` object.\r\n   *\r\n   * The second argument is the parent draft-state (used internally).\r\n   */\n\n  function createProxy(base, parent) {\n    var isArray = Array.isArray(base);\n    var state = {\n      type: isArray ? ProxyType.ProxyArray : ProxyType.ProxyObject,\n      // Track which produce call this is associated with.\n      scope: parent ? parent.scope : ImmerScope.current,\n      // True for both shallow and deep changes.\n      modified: false,\n      // Used during finalization.\n      finalized: false,\n      // Track which properties have been assigned (true) or deleted (false).\n      assigned: {},\n      // The parent draft state.\n      parent: parent,\n      // The base state.\n      base: base,\n      // The base proxy.\n      draft: null,\n      // Any property proxies.\n      drafts: {},\n      // The base copy with any updated values.\n      copy: null,\n      // Called by the `produce` function.\n      revoke: null,\n      isManual: false\n    }; // the traps must target something, a bit like the 'real' base.\n    // but also, we need to be able to determine from the target what the relevant state is\n    // (to avoid creating traps per instance to capture the state in closure,\n    // and to avoid creating weird hidden properties as well)\n    // So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n    // Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\n    var target = state;\n    var traps = objectTraps;\n\n    if (isArray) {\n      target = [state];\n      traps = arrayTraps;\n    } // TODO: optimization: might be faster, cheaper if we created a non-revocable proxy\n    // and administrate revoking ourselves\n\n\n    var _a = Proxy.revocable(target, traps),\n        revoke = _a.revoke,\n        proxy = _a.proxy;\n\n    state.draft = proxy;\n    state.revoke = revoke;\n    return proxy;\n  }\n  /**\r\n   * Object drafts\r\n   */\n\n  var objectTraps = {\n    get: function (state, prop) {\n      if (prop === DRAFT_STATE) { return state; }\n      var drafts = state.drafts; // Check for existing draft in unmodified state.\n\n      if (!state.modified && has(drafts, prop)) {\n        return drafts[prop];\n      }\n\n      var value = latest(state)[prop];\n\n      if (state.finalized || !isDraftable(value)) {\n        return value;\n      } // Check for existing draft in modified state.\n\n\n      if (state.modified) {\n        // Assigned values are never drafted. This catches any drafts we created, too.\n        if (value !== peek(state.base, prop)) { return value; } // Store drafts on the copy (when one exists).\n        // @ts-ignore\n\n        drafts = state.copy;\n      }\n\n      return drafts[prop] = state.scope.immer.createProxy(value, state);\n    },\n    has: function (state, prop) {\n      return prop in latest(state);\n    },\n    ownKeys: function (state) {\n      return Reflect.ownKeys(latest(state));\n    },\n    set: function (state, prop\n    /* strictly not, but helps TS */\n    , value) {\n      if (!state.modified) {\n        var baseValue = peek(state.base, prop); // Optimize based on value's truthiness. Truthy values are guaranteed to\n        // never be undefined, so we can avoid the `in` operator. Lastly, truthy\n        // values may be drafts, but falsy values are never drafts.\n\n        var isUnchanged = value ? is(baseValue, value) || value === state.drafts[prop] : is(baseValue, value) && prop in state.base;\n        if (isUnchanged) { return true; }\n        prepareCopy(state);\n        markChanged(state);\n      }\n\n      state.assigned[prop] = true; // @ts-ignore\n\n      state.copy[prop] = value;\n      return true;\n    },\n    deleteProperty: function (state, prop) {\n      // The `undefined` check is a fast path for pre-existing keys.\n      if (peek(state.base, prop) !== undefined || prop in state.base) {\n        state.assigned[prop] = false;\n        prepareCopy(state);\n        markChanged(state);\n      } else if (state.assigned[prop]) {\n        // if an originally not assigned property was deleted\n        delete state.assigned[prop];\n      } // @ts-ignore\n\n\n      if (state.copy) { delete state.copy[prop]; }\n      return true;\n    },\n    // Note: We never coerce `desc.value` into an Immer draft, because we can't make\n    // the same guarantee in ES5 mode.\n    getOwnPropertyDescriptor: function (state, prop) {\n      var owner = latest(state);\n      var desc = Reflect.getOwnPropertyDescriptor(owner, prop);\n\n      if (desc) {\n        desc.writable = true;\n        desc.configurable = state.type !== ProxyType.ProxyArray || prop !== \"length\";\n      }\n\n      return desc;\n    },\n    defineProperty: function () {\n      throw new Error(\"Object.defineProperty() cannot be used on an Immer draft\"); // prettier-ignore\n    },\n    getPrototypeOf: function (state) {\n      return Object.getPrototypeOf(state.base);\n    },\n    setPrototypeOf: function () {\n      throw new Error(\"Object.setPrototypeOf() cannot be used on an Immer draft\"); // prettier-ignore\n    }\n  };\n  /**\r\n   * Array drafts\r\n   */\n\n  var arrayTraps = {};\n  each(objectTraps, function (key, fn) {\n    // @ts-ignore\n    arrayTraps[key] = function () {\n      arguments[0] = arguments[0][0];\n      return fn.apply(this, arguments);\n    };\n  });\n\n  arrayTraps.deleteProperty = function (state, prop) {\n    if (isNaN(parseInt(prop))) {\n      throw new Error(\"Immer only supports deleting array indices\"); // prettier-ignore\n    }\n\n    return objectTraps.deleteProperty.call(this, state[0], prop);\n  };\n\n  arrayTraps.set = function (state, prop, value) {\n    if (prop !== \"length\" && isNaN(parseInt(prop))) {\n      throw new Error(\"Immer only supports setting array indices and the 'length' property\"); // prettier-ignore\n    }\n\n    return objectTraps.set.call(this, state[0], prop, value, state[0]);\n  };\n  /**\r\n   * Map drafts\r\n   */\n  // Access a property without creating an Immer draft.\n\n\n  function peek(draft, prop) {\n    var state = draft[DRAFT_STATE];\n    var desc = Reflect.getOwnPropertyDescriptor(state ? latest(state) : draft, prop);\n    return desc && desc.value;\n  }\n\n  function markChanged(state) {\n    if (!state.modified) {\n      state.modified = true;\n\n      if (state.type === ProxyType.ProxyObject || state.type === ProxyType.ProxyArray) {\n        var copy_1 = state.copy = shallowCopy(state.base);\n        each(state.drafts, function (key, value) {\n          // @ts-ignore\n          copy_1[key] = value;\n        });\n        state.drafts = undefined;\n      }\n\n      if (state.parent) {\n        markChanged(state.parent);\n      }\n    }\n  }\n\n  function prepareCopy(state) {\n    if (!state.copy) {\n      state.copy = shallowCopy(state.base);\n    }\n  }\n\n  function willFinalizeES5(scope, result, isReplaced) {\n    scope.drafts.forEach(function (draft) {\n      draft[DRAFT_STATE].finalizing = true;\n    });\n\n    if (!isReplaced) {\n      if (scope.patches) {\n        markChangesRecursively(scope.drafts[0]);\n      } // This is faster when we don't care about which attributes changed.\n\n\n      markChangesSweep(scope.drafts);\n    } // When a child draft is returned, look for changes.\n    else if (isDraft(result) && result[DRAFT_STATE].scope === scope) {\n        markChangesSweep(scope.drafts);\n      }\n  }\n  function createES5Proxy(base, parent) {\n    var isArray = Array.isArray(base);\n    var draft = clonePotentialDraft(base);\n    each(draft, function (prop) {\n      proxyProperty(draft, prop, isArray || isEnumerable(base, prop));\n    });\n    var state = {\n      type: isArray ? ProxyType.ES5Array : ProxyType.ES5Object,\n      scope: parent ? parent.scope : ImmerScope.current,\n      modified: false,\n      finalizing: false,\n      finalized: false,\n      assigned: {},\n      parent: parent,\n      base: base,\n      draft: draft,\n      copy: null,\n      revoked: false,\n      isManual: false\n    };\n    createHiddenProperty(draft, DRAFT_STATE, state);\n    return draft;\n  } // Access a property without creating an Immer draft.\n\n  function peek$1(draft, prop) {\n    var state = draft[DRAFT_STATE];\n\n    if (state && !state.finalizing) {\n      state.finalizing = true;\n      var value = draft[prop];\n      state.finalizing = false;\n      return value;\n    }\n\n    return draft[prop];\n  }\n\n  function get$1(state, prop) {\n    assertUnrevoked(state);\n    var value = peek$1(latest(state), prop);\n    if (state.finalizing) { return value; } // Create a draft if the value is unmodified.\n\n    if (value === peek$1(state.base, prop) && isDraftable(value)) {\n      prepareCopy$1(state); // @ts-ignore\n\n      return state.copy[prop] = state.scope.immer.createProxy(value, state);\n    }\n\n    return value;\n  }\n\n  function set$1(state, prop, value) {\n    assertUnrevoked(state);\n    state.assigned[prop] = true;\n\n    if (!state.modified) {\n      if (is(value, peek$1(latest(state), prop))) { return; }\n      markChangedES5(state);\n      prepareCopy$1(state);\n    } // @ts-ignore\n\n\n    state.copy[prop] = value;\n  }\n\n  function markChangedES5(state) {\n    if (!state.modified) {\n      state.modified = true;\n      if (state.parent) { markChangedES5(state.parent); }\n    }\n  }\n\n  function prepareCopy$1(state) {\n    if (!state.copy) { state.copy = clonePotentialDraft(state.base); }\n  }\n\n  function clonePotentialDraft(base) {\n    var state = base && base[DRAFT_STATE];\n\n    if (state) {\n      state.finalizing = true;\n      var draft = shallowCopy(state.draft, true);\n      state.finalizing = false;\n      return draft;\n    }\n\n    return shallowCopy(base);\n  } // property descriptors are recycled to make sure we don't create a get and set closure per property,\n  // but share them all instead\n\n\n  var descriptors = {};\n\n  function proxyProperty(draft, prop, enumerable) {\n    var desc = descriptors[prop];\n\n    if (desc) {\n      desc.enumerable = enumerable;\n    } else {\n      descriptors[prop] = desc = {\n        configurable: true,\n        enumerable: enumerable,\n        get: function () {\n          return get$1(this[DRAFT_STATE], prop);\n        },\n        set: function (value) {\n          set$1(this[DRAFT_STATE], prop, value);\n        }\n      };\n    }\n\n    Object.defineProperty(draft, prop, desc);\n  }\n\n  function assertUnrevoked(state) {\n    if (state.revoked === true) { throw new Error(\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + JSON.stringify(latest(state))); }\n  } // This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\n\n  function markChangesSweep(drafts) {\n    // The natural order of drafts in the `scope` array is based on when they\n    // were accessed. By processing drafts in reverse natural order, we have a\n    // better chance of processing leaf nodes first. When a leaf node is known to\n    // have changed, we can avoid any traversal of its ancestor nodes.\n    for (var i = drafts.length - 1; i >= 0; i--) {\n      var state = drafts[i][DRAFT_STATE];\n\n      if (!state.modified) {\n        switch (state.type) {\n          case ProxyType.ES5Array:\n            if (hasArrayChanges(state)) { markChangedES5(state); }\n            break;\n\n          case ProxyType.ES5Object:\n            if (hasObjectChanges(state)) { markChangedES5(state); }\n            break;\n        }\n      }\n    }\n  }\n\n  function markChangesRecursively(object) {\n    if (!object || typeof object !== \"object\") { return; }\n    var state = object[DRAFT_STATE];\n    if (!state) { return; }\n    var base = state.base,\n        draft = state.draft,\n        assigned = state.assigned,\n        type = state.type;\n\n    if (type === ProxyType.ES5Object) {\n      // Look for added keys.\n      // TODO: looks quite duplicate to hasObjectChanges,\n      // probably there is a faster way to detect changes, as sweep + recurse seems to do some\n      // unnecessary work.\n      // also: probably we can store the information we detect here, to speed up tree finalization!\n      each(draft, function (key) {\n        if (key === DRAFT_STATE) { return; } // The `undefined` check is a fast path for pre-existing keys.\n\n        if (base[key] === undefined && !has(base, key)) {\n          assigned[key] = true;\n          markChangedES5(state);\n        } else if (!assigned[key]) {\n          // Only untouched properties trigger recursion.\n          markChangesRecursively(draft[key]);\n        }\n      }); // Look for removed keys.\n\n      each(base, function (key) {\n        // The `undefined` check is a fast path for pre-existing keys.\n        if (draft[key] === undefined && !has(draft, key)) {\n          assigned[key] = false;\n          markChangedES5(state);\n        }\n      });\n    } else if (type === ProxyType.ES5Array) {\n      if (hasArrayChanges(state)) {\n        markChangedES5(state);\n        assigned.length = true;\n      }\n\n      if (draft.length < base.length) {\n        for (var i = draft.length; i < base.length; i++) { assigned[i] = false; }\n      } else {\n        for (var i = base.length; i < draft.length; i++) { assigned[i] = true; }\n      } // Minimum count is enough, the other parts has been processed.\n\n\n      var min = Math.min(draft.length, base.length);\n\n      for (var i = 0; i < min; i++) {\n        // Only untouched indices trigger recursion.\n        if (assigned[i] === undefined) { markChangesRecursively(draft[i]); }\n      }\n    }\n  }\n\n  function hasObjectChanges(state) {\n    var base = state.base,\n        draft = state.draft; // Search for added keys and changed keys. Start at the back, because\n    // non-numeric keys are ordered by time of definition on the object.\n\n    var keys = Object.keys(draft);\n\n    for (var i = keys.length - 1; i >= 0; i--) {\n      var key = keys[i];\n      var baseValue = base[key]; // The `undefined` check is a fast path for pre-existing keys.\n\n      if (baseValue === undefined && !has(base, key)) {\n        return true;\n      } // Once a base key is deleted, future changes go undetected, because its\n      // descriptor is erased. This branch detects any missed changes.\n      else {\n          var value = draft[key];\n          var state_1 = value && value[DRAFT_STATE];\n\n          if (state_1 ? state_1.base !== baseValue : !is(value, baseValue)) {\n            return true;\n          }\n        }\n    } // At this point, no keys were added or changed.\n    // Compare key count to determine if keys were deleted.\n\n\n    return keys.length !== Object.keys(base).length;\n  }\n\n  function hasArrayChanges(state) {\n    var draft = state.draft;\n    if (draft.length !== state.base.length) { return true; } // See #116\n    // If we first shorten the length, our array interceptors will be removed.\n    // If after that new items are added, result in the same original length,\n    // those last items will have no intercepting property.\n    // So if there is no own descriptor on the last position, we know that items were removed and added\n    // N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n    // the last one\n\n    var descriptor = Object.getOwnPropertyDescriptor(draft, draft.length - 1); // descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n\n    if (descriptor && !descriptor.get) { return true; } // For all other cases, we don't have to compare, as they would have been picked up by the index setters\n\n    return false;\n  }\n\n  var DraftMap = function (_super) {\n    if (!_super) {\n      /* istanbul ignore next */\n      throw new Error(\"Map is not polyfilled\");\n    }\n\n    __extends(DraftMap, _super); // Create class manually, cause #502\n\n\n    function DraftMap(target, parent) {\n      this[DRAFT_STATE] = {\n        type: ProxyType.Map,\n        parent: parent,\n        scope: parent ? parent.scope : ImmerScope.current,\n        modified: false,\n        finalized: false,\n        copy: undefined,\n        assigned: undefined,\n        base: target,\n        draft: this,\n        isManual: false,\n        revoked: false\n      };\n      return this;\n    }\n\n    var p = DraftMap.prototype; // TODO: smaller build size if we create a util for Object.defineProperty\n\n    Object.defineProperty(p, \"size\", {\n      get: function () {\n        return latest(this[DRAFT_STATE]).size;\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    p.has = function (key) {\n      return latest(this[DRAFT_STATE]).has(key);\n    };\n\n    p.set = function (key, value) {\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n\n      if (latest(state).get(key) !== value) {\n        prepareCopy$2(state);\n        state.scope.immer.markChanged(state);\n        state.assigned.set(key, true);\n        state.copy.set(key, value);\n        state.assigned.set(key, true);\n      }\n\n      return this;\n    };\n\n    p.delete = function (key) {\n      if (!this.has(key)) {\n        return false;\n      }\n\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareCopy$2(state);\n      state.scope.immer.markChanged(state);\n      state.assigned.set(key, false);\n      state.copy.delete(key);\n      return true;\n    };\n\n    p.clear = function () {\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareCopy$2(state);\n      state.scope.immer.markChanged(state);\n      state.assigned = new Map();\n      return state.copy.clear();\n    };\n\n    p.forEach = function (cb, thisArg) {\n      var _this = this;\n\n      var state = this[DRAFT_STATE];\n      latest(state).forEach(function (_value, key, _map) {\n        cb.call(thisArg, _this.get(key), key, _this);\n      });\n    };\n\n    p.get = function (key) {\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      var value = latest(state).get(key);\n\n      if (state.finalized || !isDraftable(value)) {\n        return value;\n      }\n\n      if (value !== state.base.get(key)) {\n        return value; // either already drafted or reassigned\n      } // despite what it looks, this creates a draft only once, see above condition\n\n\n      var draft = state.scope.immer.createProxy(value, state);\n      prepareCopy$2(state);\n      state.copy.set(key, draft);\n      return draft;\n    };\n\n    p.keys = function () {\n      return latest(this[DRAFT_STATE]).keys();\n    };\n\n    p.values = function () {\n      var _a;\n\n      var _this = this;\n\n      var iterator = this.keys();\n      return _a = {}, _a[iteratorSymbol] = function () {\n        return _this.values();\n      }, _a.next = function () {\n        var r = iterator.next();\n        /* istanbul ignore next */\n\n        if (r.done) { return r; }\n\n        var value = _this.get(r.value);\n\n        return {\n          done: false,\n          value: value\n        };\n      }, _a;\n    };\n\n    p.entries = function () {\n      var _a;\n\n      var _this = this;\n\n      var iterator = this.keys();\n      return _a = {}, _a[iteratorSymbol] = function () {\n        return _this.entries();\n      }, _a.next = function () {\n        var r = iterator.next();\n        /* istanbul ignore next */\n\n        if (r.done) { return r; }\n\n        var value = _this.get(r.value);\n\n        return {\n          done: false,\n          value: [r.value, value]\n        };\n      }, _a;\n    };\n\n    p[iteratorSymbol] = function () {\n      return this.entries();\n    };\n\n    return DraftMap;\n  }(Map);\n\n  function proxyMap(target, parent) {\n    // @ts-ignore\n    return new DraftMap(target, parent);\n  }\n\n  function prepareCopy$2(state) {\n    if (!state.copy) {\n      state.assigned = new Map();\n      state.copy = new Map(state.base);\n    }\n  }\n\n  var DraftSet = function (_super) {\n    if (!_super) {\n      /* istanbul ignore next */\n      throw new Error(\"Set is not polyfilled\");\n    }\n\n    __extends(DraftSet, _super); // Create class manually, cause #502\n\n\n    function DraftSet(target, parent) {\n      this[DRAFT_STATE] = {\n        type: ProxyType.Set,\n        parent: parent,\n        scope: parent ? parent.scope : ImmerScope.current,\n        modified: false,\n        finalized: false,\n        copy: undefined,\n        base: target,\n        draft: this,\n        drafts: new Map(),\n        revoked: false,\n        isManual: false\n      };\n      return this;\n    }\n\n    var p = DraftSet.prototype;\n    Object.defineProperty(p, \"size\", {\n      get: function () {\n        return latest(this[DRAFT_STATE]).size;\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    p.has = function (value) {\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state); // bit of trickery here, to be able to recognize both the value, and the draft of its value\n\n      if (!state.copy) {\n        return state.base.has(value);\n      }\n\n      if (state.copy.has(value)) { return true; }\n      if (state.drafts.has(value) && state.copy.has(state.drafts.get(value))) { return true; }\n      return false;\n    };\n\n    p.add = function (value) {\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n\n      if (state.copy) {\n        state.copy.add(value);\n      } else if (!state.base.has(value)) {\n        prepareCopy$3(state);\n        state.scope.immer.markChanged(state);\n        state.copy.add(value);\n      }\n\n      return this;\n    };\n\n    p.delete = function (value) {\n      if (!this.has(value)) {\n        return false;\n      }\n\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareCopy$3(state);\n      state.scope.immer.markChanged(state);\n      return state.copy.delete(value) || (state.drafts.has(value) ? state.copy.delete(state.drafts.get(value)) :\n      /* istanbul ignore next */\n      false);\n    };\n\n    p.clear = function () {\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareCopy$3(state);\n      state.scope.immer.markChanged(state);\n      return state.copy.clear();\n    };\n\n    p.values = function () {\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareCopy$3(state);\n      return state.copy.values();\n    };\n\n    p.entries = function entries() {\n      var state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareCopy$3(state);\n      return state.copy.entries();\n    };\n\n    p.keys = function () {\n      return this.values();\n    };\n\n    p[iteratorSymbol] = function () {\n      return this.values();\n    };\n\n    p.forEach = function forEach(cb, thisArg) {\n      var iterator = this.values();\n      var result = iterator.next();\n\n      while (!result.done) {\n        cb.call(thisArg, result.value, result.value, this);\n        result = iterator.next();\n      }\n    };\n\n    return DraftSet;\n  }(Set);\n\n  function proxySet(target, parent) {\n    // @ts-ignore\n    return new DraftSet(target, parent);\n  }\n\n  function prepareCopy$3(state) {\n    if (!state.copy) {\n      // create drafts for all entries to preserve insertion order\n      state.copy = new Set();\n      state.base.forEach(function (value) {\n        if (isDraftable(value)) {\n          var draft = state.scope.immer.createProxy(value, state);\n          state.drafts.set(value, draft);\n          state.copy.add(draft);\n        } else {\n          state.copy.add(value);\n        }\n      });\n    }\n  }\n\n  function generatePatches(state, basePath, patches, inversePatches) {\n    switch (state.type) {\n      case ProxyType.ProxyObject:\n      case ProxyType.ES5Object:\n      case ProxyType.Map:\n        return generatePatchesFromAssigned(state, basePath, patches, inversePatches);\n\n      case ProxyType.ES5Array:\n      case ProxyType.ProxyArray:\n        return generateArrayPatches(state, basePath, patches, inversePatches);\n\n      case ProxyType.Set:\n        return generateSetPatches(state, basePath, patches, inversePatches);\n    }\n  }\n\n  function generateArrayPatches(state, basePath, patches, inversePatches) {\n    var _a, _b;\n\n    var base = state.base,\n        assigned = state.assigned,\n        copy = state.copy;\n    /* istanbul ignore next */\n\n    if (!copy) { die(); } // Reduce complexity by ensuring `base` is never longer.\n\n    if (copy.length < base.length) {\n      _a = [copy, base], base = _a[0], copy = _a[1];\n      _b = [inversePatches, patches], patches = _b[0], inversePatches = _b[1];\n    }\n\n    var delta = copy.length - base.length; // Find the first replaced index.\n\n    var start = 0;\n\n    while (base[start] === copy[start] && start < base.length) {\n      ++start;\n    } // Find the last replaced index. Search from the end to optimize splice patches.\n\n\n    var end = base.length;\n\n    while (end > start && base[end - 1] === copy[end + delta - 1]) {\n      --end;\n    } // Process replaced indices.\n\n\n    for (var i = start; i < end; ++i) {\n      if (assigned[i] && copy[i] !== base[i]) {\n        var path = basePath.concat([i]);\n        patches.push({\n          op: \"replace\",\n          path: path,\n          value: copy[i]\n        });\n        inversePatches.push({\n          op: \"replace\",\n          path: path,\n          value: base[i]\n        });\n      }\n    }\n\n    var replaceCount = patches.length; // Process added indices.\n\n    for (var i = end + delta - 1; i >= end; --i) {\n      var path = basePath.concat([i]);\n      patches[replaceCount + i - end] = {\n        op: \"add\",\n        path: path,\n        value: copy[i]\n      };\n      inversePatches.push({\n        op: \"remove\",\n        path: path\n      });\n    }\n  } // This is used for both Map objects and normal objects.\n\n\n  function generatePatchesFromAssigned(state, basePath, patches, inversePatches) {\n    var base = state.base,\n        copy = state.copy;\n    each(state.assigned, function (key, assignedValue) {\n      var origValue = get(base, key);\n      var value = get(copy, key);\n      var op = !assignedValue ? \"remove\" : has(base, key) ? \"replace\" : \"add\";\n      if (origValue === value && op === \"replace\") { return; }\n      var path = basePath.concat(key);\n      patches.push(op === \"remove\" ? {\n        op: op,\n        path: path\n      } : {\n        op: op,\n        path: path,\n        value: value\n      });\n      inversePatches.push(op === \"add\" ? {\n        op: \"remove\",\n        path: path\n      } : op === \"remove\" ? {\n        op: \"add\",\n        path: path,\n        value: origValue\n      } : {\n        op: \"replace\",\n        path: path,\n        value: origValue\n      });\n    });\n  }\n\n  function generateSetPatches(state, basePath, patches, inversePatches) {\n    var base = state.base,\n        copy = state.copy;\n    var i = 0;\n    base.forEach(function (value) {\n      if (!copy.has(value)) {\n        var path = basePath.concat([i]);\n        patches.push({\n          op: \"remove\",\n          path: path,\n          value: value\n        });\n        inversePatches.unshift({\n          op: \"add\",\n          path: path,\n          value: value\n        });\n      }\n\n      i++;\n    });\n    i = 0;\n    copy.forEach(function (value) {\n      if (!base.has(value)) {\n        var path = basePath.concat([i]);\n        patches.push({\n          op: \"add\",\n          path: path,\n          value: value\n        });\n        inversePatches.unshift({\n          op: \"remove\",\n          path: path,\n          value: value\n        });\n      }\n\n      i++;\n    });\n  }\n\n  function applyPatches(draft, patches) {\n    patches.forEach(function (patch) {\n      var path = patch.path,\n          op = patch.op;\n      /* istanbul ignore next */\n\n      if (!path.length) { die(); }\n      var base = draft;\n\n      for (var i = 0; i < path.length - 1; i++) {\n        base = get(base, path[i]);\n        if (!base || typeof base !== \"object\") { throw new Error(\"Cannot apply patch, path doesn't resolve: \" + path.join(\"/\")); } // prettier-ignore\n      }\n\n      var type = getArchtype(base);\n      var value = deepClonePatchValue(patch.value); // used to clone patch to ensure original patch is not modified, see #411\n\n      var key = path[path.length - 1];\n\n      switch (op) {\n        case \"replace\":\n          switch (type) {\n            case Archtype.Map:\n              return base.set(key, value);\n\n            /* istanbul ignore next */\n\n            case Archtype.Set:\n              throw new Error('Sets cannot have \"replace\" patches.');\n\n            default:\n              // if value is an object, then it's assigned by reference\n              // in the following add or remove ops, the value field inside the patch will also be modifyed\n              // so we use value from the cloned patch\n              // @ts-ignore\n              return base[key] = value;\n          }\n\n        case \"add\":\n          switch (type) {\n            case Archtype.Array:\n              return base.splice(key, 0, value);\n\n            case Archtype.Map:\n              return base.set(key, value);\n\n            case Archtype.Set:\n              return base.add(value);\n\n            default:\n              return base[key] = value;\n          }\n\n        case \"remove\":\n          switch (type) {\n            case Archtype.Array:\n              return base.splice(key, 1);\n\n            case Archtype.Map:\n              return base.delete(key);\n\n            case Archtype.Set:\n              return base.delete(patch.value);\n\n            default:\n              return delete base[key];\n          }\n\n        default:\n          throw new Error(\"Unsupported patch operation: \" + op);\n      }\n    });\n    return draft;\n  }\n\n  function deepClonePatchValue(obj) {\n    if (!obj || typeof obj !== \"object\") { return obj; }\n    if (Array.isArray(obj)) { return obj.map(deepClonePatchValue); }\n    if (isMap(obj)) { return new Map(Array.from(obj.entries()).map(function (_a) {\n      var k = _a[0],\n          v = _a[1];\n      return [k, deepClonePatchValue(v)];\n    })); }\n    if (isSet(obj)) { return new Set(Array.from(obj).map(deepClonePatchValue)); }\n    var cloned = Object.create(Object.getPrototypeOf(obj));\n\n    for (var key in obj) { cloned[key] = deepClonePatchValue(obj[key]); }\n\n    return cloned;\n  }\n\n  /*! *****************************************************************************\r\n  Copyright (c) Microsoft Corporation. All rights reserved.\r\n  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n  this file except in compliance with the License. You may obtain a copy of the\r\n  License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n  MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n  See the Apache Version 2.0 License for specific language governing permissions\r\n  and limitations under the License.\r\n  ***************************************************************************** */\r\n\r\n  function __spreadArrays() {\r\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n          for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n              r[k] = a[j];\r\n      return r;\r\n  }\n\n  /* istanbul ignore next */\n\n  function verifyMinified() {}\n\n  var configDefaults = {\n    useProxies: typeof Proxy !== \"undefined\" && typeof Proxy.revocable !== \"undefined\" && typeof Reflect !== \"undefined\",\n    autoFreeze: typeof process !== \"undefined\" ? process.env.NODE_ENV !== \"production\" :\n    /* istanbul ignore next */\n    verifyMinified.name === \"verifyMinified\",\n    onAssign: null,\n    onDelete: null,\n    onCopy: null\n  };\n\n  var Immer =\n  /** @class */\n  function () {\n    function Immer(config) {\n      var _this = this;\n\n      this.useProxies = false;\n      this.autoFreeze = false;\n      each(configDefaults, function (key, value) {\n        var _a, _b; // @ts-ignore\n\n\n        _this[key] = (_b = (_a = config) === null || _a === void 0 ? void 0 : _a[key], _b !== null && _b !== void 0 ? _b : value);\n      });\n      this.setUseProxies(this.useProxies);\n      this.produce = this.produce.bind(this);\n      this.produceWithPatches = this.produceWithPatches.bind(this);\n    }\n    /**\r\n     * The `produce` function takes a value and a \"recipe function\" (whose\r\n     * return value often depends on the base state). The recipe function is\r\n     * free to mutate its first argument however it wants. All mutations are\r\n     * only ever applied to a __copy__ of the base state.\r\n     *\r\n     * Pass only a function to create a \"curried producer\" which relieves you\r\n     * from passing the recipe function every time.\r\n     *\r\n     * Only plain objects and arrays are made mutable. All other objects are\r\n     * considered uncopyable.\r\n     *\r\n     * Note: This function is __bound__ to its `Immer` instance.\r\n     *\r\n     * @param {any} base - the initial state\r\n     * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\r\n     * @param {Function} patchListener - optional function that will be called with all the patches produced here\r\n     * @returns {any} a new state, or the initial state if nothing was modified\r\n     */\n\n\n    Immer.prototype.produce = function (base, recipe, patchListener) {\n      var _this = this; // curried invocation\n\n\n      if (typeof base === \"function\" && typeof recipe !== \"function\") {\n        var defaultBase_1 = recipe;\n        recipe = base;\n        var self_1 = this;\n        return function curriedProduce(base) {\n          var arguments$1 = arguments;\n\n          var _this = this;\n\n          if (base === void 0) {\n            base = defaultBase_1;\n          }\n\n          var args = [];\n\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments$1[_i];\n          }\n\n          return self_1.produce(base, function (draft) {\n            return recipe.call.apply(recipe, __spreadArrays([_this, draft], args));\n          }); // prettier-ignore\n        };\n      } // prettier-ignore\n\n\n      {\n        if (typeof recipe !== \"function\") {\n          throw new Error(\"The first or second argument to `produce` must be a function\");\n        }\n\n        if (patchListener !== undefined && typeof patchListener !== \"function\") {\n          throw new Error(\"The third argument to `produce` must be a function or undefined\");\n        }\n      }\n      var result; // Only plain objects, arrays, and \"immerable classes\" are drafted.\n\n      if (isDraftable(base)) {\n        var scope_1 = ImmerScope.enter(this);\n        var proxy = this.createProxy(base, undefined);\n        var hasError = true;\n\n        try {\n          result = recipe(proxy);\n          hasError = false;\n        } finally {\n          // finally instead of catch + rethrow better preserves original stack\n          if (hasError) { scope_1.revoke(); }else { scope_1.leave(); }\n        }\n\n        if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n          return result.then(function (result) {\n            scope_1.usePatches(patchListener);\n            return processResult(_this, result, scope_1);\n          }, function (error) {\n            scope_1.revoke();\n            throw error;\n          });\n        }\n\n        scope_1.usePatches(patchListener);\n        return processResult(this, result, scope_1);\n      } else {\n        result = recipe(base);\n        if (result === NOTHING) { return undefined; }\n        if (result === undefined) { result = base; }\n        maybeFreeze(this, result, true);\n        return result;\n      }\n    };\n\n    Immer.prototype.produceWithPatches = function (arg1, arg2, arg3) {\n      var _this = this;\n\n      if (typeof arg1 === \"function\") {\n        return function (state) {\n          var arguments$1 = arguments;\n\n          var args = [];\n\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments$1[_i];\n          }\n\n          return _this.produceWithPatches(state, function (draft) {\n            return arg1.apply(void 0, __spreadArrays([draft], args));\n          });\n        };\n      } // non-curried form\n\n      /* istanbul ignore next */\n\n\n      if (arg3) { die(); }\n      var patches, inversePatches;\n      var nextState = this.produce(arg1, arg2, function (p, ip) {\n        patches = p;\n        inversePatches = ip;\n      });\n      return [nextState, patches, inversePatches];\n    };\n\n    Immer.prototype.createDraft = function (base) {\n      if (!isDraftable(base)) {\n        throw new Error(\"First argument to `createDraft` must be a plain object, an array, or an immerable object\"); // prettier-ignore\n      }\n\n      var scope = ImmerScope.enter(this);\n      var proxy = this.createProxy(base, undefined);\n      proxy[DRAFT_STATE].isManual = true;\n      scope.leave();\n      return proxy;\n    };\n\n    Immer.prototype.finishDraft = function (draft, patchListener) {\n      var state = draft && draft[DRAFT_STATE];\n\n      if (!state || !state.isManual) {\n        throw new Error(\"First argument to `finishDraft` must be a draft returned by `createDraft`\"); // prettier-ignore\n      }\n\n      if (state.finalized) {\n        throw new Error(\"The given draft is already finalized\"); // prettier-ignore\n      }\n\n      var scope = state.scope;\n      scope.usePatches(patchListener);\n      return processResult(this, undefined, scope);\n    };\n    /**\r\n     * Pass true to automatically freeze all copies created by Immer.\r\n     *\r\n     * By default, auto-freezing is disabled in production.\r\n     */\n\n\n    Immer.prototype.setAutoFreeze = function (value) {\n      this.autoFreeze = value;\n    };\n    /**\r\n     * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\r\n     * always faster than using ES5 proxies.\r\n     *\r\n     * By default, feature detection is used, so calling this is rarely necessary.\r\n     */\n\n\n    Immer.prototype.setUseProxies = function (value) {\n      this.useProxies = value;\n    };\n\n    Immer.prototype.applyPatches = function (base, patches) {\n      // If a patch replaces the entire state, take that replacement as base\n      // before applying patches\n      var i;\n\n      for (i = patches.length - 1; i >= 0; i--) {\n        var patch = patches[i];\n\n        if (patch.path.length === 0 && patch.op === \"replace\") {\n          base = patch.value;\n          break;\n        }\n      }\n\n      if (isDraft(base)) {\n        // N.B: never hits if some patch a replacement, patches are never drafts\n        return applyPatches(base, patches);\n      } // Otherwise, produce a copy of the base state.\n\n\n      return this.produce(base, function (draft) {\n        return applyPatches(draft, patches.slice(i + 1));\n      });\n    };\n\n    Immer.prototype.createProxy = function (value, parent) {\n      // precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n      var draft = isMap(value) ? proxyMap(value, parent) : isSet(value) ? proxySet(value, parent) : this.useProxies ? createProxy(value, parent) : createES5Proxy(value, parent);\n      var scope = parent ? parent.scope : ImmerScope.current;\n      scope.drafts.push(draft);\n      return draft;\n    };\n\n    Immer.prototype.willFinalize = function (scope, thing, isReplaced) {\n      if (!this.useProxies) { willFinalizeES5(scope, thing, isReplaced); }\n    };\n\n    Immer.prototype.markChanged = function (state) {\n      if (this.useProxies) {\n        markChanged(state);\n      } else {\n        markChangedES5(state);\n      }\n    };\n\n    return Immer;\n  }();\n\n  var immer = new Immer();\n  /**\r\n   * The `produce` function takes a value and a \"recipe function\" (whose\r\n   * return value often depends on the base state). The recipe function is\r\n   * free to mutate its first argument however it wants. All mutations are\r\n   * only ever applied to a __copy__ of the base state.\r\n   *\r\n   * Pass only a function to create a \"curried producer\" which relieves you\r\n   * from passing the recipe function every time.\r\n   *\r\n   * Only plain objects and arrays are made mutable. All other objects are\r\n   * considered uncopyable.\r\n   *\r\n   * Note: This function is __bound__ to its `Immer` instance.\r\n   *\r\n   * @param {any} base - the initial state\r\n   * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\r\n   * @param {Function} patchListener - optional function that will be called with all the patches produced here\r\n   * @returns {any} a new state, or the initial state if nothing was modified\r\n   */\n\n  var produce = immer.produce;\n  /**\r\n   * Like `produce`, but `produceWithPatches` always returns a tuple\r\n   * [nextState, patches, inversePatches] (instead of just the next state)\r\n   */\n\n  var produceWithPatches = immer.produceWithPatches.bind(immer);\n  /**\r\n   * Pass true to automatically freeze all copies created by Immer.\r\n   *\r\n   * By default, auto-freezing is disabled in production.\r\n   */\n\n  var setAutoFreeze = immer.setAutoFreeze.bind(immer);\n  /**\r\n   * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\r\n   * always faster than using ES5 proxies.\r\n   *\r\n   * By default, feature detection is used, so calling this is rarely necessary.\r\n   */\n\n  var setUseProxies = immer.setUseProxies.bind(immer);\n  /**\r\n   * Apply an array of Immer patches to the first argument.\r\n   *\r\n   * This function is a producer, which means copy-on-write is in effect.\r\n   */\n\n  var applyPatches$1 = immer.applyPatches.bind(immer);\n  /**\r\n   * Create an Immer draft from the given base state, which may be a draft itself.\r\n   * The draft can be modified until you finalize it with the `finishDraft` function.\r\n   */\n\n  var createDraft = immer.createDraft.bind(immer);\n  /**\r\n   * Finalize an Immer draft from a `createDraft` call, returning the base state\r\n   * (if no changes were made) or a modified copy. The draft must *not* be\r\n   * mutated afterwards.\r\n   *\r\n   * Pass a function as the 2nd argument to generate Immer patches based on the\r\n   * changes that were made.\r\n   */\n\n  var finishDraft = immer.finishDraft.bind(immer);\n\n  function isColumnOriented (data) {\n    if (data.constructor === Object) {\n      const columns = Object.keys(data).map(key => data[key]);\n      return columns.every(column => column.constructor === Array)\n    }\n\n    return false\n  }\n\n  function isRowOriented (data) {\n    if (data.constructor === Array) {\n      return data.every(row => row.constructor === Object)\n    }\n\n    return false\n  }\n\n  function isGeoJSON (data) {\n    const hasCorrectType = data.type === 'FeatureCollection';\n    const hasCorrectFeatures = data.features && data.features.length > 0;\n\n    return hasCorrectType && hasCorrectFeatures\n  }\n\n  function checkFormatColumnData (data) {\n    checkFormat(data, checkRegularColumnName);\n  }\n\n  function checkFormatInternal (data) {\n    checkFormat(data, checkInternalDataColumnName);\n  }\n\n  function checkFormat (data, columnNameChecker) {\n    let dataLength = null;\n\n    for (const columnName in data) {\n      columnNameChecker(columnName);\n      const column = data[columnName];\n\n      dataLength = dataLength || column.length;\n\n      if (dataLength === 0) {\n        throw new Error('Invalid data: columns cannot be empty')\n      }\n\n      if (dataLength !== column.length) {\n        throw new Error('Invalid data: columns must be of same length')\n      }\n    }\n  }\n\n  function checkRegularColumnName (columnName) {\n    if (columnName.match(forbiddenChars)) {\n      throw new Error(`Invalid column name '${columnName}': '$' and '/' are not allowed'`)\n    }\n  }\n\n  const forbiddenChars = /[/$]/;\n\n  function checkInternalDataColumnName (columnName) {\n    if (!['$key', '$geometry', '$grouped'].includes(columnName)) {\n      checkRegularColumnName(columnName);\n    }\n  }\n\n  // Adds floating point numbers with twice the normal precision.\n  // Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n  // Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n  // 305â363 (1997).\n  // Code adapted from GeographicLib by Charles F. F. Karney,\n  // http://geographiclib.sourceforge.net/\n\n  function adder() {\n    return new Adder;\n  }\n\n  function Adder() {\n    this.reset();\n  }\n\n  Adder.prototype = {\n    constructor: Adder,\n    reset: function() {\n      this.s = // rounded value\n      this.t = 0; // exact error\n    },\n    add: function(y) {\n      add(temp, y, this.t);\n      add(this, temp.s, this.s);\n      if (this.s) this.t += temp.t;\n      else this.s = temp.t;\n    },\n    valueOf: function() {\n      return this.s;\n    }\n  };\n\n  var temp = new Adder;\n\n  function add(adder, a, b) {\n    var x = adder.s = a + b,\n        bv = x - a,\n        av = x - bv;\n    adder.t = (a - av) + (b - bv);\n  }\n\n  var pi = Math.PI;\n  var tau = pi * 2;\n\n  var abs = Math.abs;\n  var sqrt = Math.sqrt;\n\n  function noop() {}\n\n  function streamGeometry(geometry, stream) {\n    if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n      streamGeometryType[geometry.type](geometry, stream);\n    }\n  }\n\n  var streamObjectType = {\n    Feature: function(object, stream) {\n      streamGeometry(object.geometry, stream);\n    },\n    FeatureCollection: function(object, stream) {\n      var features = object.features, i = -1, n = features.length;\n      while (++i < n) streamGeometry(features[i].geometry, stream);\n    }\n  };\n\n  var streamGeometryType = {\n    Sphere: function(object, stream) {\n      stream.sphere();\n    },\n    Point: function(object, stream) {\n      object = object.coordinates;\n      stream.point(object[0], object[1], object[2]);\n    },\n    MultiPoint: function(object, stream) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n    },\n    LineString: function(object, stream) {\n      streamLine(object.coordinates, stream, 0);\n    },\n    MultiLineString: function(object, stream) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) streamLine(coordinates[i], stream, 0);\n    },\n    Polygon: function(object, stream) {\n      streamPolygon(object.coordinates, stream);\n    },\n    MultiPolygon: function(object, stream) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) streamPolygon(coordinates[i], stream);\n    },\n    GeometryCollection: function(object, stream) {\n      var geometries = object.geometries, i = -1, n = geometries.length;\n      while (++i < n) streamGeometry(geometries[i], stream);\n    }\n  };\n\n  function streamLine(coordinates, stream, closed) {\n    var i = -1, n = coordinates.length - closed, coordinate;\n    stream.lineStart();\n    while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n    stream.lineEnd();\n  }\n\n  function streamPolygon(coordinates, stream) {\n    var i = -1, n = coordinates.length;\n    stream.polygonStart();\n    while (++i < n) streamLine(coordinates[i], stream, 1);\n    stream.polygonEnd();\n  }\n\n  function geoStream(object, stream) {\n    if (object && streamObjectType.hasOwnProperty(object.type)) {\n      streamObjectType[object.type](object, stream);\n    } else {\n      streamGeometry(object, stream);\n    }\n  }\n\n  function identity(x) {\n    return x;\n  }\n\n  var areaSum = adder(),\n      areaRingSum = adder(),\n      x00,\n      y00,\n      x0,\n      y0;\n\n  var areaStream = {\n    point: noop,\n    lineStart: noop,\n    lineEnd: noop,\n    polygonStart: function() {\n      areaStream.lineStart = areaRingStart;\n      areaStream.lineEnd = areaRingEnd;\n    },\n    polygonEnd: function() {\n      areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n      areaSum.add(abs(areaRingSum));\n      areaRingSum.reset();\n    },\n    result: function() {\n      var area = areaSum / 2;\n      areaSum.reset();\n      return area;\n    }\n  };\n\n  function areaRingStart() {\n    areaStream.point = areaPointFirst;\n  }\n\n  function areaPointFirst(x, y) {\n    areaStream.point = areaPoint;\n    x00 = x0 = x, y00 = y0 = y;\n  }\n\n  function areaPoint(x, y) {\n    areaRingSum.add(y0 * x - x0 * y);\n    x0 = x, y0 = y;\n  }\n\n  function areaRingEnd() {\n    areaPoint(x00, y00);\n  }\n\n  var x0$1 = Infinity,\n      y0$1 = x0$1,\n      x1 = -x0$1,\n      y1 = x1;\n\n  var boundsStream = {\n    point: boundsPoint,\n    lineStart: noop,\n    lineEnd: noop,\n    polygonStart: noop,\n    polygonEnd: noop,\n    result: function() {\n      var bounds = [[x0$1, y0$1], [x1, y1]];\n      x1 = y1 = -(y0$1 = x0$1 = Infinity);\n      return bounds;\n    }\n  };\n\n  function boundsPoint(x, y) {\n    if (x < x0$1) x0$1 = x;\n    if (x > x1) x1 = x;\n    if (y < y0$1) y0$1 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // TODO Enforce positive area for exterior, negative area for interior?\n\n  var X0 = 0,\n      Y0 = 0,\n      Z0 = 0,\n      X1 = 0,\n      Y1 = 0,\n      Z1 = 0,\n      X2 = 0,\n      Y2 = 0,\n      Z2 = 0,\n      x00$1,\n      y00$1,\n      x0$2,\n      y0$2;\n\n  var centroidStream = {\n    point: centroidPoint,\n    lineStart: centroidLineStart,\n    lineEnd: centroidLineEnd,\n    polygonStart: function() {\n      centroidStream.lineStart = centroidRingStart;\n      centroidStream.lineEnd = centroidRingEnd;\n    },\n    polygonEnd: function() {\n      centroidStream.point = centroidPoint;\n      centroidStream.lineStart = centroidLineStart;\n      centroidStream.lineEnd = centroidLineEnd;\n    },\n    result: function() {\n      var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n          : Z1 ? [X1 / Z1, Y1 / Z1]\n          : Z0 ? [X0 / Z0, Y0 / Z0]\n          : [NaN, NaN];\n      X0 = Y0 = Z0 =\n      X1 = Y1 = Z1 =\n      X2 = Y2 = Z2 = 0;\n      return centroid;\n    }\n  };\n\n  function centroidPoint(x, y) {\n    X0 += x;\n    Y0 += y;\n    ++Z0;\n  }\n\n  function centroidLineStart() {\n    centroidStream.point = centroidPointFirstLine;\n  }\n\n  function centroidPointFirstLine(x, y) {\n    centroidStream.point = centroidPointLine;\n    centroidPoint(x0$2 = x, y0$2 = y);\n  }\n\n  function centroidPointLine(x, y) {\n    var dx = x - x0$2, dy = y - y0$2, z = sqrt(dx * dx + dy * dy);\n    X1 += z * (x0$2 + x) / 2;\n    Y1 += z * (y0$2 + y) / 2;\n    Z1 += z;\n    centroidPoint(x0$2 = x, y0$2 = y);\n  }\n\n  function centroidLineEnd() {\n    centroidStream.point = centroidPoint;\n  }\n\n  function centroidRingStart() {\n    centroidStream.point = centroidPointFirstRing;\n  }\n\n  function centroidRingEnd() {\n    centroidPointRing(x00$1, y00$1);\n  }\n\n  function centroidPointFirstRing(x, y) {\n    centroidStream.point = centroidPointRing;\n    centroidPoint(x00$1 = x0$2 = x, y00$1 = y0$2 = y);\n  }\n\n  function centroidPointRing(x, y) {\n    var dx = x - x0$2,\n        dy = y - y0$2,\n        z = sqrt(dx * dx + dy * dy);\n\n    X1 += z * (x0$2 + x) / 2;\n    Y1 += z * (y0$2 + y) / 2;\n    Z1 += z;\n\n    z = y0$2 * x - x0$2 * y;\n    X2 += z * (x0$2 + x);\n    Y2 += z * (y0$2 + y);\n    Z2 += z * 3;\n    centroidPoint(x0$2 = x, y0$2 = y);\n  }\n\n  function PathContext(context) {\n    this._context = context;\n  }\n\n  PathContext.prototype = {\n    _radius: 4.5,\n    pointRadius: function(_) {\n      return this._radius = _, this;\n    },\n    polygonStart: function() {\n      this._line = 0;\n    },\n    polygonEnd: function() {\n      this._line = NaN;\n    },\n    lineStart: function() {\n      this._point = 0;\n    },\n    lineEnd: function() {\n      if (this._line === 0) this._context.closePath();\n      this._point = NaN;\n    },\n    point: function(x, y) {\n      switch (this._point) {\n        case 0: {\n          this._context.moveTo(x, y);\n          this._point = 1;\n          break;\n        }\n        case 1: {\n          this._context.lineTo(x, y);\n          break;\n        }\n        default: {\n          this._context.moveTo(x + this._radius, y);\n          this._context.arc(x, y, this._radius, 0, tau);\n          break;\n        }\n      }\n    },\n    result: noop\n  };\n\n  var lengthSum = adder(),\n      lengthRing,\n      x00$2,\n      y00$2,\n      x0$3,\n      y0$3;\n\n  var lengthStream = {\n    point: noop,\n    lineStart: function() {\n      lengthStream.point = lengthPointFirst;\n    },\n    lineEnd: function() {\n      if (lengthRing) lengthPoint(x00$2, y00$2);\n      lengthStream.point = noop;\n    },\n    polygonStart: function() {\n      lengthRing = true;\n    },\n    polygonEnd: function() {\n      lengthRing = null;\n    },\n    result: function() {\n      var length = +lengthSum;\n      lengthSum.reset();\n      return length;\n    }\n  };\n\n  function lengthPointFirst(x, y) {\n    lengthStream.point = lengthPoint;\n    x00$2 = x0$3 = x, y00$2 = y0$3 = y;\n  }\n\n  function lengthPoint(x, y) {\n    x0$3 -= x, y0$3 -= y;\n    lengthSum.add(sqrt(x0$3 * x0$3 + y0$3 * y0$3));\n    x0$3 = x, y0$3 = y;\n  }\n\n  function PathString() {\n    this._string = [];\n  }\n\n  PathString.prototype = {\n    _radius: 4.5,\n    _circle: circle(4.5),\n    pointRadius: function(_) {\n      if ((_ = +_) !== this._radius) this._radius = _, this._circle = null;\n      return this;\n    },\n    polygonStart: function() {\n      this._line = 0;\n    },\n    polygonEnd: function() {\n      this._line = NaN;\n    },\n    lineStart: function() {\n      this._point = 0;\n    },\n    lineEnd: function() {\n      if (this._line === 0) this._string.push(\"Z\");\n      this._point = NaN;\n    },\n    point: function(x, y) {\n      switch (this._point) {\n        case 0: {\n          this._string.push(\"M\", x, \",\", y);\n          this._point = 1;\n          break;\n        }\n        case 1: {\n          this._string.push(\"L\", x, \",\", y);\n          break;\n        }\n        default: {\n          if (this._circle == null) this._circle = circle(this._radius);\n          this._string.push(\"M\", x, \",\", y, this._circle);\n          break;\n        }\n      }\n    },\n    result: function() {\n      if (this._string.length) {\n        var result = this._string.join(\"\");\n        this._string = [];\n        return result;\n      } else {\n        return null;\n      }\n    }\n  };\n\n  function circle(radius) {\n    return \"m0,\" + radius\n        + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius\n        + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius\n        + \"z\";\n  }\n\n  function geoPath(projection, context) {\n    var pointRadius = 4.5,\n        projectionStream,\n        contextStream;\n\n    function path(object) {\n      if (object) {\n        if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n        geoStream(object, projectionStream(contextStream));\n      }\n      return contextStream.result();\n    }\n\n    path.area = function(object) {\n      geoStream(object, projectionStream(areaStream));\n      return areaStream.result();\n    };\n\n    path.measure = function(object) {\n      geoStream(object, projectionStream(lengthStream));\n      return lengthStream.result();\n    };\n\n    path.bounds = function(object) {\n      geoStream(object, projectionStream(boundsStream));\n      return boundsStream.result();\n    };\n\n    path.centroid = function(object) {\n      geoStream(object, projectionStream(centroidStream));\n      return centroidStream.result();\n    };\n\n    path.projection = function(_) {\n      return arguments.length ? (projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream, path) : projection;\n    };\n\n    path.context = function(_) {\n      if (!arguments.length) return context;\n      contextStream = _ == null ? (context = null, new PathString) : new PathContext(context = _);\n      if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n      return path;\n    };\n\n    path.pointRadius = function(_) {\n      if (!arguments.length) return pointRadius;\n      pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n      return path;\n    };\n\n    return path.projection(projection).context(context);\n  }\n\n  function isInvalid (value) {\n    if (value === undefined || value === null) { return true }\n\n    if (value.constructor === Number) {\n      return !isFinite(value)\n    }\n\n    return false\n  }\n\n  function isDefined (value) {\n    return value !== undefined\n  }\n\n  function isUndefined (value) {\n    return value === undefined\n  }\n\n  function calculateBBoxGeometries (geometries) {\n    let bbox = [[Infinity, Infinity], [-Infinity, -Infinity]];\n\n    for (let i = 0; i < geometries.length; i++) {\n      const geometry = geometries[i];\n\n      if (!isInvalid(geometry)) {\n        bbox = updateBBox(bbox, geometry);\n      }\n    }\n\n    const bboxObj = {\n      x: [bbox[0][0], bbox[1][0]],\n      y: [bbox[0][1], bbox[1][1]]\n    };\n\n    return bboxObj\n  }\n\n  const path = geoPath();\n\n  function updateBBox (bbox, geometry) {\n    const newBBox = path.bounds(geometry);\n\n    bbox[0][0] = bbox[0][0] < newBBox[0][0] ? bbox[0][0] : newBBox[0][0];\n    bbox[0][1] = bbox[0][1] < newBBox[0][1] ? bbox[0][1] : newBBox[0][1];\n    bbox[1][0] = bbox[1][0] > newBBox[1][0] ? bbox[1][0] : newBBox[1][0];\n    bbox[1][1] = bbox[1][1] > newBBox[1][1] ? bbox[1][1] : newBBox[1][1];\n\n    return bbox\n  }\n\n  function warn (message) {\n    if (!process) console.warn(message);\n\n    if (process && process.env.NODE_ENV !== 'test') {\n      console.warn(message);\n    }\n  }\n\n  function calculateDomain (column, columnName) {\n    if (columnName === '$grouped') {\n      throw new Error(`Cannot calculate domain of column '${columnName}'.`)\n    }\n\n    const { firstValidValue, nValidValues } = findFirstValidValue(column);\n\n    if (nValidValues === 0) {\n      throw new Error(`Cannot calculate domain of column '${column}'. Column contains only missing values.`)\n    }\n\n    if (nValidValues > 0) {\n      ensureValidDataType(firstValidValue);\n      const type = getDataType(firstValidValue);\n\n      if (columnName === '$geometry') {\n        return calculateBBoxGeometries(column)\n      }\n\n      if (columnName !== '$geometry') {\n        return calculateNonGeometryColumnDomain(column, columnName, nValidValues, firstValidValue, type)\n      }\n    }\n  }\n\n  function findFirstValidValue (column) {\n    let firstValidValue;\n    let nValidValues = 0;\n\n    for (let i = 0; i < column.length; i++) {\n      if (!isInvalid(column[i])) {\n        nValidValues++;\n        firstValidValue = firstValidValue || column[i];\n      }\n\n      if (nValidValues > 1) break\n    }\n\n    return { firstValidValue, nValidValues }\n  }\n\n  function calculateNonGeometryColumnDomain (column, columnName, nValidValues, firstValidValue, type) {\n    let domain;\n    const nUniqueValues = calculateNumberOfUniqueValues(column, type);\n\n    if (columnHasOnlyOneUniqueValue(nValidValues, nUniqueValues)) {\n      domain = calculateDomainForColumnWithOneUniqueValue(\n        nValidValues, nUniqueValues, type, firstValidValue, columnName\n      );\n    } else {\n      domain = calculateDomainForRegularColumn(type, column, columnName);\n    }\n\n    return domain\n  }\n\n  function calculateNumberOfUniqueValues (col, type) {\n    const uniqueVals = {};\n\n    if (['quantitative', 'categorical'].includes(type)) {\n      for (let i = 0; i < col.length; i++) {\n        const val = col[i];\n        if (!isInvalid(val)) {\n          uniqueVals[val] = 0;\n        }\n      }\n    }\n\n    if (type === 'temporal') {\n      for (let i = 0; i < col.length; i++) {\n        const val = col[i];\n        if (!isInvalid(val)) {\n          uniqueVals[val.getTime()] = 0;\n        }\n      }\n    }\n\n    if (type === 'interval') {\n      for (let i = 0; i < col.length; i++) {\n        const val = col[i];\n        if (!isInvalid(val)) {\n          const str = JSON.stringify(val);\n          uniqueVals[str] = 0;\n        }\n      }\n    }\n\n    return Object.keys(uniqueVals).length\n  }\n\n  function columnHasOnlyOneUniqueValue (nValidValues, nUniqueValues) {\n    return nValidValues === 1 || nUniqueValues === 1\n  }\n\n  function calculateDomainForColumnWithOneUniqueValue (nValidValues, nUniqueValues, type, firstValidValue, columnName) {\n    const domain = createDomainForSingleValue(type, firstValidValue);\n    const warningText = nValidValues === 1 ? 'valid' : 'unique';\n\n    if (type !== 'categorical') {\n      warn(\n        `Column '${columnName}' contains only 1 ${warningText} value: ${firstValidValue}.\\n` +\n        `Using domain ${JSON.stringify(domain)}`\n      );\n    }\n\n    return domain\n  }\n\n  function calculateDomainForRegularColumn (type, column, columnName) {\n    let domain = initDomain(type);\n\n    for (let i = 0; i < column.length; i++) {\n      const value = column[i];\n\n      if (!isInvalid(value)) {\n        if (getDataType(value) !== type) {\n          throw new Error(`Invalid column ${columnName}: column contains multiple data types`)\n        }\n\n        domain = updateDomain(domain, value, type);\n      }\n    }\n\n    return domain\n  }\n\n  const minUnixTime = new Date(0);\n  const maxUnixTime = new Date('19 January 2038');\n\n  function initDomain (type) {\n    let domain;\n    switch (type) {\n      case 'quantitative': {\n        domain = [Infinity, -Infinity];\n        break\n      }\n      case 'categorical': {\n        domain = [];\n        break\n      }\n      case 'temporal': {\n        domain = [maxUnixTime, minUnixTime];\n        break\n      }\n      case 'interval': {\n        domain = [Infinity, -Infinity];\n        break\n      }\n    }\n\n    return domain\n  }\n\n  function updateDomain (domain, value, type) {\n    if (!['quantitative', 'categorical', 'temporal', 'interval'].includes(type)) {\n      throw new Error(`Cannot set domain for column of type '${type}'`)\n    }\n\n    if (type === 'quantitative') {\n      if (domain[0] >= value) { domain[0] = value; }\n      if (domain[1] <= value) { domain[1] = value; }\n    }\n\n    if (type === 'categorical') {\n      if (!domain.includes(value)) { domain.push(value); }\n    }\n\n    if (type === 'temporal') {\n      const epoch = value.getTime();\n\n      if (domain[0].getTime() >= epoch) { domain[0] = value; }\n      if (domain[1].getTime() <= epoch) { domain[1] = value; }\n    }\n\n    if (type === 'interval') {\n      domain = updateDomain(domain, value[0], 'quantitative');\n      domain = updateDomain(domain, value[1], 'quantitative');\n    }\n\n    return domain\n  }\n\n  function createDomainForSingleValue (type, value) {\n    let domain;\n\n    if (type === 'quantitative') {\n      domain = [value - 1, value + 1];\n    }\n\n    if (type === 'categorical') {\n      domain = [value];\n    }\n\n    if (type === 'temporal') {\n      domain = [getDay(value, -1), getDay(value, 1)];\n    }\n\n    if (type === 'interval') {\n      domain = value.sort((a, b) => a - b);\n    }\n\n    return domain\n  }\n\n  function getDay (date, days) {\n    const dateCopy = new Date(date.getTime());\n    return new Date(dateCopy.setDate(dateCopy.getDate() + days))\n  }\n\n  function getColumnType (column) {\n    const { firstValidValue } = findFirstValidValue(column);\n    return getDataType(firstValidValue)\n  }\n\n  function getDataType (value) {\n    if (isInvalid(value)) return undefined\n\n    if (value.constructor === Number) return 'quantitative'\n    if (value.constructor === String) return 'categorical'\n    if (value.constructor === Date) return 'temporal'\n    if (isInterval(value)) return 'interval'\n    if (isGeometry(value)) return 'geometry'\n    if (value.constructor === DataContainer) return 'grouped'\n\n    return undefined\n  }\n\n  function ensureValidDataType (value) {\n    if (isInvalid(getDataType(value))) {\n      throw new Error('Invalid data')\n    }\n  }\n\n  function isGeometry (value) {\n    return value.constructor === Object && 'type' in value && 'coordinates' in value\n  }\n\n  function isInterval (value) {\n    return value.constructor === Array && value.length === 2 && value.every(entry => entry.constructor === Number)\n  }\n\n  function generateKeyColumn (length) {\n    return new Array(length).fill(0).map((_, i) => i)\n  }\n\n  function validateKeyColumn (keyColumn, requiredLength) {\n    if (keyColumn.length !== requiredLength) {\n      throw new Error('Key column must be of same length as rest of the data')\n    }\n\n    ensureAllSameType(keyColumn);\n    ensureUnique(keyColumn);\n  }\n\n  function ensureAllSameType (keyColumn) {\n    for (let i = 0; i < keyColumn.length; i++) {\n      const key = keyColumn[i];\n      validateKey(key);\n    }\n  }\n\n  function validateKey (key) {\n    const type = getDataType(key);\n\n    if (type !== 'quantitative' || !Number.isInteger(key)) {\n      throw new Error('Key column can contain only integers')\n    }\n  }\n\n  function ensureUnique (keyColumn) {\n    if (keyColumn.length !== new Set(keyColumn).size) {\n      throw new Error('Keys must be unique')\n    }\n  }\n\n  function getDataLength (data) {\n    const firstKey = Object.keys(data)[0];\n    const firstColumn = data[firstKey];\n    return firstColumn.length\n  }\n\n  function convertRowToColumnData (data) {\n    checkIfDataIsEmpty(data);\n    let columnData = initColumnData(data);\n\n    for (let row of data) {\n      for (let key in row) {\n        columnData[key].push(row[key]);\n      }\n    }\n\n    return columnData\n  }\n\n  function initColumnData (data) {\n    let firstRow = data[0];\n    let columnKeys = Object.keys(firstRow);\n    let columnData = {};\n\n    for (let key of columnKeys) {\n      columnData[key] = [];\n    }\n\n    return columnData\n  }\n\n  function checkIfDataIsEmpty (data) {\n    if (data.length === 0) {\n      throw new Error('Received empty Array while trying to load row-oriented data. This is not allowed.')\n    }\n  }\n\n  function parseGeoJSON (geojsonData) {\n    const geometryData = [];\n    const data = {};\n\n    const features = geojsonData.features;\n    const firstFeature = features[0];\n\n    if ('properties' in firstFeature) {\n      for (const columnName in firstFeature.properties) {\n        data[columnName] = [];\n      }\n    }\n\n    for (let i = 0; i < features.length; i++) {\n      const { geometry, properties } = features[i];\n      geometryData.push(geometry);\n\n      for (const columnName in properties) {\n        data[columnName].push(properties[columnName]);\n      }\n    }\n\n    checkFormatColumnData(data);\n\n    data.$geometry = geometryData;\n\n    return data\n  }\n\n  const methods = {\n    _setColumnData (data, options) {\n      if (options.validate === false) {\n        checkFormatInternal(data);\n      } else {\n        checkFormatColumnData(data);\n      }\n\n      this._storeData(data, options);\n    },\n\n    _setRowData (rowData, options) {\n      const columnData = convertRowToColumnData(rowData);\n      this._setColumnData(columnData, options);\n    },\n\n    _setGeoJSON (geojsonData, options) {\n      const data = parseGeoJSON(geojsonData);\n      this._storeData(data, options);\n    },\n\n    _setGroup (group, options) {\n      const data = group.data;\n      checkFormatInternal(data);\n      this._storeData(data, options);\n    },\n\n    _storeData (data, options) {\n      this._data = data;\n\n      this._setupKeyColumn();\n\n      if (options.validate === true) {\n        this.validateAllColumns();\n      }\n    },\n\n    _setupKeyColumn () {\n      const length = getDataLength(this._data);\n\n      if ('$key' in this._data) {\n        validateKeyColumn(this._data.$key, length);\n        this._syncKeyToRowNumber();\n      } else {\n        const keyColumn = generateKeyColumn(length);\n        this._setKeyColumn(keyColumn);\n      }\n    },\n\n    _setKeyColumn (keyColumn) {\n      this._data = produce(this._data, draft => {\n        draft.$key = keyColumn;\n      });\n\n      this._syncKeyToRowNumber();\n    },\n\n    _syncKeyToRowNumber () {\n      const length = getDataLength(this._data);\n\n      for (let i = 0; i < length; i++) {\n        const key = this._data.$key[i];\n        this._keyToRowNumber[key] = i;\n      }\n    }\n  };\n\n  function dataLoadingMixin (targetClass) {\n    Object.assign(targetClass.prototype, methods);\n  }\n\n  function filter (data, filterFunction) {\n    const length = getDataLength(data);\n    const newData = {};\n    for (const colName in data) { newData[colName] = []; }\n\n    for (let i = 0; i < length; i++) {\n      const row = {};\n      for (const colName in data) { row[colName] = data[colName][i]; }\n\n      if (filterFunction(row, i) === true) {\n        for (const colName in row) { newData[colName].push(row[colName]); }\n      }\n    }\n\n    return newData\n  }\n\n  function select (data, selection) {\n    if (selection.constructor === String) {\n      selection = [selection];\n    }\n\n    if (selection.constructor === Array) {\n      validateSelectionInstructions(data, selection);\n\n      for (const columnName in data) {\n        if (!selection.includes(columnName)) {\n          delete data[columnName];\n        }\n      }\n    } else {\n      throw new Error('select can only be used with a string or array of strings')\n    }\n  }\n\n  function validateSelectionInstructions (data, selection) {\n    for (const columnName of selection) {\n      if (!(columnName in data)) {\n        throw new Error(`Column '${columnName}' not found`)\n      }\n    }\n  }\n\n  function arrange (data, sortInstructions) {\n    if (sortInstructions.constructor === Object) {\n      sort(data, sortInstructions);\n    } else if (sortInstructions.constructor === Array) {\n      for (let i = sortInstructions.length - 1; i >= 0; i--) {\n        const instruction = sortInstructions[i];\n        sort(data, instruction);\n      }\n    } else {\n      throw new Error('arrange requires a key-value object or array of key-value objects')\n    }\n  }\n\n  const sortFuncs = {\n    quantitative: {\n      // https://beta.observablehq.com/@mbostock/manipulating-flat-arrays\n      ascending: (a, b) => a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN,\n      descending: (a, b) => b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN\n    },\n    categorical: {\n      ascending: (a, b) => {\n        const sorted = [a, b].sort();\n        return sorted[0] === a ? -1 : 1\n      },\n      descending: (a, b) => {\n        const sorted = [a, b].sort();\n        return sorted[0] === a ? 1 : -1\n      }\n    },\n    temporal: {\n      ascending: (a, b) => {\n        return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN\n      },\n      descending: (a, b) => {\n        return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN\n      }\n    }\n  };\n\n  function sort (data, sortInstructions) {\n    if (Object.keys(sortInstructions).length !== 1) {\n      throw new Error('Only one key-value pair allowed')\n    }\n\n    const variable = Object.keys(sortInstructions)[0];\n    const sortMethod = sortInstructions[variable];\n\n    ensureValidDataType(data[variable][0]);\n    const dataType = getDataType(data[variable][0]);\n\n    let sortFunc;\n    if (sortMethod.constructor === String) {\n      sortFunc = sortFuncs[dataType][sortMethod];\n    }\n    if (sortMethod.constructor === Function) {\n      sortFunc = sortMethod;\n    }\n\n    const column = data[variable];\n\n    const indices = column.map((v, i) => i);\n    const sortedIndices = indices.sort((a, b) => sortFunc(column[a], column[b]));\n\n    for (const colName in data) {\n      data[colName] = reorder(data[colName], sortedIndices);\n    }\n  }\n\n  function reorder (column, indices) {\n    return indices.map(i => column[i])\n  }\n\n  function rename (data, renameInstructions) {\n    if (renameInstructions.constructor !== Object) {\n      throw new Error('Rename only accepts an object')\n    }\n\n    for (const oldName in renameInstructions) {\n      if (oldName in data) {\n        const newName = renameInstructions[oldName];\n        checkRegularColumnName(newName);\n        data[newName] = data[oldName];\n        delete data[oldName];\n      } else {\n        warn(`Rename: column '${oldName}' not found`);\n      }\n    }\n  }\n\n  function mutate (data, mutateInstructions) {\n    const length = getDataLength(data);\n    const newData = {};\n\n    for (const key in mutateInstructions) {\n      newData[key] = new Array(length);\n    }\n\n    for (let i = 0; i < length; i++) {\n      const row = {};\n      let prevRow = {};\n      let nextRow = {};\n\n      for (const colName in data) {\n        row[colName] = data[colName][i];\n        prevRow[colName] = data[colName][i - 1];\n        nextRow[colName] = data[colName][i + 1];\n      }\n\n      if (i === 0) { prevRow = undefined; }\n      if (i === length - 1) { nextRow = undefined; }\n\n      for (const key in mutateInstructions) {\n        const mutateFunction = mutateInstructions[key];\n        newData[key][i] = mutateFunction(row, i, prevRow, nextRow);\n      }\n    }\n\n    Object.assign(data, newData);\n  }\n\n  function transmute (data, mutateObj) {\n    data = mutate(data, mutateObj);\n\n    for (const key in data) {\n      if (!(key in mutateObj)) {\n        delete data[key];\n      }\n    }\n  }\n\n  var aggregations = {\n    count,\n    sum,\n    mean,\n    median,\n    mode,\n    min,\n    max\n  };\n\n  function count (column) {\n    return column.length\n  }\n\n  function sum (column) {\n    let total = 0;\n    for (const value of column) {\n      total += value;\n    }\n\n    return total\n  }\n\n  function mean (column) {\n    return sum(column) / count(column)\n  }\n\n  function median (column) {\n    const asc = column.sort((a, b) => a > b);\n    const len = count(column);\n\n    if (len % 2 === 1) {\n      // Odd\n      return asc[Math.floor(len / 2)]\n    } else {\n      // Even\n      const lower = asc[(len / 2) - 1];\n      const upper = asc[(len / 2)];\n      return (lower + upper) / 2\n    }\n  }\n\n  function mode (column) {\n    const counts = {};\n\n    for (const value of column) {\n      if (value in counts) {\n        counts[value]++;\n      } else {\n        counts[value] = 1;\n      }\n    }\n\n    let winner;\n    let winningVal = 0;\n\n    for (const value in counts) {\n      if (counts[value] > winningVal) {\n        winningVal = counts[value];\n        winner = value;\n      }\n    }\n\n    return winner\n  }\n\n  function min (column) {\n    let winner = Infinity;\n    for (const value of column) {\n      if (value < winner) { winner = value; }\n    }\n    return winner\n  }\n\n  function max (column) {\n    let winner = -Infinity;\n    for (const value of column) {\n      if (value > winner) { winner = value; }\n    }\n    return winner\n  }\n\n  function checkKeyValuePair (obj, allowedKeys) {\n    const keys = Object.keys(obj);\n    if (keys.length !== 1) {\n      throw new Error('Invalid transformation syntax')\n    }\n\n    const key = keys[0];\n\n    if (!allowedKeys.includes(key)) {\n      throw new Error(`Unknown transformation ${key}`)\n    }\n\n    return key\n  }\n\n  function summarise (data, summariseInstructions) {\n    if (summariseInstructions.constructor !== Object) {\n      throw new Error('summarise must be an object')\n    }\n\n    let newData = initNewData(summariseInstructions, data);\n\n    if ('$grouped' in data) {\n      checkSummariseInstructions(summariseInstructions, data);\n\n      for (const columnName in data) {\n        if (columnName !== '$grouped') {\n          newData[columnName] = data[columnName];\n        }\n      }\n\n      for (const group of data.$grouped) {\n        const data = group.data();\n        newData = summariseGroup(data, summariseInstructions, newData);\n      }\n    } else {\n      newData = summariseGroup(data, summariseInstructions, newData);\n    }\n    return newData\n  }\n\n  function initNewData (summariseInstructions, data) {\n    const newData = {};\n    for (const newCol in summariseInstructions) { newData[newCol] = []; }\n    if (data && '$grouped' in data) {\n      for (const col in data) {\n        if (col !== '$grouped') {\n          newData[col] = [];\n        }\n      }\n    }\n    return newData\n  }\n\n  function summariseGroup (data, summariseInstructions, newData) {\n    for (const newColName in summariseInstructions) {\n      const instruction = summariseInstructions[newColName];\n\n      if (instruction.constructor === Object) {\n        const column = checkKeyValuePair(instruction, Object.keys(data));\n        const aggregation = instruction[column];\n\n        if (aggregation.constructor === String) {\n          if (!(aggregation in aggregations)) {\n            throw new Error(`Unkown summaryMethod: '${aggregation}'.`)\n          }\n\n          newData[newColName].push(aggregations[aggregation](data[column]));\n        } else if (aggregation.constructor === Function) {\n          newData[newColName].push(aggregation(data[column]));\n        } else {\n          throw new Error(`Invalid summaryMethod: '${aggregation}'. Must be String or Function`)\n        }\n      }\n    }\n\n    return newData\n  }\n\n  function checkSummariseInstructions (summariseInstructions, data) {\n    for (const newColName in summariseInstructions) {\n      const instruction = summariseInstructions[newColName];\n      const name = Object.keys(instruction)[0];\n\n      checkRegularColumnName(name);\n\n      if (name in data) {\n        throw new Error(`Cannot summarise the column '${name}': used for grouping`)\n      }\n    }\n  }\n\n  function mutarise (data, mutariseInstructions) {\n    if (mutariseInstructions.constructor !== Object) {\n      throw new Error('mutarise must be an object')\n    }\n\n    let newCols = initNewData(mutariseInstructions);\n\n    if ('$grouped' in data) {\n      checkSummariseInstructions(mutariseInstructions, data);\n\n      for (const group of data.$grouped) {\n        let summarizedData = initNewData(mutariseInstructions);\n        const dataInGroup = group.data();\n        summarizedData = summariseGroup(dataInGroup, mutariseInstructions, summarizedData);\n\n        const length = getDataLength(dataInGroup);\n        newCols = addGroupSummaries(newCols, summarizedData, length);\n      }\n\n      data = ungroup(data);\n    } else {\n      let summarizedData = initNewData(mutariseInstructions);\n      summarizedData = summariseGroup(data, mutariseInstructions, summarizedData);\n\n      const length = getDataLength(data);\n      newCols = addGroupSummaries(newCols, summarizedData, length);\n    }\n\n    return join(data, newCols)\n  }\n\n  function addGroupSummaries (newCols, summarizedData, length) {\n    for (let i = 0; i < length; i++) {\n      for (const key in summarizedData) {\n        newCols[key].push(summarizedData[key][0]);\n      }\n    }\n\n    return newCols\n  }\n\n  function ungroup (data) {\n    const newData = initNewData(data.$grouped[0].data());\n\n    for (const group of data.$grouped) {\n      const groupData = group.data();\n      for (const col in newData) {\n        newData[col].push(...groupData[col]);\n      }\n    }\n\n    return newData\n  }\n\n  function join (data, newCols) {\n    for (const col in newCols) {\n      data[col] = newCols[col];\n    }\n\n    return data\n  }\n\n  function groupBy (data, groupByInstructions) {\n    const groupedData = {};\n\n    const groupedColumns = getGroupedColumns(data, groupByInstructions);\n    const groups = groupBy$1(data, groupedColumns);\n\n    groupedData.$grouped = groups.map(group => new DataContainer(group));\n    for (const col of groupedColumns) {\n      groupedData[col] = [];\n    }\n\n    for (let i = 0; i < groupedColumns.length; i++) {\n      const col = groupedColumns[i];\n\n      for (const group of groups) {\n        groupedData[col].push(group.groupedValues[i]);\n      }\n    }\n\n    return groupedData\n  }\n\n  function getGroupedColumns (data, groupByInstructions) {\n    const con = groupByInstructions.constructor;\n    if (![String, Array].includes(con)) {\n      throw new Error('groupBy can only be used with a string or array of strings')\n    }\n\n    const groupedColumns = con === String ? [groupByInstructions] : groupByInstructions;\n\n    for (const col of groupedColumns) {\n      if (!(col in data)) {\n        throw new Error(`Column '${col}' not found`)\n      }\n    }\n\n    if (groupedColumns.length === Object.keys(data).length) {\n      throw new Error('Cannot group by all columns')\n    }\n\n    return groupedColumns\n  }\n\n  function getGroupedValues (data, i, columns) {\n    const groupedValues = [];\n    for (const col of columns) {\n      groupedValues.push(data[col][i]);\n    }\n\n    return groupedValues\n  }\n\n  function groupBy$1 (data, groupedColumns) {\n    const groups = {};\n\n    const length = getDataLength(data);\n\n    for (let i = 0; i < length; i++) {\n      // Ge grouped values\n      const groupedValues = getGroupedValues(data, i, groupedColumns);\n\n      // Get unique identifier for group\n      const groupID = JSON.stringify(groupedValues);\n\n      // If groups object has no entry for this group yet: create new group object\n      groups[groupID] = groups[groupID] || new Group(data, groupedValues);\n\n      // Add row to group\n      groups[groupID].addRow(data, i);\n    }\n\n    // Convert groups object to array\n    return Object.keys(groups).map(group => {\n      return groups[group]\n    })\n  }\n\n  class Group {\n    constructor (data, groupedValues) {\n      this.data = {};\n      this.groupedValues = groupedValues;\n\n      for (const col in data) {\n        this.data[col] = [];\n      }\n    }\n\n    addRow (data, i) {\n      for (const col in data) {\n        this.data[col].push(data[col][i]);\n      }\n    }\n  }\n\n  /**\n  * geostats() is a tiny and standalone javascript library for classification\n  * Project page - https://github.com/simogeo/geostats\n  * Copyright (c) 2011 Simon Georget, http://www.intermezzo-coop.eu\n  * Licensed under the MIT license\n  */\n\n  var _t = function (str) {\n    return str\n  };\n\n  // taking from http://stackoverflow.com/questions/18082/validate-decimal-numbers-in-javascript-isnumeric\n  var isNumber = function (n) {\n    return !isNaN(parseFloat(n)) && isFinite(n)\n  };\n\n  function Geostats (a) {\n    this.objectID = '';\n    this.separator = ' - ';\n    this.legendSeparator = this.separator;\n    this.method = '';\n    this.precision = 0;\n    this.precisionflag = 'auto';\n    this.roundlength = 2; // Number of decimals, round values\n    this.is_uniqueValues = false;\n    this.debug = false;\n    this.silent = false;\n\n    this.bounds = [];\n    this.ranges = [];\n    this.inner_ranges = null;\n    this.colors = [];\n    this.counter = [];\n\n    // statistics information\n    this.stat_sorted = null;\n    this.stat_mean = null;\n    this.stat_median = null;\n    this.stat_sum = null;\n    this.stat_max = null;\n    this.stat_min = null;\n    this.stat_pop = null;\n    this.stat_variance = null;\n    this.stat_stddev = null;\n    this.stat_cov = null;\n\n    /**\n   * logging method\n   */\n    this.log = function (msg, force) {\n      if (this.debug === true || force != null) {\n        console.log(this.objectID + '(object id) :: ' + msg);\n      }\n    };\n\n    /**\n   * Set bounds\n   */\n    this.setBounds = function (a) {\n      this.log('Setting bounds (' + a.length + ') : ' + a.join());\n\n      this.bounds = []; // init empty array to prevent bug when calling classification after another with less items (sample getQuantile(6) and getQuantile(4))\n\n      this.bounds = a;\n      // this.bounds = this.decimalFormat(a);\n    };\n\n    /**\n   * Set a new serie\n   */\n    this.setSerie = function (a) {\n      this.log('Setting serie (' + a.length + ') : ' + a.join());\n\n      this.serie = []; // init empty array to prevent bug when calling classification after another with less items (sample getQuantile(6) and getQuantile(4))\n      this.serie = a;\n\n      // reset statistics after changing serie\n      this.resetStatistics();\n\n      this.setPrecision();\n    };\n\n    /**\n   * Set colors\n   */\n    this.setColors = function (colors) {\n      this.log('Setting color ramp (' + colors.length + ') : ' + colors.join());\n\n      this.colors = colors;\n    };\n\n    /**\n     * Get feature count\n     * With bounds array(0, 0.75, 1.5, 2.25, 3);\n     * should populate this.counter with 5 keys\n     * and increment counters for each key\n     */\n    this.doCount = function () {\n      if (this._nodata()) { return }\n\n      var tmp = this.sorted();\n\n      this.counter = [];\n\n      // we init counter with 0 value\n      for (let i = 0; i < this.bounds.length - 1; i++) {\n        this.counter[i] = 0;\n      }\n\n      for (let j = 0; j < tmp.length; j++) {\n        // get current class for value to increment the counter\n        var cclass = this.getClass(tmp[j]);\n        this.counter[cclass]++;\n      }\n    };\n\n    /**\n     * Set decimal precision according to user input\n     * or automatcally determined according\n     * to the given serie.\n     */\n    this.setPrecision = function (decimals) {\n      // only when called from user\n      if (typeof decimals !== 'undefined') {\n        this.precisionflag = 'manual';\n        this.precision = decimals;\n      }\n\n      // we calculate the maximal decimal length on given serie\n      if (this.precisionflag === 'auto') {\n        for (var i = 0; i < this.serie.length; i++) {\n          // check if the given value is a number and a float\n          var precision;\n          if (!isNaN((this.serie[i] + '')) && (this.serie[i] + '').toString().indexOf('.') !== -1) {\n            precision = (this.serie[i] + '').split('.')[1].length;\n          } else {\n            precision = 0;\n          }\n\n          if (precision > this.precision) {\n            this.precision = precision;\n          }\n        }\n      }\n      if (this.precision > 20) {\n        // prevent \"Uncaught RangeError: toFixed() digits argument must be between 0 and 20\" bug. See https://github.com/simogeo/geostats/issues/34\n        this.log('this.precision value (' + this.precision + ') is greater than max value. Automatic set-up to 20 to prevent \"Uncaught RangeError: toFixed()\" when calling decimalFormat() method.');\n        this.precision = 20;\n      }\n\n      this.log('Calling setPrecision(). Mode : ' + this.precisionflag + ' - Decimals : ' + this.precision);\n\n      this.serie = this.decimalFormat(this.serie);\n    };\n\n    /**\n     * Format array numbers regarding to precision\n     */\n    this.decimalFormat = function (a) {\n      var b = [];\n\n      for (var i = 0; i < a.length; i++) {\n        // check if the given value is a number\n        if (isNumber(a[i])) {\n          b[i] = parseFloat(parseFloat(a[i]).toFixed(this.precision));\n        } else {\n          b[i] = a[i];\n        }\n      }\n\n      return b\n    };\n\n    /**\n     * Transform a bounds array to a range array the following array : array(0,\n     * 0.75, 1.5, 2.25, 3); becomes : array('0-0.75', '0.75-1.5', '1.5-2.25',\n     * '2.25-3');\n     */\n    this.setRanges = function () {\n      this.ranges = []; // init empty array to prevent bug when calling classification after another with less items (sample getQuantile(6) and getQuantile(4))\n\n      for (let i = 0; i < (this.bounds.length - 1); i++) {\n        this.ranges[i] = this.bounds[i] + this.separator + this.bounds[i + 1];\n      }\n    };\n\n    /** return min value */\n    this.min = function () {\n      if (this._nodata()) { return }\n\n      this.stat_min = this.serie[0];\n\n      for (let i = 0; i < this.pop(); i++) {\n        if (this.serie[i] < this.stat_min) {\n          this.stat_min = this.serie[i];\n        }\n      }\n\n      return this.stat_min\n    };\n\n    /** return max value */\n    this.max = function () {\n      if (this._nodata()) { return }\n\n      this.stat_max = this.serie[0];\n      for (let i = 0; i < this.pop(); i++) {\n        if (this.serie[i] > this.stat_max) {\n          this.stat_max = this.serie[i];\n        }\n      }\n\n      return this.stat_max\n    };\n\n    /** return sum value */\n    this.sum = function () {\n      if (this._nodata()) { return }\n\n      if (this.stat_sum === null) {\n        this.stat_sum = 0;\n        for (let i = 0; i < this.pop(); i++) {\n          this.stat_sum += parseFloat(this.serie[i]);\n        }\n      }\n\n      return this.stat_sum\n    };\n\n    /** return population number */\n    this.pop = function () {\n      if (this._nodata()) { return }\n\n      if (this.stat_pop === null) {\n        this.stat_pop = this.serie.length;\n      }\n\n      return this.stat_pop\n    };\n\n    /** return mean value */\n    this.mean = function () {\n      if (this._nodata()) { return }\n\n      if (this.stat_mean === null) {\n        this.stat_mean = parseFloat(this.sum() / this.pop());\n      }\n\n      return this.stat_mean\n    };\n\n    /** return median value */\n    this.median = function () {\n      if (this._nodata()) { return }\n\n      if (this.stat_median === null) {\n        this.stat_median = 0;\n        var tmp = this.sorted();\n\n        // serie pop is odd\n        if (tmp.length % 2) {\n          this.stat_median = parseFloat(tmp[(Math.ceil(tmp.length / 2) - 1)]);\n\n        // serie pop is even\n        } else {\n          this.stat_median = (parseFloat(tmp[((tmp.length / 2) - 1)]) + parseFloat(tmp[(tmp.length / 2)])) / 2;\n        }\n      }\n\n      return this.stat_median\n    };\n\n    /** return variance value */\n    this.variance = function (round) {\n      round = (typeof round === 'undefined');\n\n      if (this._nodata()) { return }\n\n      if (this.stat_variance === null) {\n        var tmp = 0;\n        var serieMean = this.mean();\n        for (var i = 0; i < this.pop(); i++) {\n          tmp += Math.pow((this.serie[i] - serieMean), 2);\n        }\n\n        this.stat_variance = tmp / this.pop();\n\n        if (round === true) {\n          this.stat_variance = Math.round(this.stat_variance * Math.pow(10, this.roundlength)) / Math.pow(10, this.roundlength);\n        }\n      }\n\n      return this.stat_variance\n    };\n\n    /** return standard deviation value */\n    this.stddev = function (round) {\n      round = (typeof round === 'undefined');\n\n      if (this._nodata()) { return }\n\n      if (this.stat_stddev === null) {\n        this.stat_stddev = Math.sqrt(this.variance());\n\n        if (round === true) {\n          this.stat_stddev = Math.round(this.stat_stddev * Math.pow(10, this.roundlength)) / Math.pow(10, this.roundlength);\n        }\n      }\n\n      return this.stat_stddev\n    };\n\n    /** coefficient of variation - measure of dispersion */\n    this.cov = function (round) {\n      round = (typeof round === 'undefined');\n\n      if (this._nodata()) { return }\n\n      if (this.stat_cov === null) {\n        this.stat_cov = this.stddev() / this.mean();\n\n        if (round === true) {\n          this.stat_cov = Math.round(this.stat_cov * Math.pow(10, this.roundlength)) / Math.pow(10, this.roundlength);\n        }\n      }\n\n      return this.stat_cov\n    };\n\n    /** reset all attributes after setting a new serie */\n    this.resetStatistics = function () {\n      this.stat_sorted = null;\n      this.stat_mean = null;\n      this.stat_median = null;\n      this.stat_sum = null;\n      this.stat_max = null;\n      this.stat_min = null;\n      this.stat_pop = null;\n      this.stat_variance = null;\n      this.stat_stddev = null;\n      this.stat_cov = null;\n    };\n\n    /** data test */\n    this._nodata = function () {\n      if (this.serie.length === 0) {\n        if (this.silent) this.log('[silent mode] Error. You should first enter a serie!', true);\n        else throw new TypeError('Error. You should first enter a serie!')\n        return 1\n      } else { return 0 }\n    };\n\n    /** ensure nbClass is an integer */\n    this._nbClassInt = function (nbClass) {\n      var nbclassTmp = parseInt(nbClass, 10);\n      if (isNaN(nbclassTmp)) {\n        if (this.silent) this.log(\"[silent mode] '\" + nbclassTmp + \"' is not a valid integer. Enable to set class number.\", true);\n        else throw new TypeError(\"'\" + nbclassTmp + \"' is not a valid integer. Enable to set class number.\")\n      } else {\n        return nbclassTmp\n      }\n    };\n\n    /** check if the serie contains negative value */\n    this._hasNegativeValue = function () {\n      for (let i = 0; i < this.serie.length; i++) {\n        if (this.serie[i] < 0) { return true }\n      }\n      return false\n    };\n\n    /** check if the serie contains zero value */\n    this._hasZeroValue = function () {\n      for (let i = 0; i < this.serie.length; i++) {\n        if (parseFloat(this.serie[i]) === 0) { return true }\n      }\n      return false\n    };\n\n    /** return sorted values (as array) */\n    this.sorted = function () {\n      if (this.stat_sorted === null) {\n        if (this.is_uniqueValues === false) {\n          this.stat_sorted = this.serie.sort(function (a, b) {\n            return a - b\n          });\n        } else {\n          this.stat_sorted = this.serie.sort(function (a, b) {\n            var nameA = a.toString().toLowerCase(); var nameB = b.toString().toLowerCase();\n            if (nameA < nameB) return -1\n            if (nameA > nameB) return 1\n            return 0\n          });\n        }\n      }\n\n      return this.stat_sorted\n    };\n\n    /**\n   * Set Manual classification Return an array with bounds : ie array(0,\n   * 0.75, 1.5, 2.25, 3);\n   * Set ranges and prepare data for displaying legend\n   *\n   */\n    this.setClassManually = function (array) {\n      if (this._nodata()) { return }\n\n      if (array[0] !== this.min() || array[array.length - 1] !== this.max()) {\n        if (this.silent) this.log('[silent mode] ' + _t('Given bounds may not be correct! please check your input.\\nMin value : ' + this.min() + ' / Max value : ' + this.max()), true);\n        else throw new TypeError(_t('Given bounds may not be correct! please check your input.\\nMin value : ' + this.min() + ' / Max value : ' + this.max()))\n        return\n      }\n\n      this.setBounds(array);\n      this.setRanges();\n\n      // we specify the classification method\n      this.method = _t('manual classification') + ' (' + (array.length - 1) + ' ' + _t('classes') + ')';\n\n      return this.bounds\n    };\n\n    /**\n   * Equal intervals classification Return an array with bounds : ie array(0,\n   * 0.75, 1.5, 2.25, 3);\n   */\n    this.getClassEqInterval = function (nbClass, forceMin, forceMax) {\n      nbClass = this._nbClassInt(nbClass); // ensure nbClass is an integer\n\n      if (this._nodata()) { return }\n\n      var tmpMin = (typeof forceMin === 'undefined') ? this.min() : forceMin;\n      var tmpMax = (typeof forceMax === 'undefined') ? this.max() : forceMax;\n\n      var a = [];\n      var val = tmpMin;\n      var interval = (tmpMax - tmpMin) / nbClass;\n\n      for (let i = 0; i <= nbClass; i++) {\n        a[i] = val;\n        val += interval;\n      }\n\n      // -> Fix last bound to Max of values\n      a[nbClass] = tmpMax;\n\n      this.setBounds(a);\n      this.setRanges();\n\n      // we specify the classification method\n      this.method = _t('eq. intervals') + ' (' + nbClass + ' ' + _t('classes') + ')';\n\n      return this.bounds\n    };\n\n    this.getQuantiles = function (nbClass) {\n      nbClass = this._nbClassInt(nbClass); // ensure nbClass is an integer\n\n      var tmp = this.sorted();\n      var quantiles = [];\n\n      var step = this.pop() / nbClass;\n      for (var i = 1; i < nbClass; i++) {\n        var qidx = Math.round(i * step + 0.49);\n        quantiles.push(tmp[qidx - 1]); // zero-based\n      }\n\n      return quantiles\n    };\n\n    /**\n   * Quantile classification Return an array with bounds : ie array(0, 0.75,\n   * 1.5, 2.25, 3);\n   */\n    this.getClassQuantile = function (nbClass) {\n      nbClass = this._nbClassInt(nbClass); // ensure nbClass is an integer\n\n      if (this._nodata()) { return }\n\n      var tmp = this.sorted();\n      var bounds = this.getQuantiles(nbClass);\n      bounds.unshift(tmp[0]);\n\n      if (bounds[tmp.length - 1] !== tmp[tmp.length - 1]) { bounds.push(tmp[tmp.length - 1]); }\n\n      this.setBounds(bounds);\n      this.setRanges();\n\n      // we specify the classification method\n      this.method = _t('quantile') + ' (' + nbClass + ' ' + _t('classes') + ')';\n\n      return this.bounds\n    };\n\n    /**\n   * Standard Deviation classification\n   * Return an array with bounds : ie array(0,\n   * 0.75, 1.5, 2.25, 3);\n   */\n    this.getClassStdDeviation = function (nbClass, matchBounds) {\n      nbClass = this._nbClassInt(nbClass); // ensure nbClass is an integer\n\n      if (this._nodata()) { return }\n\n      var tmpMax = this.max();\n      var tmpMin = this.min();\n      var tmpStdDev = this.stddev();\n      var tmpMean = this.mean();\n\n      var a = [];\n\n      // number of classes is odd\n      if (nbClass % 2 === 1) {\n        // Euclidean division to get the inferior bound\n        var infBound = Math.floor(nbClass / 2);\n\n        var supBound = infBound + 1;\n\n        // we set the central bounds\n        a[infBound] = tmpMean - (tmpStdDev / 2);\n        a[supBound] = tmpMean + (tmpStdDev / 2);\n\n        // Values < to infBound, except first one\n        for (let i = infBound - 1; i > 0; i--) {\n          let val = a[i + 1] - tmpStdDev;\n          a[i] = val;\n        }\n\n        // Values > to supBound, except last one\n        for (let i = supBound + 1; i < nbClass; i++) {\n          let val = a[i - 1] + tmpStdDev;\n          a[i] = val;\n        }\n\n        // number of classes is even\n      } else {\n        var meanBound = nbClass / 2;\n\n        // we get the mean value\n        a[meanBound] = tmpMean;\n\n        // Values < to the mean, except first one\n        for (let i = meanBound - 1; i > 0; i--) {\n          let val = a[i + 1] - tmpStdDev;\n          a[i] = val;\n        }\n\n        // Values > to the mean, except last one\n        for (let i = meanBound + 1; i < nbClass; i++) {\n          let val = a[i - 1] + tmpStdDev;\n          a[i] = val;\n        }\n      }\n\n      // we finally set the first value\n      // do we excatly match min value or not ?\n      a[0] = (typeof matchBounds === 'undefined') ? a[1] - tmpStdDev : tmpMin;\n\n      // we finally set the last value\n      // do we excatly match max value or not ?\n      a[nbClass] = (typeof matchBounds === 'undefined') ? a[nbClass - 1] + tmpStdDev : tmpMax;\n\n      this.setBounds(a);\n      this.setRanges();\n\n      // we specify the classification method\n      this.method = _t('std deviation') + ' (' + nbClass + ' ' + _t('classes') + ')';\n\n      return this.bounds\n    };\n\n    /**\n   * Geometric Progression classification\n   * http://en.wikipedia.org/wiki/Geometric_progression\n   * Return an array with bounds : ie array(0,\n   * 0.75, 1.5, 2.25, 3);\n   */\n    this.getClassGeometricProgression = function (nbClass) {\n      nbClass = this._nbClassInt(nbClass); // ensure nbClass is an integer\n\n      if (this._nodata()) { return }\n\n      if (this._hasNegativeValue() || this._hasZeroValue()) {\n        if (this.silent) this.log('[silent mode] ' + _t('geometric progression can\\'t be applied with a serie containing negative or zero values.'), true);\n        else throw new TypeError(_t('geometric progression can\\'t be applied with a serie containing negative or zero values.'))\n        return\n      }\n\n      var a = [];\n      var tmpMin = this.min();\n      var tmpMax = this.max();\n\n      var logMax = Math.log(tmpMax) / Math.LN10; // max decimal logarithm (or base 10)\n      var logMin = Math.log(tmpMin) / Math.LN10; // min decimal logarithm (or base 10)\n\n      var interval = (logMax - logMin) / nbClass;\n\n      // we compute log bounds\n      for (let i = 0; i < nbClass; i++) {\n        if (i === 0) {\n          a[i] = logMin;\n        } else {\n          a[i] = a[i - 1] + interval;\n        }\n      }\n\n      // we compute antilog\n      a = a.map(function (x) { return Math.pow(10, x) });\n\n      // and we finally add max value\n      a.push(this.max());\n\n      this.setBounds(a);\n      this.setRanges();\n\n      // we specify the classification method\n      this.method = _t('geometric progression') + ' (' + nbClass + ' ' + _t('classes') + ')';\n\n      return this.bounds\n    };\n\n    /**\n   * Arithmetic Progression classification\n   * http://en.wikipedia.org/wiki/Arithmetic_progression\n   * Return an array with bounds : ie array(0,\n   * 0.75, 1.5, 2.25, 3);\n   */\n    this.getClassArithmeticProgression = function (nbClass) {\n      nbClass = this._nbClassInt(nbClass); // ensure nbClass is an integer\n\n      if (this._nodata()) { return }\n\n      var denominator = 0;\n\n      // we compute the (french) \"Raison\"\n      for (let i = 1; i <= nbClass; i++) {\n        denominator += i;\n      }\n\n      var a = [];\n      var tmpMin = this.min();\n      var tmpMax = this.max();\n\n      var interval = (tmpMax - tmpMin) / denominator;\n\n      for (let i = 0; i <= nbClass; i++) {\n        if (i === 0) {\n          a[i] = tmpMin;\n        } else {\n          a[i] = a[i - 1] + (i * interval);\n        }\n      }\n\n      this.setBounds(a);\n      this.setRanges();\n\n      // we specify the classification method\n      this.method = _t('arithmetic progression') + ' (' + nbClass + ' ' + _t('classes') + ')';\n\n      return this.bounds\n    };\n\n    /**\n   * Credits : Doug Curl (javascript) and Daniel J Lewis (python implementation)\n   * http://www.arcgis.com/home/item.html?id=0b633ff2f40d412995b8be377211c47b\n   * http://danieljlewis.org/2010/06/07/jenks-natural-breaks-algorithm-in-python/\n   */\n    this.getClassJenks = function (nbClass) {\n      nbClass = this._nbClassInt(nbClass); // ensure nbClass is an integer\n\n      if (this._nodata()) { return }\n\n      let dataList = this.sorted();\n\n      // now iterate through the datalist:\n      // determine mat1 and mat2\n      // really not sure how these 2 different arrays are set - the code for\n      // each seems the same!\n      // but the effect are 2 different arrays: mat1 and mat2\n      var mat1 = [];\n      // for (var x = 0, xl = dataList.length + 1; x < xl; x++) {\n      for (var x = 0; x < dataList.length + 1; x++) {\n        var temp = [];\n        for (var j = 0, jl = nbClass + 1; j < jl; j++) {\n          temp.push(0);\n        }\n        mat1.push(temp);\n      }\n\n      var mat2 = [];\n      // for (var i = 0, il = dataList.length + 1; i < il; i++) {\n      for (var i = 0; i < dataList.length + 1; i++) {\n        var temp2 = [];\n        for (var c = 0, cl = nbClass + 1; c < cl; c++) {\n          temp2.push(0);\n        }\n        mat2.push(temp2);\n      }\n\n      // absolutely no idea what this does - best I can tell, it sets the 1st\n      // group in the\n      // mat1 and mat2 arrays to 1 and 0 respectively\n      for (var y = 1, yl = nbClass + 1; y < yl; y++) {\n        mat1[0][y] = 1;\n        mat2[0][y] = 0;\n        for (var t = 1, tl = dataList.length + 1; t < tl; t++) {\n          mat2[t][y] = Infinity;\n        }\n        var v = 0.0;\n      }\n\n      // and this part - I'm a little clueless on - but it works\n      // pretty sure it iterates across the entire dataset and compares each\n      // value to\n      // one another to and adjust the indices until you meet the rules:\n      // minimum deviation\n      // within a class and maximum separation between classes\n      for (var l = 2, ll = dataList.length + 1; l < ll; l++) {\n        var s1 = 0.0;\n        var s2 = 0.0;\n        var w = 0.0;\n        for (var m = 1, ml = l + 1; m < ml; m++) {\n          var i3 = l - m + 1;\n          var val = parseFloat(dataList[i3 - 1]);\n          s2 += val * val;\n          s1 += val;\n          w += 1;\n          v = s2 - (s1 * s1) / w;\n          var i4 = i3 - 1;\n          if (i4 !== 0) {\n            for (var p = 2, pl = nbClass + 1; p < pl; p++) {\n              if (mat2[l][p] >= (v + mat2[i4][p - 1])) {\n                mat1[l][p] = i3;\n                mat2[l][p] = v + mat2[i4][p - 1];\n              }\n            }\n          }\n        }\n        mat1[l][1] = 1;\n        mat2[l][1] = v;\n      }\n\n      var k = dataList.length;\n      var kclass = [];\n\n      // fill the kclass (classification) array with zeros:\n      for (i = 0; i <= nbClass; i++) {\n        kclass.push(0);\n      }\n\n      // this is the last number in the array:\n      kclass[nbClass] = parseFloat(dataList[dataList.length - 1]);\n      // this is the first number - can set to zero, but want to set to lowest\n      // to use for legend:\n      kclass[0] = parseFloat(dataList[0]);\n      var countNum = nbClass;\n      while (countNum >= 2) {\n        var id = parseInt((mat1[k][countNum]) - 2);\n        kclass[countNum - 1] = dataList[id];\n        k = parseInt((mat1[k][countNum] - 1));\n        // spits out the rank and value of the break values:\n        // console.log(\"id=\"+id,\"rank = \" + String(mat1[k][countNum]),\"val =\n        // \" + String(dataList[id]))\n        // count down:\n        countNum -= 1;\n      }\n      // check to see if the 0 and 1 in the array are the same - if so, set 0\n      // to 0:\n      if (kclass[0] === kclass[1]) {\n        kclass[0] = 0;\n      }\n\n      this.setBounds(kclass);\n      this.setRanges();\n\n      this.method = _t('Jenks') + ' (' + nbClass + ' ' + _t('classes') + ')';\n\n      return this.bounds // array of breaks\n    };\n\n    /**\n   * Quantile classification Return an array with bounds : ie array(0, 0.75,\n   * 1.5, 2.25, 3);\n   */\n    this.getClassUniqueValues = function () {\n      if (this._nodata()) { return }\n\n      this.is_uniqueValues = true;\n      var tmp = this.sorted(); // display in alphabetical order\n\n      var a = [];\n\n      for (let i = 0; i < this.pop(); i++) {\n        if (a.indexOf(tmp[i]) === -1) {\n          a.push(tmp[i]);\n        }\n      }\n\n      this.bounds = a;\n\n      // we specify the classification method\n      this.method = _t('unique values');\n\n      return a\n    };\n\n    /**\n   * Return the class of a given value.\n   * For example value : 6\n   * and bounds array = (0, 4, 8, 12);\n   * Return 2\n   */\n    this.getClass = function (value) {\n      for (let i = 0; i < this.bounds.length; i++) {\n        if (this.is_uniqueValues === true) {\n          if (value === this.bounds[i]) { return i }\n        } else {\n        // parseFloat() is necessary\n          if (parseFloat(value) <= this.bounds[i + 1]) {\n            return i\n          }\n        }\n      }\n\n      return _t(\"Unable to get value's class.\")\n    };\n\n    /**\n   * Return the ranges array : array('0-0.75', '0.75-1.5', '1.5-2.25',\n   * '2.25-3');\n   */\n    this.getRanges = function () {\n      return this.ranges\n    };\n\n    /**\n   * Returns the number/index of this.ranges that value falls into\n   */\n    this.getRangeNum = function (value) {\n      var bounds, i;\n\n      for (i = 0; i < this.ranges.length; i++) {\n        bounds = this.ranges[i].split(/ - /);\n        if (value <= parseFloat(bounds[1])) {\n          return i\n        }\n      }\n    };\n\n    /*\n   * Compute inner ranges based on serie.\n   * Produce discontinous ranges used for legend - return an array similar to :\n   * array('0.00-0.74', '0.98-1.52', '1.78-2.25', '2.99-3.14');\n   * If inner ranges already computed, return array values.\n   */\n    this.getInnerRanges = function () {\n      // if already computed, we return the result\n      if (this.inner_ranges != null) {\n        return this.inner_ranges\n      }\n\n      var a = [];\n      var tmp = this.sorted();\n      var cnt = 1; // bounds array counter\n\n      for (let i = 0; i < tmp.length; i++) {\n        let rangeFirstValue;\n        if (i === 0) {\n          rangeFirstValue = tmp[i]; // we init first range value\n        }\n\n        if (parseFloat(tmp[i]) > parseFloat(this.bounds[cnt])) {\n          a[cnt - 1] = '' + rangeFirstValue + this.separator + tmp[i - 1];\n\n          rangeFirstValue = tmp[i];\n\n          cnt++;\n        }\n\n        // we reach the last range, we finally complete manually\n        // and return the array\n        if (cnt === (this.bounds.length - 1)) {\n        // we set the last value\n          a[cnt - 1] = '' + rangeFirstValue + this.separator + tmp[tmp.length - 1];\n\n          this.inner_ranges = a;\n          return this.inner_ranges\n        }\n      }\n    };\n\n    this.getSortedlist = function () {\n      return this.sorted().join(', ')\n    };\n\n    // object constructor\n    // At the end of script. If not setPrecision() method is not known\n\n    // we create an object identifier for debugging\n    this.objectID = new Date().getUTCMilliseconds();\n    this.log('Creating new geostats object');\n\n    if (typeof a !== 'undefined' && a.length > 0) {\n      this.serie = a;\n      this.setPrecision();\n      this.log('Setting serie (' + a.length + ') : ' + a.join());\n    } else {\n      this.serie = [];\n    }\n\n    // creating aliases on classification function for backward compatibility\n    this.getJenks = this.getClassJenks;\n    this.getGeometricProgression = this.getClassGeometricProgression;\n    this.getEqInterval = this.getClassEqInterval;\n    this.getQuantile = this.getClassQuantile;\n    this.getStdDeviation = this.getClassStdDeviation;\n    this.getUniqueValues = this.getClassUniqueValues;\n    this.getArithmeticProgression = this.getClassArithmeticProgression;\n  }\n\n  function bin (data, binInstructions) {\n    if (binInstructions.constructor === Object) {\n      const intervalBounds = getIntervalBounds(data, binInstructions);\n      const ranges = pairRanges(intervalBounds);\n\n      return bin1d(data, binInstructions.groupBy, ranges)\n    }\n\n    if (binInstructions.constructor === Array) {\n      const intervalBoundsPerVariable = binInstructions.map(instructions => getIntervalBounds(data, instructions));\n      const rangesPerVariable = intervalBoundsPerVariable.map(bounds => pairRanges(bounds));\n      const variables = binInstructions.map(instructions => instructions.groupBy);\n\n      return binKd(data, variables, rangesPerVariable)\n    }\n  }\n\n  function getIntervalBounds (data, binInstructions) {\n    const { groupBy, method, numClasses } = parseBinInstructions(binInstructions);\n\n    const variableData = data[groupBy];\n    if (!variableData) {\n      throw new Error(`groupBy column '${groupBy}' does not exist`)\n    }\n\n    if (method === 'IntervalSize') {\n      return createRangesFromBinSize(variableData, binInstructions.binSize)\n    }\n\n    if (method === 'Manual') {\n      return binInstructions.manualClasses\n    }\n\n    const geoStat = new Geostats(variableData);\n    return geoStat[methodMap[method]](numClasses)\n  }\n\n  function parseBinInstructions (binInstructions) {\n    if (binInstructions.constructor !== Object) {\n      throw new Error('Bin only accepts an Object')\n    }\n\n    const groupBy = binInstructions.groupBy;\n    if (groupBy.constructor !== String) {\n      throw new Error('groupBy only accepts a String variable name')\n    }\n\n    let method = binInstructions.method;\n    if (!method) {\n      warn('No binning method specified, defaulting to EqualInterval');\n      method = 'EqualInterval';\n    }\n    if (method.constructor !== String) {\n      warn('Binning method not recognized, defaulting to EqualInterval');\n      method = 'EqualInterval';\n    }\n\n    let numClasses = binInstructions.numClasses;\n    if (!numClasses) {\n      warn('numClasses not specified, defaulting to 5');\n      numClasses = 5;\n    }\n\n    return { groupBy, method, numClasses }\n  }\n\n  function createRangesFromBinSize (variableData, binSize) {\n    if (!binSize) {\n      throw new Error('Missing required option \\'binSize\\'')\n    }\n\n    const domain = calculateDomain(variableData);\n\n    const binCount = Math.floor((domain[1] - domain[0]) / binSize);\n\n    let lowerBound = domain[0];\n    const ranges = [lowerBound];\n\n    for (let i = 0; i < binCount - 1; i++) {\n      const upperBound = lowerBound + binSize;\n      ranges.push(upperBound);\n      lowerBound = upperBound;\n    }\n\n    ranges.push(domain[1]);\n\n    return ranges\n  }\n\n  const methodMap = {\n    EqualInterval: 'getClassEqInterval',\n    StandardDeviation: 'getClassStdDeviation',\n    ArithmeticProgression: 'getClassArithmeticProgression',\n    GeometricProgression: 'getClassGeometricProgression',\n    Quantile: 'getClassQuantile',\n    Jenks: 'getClassJenks'\n  };\n\n  function pairRanges (ranges) {\n    const l = ranges.length;\n    const newRange = [];\n\n    for (let i = 0; i < l - 1; i++) {\n      newRange.push([ranges[i], ranges[i + 1]]);\n    }\n\n    return newRange\n  }\n\n  function bin1d (data, variable, ranges) {\n    // Create an empty array to store new groups divided by range\n    const groups = Array(ranges.length);\n\n    for (let i = 0; i < groups.length; i++) {\n      groups[i] = {};\n\n      for (const col in data) {\n        groups[i][col] = [];\n      }\n    }\n\n    const length = getDataLength(data);\n\n    for (let i = 0; i < length; i++) {\n      const value = data[variable][i];\n      const binIndex = getBinIndex(ranges, value);\n\n      if (binIndex !== -1) {\n        for (const col in data) {\n          groups[binIndex][col].push(data[col][i]);\n        }\n      }\n    }\n\n    // Remove empty bins\n    const nonEmptyBinIndices = getNonEmptyBinIndices(groups);\n    const nonEmptyRanges = nonEmptyBinIndices.map(i => ranges[i]);\n    const nonEmptyGroups = nonEmptyBinIndices.map(i => groups[i]);\n\n    // Add new grouped column to newData\n    const newData = {\n      bins: nonEmptyRanges,\n      $grouped: nonEmptyGroups.map(group => new DataContainer(group, { validate: false }))\n    };\n\n    return newData\n  }\n\n  function getBinIndex (bins, value) {\n    // Find index of bin in which the instance belongs\n    const binIndex = bins.findIndex(function (bin, i) {\n      if (i === bins.length - 1) {\n        return value >= bin[0] && value <= bin[1]\n      } else {\n        return value >= bin[0] && value < bin[1]\n      }\n    });\n\n    return binIndex\n  }\n\n  function getNonEmptyBinIndices (groups) {\n    const nonEmptyBinIndices = [];\n\n    for (let i = 0; i < groups.length; i++) {\n      if (getDataLength(groups[i]) > 0) nonEmptyBinIndices.push(i);\n    }\n\n    return nonEmptyBinIndices\n  }\n\n  function binKd (data, variables, rangesPerVariable) {\n    const binIndexTree = constructBinIndexTree(data, variables, rangesPerVariable);\n    const binnedData = convertTreeIntoColumnData(binIndexTree, variables, rangesPerVariable);\n\n    binnedData.$grouped = binnedData.$grouped.map(group => new DataContainer(group, { validate: false }));\n\n    return binnedData\n  }\n\n  function constructBinIndexTree (data, variables, rangesPerVariable) {\n    let binIndexTree = {};\n    const dataLength = getDataLength(data);\n\n    for (let i = 0; i < dataLength; i++) {\n      const binIndices = getBinIndices(data, i, variables, rangesPerVariable);\n      if (rowIsNotEmpty(binIndices)) {\n        binIndexTree = updateBranch(binIndexTree, binIndices, data, i);\n      }\n    }\n\n    return binIndexTree\n  }\n\n  function getBinIndices (data, index, variables, rangesPerVariable) {\n    const binIndices = [];\n\n    for (let i = 0; i < variables.length; i++) {\n      const variable = variables[i];\n      const value = data[variable][index];\n\n      binIndices.push(getBinIndex(rangesPerVariable[i], value));\n    }\n\n    return binIndices\n  }\n\n  function rowIsNotEmpty (binIndices) {\n    return binIndices.every(binIndex => binIndex > -1)\n  }\n\n  function updateBranch (tree, indices, data, rowIndex) {\n    let currentLevel = tree;\n\n    for (let i = 0; i < indices.length; i++) {\n      const index = indices[i];\n\n      if (lastIndex(i, indices.length)) {\n        if (!(index in currentLevel)) {\n          currentLevel[index] = initGroup(data);\n        }\n\n        currentLevel[index] = addRow(currentLevel[index], data, rowIndex);\n      } else {\n        if (!(index in currentLevel)) {\n          currentLevel[index] = {};\n        }\n\n        currentLevel = currentLevel[index];\n      }\n    }\n\n    return tree\n  }\n\n  function lastIndex (i, length) {\n    return i === (length - 1)\n  }\n\n  function initGroup (data) {\n    const group = {};\n    for (const columnName in data) {\n      group[columnName] = [];\n    }\n\n    return group\n  }\n\n  function addRow (group, data, rowIndex) {\n    for (const columnName in data) {\n      group[columnName].push(data[columnName][rowIndex]);\n    }\n\n    return group\n  }\n\n  function convertTreeIntoColumnData (binIndexTree, variables, binsPerVariable) {\n    const columnData = initColumnData$1(variables);\n    const dataIndex = variables.length;\n\n    forEachBranch(binIndexTree, branchArray => {\n      for (let i = 0; i < variables.length; i++) {\n        const binIndex = branchArray[i];\n        const bin = binsPerVariable[i][binIndex];\n\n        const binnedColumnName = getBinnedColumnName(variables[i]);\n\n        columnData[binnedColumnName].push(bin);\n      }\n\n      columnData.$grouped.push(branchArray[dataIndex]);\n    });\n\n    return columnData\n  }\n\n  function initColumnData$1 (variables) {\n    const columnData = { $grouped: [] };\n\n    for (let i = 0; i < variables.length; i++) {\n      const binnedColumnName = getBinnedColumnName(variables[i]);\n      columnData[binnedColumnName] = [];\n    }\n\n    return columnData\n  }\n\n  function forEachBranch (tree, callback) {\n    for (const path of traverse(tree)) {\n      callback(path);\n    }\n  }\n\n  // https://stackoverflow.com/a/45628445\n  function * traverse (o) {\n    const memory = new Set();\n\n    function * innerTraversal (o, path = []) {\n      if (memory.has(o)) {\n        // we've seen this object before don't iterate it\n        return\n      }\n\n      // add the new object to our memory.\n      memory.add(o);\n\n      for (const i of Object.keys(o)) {\n        const itemPath = path.concat(i);\n\n        if (!('$key' in o[i])) {\n          yield * innerTraversal(o[i], itemPath);\n        } else {\n          itemPath.push(o[i]);\n          yield itemPath;\n        }\n      }\n    }\n\n    yield * innerTraversal(o);\n  }\n\n  function getBinnedColumnName (columnName) {\n    return 'bins_' + columnName\n  }\n\n  function dropNA (data, dropInstructions) {\n    let filterFunc;\n\n    if (!dropInstructions) {\n      // If the instructions are falsy, we will check all columns for invalid values\n      filterFunc = row => {\n        let keep = true;\n\n        for (const key in row) {\n          const val = row[key];\n          if (isInvalid(val)) {\n            keep = false;\n            break\n          }\n        }\n\n        return keep\n      };\n    } else if (dropInstructions.constructor === String) {\n      // If the instructions are a string, we check only one column for invalid values\n      checkIfColumnsExist(data, [dropInstructions]);\n      filterFunc = row => !isInvalid(row[dropInstructions]);\n    } else if (dropInstructions.constructor === Array) {\n      // if the instructions are an array, we check the columns named in the array\n      checkIfColumnsExist(data, dropInstructions);\n      filterFunc = row => {\n        let keep = true;\n        for (const col of dropInstructions) {\n          if (isInvalid(row[col])) {\n            keep = false;\n            break\n          }\n        }\n\n        return keep\n      };\n    } else {\n      throw new Error('dropNA can only be passed undefined, a String or an Array of Strings')\n    }\n\n    return filter(data, filterFunc)\n  }\n\n  function checkIfColumnsExist (data, columns) {\n    for (const col of columns) {\n      if (!(col in data)) {\n        throw new Error(`Column '${col}' not found`)\n      }\n    }\n  }\n\n  // This function comes from Turf's wonderful geospatial lib\n  // We only need this single function and importing it from @turf/meta\n  // doesn't work well for in-browser compilation\n  // https://github.com/Turfjs/turf\n\n  // The MIT License (MIT)\n\n  // Copyright (c) 2019 Morgan Herlocker\n\n  // Permission is hereby granted, free of charge, to any person obtaining a copy of\n  // this software and associated documentation files (the \"Software\"), to deal in\n  // the Software without restriction, including without limitation the rights to\n  // use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n  // the Software, and to permit persons to whom the Software is furnished to do so,\n  // subject to the following conditions:\n\n  // The above copyright notice and this permission notice shall be included in all\n  // copies or substantial portions of the Software.\n\n  // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n  // FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n  // COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n  // IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  // CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n  function coordEach (geojson, callback, excludeWrapCoord) {\n    // Handles null Geometry -- Skips this GeoJSON\n    if (geojson === null) return\n    var j; var k; var l; var geometry; var stopG; var coords;\n    var geometryMaybeCollection;\n    var wrapShrink = 0;\n    var coordIndex = 0;\n    var isGeometryCollection;\n    var type = geojson.type;\n    var isFeatureCollection = type === 'FeatureCollection';\n    var isFeature = type === 'Feature';\n    var stop = isFeatureCollection ? geojson.features.length : 1;\n\n    // This logic may look a little weird. The reason why it is that way\n    // is because it's trying to be fast. GeoJSON supports multiple kinds\n    // of objects at its root: FeatureCollection, Features, Geometries.\n    // This function has the responsibility of handling all of them, and that\n    // means that some of the `for` loops you see below actually just don't apply\n    // to certain inputs. For instance, if you give this just a\n    // Point geometry, then both loops are short-circuited and all we do\n    // is gradually rename the input until it's called 'geometry'.\n    //\n    // This also aims to allocate as few resources as possible: just a\n    // few numbers and booleans, rather than any temporary arrays as would\n    // be required with the normalization approach.\n    for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n      geometryMaybeCollection = (isFeatureCollection ? geojson.features[featureIndex].geometry\n        : (isFeature ? geojson.geometry : geojson));\n      isGeometryCollection = (geometryMaybeCollection) ? geometryMaybeCollection.type === 'GeometryCollection' : false;\n      stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n\n      for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n        var multiFeatureIndex = 0;\n        var geometryIndex = 0;\n        geometry = isGeometryCollection\n          ? geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n\n        // Handles null Geometry -- Skips this geometry\n        if (geometry === null) continue\n        coords = geometry.coordinates;\n        var geomType = geometry.type;\n\n        wrapShrink = (excludeWrapCoord && (geomType === 'Polygon' || geomType === 'MultiPolygon')) ? 1 : 0;\n\n        switch (geomType) {\n          case null:\n            break\n          case 'Point':\n            if (callback(coords, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false\n            coordIndex++;\n            multiFeatureIndex++;\n            break\n          case 'LineString':\n          case 'MultiPoint':\n            for (j = 0; j < coords.length; j++) {\n              if (callback(coords[j], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false\n              coordIndex++;\n              if (geomType === 'MultiPoint') multiFeatureIndex++;\n            }\n            if (geomType === 'LineString') multiFeatureIndex++;\n            break\n          case 'Polygon':\n          case 'MultiLineString':\n            for (j = 0; j < coords.length; j++) {\n              for (k = 0; k < coords[j].length - wrapShrink; k++) {\n                if (callback(coords[j][k], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false\n                coordIndex++;\n              }\n              if (geomType === 'MultiLineString') multiFeatureIndex++;\n              if (geomType === 'Polygon') geometryIndex++;\n            }\n            if (geomType === 'Polygon') multiFeatureIndex++;\n            break\n          case 'MultiPolygon':\n            for (j = 0; j < coords.length; j++) {\n              geometryIndex = 0;\n              for (k = 0; k < coords[j].length; k++) {\n                for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                  if (callback(coords[j][k][l], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) return false\n                  coordIndex++;\n                }\n                geometryIndex++;\n              }\n              multiFeatureIndex++;\n            }\n            break\n          case 'GeometryCollection':\n            for (j = 0; j < geometry.geometries.length; j++) { if (coordEach(geometry.geometries[j], callback, excludeWrapCoord) === false) return false }\n            break\n          default:\n            throw new Error('Unknown Geometry Type')\n        }\n      }\n    }\n  }\n\n  function transformGeometries (geometries, transformFunc) {\n    const geometriesClone = JSON.parse(JSON.stringify(geometries));\n\n    if (geometriesClone.constructor === Array) {\n      for (let i = 0; i < geometriesClone.length; i++) {\n        transformGeometryInplace(geometriesClone[i], transformFunc);\n      }\n    }\n\n    if (geometriesClone.constructor === Object) {\n      for (const key in geometriesClone) {\n        transformGeometryInplace(geometriesClone[key], transformFunc);\n      }\n    }\n\n    return geometriesClone\n  }\n\n  function transformGeometryInplace (geometry, transformFunc) {\n    coordEach(geometry, coord => {\n      const transformedPosition = transformFunc(coord);\n      coord[0] = transformedPosition[0];\n      coord[1] = transformedPosition[1];\n    });\n  }\n\n  function reproject (data, transformation) {\n    if (!('$geometry' in data)) {\n      warn('No geometry column found. Skipping reproject-transformation.');\n      return data\n    }\n\n    const transformedGeometries = transformGeometries(data.$geometry, transformation);\n    data.$geometry = transformedGeometries;\n\n    return data\n  }\n\n  function transform (data, transformFunction) {\n    if (transformFunction.constructor !== Function) {\n      throw new Error(`Invalid 'transform' transformation: must be a Function`)\n    }\n\n    transformFunction(data);\n  }\n\n  function cumsum (data, cumsumInstructions, options = { asInterval: false }) {\n    const asInterval = options.asInterval;\n    const length = getDataLength(data);\n    const newColumns = {};\n\n    for (const newColName in cumsumInstructions) {\n      checkRegularColumnName(newColName);\n\n      const oldColName = cumsumInstructions[newColName];\n\n      if (getColumnType(data[oldColName]) !== 'quantitative') {\n        throw new Error('cumsum columns can only be of type \\'quantitative\\'')\n      }\n\n      let previousSum = 0;\n      let currentSum = 0;\n      newColumns[newColName] = [];\n\n      for (let i = 0; i < length; i++) {\n        const value = data[oldColName][i];\n\n        if (!isInvalid(value)) {\n          currentSum += value;\n        }\n\n        if (asInterval) {\n          newColumns[newColName].push([previousSum, currentSum]);\n        } else {\n          newColumns[newColName].push(currentSum);\n        }\n\n        previousSum = currentSum;\n      }\n    }\n\n    Object.assign(data, newColumns);\n  }\n\n  function rowCumsum (data, _cumsumInstructions, options = { asInterval: false }) {\n    const asInterval = options.asInterval;\n    const cumsumInstructions = parseCumsumInstructions(_cumsumInstructions);\n    validateColumns(data, cumsumInstructions);\n\n    const rowCumsumColumns = {};\n    let previousColumnName;\n\n    for (const [newName, oldName] of cumsumInstructions) {\n      checkRegularColumnName(newName);\n      const oldColumn = data[oldName];\n\n      if (previousColumnName === undefined) {\n        if (asInterval) {\n          rowCumsumColumns[newName] = oldColumn.map(value => [0, value]);\n        } else {\n          rowCumsumColumns[newName] = oldColumn;\n        }\n      } else {\n        const previousColumn = rowCumsumColumns[previousColumnName];\n        let newColumn;\n\n        if (asInterval) {\n          newColumn = oldColumn.map((value, i) => {\n            const previousValue = previousColumn[i][1];\n            const newValue = previousValue + value;\n            return [previousValue, newValue]\n          });\n        } else {\n          newColumn = oldColumn.map((value, i) => value + previousColumn[i]);\n        }\n\n        rowCumsumColumns[newName] = newColumn;\n      }\n\n      previousColumnName = newName;\n    }\n\n    Object.assign(data, rowCumsumColumns);\n  }\n\n  const invalidInstructionsError = new Error('Invalid rowCumsum instrutions');\n\n  function parseCumsumInstructions (cumsumInstructions) {\n    if (cumsumInstructions && cumsumInstructions.constructor === Array) {\n      const parsedInstructions = [];\n\n      for (const instruction of cumsumInstructions) {\n        validateInstruction(instruction);\n\n        if (instruction.constructor === String) {\n          parsedInstructions.push([instruction, instruction]);\n        }\n\n        if (instruction.constructor === Object) {\n          const newName = Object.keys(instruction)[0];\n          const oldName = instruction[newName];\n          parsedInstructions.push([newName, oldName]);\n        }\n      }\n\n      return parsedInstructions\n    }\n\n    throw invalidInstructionsError\n  }\n\n  function validateInstruction (instruction) {\n    if (instruction.constructor === String) return\n\n    if (instruction.constructor === Object) {\n      if (Object.keys(instruction).length === 1) return\n    }\n\n    throw invalidInstructionsError\n  }\n\n  function validateColumns (data, stackInstructions) {\n    for (const [, oldName] of stackInstructions) {\n      const column = data[oldName];\n\n      if (!column) {\n        throw new Error(`Column '${oldName}' does not exist`)\n      }\n\n      const columnType = getColumnType(column);\n\n      if (columnType !== 'quantitative') {\n        throw new Error('rowCumsum columns can only be of type \\'quantitative\\'')\n      }\n    }\n  }\n\n  const transformations = {\n    filter,\n    select: produce(select),\n    arrange: produce(arrange),\n    rename: produce(rename),\n    mutate: produce(mutate),\n    transmute: produce(transmute),\n    summarise,\n    mutarise,\n    groupBy,\n    bin,\n    dropNA,\n    reproject,\n    transform: produce(transform),\n    cumsum: produce(cumsum),\n    rowCumsum: produce(rowCumsum)\n  };\n\n  const methods$1 = {\n    arrange (sortInstructions) {\n      const data = transformations.arrange(this._data, sortInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    bin (binInstructions) {\n      const data = transformations.bin(this._data, binInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    cumsum (cumsumInstructions, options) {\n      const data = transformations.cumsum(this._data, cumsumInstructions, options);\n      return new DataContainer(data, { validate: false })\n    },\n\n    dropNA (dropInstructions) {\n      const data = transformations.dropNA(this._data, dropInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    filter (filterFunction) {\n      const data = transformations.filter(this._data, filterFunction);\n      return new DataContainer(data, { validate: false })\n    },\n\n    groupBy (groupByInstructions) {\n      const data = transformations.groupBy(this._data, groupByInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    mutarise (mutariseInstructions) {\n      const data = transformations.mutarise(this._data, mutariseInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    mutarize (mutariseInstructions) {\n      const data = transformations.mutarise(this._data, mutariseInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    mutate (mutateInstructions) {\n      const data = transformations.mutate(this._data, mutateInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    transmute (transmuteInstructions) {\n      const data = transformations.transmute(this._data, transmuteInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    rename (renameInstructions) {\n      const data = transformations.rename(this._data, renameInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    reproject (reprojectInstructions) {\n      const data = transformations.reproject(this._data, reprojectInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    rowCumsum (cumsumInstructions, options) {\n      const data = transformations.rowCumsum(this._data, cumsumInstructions, options);\n      return new DataContainer(data, { validate: false })\n    },\n\n    select (selection) {\n      const data = transformations.select(this._data, selection);\n      return new DataContainer(data, { validate: false })\n    },\n\n    summarise (summariseInstructions) {\n      const data = transformations.summarise(this._data, summariseInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    summarize (summariseInstructions) {\n      const data = transformations.summarise(this._data, summariseInstructions);\n      return new DataContainer(data, { validate: false })\n    },\n\n    transform (transformFunction) {\n      const data = transformations.transform(this._data, transformFunction);\n      return new DataContainer(data, { validate: false })\n    }\n  };\n\n  function transformationsMixin (targetClass) {\n    Object.assign(targetClass.prototype, methods$1);\n  }\n\n  function ensureValidRow (row, self) {\n    for (const columnName in row) {\n      if (!(columnName in self._data)) throw new Error(`Column '${columnName}' not found`)\n    }\n\n    for (const columnName in self._data) {\n      if (columnName === '$key') {\n        if (columnName in row) throw new Error('Cannot set \\'$key\\' column')\n      } else {\n        if (!(columnName in row)) throw new Error(`Missing column '${columnName}'`)\n\n        const value = row[columnName];\n        ensureValueIsRightForColumn(value, columnName, self);\n      }\n    }\n  }\n\n  function ensureValidRowUpdate (row, self) {\n    for (const columnName in row) {\n      if (!(columnName in self._data)) throw new Error(`Column '${columnName}' not found`)\n\n      const value = row[columnName];\n      ensureValueIsRightForColumn(value, columnName, self);\n    }\n  }\n\n  function ensureRowExists (key, self) {\n    if (isUndefined(self._keyToRowNumber[key])) {\n      throw new Error(`Key '${key}' not found`)\n    }\n  }\n\n  function ensureValueIsRightForColumn (value, columnName, self) {\n    if (!isInvalid(value)) {\n      const columnType = getColumnType(self._data[columnName]);\n\n      ensureValidDataType(value);\n      const valueType = getDataType(value);\n\n      if (columnType !== valueType) {\n        throw new Error(`Column '${columnName}' is of type '${columnType}'. Received value of type '${valueType}'`)\n      }\n    }\n  }\n\n  function isValidColumn (column, columnName) {\n    const columnType = getColumnType(column);\n\n    if (columnType === undefined) return false\n    if (!columnNameMatchesType(columnName, columnType)) return false\n    if (!allValidValuesHaveTheSameType(column, columnType)) return false\n\n    return true\n  }\n\n  function ensureValidColumn (column, columnName) {\n    const { nValidValues } = findFirstValidValue(column);\n\n    if (nValidValues === 0) {\n      throw new Error(`Invalid column '${columnName}'. Column contains only invalid values.`)\n    }\n\n    const columnType = getColumnType(column);\n\n    if (columnType === undefined) throw new Error(`Column '${columnName}' contains data of unknown type`)\n    ensureColumnNameMatchesType(columnType);\n    ensureAllValidValuesHaveTheSameType(column, columnType, columnName);\n  }\n\n  function columnNameMatchesType (columnName, columnType) {\n    if (columnName === '$geometry' && columnType !== 'geometry') return false\n    if (columnName !== '$geometry' && columnType === 'geometry') return false\n\n    return true\n  }\n\n  function ensureColumnNameMatchesType (columnName, columnType) {\n    if (columnName === '$geometry' && columnType !== 'geometry') {\n      throw new Error(`Column '$geometry' can only contain data of type 'geometry', received '${columnType}'`)\n    }\n\n    if (columnName !== '$geometry' && columnType === 'geometry') {\n      throw new Error(`Only the '$geometry' column can contain data of type 'geometry'`)\n    }\n  }\n\n  function allValidValuesHaveTheSameType (column, columnType) {\n    for (let i = 0; i < column.length; i++) {\n      const value = column[i];\n\n      if (isInvalid(value)) continue\n\n      const valueType = getDataType(value);\n\n      if (valueType !== columnType) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  function ensureAllValidValuesHaveTheSameType (column, columnType, columnName) {\n    if (!allValidValuesHaveTheSameType(column, columnType)) {\n      throw new Error(`Column '${columnName}' mixes types`)\n    }\n  }\n\n  function columnExists (columnName, self) {\n    return columnName in self._data\n  }\n\n  function ensureColumnExists (columnName, self) {\n    if (!columnExists(columnName, self)) {\n      throw new Error(`Invalid column name: '${columnName}'`)\n    }\n  }\n\n  const methods$2 = {\n    // Rows\n    addRow (row) {\n      ensureValidRow(row, this);\n      const self = this;\n\n      this._data = produce(this._data, draft => {\n        for (const columnName in row) {\n          const value = row[columnName];\n          draft[columnName].push(value);\n\n          self._updateDomainIfNecessary(columnName, value);\n        }\n      });\n\n      const rowNumber = getDataLength(this._data) - 1;\n      const keyDomain = this.domain('$key');\n      keyDomain[1]++;\n      const key = keyDomain[1];\n\n      this._data = produce(this._data, draft => {\n        draft.$key.push(key);\n      });\n\n      this._keyToRowNumber[key] = rowNumber;\n    },\n\n    updateRow (key, row) {\n      if (row.constructor === Function) {\n        const result = row(this.row(key));\n\n        if (!(result && result.constructor === Object)) {\n          throw new Error('updateRow function must return Object')\n        }\n\n        this.updateRow(key, result);\n      }\n\n      ensureRowExists(key, this);\n      ensureValidRowUpdate(row, this);\n      const self = this;\n      const rowNumber = this._keyToRowNumber[key];\n\n      this._data = produce(this._data, draft => {\n        for (const columnName in row) {\n          throwErrorIfColumnIsKey(columnName);\n\n          const value = row[columnName];\n          draft[columnName][rowNumber] = value;\n\n          self._resetDomainIfNecessary(columnName);\n        }\n      });\n    },\n\n    deleteRow (key) {\n      ensureRowExists(key, this);\n      const self = this;\n      const rowNumber = this._keyToRowNumber[key];\n      delete this._keyToRowNumber[key];\n\n      this._data = produce(this._data, draft => {\n        for (const columnName in draft) {\n          draft[columnName].splice(rowNumber, 1);\n          self._resetDomainIfNecessary(columnName);\n        }\n      });\n    },\n\n    // Columns\n    addColumn (columnName, column) {\n      this._validateNewColumn(columnName, column);\n\n      this._data = produce(this._data, draft => {\n        draft[columnName] = column;\n      });\n    },\n\n    replaceColumn (columnName, column) {\n      this.deleteColumn(columnName);\n      this.addColumn(columnName, column);\n    },\n\n    deleteColumn (columnName) {\n      ensureColumnExists(columnName, this);\n      throwErrorIfColumnIsKey(columnName);\n\n      if (Object.keys(this._data).length === 2) {\n        throw new Error('Cannot delete last column')\n      }\n\n      this._data = produce(this._data, draft => {\n        delete draft[columnName];\n      });\n    },\n\n    // Private methods\n    _updateDomainIfNecessary (columnName, value) {\n      const type = getDataType(value);\n\n      if (columnName in this._domains) {\n        this._domains[columnName] = updateDomain(\n          this._domains[columnName],\n          value,\n          type\n        );\n      }\n    },\n\n    _resetDomainIfNecessary (columnName) {\n      if (columnName in this._domains) {\n        delete this._domains[columnName];\n      }\n    },\n\n    _validateNewColumn (columnName, column) {\n      checkRegularColumnName(columnName);\n\n      if (columnName in this._data) {\n        throw new Error(`Column '${columnName}' already exists`)\n      }\n\n      const dataLength = getDataLength(this._data);\n      if (dataLength !== column.length) {\n        throw new Error('Column must be of same length as rest of data')\n      }\n\n      ensureValidColumn(column);\n    }\n  };\n\n  function modifyingRowsAndColumnsMixin (targetClass) {\n    Object.assign(targetClass.prototype, methods$2);\n  }\n\n  function throwErrorIfColumnIsKey (columnName) {\n    if (columnName === '$key') throw new Error('Cannot modify key column')\n  }\n\n  function getJoinColumns (left, right, by) {\n    const leftData = left.data();\n    const rightData = right.data();\n\n    if (isUndefined(by)) {\n      const leftDataLength = getDataLength(leftData);\n      const joinColumns = {};\n\n      for (const columnName in rightData) {\n        if (columnName !== '$key') {\n          const rightColumn = rightData[columnName];\n          joinColumns[columnName] = rightColumn.slice(0, leftDataLength);\n        }\n      }\n\n      return joinColumns\n    }\n\n    if (isDefined(by)) {\n      const joinColumns = initJoinColumns(rightData, by[1]);\n\n      const rightRowsByKey = generateRightRowsByKey(rightData, by[1]);\n      const leftByColumn = leftData[by[0]];\n\n      for (let i = 0; i < leftByColumn.length; i++) {\n        const leftKey = leftByColumn[i];\n        const row = rightRowsByKey[leftKey];\n\n        for (const columnName in row) {\n          joinColumns[columnName].push(row[columnName]);\n        }\n      }\n\n      return joinColumns\n    }\n  }\n\n  function initJoinColumns (right, byColumnName) {\n    const joinColumns = {};\n\n    for (const columnName in right) {\n      if (columnName !== '$key' && columnName !== byColumnName) {\n        joinColumns[columnName] = [];\n      }\n    }\n\n    return joinColumns\n  }\n\n  function generateRightRowsByKey (right, byColumnName) {\n    const rightRowsByKey = {};\n    const byColumn = right[byColumnName];\n\n    for (let i = 0; i < byColumn.length; i++) {\n      const key = byColumn[i];\n      const row = {};\n\n      for (const columnName in right) {\n        if (columnName !== '$key' && columnName !== byColumnName) {\n          row[columnName] = right[columnName][i];\n        }\n      }\n\n      rightRowsByKey[key] = row;\n    }\n\n    return rightRowsByKey\n  }\n\n  function validateJoin (left, right, by) {\n    const leftData = left.data();\n    const rightData = getRightData(right);\n\n    if (isUndefined(by)) {\n      const leftLength = getDataLength(leftData);\n      const rightLength = getDataLength(rightData);\n\n      if (rightLength < leftLength) {\n        throw new Error(\n          'Without \\'by\\', the right DataContainer must be the same length as or longer than left DataContainer'\n        )\n      }\n    }\n\n    if (isDefined(by)) {\n      validateByColumnsExist(leftData, rightData, by);\n      ensureColumnsAreCompatible(leftData, rightData, by);\n      ensureNoDuplicateColumnNames(leftData, rightData, by);\n    }\n  }\n\n  function getRightData (right) {\n    if (!(right instanceof DataContainer)) {\n      throw new Error('It is only possible to join another DataContainer')\n    }\n\n    return right.data()\n  }\n\n  function validateByColumnsExist (left, right, by) {\n    if (!(by.constructor === Array && by.length === 2 && by.every(c => c.constructor === String))) {\n      throw new Error('Invalid format of \\'by\\'. Must be Array of two column names.')\n    }\n\n    const [leftColumnName, rightColumnName] = by;\n\n    if (!(leftColumnName in left)) {\n      throw new Error(`Column '${leftColumnName}' not found`)\n    }\n\n    if (!(rightColumnName in right)) {\n      throw new Error(`Column '${rightColumnName}' not found`)\n    }\n  }\n\n  function ensureColumnsAreCompatible (left, right, by) {\n    const [leftColumnName, rightColumnName] = by;\n    const leftColumn = left[leftColumnName];\n    const rightColumn = right[rightColumnName];\n\n    const leftType = getColumnType(leftColumn);\n    const rightType = getColumnType(rightColumn);\n\n    if (leftType !== rightType) throw new Error('\\'by\\' columns must be of the same type')\n\n    ensureRightByColumnIsUnique(right[rightColumnName]);\n    ensureLeftColumnIsSubsetOfRightColumn(leftColumn, rightColumn);\n  }\n\n  function ensureRightByColumnIsUnique (column) {\n    if (column.length !== new Set(column).size) {\n      throw new Error('Right \\'by\\' column must contain only unique values')\n    }\n  }\n\n  function ensureLeftColumnIsSubsetOfRightColumn (leftColumn, rightColumn) {\n    const rightSet = new Set(rightColumn);\n\n    for (let i = 0; i < leftColumn.length; i++) {\n      const leftKey = leftColumn[i];\n      if (!rightSet.has(leftKey)) {\n        throw new Error('Left \\'by\\' column must be subset of right column')\n      }\n    }\n  }\n\n  function ensureNoDuplicateColumnNames (left, right, by) {\n    const rightColumnName = by[1];\n\n    for (const columnName in right) {\n      if (columnName !== '$key' && columnName in left) {\n        if (columnName !== rightColumnName) {\n          throw new Error(`Duplicate column name: '${columnName}'`)\n        }\n      }\n    }\n  }\n\n  class DataContainer {\n    constructor (data, options = { validate: true }) {\n      this._data = {};\n      this._keyToRowNumber = {};\n      this._domains = {};\n\n      if (isColumnOriented(data)) {\n        this._setColumnData(data, options);\n        return\n      }\n\n      if (isRowOriented(data)) {\n        this._setRowData(data, options);\n        return\n      }\n\n      if (isGeoJSON(data)) {\n        this._setGeoJSON(data, options);\n        return\n      }\n\n      if (data instanceof Group) {\n        this._setGroup(data, options);\n        return\n      }\n\n      throw invalidDataError\n    }\n\n    // Accessing data\n    data () {\n      return this._data\n    }\n\n    row (key) {\n      const rowNumber = this._keyToRowNumber[key];\n      return this._row(rowNumber)\n    }\n\n    prevRow (key) {\n      const rowNumber = this._keyToRowNumber[key];\n      const previousRowNumber = rowNumber - 1;\n      return this._row(previousRowNumber)\n    }\n\n    nextRow (key) {\n      const rowNumber = this._keyToRowNumber[key];\n      const nextRowNumber = rowNumber + 1;\n      return this._row(nextRowNumber)\n    }\n\n    rows () {\n      const rows = [];\n      const length = getDataLength(this._data);\n\n      for (let i = 0; i < length; i++) {\n        rows.push(this._row(i));\n      }\n\n      return rows\n    }\n\n    column (columnName) {\n      ensureColumnExists(columnName, this);\n      return this._data[columnName]\n    }\n\n    map (columnName, mapFunction) {\n      return this.column(columnName).map(mapFunction)\n    }\n\n    domain (columnName) {\n      if (columnName in this._domains) {\n        return this._domains[columnName]\n      }\n\n      const column = this.column(columnName);\n      const domain = calculateDomain(column, columnName);\n      this._domains[columnName] = domain;\n      return domain\n    }\n\n    type (columnName) {\n      const column = this.column(columnName);\n      return getColumnType(column)\n    }\n\n    columnNames () {\n      return Object.keys(this._data)\n    }\n\n    // Checks\n    hasColumn (columnName) {\n      return columnExists(columnName, this)\n    }\n\n    columnIsValid (columnName) {\n      const column = this.column(columnName);\n      return isValidColumn(column, columnName)\n    }\n\n    validateColumn (columnName) {\n      const column = this.column(columnName);\n      ensureValidColumn(column, columnName);\n    }\n\n    validateAllColumns () {\n      for (const columnName in this._data) {\n        this.validateColumn(columnName);\n      }\n    }\n\n    // Join\n    join (dataContainer, { by = undefined } = {}) {\n      validateJoin(this, dataContainer, by);\n      const joinColumns = getJoinColumns(this, dataContainer, by);\n\n      for (const columnName in joinColumns) {\n        this.addColumn(columnName, joinColumns[columnName]);\n      }\n    }\n\n    // Private methods\n    _row (rowNumber) {\n      const length = getDataLength(this._data);\n\n      if (rowNumber < 0 || rowNumber >= length) {\n        return undefined\n      }\n\n      const row = {};\n\n      for (const columnName in this._data) {\n        const value = this._data[columnName][rowNumber];\n        row[columnName] = value;\n      }\n\n      return row\n    }\n  }\n\n  dataLoadingMixin(DataContainer);\n  transformationsMixin(DataContainer);\n  modifyingRowsAndColumnsMixin(DataContainer);\n\n  const invalidDataError = new Error('Data passed to DataContainer is of unknown format');\n\n  return DataContainer;\n\n})));\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows,\n    formatRow: formatRow,\n    formatValue: formatValue\n  };\n}\n","import dsv from \"./dsv.js\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\nexport var csvFormatRow = csv.formatRow;\nexport var csvFormatValue = csv.formatValue;\n","<script>\nimport { fade, fly, draw, scale,slide} from 'svelte/transition';\nimport { flip } from 'svelte/animate';\nimport { beforeUpdate, afterUpdate } from 'svelte';\nimport { tweened } from 'svelte/motion';\nimport { cubicOut, quintOut } from 'svelte/easing';\n\n// circleofifths referenced from https://www.reddit.com/r/guitarlessons/comments/668j0p/circle_of_fifths_and_open_chord_positions/\nimport { CircleOfFifths } from './circleOfFifths.js' // will not require much changes hence, js file\nimport {CircleOfColours } from './circleOfColours.js'// will not require much changes hence, js file\nimport {ChordScale } from './chordScale.js' // will not require much changes hence, js file\n\n\nimport { scaleLinear, scaleBand, scaleTime } from 'd3-scale'\nimport { Graphic, Section, PointLayer, RectangleLayer, Line, XAxis, YAxis, Rectangle, Point } from '@snlab/florence'\n  import DataContainer from '@snlab/florence-datacontainer'\nimport { csvParse, autoType } from 'd3-dsv'\n\nlet done = false\nlet myMusicAlbumCompilation\nlet myColourMusicScale\nlet myMacData\nlet myMusicScaleData\n\nasync function loadCSV(url)\n {\n\tconst response = await fetch(url)\n\tconst data = await response.text()\n\tconst dataParsed = csvParse(data)\n\t//console.log(dataParsed)\n\treturn dataParsed\n }\n\n// music album meta data from http://isophonics.net/datasets\nasync function getData() {\n    [myMusicAlbumCompilation, myColourMusicScale] = await Promise.all([\n      loadCSV(\"data/MAC.csv\", autoType),\n      loadCSV(\"data/ColourMusicScale.csv\", autoType)\n\t]);\n\t//console.log(myColourMusicScale)\n\tdone = true;\n}\n\ngetData()\n\n\n$: \n{\n\tif(done)\n\t{\n\tmyMacData = new DataContainer(myMusicAlbumCompilation)\n\tmyMusicScaleData = new DataContainer(myColourMusicScale)\n\t}\n}\n\n\tconst COF = new DataContainer(CircleOfFifths)\n\t\tlet polyParts = COF.data()\n\t\tlet polygon = polyParts.POLY_PATH\n\t\tlet polyKey = polyParts.KEY\n\t\tlet text1 = polyParts.TEXT_PATH_1\n\t\tlet text2 = polyParts.TEXT_PATH_2\n\t\tlet text3 = polyParts.TEXT_PATH_3\n\t\tlet filterPolyDetail = \"\"\n\n\tconst COC = new DataContainer(CircleOfColours)\n\t\tlet colourParts = COC.data()\n\t\tlet colourKey = colourParts.KEY\n\t\tlet colourPath = colourParts.POLY_PATH\n\t\tlet colourCombo = [colourKey, colourPath]\n\t\tlet coltext1 = colourParts.TEXT_PATH_1\n\t\tlet coltext2 = colourParts.TEXT_PATH_2\n\n\tconst CS = new DataContainer(ChordScale)\n\t\tlet chordscale \n\t\tlet compareChord\n\n\tlet myTriad = []\n\tlet polyArray = []\n\tlet storeCurrChordColours\n\tlet stringDetail = \"\"\n\tlet filterSongList =\"\"\n\tlet album =\"\"\n\tlet songtitle = \"\"\n\tlet artistFilter =\"\"\n\tlet history = \"\"\n\tlet tempColourPitch\n\tlet tempSelectedChords\n\n\tlet songDetails = \"\"\n\tlet structStart\n\tlet structEnd\n\tlet segment\n\tlet keyStart\n\tlet keyEnd\n\tlet key\n\tlet chordStart\n\tlet chordEnd\n\tlet chord\n\tlet albumDisplay\n\tlet songDisplay\n\tlet chordDisplay\n\n\tlet musicScaleFilter\n\tlet filteredScale\n\tlet filteredKey\n\tlet selectedInventor\n\n\t// Interface show/hide booleans\n\tlet visible = false\n\tlet showDetail =false\n\tlet showSongs = false\n\tlet showSwatch = false\n\tlet showOverheadChords = false\n\tlet showRightInnerLeft = true\n\tlet error = false\n\tlet intro=true;\n\tlet help = false;\n\tlet readyToNodeWheel = false;\n\tlet loadedCoords = false;\n\n\n//UI ELEMENTS//////////\n$:\n{\n\tif(artistFilter !== \"\") // means ARTIST changed, so RE-COLOUR to default AND reset history\n\t{\n\t\t//console.log(\"Changed to: \"+artistFilter)\n\t\thistory = \"\"\n\t\t\tfor (let index = 0; index < polygon.length; index++) \n\t\t\t\t{\n\t\t\t\t\tpolyArray[index] = \"CLICK\"\n\t\t\t\t\tdocument.getElementById(index).setAttribute(\"style\",\"opacity:0.2\")\n\t\t\t\t}\n\t}\n}\nfunction handleMouseOver(i)\n\t{\n\t\tif(history === \"\")\n\t\t{\n\t\t\thistory = i\n\t\t}\n\t\tif(polyArray[i] === \"CLICK\")\n\t\t{\n\t\t\tdocument.getElementById(i).setAttribute(\"style\",\"opacity:0.8\")\n\t\t}\n\t}\n\tfunction handleMouseOut(i)\n\t{\n\t\tif(polyArray[i] === \"CLICK\")\n\t\t{\n\t\t\tdocument.getElementById(i).setAttribute(\"style\",\"opacity:0.2\")\n\t\t}\n\t}\n\tfunction handleClick(i)\n\t{\n\t\tif(history === \"\") // one time init\n\t\t{\n\t\t\thistory = i\n\t\t}\n\t\tif(history !== \"\")\n\t\t{\n\t\t\tif(polyArray[i] === \"CLICK\" && history === i) // can click\n\t\t\t{\n\t\t\t\t//console.log(\"CLICK: \"+i +\"HISTORY: \"+history)\n\t\t\t\tdocument.getElementById(i).setAttribute(\"style\",\"opacity:0.2\")\n\t\t\t\tpolyArray[i] = \"BLOCK\"\t\n\t\t\t\thistory = i\t\n\t\t\t}\n\t\t\tif(polyArray[i] === \"CLICK\" && history !== i)\n\t\t\t\t{\n\t\t\t\t\t//console.log(\"CLICK: \"+i +\"HISTORY: \"+history)\n\t\t\t\t\tpolyArray[history] = \"CLICK\"\n\t\t\t\t\tdocument.getElementById(history).setAttribute(\"style\",\"opacity:0.2\")\n\t\t\t\t\thistory = i\n\t\t\t\t\tpolyArray[i] = \"BLOCK\"\t\n\t\t\t\t}\n\t\t\t\n\t\t\tif(history === i)\n\t\t\t{\n\t\t\t\t//console.log(\"CLICK: \"+i +\"HISTORY: \"+history)\n\t\t\t\tdocument.getElementById(i).setAttribute(\"style\",\"opacity:0.8\")\n\t\t\t\tpolyArray[i] = \"BLOCK\"\t\n\t\t\t\thistory = i\n\t\t\t}\n\t\t}\n\t\tintro = false\n\t\talbum = \"\" //whenver click ,reset\n\t\tsongtitle =\"\"\n\t\tsongDisplay =\"\"\n\t\talbumDisplay =\"\"\n\t\tchordDisplay =\"\"\n\t\tmyScale = 12\n\t\tshowSwatch = false\n\t\tshowOverheadChords = false\n\t\terror = false\n\t\thelp = false\n\t\t\n\t\ttry \n\t\t{\n\t\t//\tconsole.log(\"trying...\")\n\t\t\tmacroDetail(i)\n\t\t//\tconsole.log(\"finish...\")\n\t\t}\n\t\tcatch(e) \n\t\t{\n\t\t\terror = true\n  \t\t\t//alert(\"ERROR\")\n\t\t}\n\t}\n\tfunction macroDetail (index)\n\t{\n\t\terror = false\n\t\tshowDetail = true\n\t\tshowSongs = true\n\t\tfilterPolyDetail = COF.filter(row=>row.OBJECT_ID === index+1)\n\t\t\t//stringDetail = \"containing \"+filterPolyDetail.column('KEY')+\" key\"\n\t\tlet selectKey = filterPolyDetail.column('KEY')[0]\n\t\t\t//console.log(\"SELECTKEY: \"+selectKey)\n\t\t\t//console.log(\"ARTIST FILTER: \"+artistFilter)\n\t\tfilterSongList = myMacData.filter(row=>row.KEY === selectKey && row.KEY !== \"Silence\" && row.ARTIST === artistFilter)\n\t\talbum =_.uniq(filterSongList.column(\"ALBUM\"))\n\t\tsongtitle = _.uniq(filterSongList.column(\"SONG_TITLE\"))\n\t\t\t//console.log(filterSongList.data())\n\t}\n\tfunction songDetailRefresh()\n\t{\n\t\tshowDetail = false\n\t\tshowSongs = false\n\t\tif(myTriad !== \"\")\n\t\t{\n\t\tmyTriad = myTriad.splice(0, myTriad.length)\n\t\t}\n\t}\n\nlet aHistory =\"\"\nlet aCurrent =\"\"\n\n\tfunction handleSongDetails(song, i)\n\t{\n\t\taCurrent = document.getElementById(i+song)\n\n\t\tif(aHistory === \"\") // if empty at start, set both history and selection as selected.\n\t\t{\n\t\t\t\n\t\t\taHistory = aCurrent\n\t\t\taCurrent.style.background=\"#f6f6f6\"\n\t\t}\n\t\tif(aHistory === aCurrent)\n\t\t{\n\t\t\t// do nothing cuz clicked on same\n\t\t}\n\t\tif(aCurrent !== aHistory) //if selecting different li\n\t\t{\n\t\t\taHistory.style.background =\"#EDEAE5\" // history li to not highlighted\n\t\t\t\n\t\t\taCurrent.style.background=\"#f6f6f6\" // \n\t\t\taHistory = aCurrent\n\t\t\t\n\t\t}\n\t\tvisible = true;\n\t\tlet temp\n\n\t\tlet checkMultipleKey = myMacData.filter(row=>row.SONG_TITLE === song)\n\t\tsongDetails = myMacData.filter(row=>row.SONG_TITLE === song)\n\t\tchordStart = _.uniq(_.compact(songDetails.column(\"CHORD_START\")))\n\t\talbumDisplay = _.uniq(_.compact(songDetails.column(\"ALBUM\")))\n\t\tsongDisplay = song\n\t\tchordDisplay = _.pull(_.uniq(songDetails.column(\"CHORD\")), \"N\")\n\t\ttemp = songDetails.column(\"CHORD\")\n\t\tchord = _.pull(temp, \"N\")\n\t\tchordEnd = _.uniq(_.compact(songDetails.column(\"CHORD_END\")))\n\t\tclearHighlight()\n\t\tgenColWheel()\n\t}\n\t\n\tfunction genColWheel()\n\t{\n\t\tmusicScaleFilter = myMusicScaleData.filter(row=>row.Inventor === selectedInventor)\n\t\tfilteredScale = musicScaleFilter.column(\"Colour\")\n\t\tfilteredKey = [filteredScale, musicScaleFilter.column(\"Scale\")]\n\t\t//console.log(\"key\"+filteredKey[1][0])\n\t\t//console.log(\"Colour\"+filteredKey[0][0])\n\t\t//console.log(CS) // chord col of colourScale\n\t\tlet myArr\n\t\tmyTriad= [] //re-init\n\t\tfor(let i = 0; i < chord.length; i++)\n\t\t{\t\n\t\t\t\tmyArr = CS.filter(row=>row.CHORD === chord[i])\n\t\t\t\tmyTriad.push([myArr.column(\"ROOT\"), myArr.column(\"THIRD\"), myArr.column(\"FIFTH\")])\n\t\t\t\t\n\t\t}\n\t\tstoreCurrChordColours = []\n\t\tlet temp\n\t\tlet temp2\n\t\tfor (let index = 0; index < filteredKey[1].length; index++) //12\n\t\t{\n\t\t\tfor(let x = 0; x < myTriad.length; x++) // 5\n\t\t\t{\n\t\t\t\tfor(let y = 0; y < myTriad[x].length; y++) // 3\n\t\t\t\t{\n\t\t\t\t\t\tif(filteredKey[1][index] === myTriad[x][y][0])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttemp = {'pitch': myTriad[x][y][0], 'colour': filteredKey[0][index]}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tstoreCurrChordColours.push(temp)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\treadyToNodeWheel = true;\n\t\tshowSwatch = true;\n\t\t//console.log(myTriad)\n\t\tgenChordSwatches(storeCurrChordColours, myTriad)\t\t\n\t}\n\n// dedupe function by https://stackoverflow.com/users/1377002/andy\n\tfunction dedupe(arr) {\n  \treturn arr.reduce(function(p, c) {\n\n    // create an identifying id from the object values\n    var id = [c.pitch, c.colour].join('|');\n\n    // if the id is not found in the temp array\n    // add the object to the output array\n    // and add the key to the temp array\n    if (p.temp.indexOf(id) === -1) {\n      p.out.push(c);\n      p.temp.push(id);\n    }\n    return p;\n\n    // return the deduped array\n  }, {\n    temp: [],\n    out: []\n  }).out;\n}\n\nafterUpdate(() => {\n\t\t//console.log(\"updated\")\n\t\tif(readyToNodeWheel === true && loadedCoords === false) // condition so that does not crash at start\n\t\t{\n\t\t\t\n\t\t\tcolourWheelCentroid()\n\t\t\tloadedCoords = true // set this condition so that centroid array will not trigger anymore; only need save this once\n\t\t}\n\t\t\n\t});\n\nfunction getBoundingBoxCenter (selection) \n{\n  let bbox = selection\n  //console.log([bbox.x + bbox.width/2, bbox.y + bbox.height/2])\n  return [bbox.x + bbox.width/2, bbox.y + bbox.height/2];\n}\n\nlet pointX\nlet pointY\nlet pitchCentroid\nlet colourWheelPolyCentroid = []\nlet cStore\nlet tempStore\nlet boxCenter\n\nfunction colourWheelCentroid()\n{\n\tfor(let i = 0; i < colourCombo[1].length; i++) //12\n\t{\n\t\t\n\t\tcStore = i+\"colourRing\"\n\t\ttempStore = document.getElementById(cStore).getBBox()\n\t\t\n\t\tboxCenter = getBoundingBoxCenter(tempStore)\n\t\tpitchCentroid = colourCombo[0][i] // get assigning pitch\n\t\tpointX = Math.round(boxCenter[0])\n\t\tpointY = Math.round(boxCenter[1])\n\t\tcolourWheelPolyCentroid.push({pitchCentroid,pointX, pointY})\n\t}\n\t//console.log(\"colourWheelPolyCentroid\")\n\t//console.log(colourWheelPolyCentroid)\n}\n\n\tfunction genChordSwatches(storeCurrChordColours, myTriad) // generate chord swatches using vars of [colour Matched to Pitches] of [selected song chords]\n\t{\n\t\tclearPoints()\n\t\ttempColourPitch = dedupe(storeCurrChordColours)\n\t\t//console.log(\"Removed DUPE: pitches+colours of selected chords\")\n\t\t//console.log(tempColourPitch);\n\t\ttempSelectedChords = myTriad\n\t\t//console.log(\"My Triad\")\n\t\t//console.log(tempSelectedChords)\n\t}\n\n\tfunction closePopUp()\n\t{\n\t\t//visible = false;\n\t}\n\n\tlet xPoint1 =0\n\tlet yPoint1 =0\n\tlet xPoint2 =0\n\tlet yPoint2 =0\n\tlet xPoint3 =0\n\tlet yPoint3 =0\n\tlet viewPoint = false;\n\tlet dura = 600\n\t\n\tfunction clearPoints()\n\t{\n\t\txPoint1 =Math.floor(Math.random()*600)\n\t\tyPoint1 =Math.floor(Math.random()*300)\n\t\txPoint2 =Math.floor(Math.random()*200)\n\t\tyPoint2 =Math.floor(Math.random()*300)\n\t\txPoint3 =Math.floor(Math.random()*600)\n\t\tyPoint3 =Math.floor(Math.random()*600)\n\t\tviewPoint = false\n\t}\n\n\tconst point1x = tweened(0, {\n\t\tduration: dura,\n\t\teasing: cubicOut\n\t});\n\tconst point2x = tweened(0, {\n\t\tduration: dura,\n\t\teasing: cubicOut\n\t});\n\tconst point3x = tweened(0, {\n\t\tduration: dura,\n\t\teasing: cubicOut\n\t});\n\t\n\tconst point1y = tweened(0, {\n\t\tduration: dura,\n\t\teasing: cubicOut\n\t});\n\tconst point2y = tweened(0, {\n\t\tduration: dura,\n\t\teasing: cubicOut\n\t});\n\tconst point3y = tweened(0, {\n\t\tduration: dura,\n\t\teasing: cubicOut\n\t});\n\t$: point1x.set(xPoint1)\n\t$: point1y.set(yPoint1)\n\t$: point2x.set(xPoint2)\n\t$: point2y.set(yPoint2)\n\t$: point3x.set(xPoint3)\n\t$: point3y.set(yPoint3)\n\n\tfunction hoverSwatch(index,id)\n\t{\n\t\tlet narrowID = document.getElementById(id)\n\t\tlet swatchTarget = narrowID.querySelectorAll('svg > g > rect');\n\t\t//console.log(\"HOVER SWATCH: \"+swatchTarget[0].id+\" \"+swatchTarget[1].id+\" \"+swatchTarget[2].id)\n\t\t\n\t\tfor(let a = 0; a < colourWheelPolyCentroid.length; a++)\n\t\t{\n\t\t\tfor(let b = 0; b <swatchTarget.length; b++)\n\t\t\tif(colourWheelPolyCentroid[a].pitchCentroid === swatchTarget[0].id)\n\t\t\t{\n\t\t\t\txPoint1 = colourWheelPolyCentroid[a].pointX\n\t\t\t\tyPoint1 = colourWheelPolyCentroid[a].pointY\n\t\t\t\t///console.log(\"x point1: \"+xPoint1)\n\t\t\t}\n\t\t\tif(colourWheelPolyCentroid[a].pitchCentroid === swatchTarget[1].id)\n\t\t\t{\n\t\t\t\txPoint2 = colourWheelPolyCentroid[a].pointX\n\t\t\t\tyPoint2 = colourWheelPolyCentroid[a].pointY\n\t\t\t\t//console.log(\"x point2: \"+xPoint2)\n\t\t\t}\n\t\t\tif(colourWheelPolyCentroid[a].pitchCentroid === swatchTarget[2].id)\n\t\t\t{\n\t\t\t\txPoint3 = colourWheelPolyCentroid[a].pointX\n\t\t\t\tyPoint3 = colourWheelPolyCentroid[a].pointY\n\t\t\t\t//console.log(\"x point3: \"+xPoint3)\n\t\t\t}\n\t\t}\n\t\tviewPoint = true;\n\t\t//colourWheelPolyCentroid\n\t}\n\nwindow.onload = function()\n{\n\tselectedInventor = \"Louis Bertrand Castel\" // default\n\tartistFilter = \"QUEEN\" // on load, set default\n}\n\nlet myScale = 12\nconst swatchDisplayWidth = 795\nlet calculation\nfunction flexSwatchDisplay()\n{\n\tlet targetSwatchDisplay = document.getElementById(\"swatchContainer\")\n\t // need to be static number.\n\tcalculation = Math.round(swatchDisplayWidth/12 * myScale)\n\n\ttargetSwatchDisplay.style.width = \"\"+calculation+\"px\"\n\t//console.log(targetSwatchDisplay)\n}\nlet miniRectX\nlet miniRectY\nlet rectSize = 15\n\nfunction updateMarkSize()\n{\n\trectSize = rectSize\n}\n\nfunction highlightSelectedChords (highlightTarget)\n{\n\t//console.log(highlightTarget)\n\tlet highlightT = document.getElementsByName(highlightTarget)\n\tfor(let x = 0; x < highlightT.length; x++)\n\t{\n\t\thighlightT[x].style.background =\"rgb(159, 237, 215)\"\n\t}\n\t//console.log(highlightT.length)\n}\nfunction clearHighlight()\n{\n\tlet allHighlight = document.getElementsByClassName(\"wrap-chord-swatch\")\n\tfor(let x = 0; x < allHighlight.length; x++)\n\t{\n\t\tallHighlight[x].style.background=\"\"\n\t}\n}\nfunction toggleTutorial()\n{\n\ttoggleGif = 0\n\tcurrTut = 0\n\tif(help === false)\n\t{\n\t\thelp = true\n\t}\n\telse\n\t{\n\t\thelp = false\n\t}\n}\nlet toggleGif = 0\nlet currTut = 0\nfunction toggleGifBlinder(target)\n{\n\t\t\n\tif(target === currTut)\n\t{\n\t\ttoggleGif = 0\n\t\tcurrTut = 0\n\t}\n\telse\n\t{\n\t\tcurrTut = target\n\t\ttoggleGif=target\n\t}\n\t\n}\nfunction pingTutorialIn()\n{\n\tdocument.getElementById(\"tutBtn\").style.background=\"#026670\";\n\tdocument.getElementById(\"tutBtn\").style.color=\"white\";\n\n\tdocument.getElementById(\"pingSource\").style.color=\"#026670\";\n\tdocument.getElementById(\"pingSource\").style.cursor=\"default\";\n}\nfunction pingTutorialOut()\n{\n\tdocument.getElementById(\"tutBtn\").style.background=\"#EDEAE5\";\n\tdocument.getElementById(\"tutBtn\").style.color=\"rgb(173,170,165)\";\n\n\tdocument.getElementById(\"pingSource\").style.color=\"rgb(173,170,165)\";\n}\n</script>\n<div class=\"container\">\n\t<div class=\"mini-container\">\n\t\t<div class=\"COF-wheel\">\n\t\t<div id=\"help\">\n\t\t<p><button id=\"tutBtn\" on:click={()=> toggleTutorial()}>Tutorial</button></p>\n\n\t{#if help === true}\n\t<div id=\"help-box\" transition:slide=\"{{duration: 300 }}\">\n\t\t<div id=\"help-1\" class=\"helpBoundary\">\n\t\t\t<a href=\"#s\" on:click={()=> toggleGifBlinder(1)}>Feature: Select Key and Select Artist</a>\n\t\t\t{#if toggleGif === 1}\n\t\t\t<p>Choose song to inspect by selecting Artist and the Song Key.</p>\n\t\t\t<div transition:slide=\"{{duration: 300 }}\">\n\t\t\t<img id=\"tut1\" src=\"./img/Tut_1.gif\" alt=\"tut1\"/>\n\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<div id=\"help-2\" class=\"helpBoundary\">\n\t\t\t<a href=\"#s\" on:click={()=> toggleGifBlinder(2)}>Feature: Colour Music Scales</a>\n\t\t\t{#if toggleGif === 2}\n\t\t\t<p>Choose different sets of colours based on existing colour music scales invented.<br></p>\n\t\t\t<p>Hover each triad to see how the colour notes reflect on the scale.</p>\n\t\t\t<div transition:slide=\"{{duration: 300 }}\">\n\t\t\t\t<img id=\"tut2\" src=\"./img/Tut_2.gif\" alt=\"tut2\"/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<div id=\"help-3\" class=\"helpBoundary\">\n\t\t\t<a href=\"#s\" on:click={()=> toggleGifBlinder(3)}>Feature: View Chords and Highlight</a>\n\t\t\t{#if toggleGif === 3}\n\t\t\t<p>Tick the checkbox to show relevant chords.<br></p>\n\t\t\t<p>Click on triads to highlight all of the same kind.</p>\n\t\t\t<div transition:slide=\"{{duration: 300 }}\">\n\t\t\t\t<img id=\"tut3\" src=\"./img/Tut_3.gif\" alt=\"tut3\"/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<div id=\"help-4\" class=\"helpBoundary\">\n\t\t\t<a href=\"#s\" on:click={()=> toggleGifBlinder(4)}>Feature: Change Mark Sizes</a>\n\t\t\t{#if toggleGif === 4}\n\t\t\t<p>Toggle between 3 square sizes</p>\n\t\t\t<div transition:slide=\"{{duration: 300 }}\">\n\t\t\t\t<img id=\"tut4\" src=\"./img/Tut_4.gif\" alt=\"tut4\"/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<div id=\"help-5\" class=\"helpBoundary\">\n\t\t\t<a href=\"#s\" on:click={()=> toggleGifBlinder(5)}>Feature: Number of Columns Displayed</a>\n\t\t\t{#if toggleGif === 5}\n\t\t\t<p>Scale the number of columns the data is displayed by dragging the scale.<br></p>\n\t\t\t<p>Patterns can possibly be discerned easier</p>\n\t\t\t<div transition:slide=\"{{duration: 300 }}\">\n\t\t\t\t<img id=\"tut5\" src=\"./img/Tut_5.gif\" alt=\"tut5\"/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\t{/if}\n\t</div>\n\t\t<p class=\"select-container\">\n\t\t<span class=\"select-descriptor\">Filter by Artist: </span>\n\t\t<select class=\"select-module\" bind:value={artistFilter} on:change=\"{()=> songDetailRefresh()}\">\n            <option value={'THE_BEATLES'}>\n              The Beatles\n            </option>\n            <option value={'QUEEN'}>\n              Queen\n            </option>\n            </select> \n\t\t\t\n\t\t\t</p>\n\t\t\t\n\t\t<Graphic width={580} height={580}>\n\t\t\t{#each polygon as each, i}\n\t\t\t<g class=\"boundary\" \n\t\t\ton:mouseover={ () => handleMouseOver(i) }\n\t\t\ton:mouseout={ () => handleMouseOut(i) }\n\t\t\ton:click={ () => handleClick(i) }\n\t\t\t>\n\t\t\t{#if i <= 11}\n\t\t\t<path class =\"outerRing\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" stroke=\"\" stroke-miterlimit=\"10\" \n\t\t\td={each} id={i} \n\t\t\t/>\n\t\t\t{:else if i <= 23 && i >=12}\n\t\t\t<path class =\"innerRing\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" stroke=\"\" stroke-miterlimit=\"10\" \n\t\t\td={each} id={i} />\n\t\t\t{:else}\n\t\t\t<path class =\"polygon\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" stroke=\"\" stroke-miterlimit=\"10\" \n\t\t\td={each} id={i} />\n\t\t\t{/if}\n\t\t\t\t{#each text1 as eachText1, x}\n\t\t\t\t\t{#if x === i && eachText1 !== \"\"}\n\t\t\t\t\t\t<path class=\"polyTextColor\" fill=\"\" d={eachText1} />\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t\t{#each text2 as eachText2, y}\n\t\t\t\t\t{#if y === i && eachText2 !== \"\"}\n\t\t\t\t\t\t<path class=\"polyTextColor\" fill=\"\" d={eachText2} />\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t\t{#each text3 as eachText3, z}\n\t\t\t\t\t{#if z === i && eachText3 !== \"\"}\n\t\t\t\t\t\t<path class=\"polyTextColor\" fill=\"\" d={eachText3} />\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t\t</g>\n\t\t\t\t\n\t\t\t{/each}\n\t\t</Graphic>\n\t\t</div>\n\t\t<!-- INTRO START-->\n\t\t{#if intro === true}\n\t\t<div class=\"song-detail\">\n\t\t\t<div class=\"introBox\">\n\t\t\t\t<span class=\"description-header\">Compos-In-Colour</span>\n\t\t\t\t\n\t\t\t\t<p>The Compos-In-Colour is a prototype of an experimental approach to visualization of music data specifically, recorded songs. <br>\n\t\t\t\tThe main idea is to explore music data visually through colour space such that the layman may discern patterns without prior musical theory knowledge. <br>\n\t\t\t\tThis tool may also be used casually as a visualization along the lines of 'what is the colour of the song'<br>\n\t\t\t\tExisting tools of music and colours such as the Colour Music Scale, Colour Wheel and the Circle of Fifths, inspired the design of UI components in the prototype. <br>\n\t\t\t\tDo check out the <a id=\"pingSource\" href=\"#\" \n\t\t\t\ton:mouseover={ () => pingTutorialIn() }\n\t\t\t\ton:mouseout={ () => pingTutorialOut() }\n\t\t\t\t>Tutorial</a> located near circle of fifth interface. \n\t\t\t\t</p>\n\t\t\t\t<br>\n\t\t\t\t<span class=\"description-header\">Colour Music Scale</span>\n\t\t\t\t\t<p> Rather than assigning each musical pitch arbitrary colours, why not map these colours to <i>existing</i> colour music scales which have empirical basis? <br>\n\t\t\t\t\t<a target=\"_blank\" href=\"http://rhythmiclight.com/timeline/\">Fred Callopy</a> has compiled these colour music scales over the centuries. The colour music scales used in this\n\t\t\t\t\tprototype are referenced from the compilation. \n\t\t\t\t\t</p>\n\t\t\t\t<br>\n\t\t\t\t<span class=\"description-header\">Data</span>\n\t\t\t\t\t<p> Music data is free for use; sourced from <a target=\"_blank\" href=\"http://isophonics.net/datasets\">isophonics.net</a> \n\t\t\t\t\t</p>\n\t\t\t\t<br>\n\t\t\t\t\t<span class=\"description-header\">Notes</span>\n\t\t\t\t\t<p>-Some of the original data had to be simplified (kept to major and minor triads) due to scope considerations. <br>\n\t\t\t\t\t-Original data had some inconsistencies such as uppercase etc. These were cleaned up. <br>\n\t\t\t\t\t-Not all the data available from isophonics has been transcribed due to scope considerations. Hence, there will be keys that do not have songs <br>\n\t\t\t\t\t-Not all the data available is being utilized in this visualization due to scope considerations. <br>\n\t\t\t\t\t-Due to RGB colour space limitations, colours used in colour music scale are cannot be accurately replicated. <br>\n\t\t\t\t\t- 3 May 2020\n\t\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t{/if}\n\t\t<!-- INTRO END-->\n\t\t<!-- SONG DETAIL START -->\n\t\t{#if showDetail === true && intro === false}\n\t\t<div class=\"song-detail\" transition:fly=\"{{delay: 0, duration: 400, x:-30}}\">\n\t\t\t<div class=\"song-detail-left\">\n\t\t\t\t\t<div class=\"list-header\">\n\t\t\t\t\t\t<span class=\"description-header\">Songs by {artistFilter} </span>\n\t\t\t\t\t\t<span class=\"description-header\">containing <u>{filterPolyDetail.column('KEY')}</u> key</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"list-container\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{#each songtitle as single, i (single)}\n\t\t\t\t\t\t\t<li transition:fly=\"{{delay: 0, duration: 400, x:-30}}\">\n\t\t\t\t\t\t\t\t<a id={i+single} href=\"#\" \n\t\t\t\t\t\t\t\ton:click={()=>handleSongDetails(single, i)}\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t >{single}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{/each}\t\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t<!-- RIGHT OF SONG DETAIL-->\n\t\t{#if error === true}\n\t\t<div class=\"error-msg\" in:fade=\"{{delay:100 , duration: 300}}\">\n\t\t\t<div class=\"bounding-border\">\n\t\t\tOops!  <br><br>\n\t\t\tThereâs no data yet. <br><br>\n\t\t\tPlease make a different selection.\n\t\t\t</div>\n\t\t\t<p>\n\t\t\t\t<img id=\"hoverGhost\" src=\"./img/err_img.png\" alt=\"error\"/>\n\t\t\t\t<img id=\"hoverGhostBoo\" src=\"./img/err_img_hvr.png\" alt=\"error_boo\"/>\n\t\t\t</p>\n\t\t</div>\n\t\t{/if}\n\t\t{#if visible && error === false}\n<div in:fade=\"{{delay: 0, duration: 300}}\"\n class=\"song-detail-right\">\n\t{#if showRightInnerLeft === true}\n\t<div class=\"right-inner-left\" transition:slide=\"{{duration: 300 }}\">\n\t\t<div id=\"song-info\">\n\t\t{#if showSwatch === true}\n\t\t\t<span class=\"description-header\">Details</span>\n\t\t\t<p class=\"p-subheader\">Title: {songDisplay}</p>\n\t\t\t<p class=\"p-subheader\">Album: {albumDisplay}</p>\n\t\t\t<p class=\"p-subheader\">Chords used: {chordDisplay}</p>\n\t\t{/if}\n\t\t</div>\n\t\t\n\t\t<div id=\"colourMusicScale\">\n\t\tFilter Colour Scale:\n\t\t\t<select class=\"select-module\" bind:value={selectedInventor} on:change=\"{()=> genColWheel()}\">\n\t\n            <option value={'Louis Bertrand Castel'}>\n              Louis Bertrand Castel\n            </option>\n            <option value={'D. D.Jameson'}>\n              D. D.Jameson\n            </option>\n\t\t\t<option value={'Theodor Seeman'}>\n\t\t\t\tTheodor Seeman\n\t\t\t</option>\n\t\t\t<option value={'A. Wallace Rimington'}>\n\t\t\t\tA. Wallace Rimington\n\t\t\t</option>\n\t\t\t<option value={'Bainbridge Bishop'}>\n\t\t\t\tBainbridge Bishop\n\t\t\t</option>\n\t\t\t<option value={'H. von Helmholtz'}>\n\t\t\t\tH. von Helmholtz\n\t\t\t</option>\n\t\t\t<option value={'Alexander Scriabin'}>\n\t\t\t\tAlexander Scriabin\n\t\t\t</option>\n\t\t\t<option value={'Adrian Bernard Klein'}>\n\t\t\t\tAdrian Bernard Klein\n\t\t\t</option>\n\t\t\t<option value={'I. J. Belmont'}>\n\t\t\t\tI. J. Belmont\n\t\t\t</option>\n\t\t\t<option value={'Steve Zieverink'}>\n\t\t\t\tSteve Zieverink\n\t\t\t</option>\n            </select>\n\t\t<Graphic width={380} height={380} viewBox=\"0 0 600 600\" preserveAspectRatio=\"xMidYMid\">\n\t\t{#each filteredScale as eachCol, f}\t\n\t\t\t\t{#each colourCombo[1] as each, i}\n\t\t\t\t<g class=\"boundary\">\n\t\t\t\t{#if i !== \"\" && i === f }\n\t\t\t\t<path class =\"colourRing\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" fill ={\"rgb(\"+eachCol+\")\"} stroke=\"\" stroke-miterlimit=\"10\" \n\t\t\t\td={each} id={i+\"colourRing\"} name = {colourCombo[0][i]}\n\t\t\t\t/>\n\t\t\t\t{/if}\n\t\t\t\t\t{#each coltext1 as eachText1, x}\n\t\t\t\t\t\t{#if x === i && eachText1 !== \"\"}\n\t\t\t\t\t\t\t<path class=\"polyTextColor\" fill=\"\" d={eachText1} />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/each}\n\t\t\t\t\t{#each coltext2 as eachText2, y}\n\t\t\t\t\t\t{#if y === i && eachText2 !== \"\"}\n\t\t\t\t\t\t\t<path class=\"polyTextColor\" fill=\"\" d={eachText2} />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/each}\n\t\t\t\t\t</g>\n\t\t\t\t{/each}\n\t\t{/each}\n\t\t\t\t{#if viewPoint === true}\n\t\t\t\t\t<Point x={$point1x} y={$point1y} radius={7} fill={\"rgb(255,255,255)\"} ></Point>\n\t\t\t\t\t<Point x={$point2x} y={$point2y} radius={7} fill={\"rgb(255,255,255)\"} ></Point>\n\t\t\t\t\t<Point x={$point3x} y={$point3y} radius={7} fill={\"rgb(255,255,255)\"} ></Point>\n\t\t\t\t\t<Line x={[$point1x,$point2x]} y={[$point1y,$point2y]} stroke={\"rgb(255,255,255)\"}></Line>\n\t\t\t\t\t<Line x={[$point2x,$point3x]} y={[$point2y,$point3y]} stroke={\"rgb(255,255,255)\"}></Line>\n\t\t\t\t\t<Line x={[$point3x,$point1x]} y={[$point3y,$point1y]} stroke={\"rgb(255,255,255)\"}></Line>\n\t\t\t\t{/if}\n\t\t\t</Graphic>\n\t\t</div>\n\t</div>\n\t{/if}\n\t<div id=\"right-inner-right\">\t\n\t<div id=\"blinder\">\n\t<label for=\"toggleShowHideCheck\">&#x25D3;</label>\n\t\t<input id=\"toggleShowHideCheck\" type=\"checkbox\" class=\"check-box\" bind:checked={showRightInnerLeft}>\n\t\t<hr>\n\t</div>\n\t<div id=\"scaleBar\">\n\t<p></p>\n\tView Chords :<input type=\"checkbox\" name=\"check-box\" bind:checked={showOverheadChords}>\n\t<button on:click={()=> clearHighlight()}>Clear Highlight</button>\n\t\t<div class= \"radio-div\">Mark Size :\n\t\t\t<input id=\"radioS\" type=\"radio\" name=\"mark-size\" bind:group={rectSize} value={12}>\n\t\t\t<label class=\"radio-label\" for=\"radioS\">S</label>\n\t\t\t<input id=\"radioM\" type=\"radio\" name=\"mark-size\" bind:group={rectSize} value={15}>\n\t\t\t<label class=\"radio-label\" for=\"radioM\">M</label>\n\t\t\t<input id=\"radioL\" type=\"radio\" name=\"mark-size\" bind:group={rectSize} value={20}>\n\t\t\t<label class=\"radio-label\" for=\"radioL\">L</label>\n\t\t</div>\n\t<p>Group by <u><b> {myScale} </b></u> columns</p>\n  \t\t<input type=\"range\" min=\"2\" max=\"12\" bind:value={myScale} on:change={()=> flexSwatchDisplay()} class=\"slider\">\n\t</div>\n\t{#if showSwatch === true}\n\t<div id=\"swatchContainer\">\n\t{#each tempSelectedChords as outer, i}\n\t<div class=\"wrap-chord-swatch\" name={\"select\"+chord[i]}>\n\t\t{#if showOverheadChords === true}\n\t\t\t<span class=\"span-chordHeader\">{chord[i]}</span>\n\t\t{/if}\n\t<a href=\"#s\" id={i+\"eachSwatch\"} class=\"eachSwatch\" \n\ton:mouseover={ () => hoverSwatch(i,i+\"eachSwatch\")}\n\ton:click={ () => highlightSelectedChords(\"select\"+chord[i])}\n\t>\n\t<svg width={60} height={20}>\n\t\t\t<g class=\"swatches\">\n\t\t\t{#each tempSelectedChords[i] as inner, x}\n\t\t\t\t{#each tempColourPitch as iterate, y}\n\t\t\t\t\t\t\t{#if iterate.pitch === inner[0]}\n\t\t\t\t\t\t\t\t{#if showSwatch === true}\n\t\t\t\t\t\t\t\t\t<rect name={\"set\"+i} width = {rectSize} height = {rectSize} x={10*2*x} y={0} id={inner[0]} fill={\"rgb(\"+iterate.colour+\")\"}\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tout:fade=\"{{delay: 0, duration: 100}}\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/if}\t\n\t\t\t\t\t{/each}\n\t\t\t\t{/each}\n\t\t\t\t\n\t\t\t</g>\n\t\t\t</svg>\n\t\t\t</a>\n\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t\t{/if}\n\t</div>\n</div>\n{/if}\n\t</div>\n\t{/if}\t\n\t</div>\n</div>\n\t<footer>\n\t\t<span id=\"home\" on:click={()=>{intro = true}}>Compos-In-Colour</span>\n\t\t<br>\n\t\t<p>created by <a href=\"https://github.com/5v1n0\" target=\"_blank\">5v1n0</a></p>\n\t</footer>","import App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\tname: 'world'\n\t}\n});\n\nexport default app;"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","get_slot_context","definition","ctx","$$scope","slice","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","loop","promise","Promise","fulfill","add","[object Object]","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","getAttribute","setAttribute","set_svg_attributes","attributes","key","set_data","set_input_value","input","select_option","select","option","__value","selected","select_value","selected_option","querySelector","active_docs","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","p","t","rule","str","hash","charCodeAt","doc","ownerDocument","stylesheet","__svelte_stylesheet","head","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","style","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","deleteRule","clear","set_current_component","get_current_component","Error","onMount","on_mount","afterUpdate","after_update","setContext","context","set","getContext","get","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","flush","update","pop","has","fragment","before_update","dirty","wait","then","dispatch","direction","kind","dispatchEvent","type","detail","e","createEvent","initCustomEvent","custom_event","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_in_transition","params","animation_name","config","running","cleanup","go","easing","tick","css","start_time","end_time","abort","started","create_bidirectional_transition","intro","running_program","pending_program","clear_animation","init","program","Math","abs","start","end","group","outro_and_destroy_block","lookup","get_spread_update","levels","updates","to_null_out","accounted_for","n","undefined","create_component","mount_component","m","new_on_destroy","map","destroy_component","make_dirty","fill","instance","create_fragment","not_equal","props","parent_component","prop_values","bound","Map","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","SvelteComponent","this","$destroy","index","splice","cubicOut","fade","linear","getComputedStyle","opacity","fly","y","target_opacity","transform","od","u","slide","height","parseFloat","padding_top","paddingTop","padding_bottom","paddingBottom","margin_top","marginTop","margin_bottom","marginBottom","border_top_width","borderTopWidth","border_bottom_width","borderBottomWidth","min","subscriber_queue","writable","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","is_date","obj","prototype","toString","call","get_interpolator","isArray","arr","bi","getTime","delta","keys","interpolators","result","tweened","defaults","target_value","opts","previous_task","interpolate","elapsed","CircleOfFifths","OBJECT_ID","TYPE","KEY","POLY_PATH","TEXT_PATH_1","TEXT_PATH_2","TEXT_PATH_3","CircleOfColours","ChordScale","CHORD","ROOT","THIRD","FIFTH","NaN","compare","ascending","left","lo","hi","mid","right","bisectRight","bisector","e10","sqrt","e5","e2","tickIncrement","count","max","power","floor","log","LN10","error","pow","initRange","domain","range","arguments","constructor","factory","extend","parent","Color","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","trim","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","hasOwnProperty","g","rgbConvert","rgb_formatHex","hex","rgb_formatRgb","isNaN","round","h","Hsl","hslConvert","hsl2rgb","m1","m2","gamma","nogamma","exponential","constant","define","copy","channels","displayable","formatHsl","brighter","darker","rgbGamma","colorRgb","genericArray","nb","na","setTime","reA","reB","source","am","bm","bs","lastIndex","q","number","one","zero","string","date","ArrayBuffer","isView","DataView","valueOf","object","numberArray","unit","normalize","bimap","d0","d1","r0","r1","polymap","j","reverse","bisect","clamp","unknown","transformer","untransform","piecewise","output","interpolateValue","rescale","scale","invert","interpolateNumber","_","rangeRound","interpolateRound","continuous","toExponential","coefficient","formatDecimal","prefixExponent","re","formatSpecifier","specifier","match","FormatSpecifier","align","sign","symbol","width","comma","precision","exponent","%","toFixed","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","replace","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","i0","formatTrim","Infinity","padding","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","ceil","tickFormat","nice","apply","formatLocale","GraphicContext","renderer","_rendererOptions","includes","JSON","stringify","validateRendererOptions","parsePadding","_padding","top","bottom","invalidPaddingError","applyPadding","offsetMin","offsetMax","console","warn","ensurePaddingSmallerThanRange","applyFlip","flip","applyZoom","translate","validateZoomFactor","createScale","newScale","lower","upper","flipped","isPointScale","isBandScale","createInvertMethod","scaleLinear","createPolarTransformation","rangeX","rangeY","finalRangeX","finalRangeY","toTheta","PI","toRadius","fitX","fitY","coords","theta","radius","sin","cos","polarToCartesian","smallCoords","quadrant","getQuadrant","atan","cartesianToPolar","parseNeedsScaling","needsScaling","xNeedsScaling","yNeedsScaling","Boolean","createSectionContext","sectionData","ranges","coordinates","x1","x2","y1","y2","getRanges","finalRanges","sectionContext","flipX","flipY","zoomIdentity","kx","ky","getFinalRanges","scaleX","scaleY","scales","finalScales","bbox","getBbox","paddedBbox","getPaddedBbox","constructSectionContext","createScales","finalScaleX","finalScaleY","createFinalScales","transformation","getTotalTransformation","inverseTotalTransformation","getScaleTransformation","postScaleTransformation","scaleTransformation","point","inverseScaleTransformation","attachTransformations","minX","maxX","minY","maxY","defineProperty","exports","detectHover","matchMedia","hover","matches","none","anyHover","anyNone","detectPointer","fine","coarse","anyFine","anyCoarse","detectTouchEvents","hasSupport","browserSupportsApi","TouchEvent","detectPassiveEvents","passive","_detectHover2","_interopRequireDefault","_detectHover","_detectPointer2","_detectPointer","_detectTouchEvents2","_detectTouchEvents","_detectPassiveEvents2","_detectPassiveEvents","__esModule","default","detectIt","state","updateOnlyOwnProperties","passiveEvents","hasTouch","deviceType","every","navigator","userAgent","hasMouse","primaryInput","version","EventTracker","eventManager","eventName","nativeEventName","useWindow","preventDefault","_eventManager","_eventName","_nativeEventName","_useWindow","_preventDefault","_numberOfActiveListeners","_callbacks","listenerId","_eventManagerHasBeenMounted","_attachNativeListenerIfNecessary","_removeNativeListenerIfNecessary","_mounted","_handleEvent","bind","_domNode","nativeEvent","screenCoordinates","_getScreenCoordinates","BaseEventManager","EXPOSED_EVENTS","managerType","_svgPoint","_trackers","_BROWSER_TYPE","_managerType","domNode","createSVGPoint","pointerEnabled","msPointerEnabled","setNativeEventName","_getNativeMouseEventName","_getNativeTouchEventName","attachAllListeners","charAt","MouseEventManager","super","exposedEventName","BROWSER_TYPE","sliceOffMouse","lastPart","capitalize","clientX","clientY","matrixTransform","getScreenCTM","inverse","WINDOW_EVENTS","PREVENT_DEFAULT","TouchEventManager","sliceOffTouch","touches","getTouches","_getScreenCoordinatesSingle","_getScreenCoordinatesMulti","touch","touchesInScreenCoordinates","EventManager","_mouseEventManager","_touchEventManager","_forEachManager","manager","addRootNode","attachEventListeners","BaseInteractionManager","_id","_section","_markInteractionInterface","_sectionInteractionInterface","id","BaseInteractionInterface","interactionManager","InteractionHandlers","_interactionManager","_handlers","handlerName","interactionName","interactionNameToHandlerName","indexPoint","markData","pointAttributes","item","calculateBboxPoint","markType","markId","indexPointLayer","layerAttributes","keyArray","layerId","items","getPointAttributes","pixelGeometry","pixelGeometryObject","radiusObject","Adder","reset","temp","adder","bv","av","tau","streamGeometry","geometry","stream","streamGeometryType","streamObjectType","Feature","FeatureCollection","features","Sphere","sphere","Point","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","lineStart","lineEnd","polygonStart","polygonEnd","x00","y00","x0","y0","areaSum","areaRingSum","areaStream","areaRingStart","areaRingEnd","area","areaPointFirst","areaPoint","boundsStream","bounds","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroid","centroidPointFirstLine","centroidPointLine","dx","dy","z","centroidPointFirstRing","centroidPointRing","PathContext","_context","_radius","pointRadius","_line","_point","closePath","moveTo","lineTo","arc","lengthRing","lengthSum","lengthStream","lengthPointFirst","lengthPoint","PathString","_string","circle","projection","projectionStream","contextStream","path","pathArea","measure","pathMeasure","pathBounds","pathCentroid","isInvalid","isDefined","isUndefined","calculateBboxGeometry","_circle","geoPath","isLinearRing","ring","isPolygon","isMultiPolygon","polygonArea","polygon","getRingArea","getPolygonArea","multiPolygon","totalArea","getMultiPolygonArea","total","addX","addY","subX","subY","getSignedRingArea","pointDistance","point1","point2","linearRingLength","linearRing","totalLength","calculateCentroid","calculateLinearRingCentroid","polygonCentroid","calculateMultiPolygonCentroid","isLineString","isMultiLineString","multiLineString","lineString","lineStringCentroid","calculateMultiLineStringCentroid","nPts","off","p1","p2","twicearea","pointIntersectsLineSegment","lineSegment","lineWidth","closestPoint","C","D","dot","lengthSquared","xx","yy","param","closestPointOnLineSegment","distanceClosestPointOnLineSegment","SPLITTER","ahi","alo","bhi","blo","ne","nf","scalarScalar","eptr","fptr","ei","ea","fi","fa","_x","_bv","q0","q1","br","ar","ts","twoProduct","pq","twoSum","cofactor","generateSum","expr","determinant","orientation","pos","neg","matrix","args","posExpr","negExpr","funcName","code","Function","proc","robustSum","robustScale","robustSubtract","orientation3Exact","orientation4Exact","CACHED","det","tol","adx","bdx","cdx","ady","bdy","cdy","adz","bdz","cdz","bdxcdy","cdxbdy","cdxady","adxcdy","adxbdy","bdxady","slowOrient","procArgs","module","concat","generateOrientationProc","vs","inside","lim","yi","yj","orient","yk","px","pointInPolygonCoordinates","pointInPolygon","polygonCoordinates","pointInMultiPolygon","pointInRing","robustPointInPolygon","invalidInputError","getInput","ensureSameLength","roundPoint","decimals","zeroes","transformLinearRing","settings","simplify","transformedLinearRing","transformLinearRingUnsimplified","simplificationTreshold","lastPoint","transformLinearRingSimplified","transformSetOfLinearRings","linearRings","transformedLinearRings","transformXYArrays","transformXYArraysUnsimplified","transformXYArraysSimplified","transformFunctions","transformPoint","transformMultiPoint","multiPoint","transformLineString","transformMultiLineString","transformPolygon","transformMultiPolygon","polygons","transformedPolygons","transformGeometry","_transformation","functionName","getNumberOfInterpolatedPoints","to","toPolar","interpolationTreshold","fromScaledDown","toScaledDown","totalScaleFactor","totalScaleFactorX","totalScaleFactorY","getTotalScaleFactor","straightInYDimension","numberOfPointsNeeded","interval","aSq","bSq","asinh","getPolarLength","pointsSorted","getFunctionalForm","interpolatePoints","interpolator","interpolateLinearRing","transformations","interpolatedLinearRing","fromScaled","toScaled","interpolateLinearRingUnsimplified","interpolateSetOfLinearRings","interpolatedLinearRings","interpolateXYArrays","interpolateXYArraysUnsimplified","interpolateFunctions","interpolateLineString","interpolateMultiLineString","interpolatePolygon","interpolateMultiPolygon","polarGeometry","_transformations","_postScaleTransformation","earcut","holeIndices","dim","invSize","hasHoles","outerLen","outerNode","linkedList","triangles","prev","len","list","queue","steiner","getLeftmost","sort","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","equals","removeNode","again","ear","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","maxZ","intersects","locallyInside","isValidDiagonal","splitPolygon","hole","hx","hy","qx","mx","my","tanMin","sectorContainsSector","findHoleBridge","leftmost","ax","ay","bx","by","cx","cy","py","intersectsPolygon","middleInside","q2","o1","o2","o3","o4","onSegment","num","a2","Node","b2","an","bp","sum","feature","topology","properties","arcs","points","array","line","stitchedArcs","fragmentByStart","fragmentByEnd","fragments","emptyIndex","p0","dp","ends","fg","unshift","gf","mergeArcs","objects","polygonsByArc","groups","extract","planarRingArea","neighbors","stitch","ki","getOrderDescending","indexArray","sortIntoOrder","order","getInsertionIndexDescending","arraySortedDescending","removeClosingPoint","closeRing","firstPoint","insertPointsLinearRing","inputLinearRing","numberOfAdditionalPoints","cloneLinearRing","insertPoints","insertPointsLineString","inputLineString","edgeLengths","edges","edge","getEdge","getEdgeLengths","orderedEdgeIds","longestEdgeId","edgeLength","newEdges","splitEdge","newEdgesLength","shift","insertOrderedId","clonedLinearRing","pointInBetween","orderedIds","valueIndex","newValue","idsWereInserted","currentArrayValue","isPolygonOrMultiPolygon","isLineStringOrMultiLineString","matchLinearRings","fromRings","toRings","fromAreas","toAreas","fromAreasOrderDescending","toAreasOrderDescending","pairs","fromIndex","toIndex","fromOrder","bestOrder","polygonToPolygon","fromOuterRing","toOuterRing","fromOuterRingPrepared","toOuterRingPrepared","prepareLinearRings","neitherHasHoles","outerRingInterpolator","createInterpolatorNoHoles","holeInterpolators","holeInterpolator","createInterpolatorWithHoles","numberOfMatchableHoles","fromHoles","getHoles","toHoles","fromHolesSorted","fromHole","toHole","fromHolePrepared","toHolePrepared","createMatchableHoleInterpolators","differenceBetweenNumberOfHoles","createHoleImploders","createHoleExploders","createHoleInterpolators","fromRing","toRing","lengthDifference","toLinearRing","fromLinearRing","fromLength","bestOffset","sumOfSquares","spliced","offset","distance","rotatePointsLinearRing","numberOfHoles","holes","smallRectangleAroundCentroid","makeSmallRectangleAroundPoint","preparedPolygon","preparedImplodePoint","createTriangleIndexArcs","triangleIndices","createArcSlug","getPoint","vertices","createTopoPolygon","getTriangleArea","triangleIndexArcs","deviation","trianglesArea","flatten","dimensions","holeIndex","collapseTopology","numberOfPieces","triangleGeometries","mergeSmallestFeature","RangeError","smallest","neighborIndex","geoms","sourceArcs","neighbor","targetArcs","some","findNeighbor","merged","cutTriangleInTwo","triangle","pointBetweenAB","createTriangleGeometry","cutPolygon","flattenedPolygon","numberOfTriangles","getNumberOfTriangles","arcIndices","slug","pointIndex","createTopology","areas","areasSorted","geometriesSorted","cutTriangles","areaCutTriangles","areaCutTriangle","cutTriangle","insertionIndex","sliceUpTriangles","outerRing","createGeometries","cutPolygons","numberOfDesiredAdditionalPolygons","wrongNumberOfPolygonsError","numberOfCutsPerPolygon","assignCuts","resultingPolygons","numberOfCuts","numberOfDesiredPolygons","polygonAreas","splitMultiPolygon","createInterpolatorPolygons","fromPolygons","toPolygons","polygonInterpolators","fromPolygon","toPolygon","inputGeometries","inputGeometry","combineIntoMultiPolygon","polygonInterpolator","multiPolygonToPolygon","numberOfFromPolygons","lineStringtoLineString","preparedFromCoordinates","preparedToCoordinates","prepareCoordinates","coordinateInterpolator","createInterpolator","fromCoordinates","toCoordinates","normalTotalSquareDistance","getTotalSquaredDistancePositions","fromReversed","reversedTotalSquareDistance","reverseIfBetterMatching","totalSquaredDistance","movePointAlongLine","unitVector","movePoint","magnitude","getUnitVector","multiLineStringToLineString","numberOfFromLineStrings","cutLineString","createMultiLineStringInterpolator","createLineStringInterpolators","numberOfLineStrings","multiLineStringCoordinates","desiredSegmentSize","lastPointIndex","currentSegment","elapsedDistanceSinceLastCut","distanceAB","distanceIncludingCurrentSegment","cutCoordinates","calculateCutCoordinates","lastCut","pointsEqual","cuts","fromLineString","toLineString","preparedFromLineString","preparedToLineString","lineStringInterpolators","lineStringInterpolator","matchLineStrings","inputLengths","targetLengths","inputLengthOrderDescending","targetLengthOrderDescending","inputIndex","targetIndex","inputOrder","getInputOrder","splitLineStrings","lineStrings","numberOfDesiredLineStrings","numberOfCutsPerLineString","lengths","getLengths","resultingLineStrings","numberOfDesiredPieces","transshape","bothPolygons","bothLines","ensureValidInput","reverseInterpolator","polygonToMultiPolygon","multiPolygonToMultiPolygon","lineStringToMultiLineString","fromLineStrings","toLineStrings","multiLineStringToMultiLineString","transitionGeometry","fromGeometry","toGeometry","pointTransition","polygonTypes","polygonTransition","lineStringTypes","lineStringTransition","getRectangleAttributes","screenGeometry","screenGeometryObject","getPolygonAttributes","indexLineString","lineStringCoords","lineAttributes","lineStringIndex","indexableSegments","createSegmentItem","indexMultiLineString","segment","segmentGeometry","createItemFromBbox","strokeWidth","halfStrokeWidth","newBbox","takeIntoAccountStrokeWidth","segmentIndex","createLineAttributes","strokeWidthObject","modifyForLayer","segments","segmentItem","getAreaAttributes","getSymbolAttributes","markIndexing","Rectangle","rectangleAttributes","polygonAttributes","Line","Label","Area","areaAttributes","Symbol","symbolAttributes","layerIndexing","MarkInteractionInterface","_indexableMarks","_indexableLayers","indexableMark","indexingFunction","layerType","layerData","indexableLayer","_getHandler","addMarkInteraction","hasMark","removeMarkInteraction","addLayerInteraction","hasLayer","removeLayerInteraction","SectionInteractionInterface","addInteraction","hasInteraction","removeInteraction","BaseInteractionHandler","_interactionName","getId","events","eventTracker","addListener","removeListener","exp","_maxEntries","_minEntries","leaf","all","_all","search","toBBox","collides","load","_build","_splitRoot","_insert","remove","_condense","compareMinX","compareMinY","toJSON","fromJSON","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","v","M","_allDistMargin","pointCollision","SpatialIndex","interactionHandler","getMark","getLayer","_rbush","RBush","_interactionHandler","_getMark","_getLayer","layer","mark","multipleSegments","mouseCoordinates","searchArea","searchAreaFromCoordinates","indexQueryResults","_getHits","boundingBox","hits","indexQueryResult","collisionTest","collisionTests","indexableItem","MarkInteractionHandler","_spatialIndex","marks","_numberOfInteractions","_markCallbacks","_layerCallbacks","_addEventListenerIfNecessary","indexMark","_removeEventListenerIfNecessary","unindexMark","indexLayer","unindexLayer","_addEventListener","_removeEventListener","createMarkEvent","eventType","eventOptions","hit","hitBbox","extractBbox","hitSource","createLayerEvent","createSectionEvent","nativeType","INTERESTING_NATIVE_KEYS","createSelectMarkEvent","createSelectLayerEvent","getLocalCoordinates","section","clampedX","clampedY","localX","localY","coordinatesAreInsideSection","hitIsMark","hitIsInLayer","getHitId","queryMouseCoordinates","localCoordinates","clickEvent","_previousMouseoverIds","_currentMouseoverIds","hitId","_fireCallback","mouseoverEvent","_previousMouseoverHits","_currentMouseoverHits","mouseoutEvent","mousedownEvent","mouseupEvent","_currentHits","_handleMousedown","_handleMousemove","_handleMouseup","dragType","mousedragEvent","SectionInteractionHandler","_callback","scrollLineHeight","stopPropagation","wheelEvent","wheelDelta","deltaY","iframe","body","idoc","contentWindow","open","write","close","firstElementChild","offsetHeight","getScrollLineHeight","deltaMode","getDelta","_mouseCurrentlyOverSection","mousemoveEvent","MouseInteractionManager","MarkInteractionHandlers","SectionInteractionHandlers","numberOfTouches","touchdownEvent","touchupEvent","_previousHits","_handleTouchstart","_handleTouchmove","touchoverEvent","_handleTouchend","touchoutEvent","touchdragEvent","allCoordinatesAreInsideSection","screenCoordinatesArray","getDistance","coords1","coords2","touchmoveEvent","_fingerCurrentlyOverSection","_previousTouchDistance","sectionHeight","center","getCenter","touchDistance","relativeTouchDelta","pinchEvent","screenCenter","localCenter","TouchInteractionManager","bboxPoint","getLineAttributes","SelectManager","_selectableMarks","_selectableLayers","_previousSelection","_currentSelection","_selectPolygon","rectangle","queryBoundingBox","rectangleToRBushBbox","_fireSelectCallback","_fireDeselectCallback","startCoordinates","parseCoordinates","lastThreePointsPolygon","_getLastThreePointsPolygon","bboxToRBushBbox","_delta","getSelectPolygon","selectEvent","onSelect","deselectEvent","onDeselect","is2dArray","isXYObject","InteractionManager","_mouseInteractionManager","_touchInteractionManager","_selectManager","setId","linkEventManager","mouse","loadSection","slot_ctx","lets","idCounter","graphicId","viewBox","preserveAspectRatio","blockReindexing","backgroundColor","paddingColor","graphicContext","GraphicContext.init","SectionContext.init","eventManagerContext","EventManagerContext.init","interactionManagerContext","InteractionManagerContext.init","rootNode","EventManagerContext.update","InteractionManagerContext.update","numberWidth","numberHeight","originalViewBox","originalViewBoxArray","GraphicContext.update","SectionContext.update","sectionId","$interactionManagerContext","$sectionContext","clipPropsPadding","getClipPropsPadding","clipPropsNoPadding","getClipPropsNoPadding","keyProp","createPixelGeometryFromGeometry","renderSettings","geometryNeedsScaling","ensureValidGeometry","interpolationNecessary","createPixelGeometryObjectFromGeometry","getKeyArray","ensureValidCombination","onlyOne","invalidCoordinateValueError","wereSpecified","scaleCoordinate","coordinateName","scaledCoordinate","parentScale","throwErrorIfInvalidScaledCoordinate","createScaledGeometry","required","stroke","fillOpacity","strokeOpacity","fontFamily","fontSize","fontWeight","rotation","anchorPoint","shape","independentAxis","aesthetics","validateAesthetics","pointAesthetics","rectangleAesthetics","polygonAesthetics","lineAesthetics","labelAesthetics","symbolAesthetics","areaAesthetics","passedAesthetics","allowedAesthetics","aestheticName","aestheticValue","aestheticRequirements","aestheticNotAllowedError","aestheticRequiredError","ensureValidGeometryProps","getInputType","propNeedsScaling","prop","createPixelGeometry","geometryProps","inputType","createPixelGeometryFromXYArrays","geometryType","validateXYArrays","rendervousInput","createRendervousInput","createPixelGeometryObjectFromXYArrays","cross","cross-sharp","diamond","triangle-up","triangle-down","triangle-right","triangle-left","star4","star5","star","star6","star8","pentagon","hexagon","heptagon","septagon","octagon","nonagon","decagon","representPointAsPolygon","circumference","steps","createSymbolGeometry","pointGeometry","createPoint","halfSize","createSquareGeometry","createSquare","geometryAlias","createSymbolFromGeometry","validateProps","normalized","coordinateProps","definedTypes","definedProps","entries","reduce","acc","definedKeys","arrayLength","values","val","idx","augmentProps","indAx","indKey","indVal","depKey1","depVal1","depKey2","depVal2","depVal1Map","singleton","depVal2Map","scaleMap","scaleCoordinates","scaled","bottomPoints","topPoints","origin","createPixelGeometryObject","validateXYProps","xScaled","yScaled","xArray","yArray","recycle","applyRecyclingIfNecessary","totalTransformation","geometryObject","transformXYArraysIntoGeometryObject","createPixelGeometryObjectFromCoordinates","validateGeometryPropLayer","geometryArray","transformGeometryArrayIntoGeometryObject","coordinateNames","coordMap","getMissingCoordinateFromContext","invalidCoordinateError","_scaleCoordinates","coordinateValues","coordinatesThatNeedScaling","coordinatesThatArePrimitive","scaledCoordinates","coordinateValue","startsWith","generateArrayOfLength","createPropGetter","propObject","validatePropArrayLength","createPropObject","markPixelGeometryFuncs","Proxy","createPixelGeometryPoint","validateTypes","extracted","createPixelGeometryObjectPoint","whichCoordinatesNeedScaling","nonMissingCoordinates","getCoordinateValues","getMissingCoordinatesFromContext","atLeastOneArray","getNRectangles","whichCoordinatesArePrimitive","scaledGeometryArray","createScaledGeometryArray","pointGeometryObject","shapeGetter","sizeGetter","symbolGeometryObject","createSymbolGeometryObject","allowedProps","numAreas","augmentedAreas","indKey1","indVal1","indKey2","indVal2","indValMap","array of arrays","augmentAreas","normalizedAreas","numAreasAll","validateAreas","isSingleton","isNestedArray","xs","normalizeAreas","areaIndex","createOuterRing","lineCoordinates","coordinatesBottom","coordinatesTop","bottomPoint","topPoint","getCornerPointsStart","getCornerPointsEnd","getCornerPointsIndex","first","ringIsNotClosed","getNextSegment","getParallelPoints","getPreviousSegment","previousSegment","nextSegment","previousUnitVector","nextUnitVector","previousCornerPerpendicularPoints","nextCornerPerpendicularPoints","findIntersection","normalVector","vector","vector1","vector2","lambda1","v1","v2","deltaX","v1x","v2x","v1y","v2y","findLambda","markRepresentAsPolygonFuncs","createTransitionable","transitionOptions","createOptionsFromDuration","aestheticTransition","createOptionsFromOptions","transitionsEqual","numberOfKeys","aesthetic","aestheticA","aestheticB","aestheticTransitionObjectsEqual","transitionObjectsEqual","arg","parseRenderSettings","geoPathGenerator","textAnchorPoint","textAnchor","dominantBaseline","generatePath","initPhase","initDone","transition","onClick","onMousedown","onMouseup","onMouseover","onMouseout","onMousedrag","onTouchdown","onTouchup","onTouchover","onTouchout","onTouchdrag","_asPolygon","positioningAesthetics","representAsPolygon","asPolygon","updatePixelGeometry","updateScreenGeometry","tr_screenGeometry","tr_radius","tr_fill","tr_stroke","tr_strokeWidth","tr_fillOpacity","tr_strokeOpacity","tr_opacity","tr_fontSize","tr_fontWeight","tr_rotation","previousTransition","rotateTransform","$tr_rotation","$tr_screenGeometry","parsedTextAnchorPoint","pixelGeometryRecalculationNecessary","screenGeometryRecalculationNecessary","updateInteractionManagerIfNecessary","removeMarkFromSpatialIndexIfNecessary","isInteractiveMouse","markInterface","loadMark","createDataNecessaryForIndexing","isInteractiveTouch","selectManager","markIsLoaded","removeMark","removeMarkFromSelectIfNecessary","isSelectable","markMouseInterface","removeAllMarkInteractions","markTouchInterface","geometryTypes","createDataNecessaryForIndexingMark","$tr_radius","$tr_fill","$tr_stroke","$tr_strokeWidth","$tr_fillOpacity","$tr_strokeOpacity","$tr_opacity","$tr_fontSize","$tr_fontWeight","onDestroy","any","renderPolygon","renderCircle","renderLine","renderLabel","_a","Archtype","ProxyType","hasSymbol","hasMap","hasSet","NOTHING","DRAFTABLE","DRAFT_STATE","iteratorSymbol","iterator","extendStatics","setPrototypeOf","__proto__","__extends","__","isDraft","isDraftable","proto","getPrototypeOf","isPlainObject","isMap","isSet","ownKeys","Reflect","getOwnPropertySymbols","getOwnPropertyNames","each","iter","getArchtype","entry","die","ES5Object","ProxyObject","ES5Array","ProxyArray","is","latest","base","shallowCopy","invokeGetters","clone","desc","getOwnPropertyDescriptor","enumerable","configurable","freeze","deep","isFrozen","dontMutateFrozenCollections","ImmerScope","immer","drafts","canAutoFreeze","usePatches","patchListener","patches","inversePatches","revoke","leave","current","enter","scope","draft","revoked","processResult","baseDraft","isReplaced","willFinalize","modified","finalize","maybeFreeze","op","finalizeTree","finalized","onDelete","useProxies","assigned","exists","copy_1","onCopy","autoFreeze","basePath","assignedValue","origValue","generatePatchesFromAssigned","_b","replaceCount","generateArrayPatches","generateSetPatches","generatePatches","root","rootPath","finalizeProperty","rootState","parentValue","childValue","isDraftProp","isSetMember","propOrOldValue","grandChild","onAssign","objectTraps","peek","createProxy","baseValue","prepareCopy","markChanged","deleteProperty","owner","arrayTraps","willFinalizeES5","finalizing","markChangesSweep","markChangesRecursively","markChangedES5","hasArrayChanges","createES5Proxy","clonePotentialDraft","descriptors","assertUnrevoked","peek$1","prepareCopy$1","get$1","set$1","proxyProperty","isEnumerable","isManual","hasObjectChanges","state_1","descriptor","DraftMap","_super","prepareCopy$2","thisArg","_this","_value","_map","done","DraftSet","prepareCopy$3","applyPatches","patch","deepClonePatchValue","cloned","__spreadArrays","il","jl","configDefaults","revocable","process","env","NODE_ENV","Immer","setUseProxies","produce","produceWithPatches","recipe","defaultBase_1","self_1","arguments$1","_i","scope_1","proxy","hasError","arg1","arg2","arg3","ip","createDraft","finishDraft","setAutoFreeze","proxyMap","proxySet","traps","checkFormatColumnData","checkFormat","checkRegularColumnName","checkFormatInternal","checkInternalDataColumnName","columnNameChecker","dataLength","columnName","column","forbiddenChars","geoStream","x00$1","y00$1","x0$2","y0$2","x0$1","y0$1","x00$2","y00$2","x0$3","y0$3","updateBBox","newBBox","message","calculateDomain","firstValidValue","nValidValues","findFirstValidValue","ensureValidDataType","getDataType","calculateBBoxGeometries","nUniqueValues","col","uniqueVals","calculateNumberOfUniqueValues","columnHasOnlyOneUniqueValue","getDay","createDomainForSingleValue","warningText","calculateDomainForColumnWithOneUniqueValue","maxUnixTime","minUnixTime","initDomain","updateDomain","calculateDomainForRegularColumn","calculateNonGeometryColumnDomain","epoch","days","dateCopy","setDate","getDate","getColumnType","isInterval","isGeometry","DataContainer","validateKeyColumn","keyColumn","requiredLength","validateKey","ensureAllSameType","ensureUnique","isInteger","getDataLength","convertRowToColumnData","checkIfDataIsEmpty","columnData","firstRow","columnKeys","initColumnData","row","methods","validate","_storeData","rowData","_setColumnData","geojsonData","geometryData","firstFeature","$geometry","parseGeoJSON","_data","_setupKeyColumn","validateAllColumns","$key","_syncKeyToRowNumber","generateKeyColumn","_setKeyColumn","_keyToRowNumber","filterFunction","newData","colName","sortFuncs","quantitative","descending","categorical","temporal","sortInstructions","variable","sortMethod","dataType","sortFunc","sortedIndices","reorder","indices","mutate","mutateInstructions","prevRow","nextRow","mutateFunction","aggregations","mean","median","asc","mode","counts","winner","winningVal","checkKeyValuePair","allowedKeys","initNewData","summariseInstructions","newCol","summariseGroup","newColName","instruction","aggregation","checkSummariseInstructions","addGroupSummaries","newCols","summarizedData","getGroupedValues","columns","groupedValues","Group","Geostats","objectID","separator","legendSeparator","method","precisionflag","roundlength","is_uniqueValues","debug","silent","inner_ranges","colors","counter","stat_sorted","stat_mean","stat_median","stat_sum","stat_max","stat_min","stat_pop","stat_variance","stat_stddev","stat_cov","msg","force","setBounds","setSerie","serie","resetStatistics","setPrecision","setColors","doCount","_nodata","tmp","sorted","cclass","getClass","decimalFormat","setRanges","variance","serieMean","stddev","cov","TypeError","_nbClassInt","nbClass","nbclassTmp","_hasNegativeValue","_hasZeroValue","nameA","nameB","setClassManually","_t","getClassEqInterval","forceMin","forceMax","tmpMin","tmpMax","getQuantiles","quantiles","qidx","getClassQuantile","getClassStdDeviation","matchBounds","tmpStdDev","tmpMean","infBound","supBound","meanBound","getClassGeometricProgression","logMax","logMin","getClassArithmeticProgression","denominator","getClassJenks","dataList","mat1","mat2","temp2","cl","yl","tl","ll","s1","s2","w","ml","i3","i4","pl","kclass","countNum","getClassUniqueValues","getRangeNum","getInnerRanges","cnt","rangeFirstValue","getSortedlist","getUTCMilliseconds","getJenks","getGeometricProgression","getEqInterval","getQuantile","getStdDeviation","getUniqueValues","getArithmeticProgression","getIntervalBounds","binInstructions","groupBy","numClasses","parseBinInstructions","variableData","binSize","binCount","lowerBound","upperBound","createRangesFromBinSize","manualClasses","methodMap","EqualInterval","StandardDeviation","ArithmeticProgression","GeometricProgression","Quantile","Jenks","pairRanges","newRange","getBinIndex","bins","findIndex","bin","getBinIndices","variables","rangesPerVariable","binIndices","rowIsNotEmpty","binIndex","updateBranch","tree","rowIndex","currentLevel","initGroup","addRow","getBinnedColumnName","checkIfColumnsExist","transformGeometryInplace","transformFunc","coordEach","geojson","excludeWrapCoord","stopG","geometryMaybeCollection","isGeometryCollection","wrapShrink","coordIndex","isFeatureCollection","isFeature","featureIndex","geomIndex","multiFeatureIndex","geometryIndex","geomType","coord","transformedPosition","invalidInstructionsError","validateInstruction","selection","validateSelectionInstructions","arrange","rename","renameInstructions","oldName","newName","transmute","mutateObj","summarise","$grouped","mutarise","mutariseInstructions","dataInGroup","groupData","ungroup","groupByInstructions","groupedData","groupedColumns","con","getGroupedColumns","groupID","groupBy$1","nonEmptyBinIndices","getNonEmptyBinIndices","nonEmptyRanges","nonEmptyGroups","bin1d","instructions","binnedData","binIndexTree","binsPerVariable","binnedColumnName","initColumnData$1","dataIndex","memory","innerTraversal","itemPath","traverse","forEachBranch","branchArray","convertTreeIntoColumnData","constructBinIndexTree","binKd","dropNA","dropInstructions","filterFunc","keep","reproject","transformedGeometries","geometriesClone","parse","transformGeometries","transformFunction","cumsum","cumsumInstructions","asInterval","newColumns","oldColName","previousSum","currentSum","rowCumsum","_cumsumInstructions","parsedInstructions","parseCumsumInstructions","stackInstructions","validateColumns","rowCumsumColumns","previousColumnName","oldColumn","previousColumn","newColumn","previousValue","methods$1","transmuteInstructions","reprojectInstructions","ensureRowExists","self","ensureValueIsRightForColumn","columnType","valueType","ensureValidColumn","ensureColumnNameMatchesType","allValidValuesHaveTheSameType","ensureAllValidValuesHaveTheSameType","columnExists","ensureColumnExists","methods$2","ensureValidRow","_updateDomainIfNecessary","rowNumber","keyDomain","updateRow","ensureValidRowUpdate","throwErrorIfColumnIsKey","_resetDomainIfNecessary","_validateNewColumn","deleteColumn","addColumn","_domains","validateJoin","leftData","rightData","getRightData","leftLength","leftColumnName","rightColumnName","validateByColumnsExist","leftColumn","rightColumn","leftType","rightType","ensureRightByColumnIsUnique","rightSet","leftKey","ensureLeftColumnIsSubsetOfRightColumn","ensureColumnsAreCompatible","ensureNoDuplicateColumnNames","isColumnOriented","isRowOriented","_setRowData","hasCorrectType","hasCorrectFeatures","isGeoJSON","_setGeoJSON","invalidDataError","_setGroup","_row","previousRowNumber","nextRowNumber","rows","mapFunction","columnNameMatchesType","isValidColumn","validateColumn","dataContainer","joinColumns","leftDataLength","byColumnName","initJoinColumns","rightRowsByKey","byColumn","generateRightRowsByKey","leftByColumn","getJoinColumns","targetClass","transformationsMixin","modifyingRowsAndColumnsMixin","EOL","EOF","objectConverter","inferColumns","columnSet","pad","formatDate","year","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","milliseconds","getUTCFullYear","getUTCMonth","getUTCDate","csvParse","delimiter","reFormat","DELIMITER","parseRows","N","I","eof","eol","token","preformatBody","formatValue","formatRow","convert","customConverter","formatBody","formatRows","dsv","old_blocks","get_key","dynamic","destroy","create_each_block","get_context","old_indexes","new_blocks","new_lookup","deltas","child_ctx","will_move","did_move","new_block","old_block","new_key","old_key","colour","pitch","loadCSV","url","response","fetch","getBoundingBoxCenter","clearHighlight","allHighlight","getElementsByClassName","background","myMusicAlbumCompilation","myColourMusicScale","myMacData","myMusicScaleData","getData","COF","polyParts","polyKey","text1","text2","text3","filterPolyDetail","COC","colourParts","colourKey","colourPath","colourCombo","coltext1","coltext2","CS","storeCurrChordColours","tempColourPitch","tempSelectedChords","chordStart","chordEnd","chord","albumDisplay","songDisplay","chordDisplay","musicScaleFilter","filteredScale","filteredKey","selectedInventor","myTriad","polyArray","filterSongList","album","songtitle","artistFilter","history","songDetails","visible","showDetail","showSongs","showSwatch","showOverheadChords","showRightInnerLeft","help","readyToNodeWheel","loadedCoords","handleMouseOver","getElementById","handleMouseOut","handleClick","myScale","macroDetail","selectKey","ARTIST","uniq","songDetailRefresh","pointX","pointY","pitchCentroid","aHistory","aCurrent","handleSongDetails","song","SONG_TITLE","compact","pull","genColWheel","myArr","Inventor","genChordSwatches","colourWheelCentroid","cStore","tempStore","boxCenter","colourWheelPolyCentroid","getBBox","clearPoints","xPoint1","yPoint1","xPoint2","yPoint2","xPoint3","yPoint3","viewPoint","random","point1x","point2x","point3x","point1y","point2y","point3y","hoverSwatch","swatchTarget","querySelectorAll","onload","calculation","flexSwatchDisplay","targetSwatchDisplay","swatchDisplayWidth","rectSize","toggleTutorial","toggleGif","currTut","toggleGifBlinder","chordscale","compareChord","structStart","structEnd","keyStart","keyEnd","miniRectX","miniRectY","cursor","single","highlightTarget","highlightT","getElementsByName","highlightSelectedChords"],"mappings":"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"}