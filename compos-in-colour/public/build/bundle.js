var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(r)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function l(t,e,r,o){return t[1]&&o?n(r.ctx.slice(),t[1](o(e))):r.ctx}const h="undefined"!=typeof window;let f=h?()=>window.performance.now():()=>Date.now(),d=h?t=>requestAnimationFrame(t):t;const p=new Set;function y(t){p.forEach(e=>{e.c(t)||(p.delete(e),e.f())}),0!==p.size&&d(y)}function m(t){let e;return 0===p.size&&d(y),{promise:new Promise(n=>{p.add(e={c:t,f:n})}),abort(){p.delete(e)}}}function g(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function x(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function T(t){return document.createTextNode(t)}function k(){return T(" ")}function E(){return T("")}function C(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function P(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t,e){for(const n in e)P(t,n,e[n])}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function S(t,e){(null!=e||t.value)&&(t.value=e)}function I(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function $(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}const N=new Set;let H,L=0;function R(t,e,n,r,o,i,s,a=0){const c=16.666/r;let u="{\n";for(let t=0;t<=1;t+=c){const r=e+(n-e)*i(t);u+=100*t+`%{${s(r,1-r)}}\n`}const l=u+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${a}`,f=t.ownerDocument;N.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(M("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${l}`,d.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?y+", ":""}${h} ${r}ms linear ${o}ms 1 both`,L+=1,h}function z(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),L-=o,L||d(()=>{L||(N.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),N.clear())}))}function j(t){H=t}function D(){if(!H)throw new Error("Function called outside component initialization");return H}function Y(t){D().$$.on_mount.push(t)}function X(t){D().$$.after_update.push(t)}function B(t,e){D().$$.context.set(t,e)}function F(t){return D().$$.context.get(t)}const q=[],G=[],V=[],W=[],K=Promise.resolve();let J=!1;function Z(t){V.push(t)}let U=!1;const Q=new Set;function tt(){if(!U){U=!0;do{for(let t=0;t<q.length;t+=1){const e=q[t];j(e),et(e.$$)}for(q.length=0;G.length;)G.pop()();for(let t=0;t<V.length;t+=1){const e=V[t];Q.has(e)||(Q.add(e),e())}V.length=0}while(q.length);for(;W.length;)W.pop()();J=!1,U=!1,Q.clear()}}function et(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}let nt;function rt(){return nt||(nt=Promise.resolve(),nt.then(()=>{nt=null})),nt}function ot(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const it=new Set;let st;function at(){st={r:0,c:[],p:st}}function ct(){st.r||i(st.c),st=st.p}function ut(t,e){t&&t.i&&(it.delete(t),t.i(e))}function lt(t,e,n,r){if(t&&t.o){if(it.has(t))return;it.add(t),st.c.push(()=>{it.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const ht={duration:0};function ft(n,r,o){let i,a,c=r(n,o),u=!1,l=0;function h(){i&&z(n,i)}function d(){const{delay:r=0,duration:o=300,easing:s=e,tick:d=t,css:p}=c||ht;p&&(i=R(n,0,1,o,r,s,p,l++)),d(0,1);const y=f()+r,g=y+o;a&&a.abort(),u=!0,Z(()=>ot(n,!0,"start")),a=m(t=>{if(u){if(t>=g)return d(1,0),ot(n,!0,"end"),h(),u=!1;if(t>=y){const e=s((t-y)/o);d(e,1-e)}}return u})}let p=!1;return{start(){p||(z(n),s(c)?(c=c(),rt().then(d)):d())},invalidate(){p=!1},end(){u&&(h(),u=!1)}}}function dt(n,r,o,a){let c=r(n,o),u=a?0:1,l=null,h=null,d=null;function p(){d&&z(n,d)}function y(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(r){const{delay:o=0,duration:s=300,easing:a=e,tick:g=t,css:v}=c||ht,_={start:f()+o,b:r};r||(_.group=st,st.r+=1),l?h=_:(v&&(p(),d=R(n,u,r,s,o,a,v)),r&&g(0,1),l=y(_,s),Z(()=>ot(n,r,"start")),m(t=>{if(h&&t>h.start&&(l=y(h,s),h=null,ot(n,l.b,"start"),v&&(p(),d=R(n,u,l.b,l.duration,0,a,c.css))),l)if(t>=l.end)g(u=l.b,1-u),ot(n,l.b,"end"),h||(l.b?p():--l.group.r||i(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;u=l.a+l.d*a(e/l.duration),g(u,1-u)}return!(!l&&!h)}))}return{run(t){s(c)?rt().then(()=>{c=c(),g(t)}):g(t)},end(){p(),l=h=null}}}function pt(t,e){lt(t,1,1,()=>{e.delete(t.key)})}function yt(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const s=t[i],a=e[i];if(a){for(const t in s)t in a||(r[t]=1);for(const t in a)o[t]||(n[t]=a[t],o[t]=1);t[i]=a}else for(const t in s)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function mt(t){t&&t.c()}function gt(t,e,n){const{fragment:o,on_mount:a,on_destroy:c,after_update:u}=t.$$;o&&o.m(e,n),Z(()=>{const e=a.map(r).filter(s);c?c.push(...e):i(e),t.$$.on_mount=[]}),u.forEach(Z)}function vt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _t(t,e){-1===t.$$.dirty[0]&&(q.push(t),J||(J=!0,K.then(tt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function bt(e,n,r,s,a,c,u=[-1]){const l=H;j(e);const h=n.props||{},f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:o(),dirty:u};let d=!1;if(f.ctx=r?r(e,h,(t,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=o)&&(f.bound[t]&&f.bound[t](o),d&&_t(e,t)),n}):[],f.update(),d=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(b)}else f.fragment&&f.fragment.c();n.intro&&ut(e.$$.fragment),gt(e,n.target,n.anchor),tt()}j(l)}class xt{$destroy(){vt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function Mt(t){const e=t-1;return e*e*e+1}function wt(t,{delay:n=0,duration:r=400,easing:o=e}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>"opacity: "+t*i}}function Tt(t,{delay:e=0,duration:n=400,easing:r=Mt,x:o=0,y:i=0,opacity:s=0}){const a=getComputedStyle(t),c=+a.opacity,u="none"===a.transform?"":a.transform,l=c*(1-s);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*o}px, ${(1-t)*i}px);\n\t\t\topacity: ${c-l*e}`}}function kt(t,{delay:e=0,duration:n=400,easing:r=Mt}){const o=getComputedStyle(t),i=+o.opacity,s=parseFloat(o.height),a=parseFloat(o.paddingTop),c=parseFloat(o.paddingBottom),u=parseFloat(o.marginTop),l=parseFloat(o.marginBottom),h=parseFloat(o.borderTopWidth),f=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*s}px;padding-top: ${t*a}px;padding-bottom: ${t*c}px;margin-top: ${t*u}px;margin-bottom: ${t*l}px;border-top-width: ${t*h}px;border-bottom-width: ${t*f}px;`}}const Et=[];function Ct(e,n=t){let r;const o=[];function i(t){if(a(e,t)&&(e=t,r)){const t=!Et.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),Et.push(n,e)}if(t){for(let t=0;t<Et.length;t+=2)Et[t][0](Et[t+1]);Et.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,a=t){const c=[s,a];return o.push(c),1===o.length&&(r=n(i)||t),s(e),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function Pt(t){return"[object Date]"===Object.prototype.toString.call(t)}function Ot(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((e,n)=>Ot(t[n],e));return t=>n.map(e=>e(t))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(Pt(t)&&Pt(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),r={};return n.forEach(n=>{r[n]=Ot(t[n],e[n])}),t=>{const e={};return n.forEach(n=>{e[n]=r[n](t)}),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}function At(t,r={}){const o=Ct(t);let i,s=t;function a(a,c){if(null==t)return o.set(t=a),Promise.resolve();s=a;let u=i,l=!1,{delay:h=0,duration:d=400,easing:p=e,interpolate:y=Ot}=n(n({},r),c);const g=f()+h;let v;return i=m(e=>{if(e<g)return!0;l||(v=y(t,a),"function"==typeof d&&(d=d(t,a)),l=!0),u&&(u.abort(),u=null);const n=e-g;return n>d?(o.set(t=a),!1):(o.set(t=v(p(n/d))),!0)}),i.promise}return{set:a,update:(e,n)=>a(e(s,t),n),subscribe:o.subscribe}}const St=[{OBJECT_ID:1,TYPE:"MAJOR",KEY:"C",POLY_PATH:"M322.718,14.82\n\t\tc-43.756-10.744-87.269-9.598-130.613,2.449c-3.948,1.096-3.92,2.857-2.89,6.058c5.6,17.395,11.053,34.837,16.556,52.264\n\t\tc1.046,4.603,3.801,5.476,8.162,4.342c24.102-6.274,48.497-7.768,73.19-4.183c4.127,0.599,8.144,1.67,12.248,2.331\n\t\tc4.887,0.784,7.18-0.644,8.558-5.352c4.951-16.904,9.289-33.985,14.668-50.767C323.315,19.721,324.537,17.224,322.718,14.82z",TEXT_PATH_1:"M256.874,45.003c0,1.024-0.512,1.536-1.536,1.536h-5.242c-0.996,0-1.493-0.512-1.493-1.536V31.274\n\t\t\tc0-1.031,0.498-1.547,1.493-1.547h5.242c1.024,0,1.536,0.516,1.536,1.547v3.932h-2.503v-3.319h-3.255V44.38h3.255v-3.534h2.503\n\t\t\tV45.003z",TEXT_PATH_2:"",TEXT_PATH_3:""},{OBJECT_ID:2,TYPE:"MAJOR",KEY:"G",POLY_PATH:"M440.206,79.639\n\t\tc-31.085-30.477-67.817-51.122-109.628-62.903c-1.253-0.353-2.6-0.378-3.9-0.557c-1.283,0.499-0.811,1.512-0.72,2.417\n\t\tc0.822,3.784-0.793,7.212-1.755,10.674c-4.206,15.184-8.897,30.232-12.698,45.529c-0.423,1.708-1.482,3.461-0.05,5.216\n\t\tc8.444,3.904,17.396,6.49,25.904,10.274c18.698,8.313,35.473,19.46,50.648,33.095c5.797,5.208,7.646,5.232,13.396-0.121\n\t\tc12.652-11.784,24.777-24.117,37.438-35.895C441.155,85.219,443.95,82.952,440.206,79.639z",TEXT_PATH_1:"M374.208,79.355c0,1.024-0.513,1.536-1.536,1.536h-5.285c-0.996,0-1.493-0.512-1.493-1.536V65.627\n\t\t\tc0-1.031,0.509-1.547,1.525-1.547h5.253c1.023,0,1.536,0.516,1.536,1.547v3.588h-2.524v-2.976h-3.276v12.493h3.276v-4.705h-1.869\n\t\t\tV71.89h4.394V79.355z",TEXT_PATH_2:"",TEXT_PATH_3:""},{OBJECT_ID:3,TYPE:"MAJOR",KEY:"D",POLY_PATH:"M500.479,165.448\n\t\tc-7.655-19.595-17.646-37.902-30.037-54.917c-5.873-8.065-12.216-15.729-18.804-23.218c-2.199-2.501-3.503-2.505-5.912-0.141\n\t\tc-15.057,14.759-30.281,29.346-45.453,43.99c-0.466,2.083,0.83,3.327,2.042,4.76c7.49,8.861,14.786,17.883,20.601,27.975\n\t\tc7.037,12.223,13.244,24.825,17.409,38.354c0.778,2.519,1.229,5.177,3.043,7.257c2.241,2.374,4.857,2.271,7.781,1.437\n\t\tc17.219-4.909,34.43-9.843,51.621-14.843c5.568-1.62,6.678-3.627,4.95-9.172C505.472,179.717,503.26,172.484,500.479,165.448z",TEXT_PATH_1:"M463.711,163.278c0,0.988-0.294,1.764-0.881,2.326c-0.588,0.563-1.379,0.843-2.374,0.843h-5.124v-16.812h5.124\n\t\t\tc0.995,0,1.786,0.285,2.374,0.854c0.587,0.569,0.881,1.348,0.881,2.336V163.278z M461.187,162.859v-9.657\n\t\t\tc0-0.938-0.491-1.407-1.472-1.407h-1.869v12.493h1.805C460.674,164.288,461.187,163.812,461.187,162.859z",TEXT_PATH_2:"",TEXT_PATH_3:""},{OBJECT_ID:4,TYPE:"MAJOR",KEY:"A",POLY_PATH:"M518.287,227.128\n\t\tc3.97,20.661,5.272,41.475,3.857,62.477c-0.671,9.954-1.952,19.819-3.533,29.668c-0.529,3.287-1.629,3.987-4.928,3.271\n\t\tc-20.606-4.463-41.264-8.69-61.905-12.994c-1.504-1.513-1.071-3.257-0.811-5.117c1.615-11.489,2.98-23.011,2.519-34.65\n\t\tc-0.559-14.091-2.024-28.063-5.711-41.731c-0.685-2.544-1.72-5.035-1.295-7.762c0.631-3.203,2.899-4.51,5.818-5.362\n\t\tc17.186-5.026,34.379-10.023,51.589-14.958c5.575-1.597,7.584-0.488,9.077,5.123C514.907,212.394,516.891,219.694,518.287,227.128z",TEXT_PATH_1:"M489.227,265.667h-2.492l-0.505-3.19h-3.147l-0.505,3.19h-2.481v-0.043l3.255-16.79h2.643L489.227,265.667z\n\t\t\t M485.875,260.318l-1.225-7.584l-1.235,7.584H485.875z",TEXT_PATH_2:"",TEXT_PATH_3:""},{OBJECT_ID:5,TYPE:"MAJOR",KEY:"E",POLY_PATH:"M514.266,332.542\n\t\tc-10.057,42.354-30.133,79.402-59.229,111.654c-0.872,0.969-1.997,1.706-3.004,2.551c-1.352,0.263-1.49-0.847-1.897-1.662\n\t\tc-1.321-3.64-4.516-5.68-7.174-8.095c-11.651-10.605-23.643-20.837-35.01-31.756c-1.27-1.219-3.101-2.138-2.823-4.384\n\t\tc5.064-7.805,11.259-14.763,16.441-22.5c11.39-17.001,19.641-35.374,25.214-54.998c2.13-7.497,3.681-8.503,11.398-7.038\n\t\tc16.985,3.226,33.819,7.198,50.809,10.414C512.094,327.314,515.668,327.745,514.266,332.542z",TEXT_PATH_1:"M466.18,386.071h-6.972V369.26h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V386.071z",TEXT_PATH_2:"",TEXT_PATH_3:""},{OBJECT_ID:6,TYPE:"MAJOR",KEY:"B",POLY_PATH:"M448.168,449.324\n\t\tc-31.297,32.412-68.723,54.635-111.818,67.546c-3.924,1.178-4.84-0.329-5.673-3.585c-4.534-17.703-9.218-35.368-13.851-53.047\n\t\tc-1.567-4.45,0.299-6.657,4.592-8.024c23.737-7.538,45.174-19.277,64.156-35.471c3.173-2.708,6.001-5.754,9.122-8.5\n\t\tc3.716-3.268,6.416-3.283,10.093-0.034c13.198,11.664,25.975,23.804,39.47,35.137C446.063,444.857,448.427,446.32,448.168,449.324z",TEXT_PATH_1:"M384.2,469.541c0,1.025-0.513,1.537-1.536,1.537h-6.714v-16.813h6.671c0.995,0,1.493,0.516,1.493,1.547v4.33\n\t\t\tc0,0.572-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.318-1.311,0.826c0.853,0.523,1.304,0.811,1.354,0.859\n\t\t\tc0.387,0.338,0.58,0.799,0.58,1.387V469.541z M381.611,460.453v-4.07h-3.147v4.93h1.934L381.611,460.453z M381.676,468.961v-4.791\n\t\t\tl-1.235-0.816h-1.977v5.607H381.676z",TEXT_PATH_2:"",TEXT_PATH_3:""},{OBJECT_ID:7,TYPE:"MAJOR",KEY:"F#",POLY_PATH:"M312.838,460.248\n\t\tc4.772,17.987,9.505,35.99,14.358,53.956c0.839,3.099,1.083,5.014-3.002,5.931c-45.261,10.169-90.077,8.971-134.542-4.547\n\t\tc-4.296-1.307-5.376-2.678-3.871-7.193c5.302-15.923,10.106-32.014,15.1-48.04c3.737-9.525,3.728-9.492,14.101-6.636\n\t\tc19.688,5.419,39.784,7.545,60.131,6.576c9.916-0.475,19.811-1.771,29.53-4.048C308.38,455.371,311.679,455.695,312.838,460.248z",TEXT_PATH_1:"M255.146,487.094h-4.351v4.975h3.717v2.18h-3.717v7.434h-2.514v-16.811h6.864V487.094z",TEXT_PATH_2:"M267.006,491.166h-2.02l-0.688,4.264h1.934v2.053h-2.267l-0.677,4.199h-2.224l0.677-4.199h-1.772l-0.666,4.199h-2.245\n\t\t\tl0.688-4.199h-1.676v-2.053h1.998l0.688-4.264h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245\n\t\t\tl-0.709,4.254h1.697V491.166z M262.763,491.166h-1.783l-0.688,4.264h1.783L262.763,491.166z",TEXT_PATH_3:""},{OBJECT_ID:8,TYPE:"MAJOR",KEY:"Db",POLY_PATH:"M198.993,453.297\n\t\tc-5.663,18.242-11.418,36.459-16.908,54.755c-1.073,3.576-2.37,4.34-5.891,3.004c-40.39-15.351-75.05-38.916-103.362-71.664\n\t\tc-1.062-3.157,1.461-4.577,3.222-6.139c12.573-11.157,24.889-22.595,37.328-33.899c1.361-1.234,2.777-2.381,4.336-3.362\n\t\tc2.495-1.574,4.604-1.365,6.596,0.968c15.237,17.849,33.905,31.379,54.154,42.918c5.242,2.987,11.023,4.717,16.425,7.316\n\t\tC197.358,448.377,200.494,449.346,198.993,453.297z",TEXT_PATH_1:"M135.644,457.281c0,0.988-0.294,1.764-0.881,2.326c-0.587,0.563-1.379,0.844-2.374,0.844h-5.124v-16.813h5.124\n\t\t\tc0.995,0,1.787,0.285,2.374,0.854c0.587,0.569,0.881,1.349,0.881,2.337V457.281z M133.119,456.863v-9.658\n\t\t\tc0-0.938-0.491-1.406-1.472-1.406h-1.869v12.492h1.805C132.607,458.291,133.119,457.815,133.119,456.863z",TEXT_PATH_2:"M144.699,458.27c0,0.682-0.204,1.215-0.612,1.602s-0.953,0.58-1.633,0.58h-4.995v-16.813h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.268c0.723-0.115,1.296-0.172,1.719-0.172c0.895,0,1.343,0.439,1.343,1.32V458.27z\n\t\t\t M142.229,457.594v-5.941l-2.31,0.043v6.715h1.525C141.967,458.41,142.229,458.138,142.229,457.594z",TEXT_PATH_3:""},{OBJECT_ID:9,TYPE:"MAJOR",KEY:"Ab",POLY_PATH:"M115.312,389.763\n\t\tc-2.296,3.554-5.785,5.91-8.837,8.693c-12.062,11.004-24.229,21.893-36.218,32.975c-2.375,2.196-3.707,2.438-5.837-0.285\n\t\tc-20.234-25.865-35.557-54.266-44.76-85.863c-1.185-3.73,1.12-5.231,4.076-6.088c12.777-3.704,25.432-7.823,38.276-11.292\n\t\tc5.139-1.386,10.238-2.914,15.348-4.384c3.861-1.116,5.97-0.027,7.123,3.79c6.305,20.859,16.108,39.971,28.86,57.613\n\t\tC114.363,386.331,115.97,387.619,115.312,389.763z",TEXT_PATH_1:"M67.71,377.676h-2.492l-0.505-3.19h-3.147l-0.505,3.19H58.58v-0.043l3.255-16.79h2.643L67.71,377.676z M64.359,372.327\n\t\t\tl-1.225-7.584l-1.235,7.584H64.359z",TEXT_PATH_2:"M76.229,375.496c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V375.496z\n\t\t\t M73.758,374.819v-5.94l-2.31,0.043v6.714h1.525C73.497,375.635,73.758,375.363,73.758,374.819z",TEXT_PATH_3:""},{OBJECT_ID:10,TYPE:"MAJOR",KEY:"Eb",POLY_PATH:"M72.832,242.633\n\t\tc-3.837-1.783-8.045-1.919-12.11-2.646c-16.071-2.882-32.17-5.608-48.22-8.596c-3.18-0.593-4.438-0.087-4.788,3.353\n\t\tc-3.333,32.669-1.16,64.866,7.895,96.508c0.985,3.785,3.735,3.826,6.694,2.978c12.785-3.677,25.687-6.937,38.404-10.848\n\t\tc5.087-1.566,10.215-2.994,15.323-4.471c3.862-1.115,5.065-3.162,4.006-7.005c-5.783-21.007-7.676-42.406-6.29-64.127\n\t\tC73.858,246.042,74.532,244.095,72.832,242.633z",TEXT_PATH_1:"M41.833,284.554h-6.972v-16.812h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V284.554z",TEXT_PATH_2:"M50.663,282.374c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V282.374z\n\t\t\t M48.192,281.697v-5.94l-2.31,0.043v6.714h1.525C47.93,282.513,48.192,282.241,48.192,281.697z",TEXT_PATH_3:""},{OBJECT_ID:11,TYPE:"MAJOR",KEY:"Bb",POLY_PATH:"M109.771,144.272\n\t\tc-14.514-12.417-29.094-24.762-43.491-37.316c-2.814-2.455-4.318-2.409-6.584,0.599c-25.993,34.516-42.758,72.929-49.259,115.728\n\t\tc0.785,3.238,3.676,3.095,5.999,3.477c16.584,2.739,33.102,5.852,49.652,8.786c1.81,0.32,3.619,0.535,5.461,0.535\n\t\tc2.951,0.002,4.624-1.3,5.065-4.335c3.378-23.224,11.962-44.623,22.945-65.179c2.843-5.32,6.812-9.866,9.997-14.944\n\t\tC111.01,149.306,113.146,146.815,109.771,144.272z",TEXT_PATH_1:"M55.33,177.509c0,1.024-0.512,1.536-1.536,1.536H47.08v-16.812h6.671c0.995,0,1.493,0.516,1.493,1.547v4.329\n\t\t\tc0,0.573-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.319-1.311,0.827c0.852,0.523,1.303,0.81,1.354,0.859\n\t\t\tc0.387,0.337,0.58,0.799,0.58,1.386V177.509z M52.741,168.421v-4.071h-3.147v4.931h1.934L52.741,168.421z M52.806,176.929v-4.791\n\t\t\tl-1.235-0.816h-1.977v5.607H52.806z",TEXT_PATH_2:"M64.418,176.865c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V176.865z\n\t\t\t M61.947,176.188v-5.94l-2.31,0.043v6.714h1.525C61.686,177.004,61.947,176.732,61.947,176.188z",TEXT_PATH_3:""},{OBJECT_ID:12,TYPE:"MAJOR",KEY:"F:minor",POLY_PATH:"M202.391,77.71\n\t\tc-5.549-17.763-11.141-35.518-16.609-53.307c-0.943-3.068-1.758-4.819-5.702-3.418C136.363,36.506,99.084,61.409,68.666,96.546\n\t\tc-2.939,3.396-3.122,5.131,0.558,8.149c12.975,10.647,25.615,21.7,38.383,32.599c8.239,6.067,8.214,6.045,15.468-1.9\n\t\tc13.77-15.079,29.64-27.591,47.373-37.614c8.643-4.884,17.705-9.063,27.144-12.315C201.219,84.212,203.835,82.18,202.391,77.71z",TEXT_PATH_1:"M139.7,68.548h-4.351v4.974h3.717v2.181h-3.717v7.434h-2.514V66.324h6.864V68.548z",TEXT_PATH_2:"",TEXT_PATH_3:""},{OBJECT_ID:13,TYPE:"MINOR",KEY:"A:minor",POLY_PATH:"M208.085,86.906\n\t\tc6.244,20.115,12.49,40.23,18.732,60.346c-0.43,1.035-0.177,1.995,0.316,2.93c1.835,3.34,4.8,3.177,7.85,2.392\n\t\tc10.259-2.639,20.679-3.299,31.231-2.949c4.183,0.139,8.334,0.607,12.393,1.37c4.576,0.866,6.943-0.775,8.13-5.024\n\t\tc2.324-8.326,4.903-16.583,7.232-24.903c3.001-10.725,5.907-21.474,9.139-32.135c0.529-1.747,1.158-3.492,0.646-5.372\n\t\tc-4.723-3.592-10.543-3.827-15.987-4.58c-25.283-3.493-50.32-2.051-74.957,4.872C210.954,84.375,208.763,84.506,208.085,86.906z",TEXT_PATH_1:"M253.825,116.431h-2.492l-0.505-3.19h-3.147l-0.505,3.19h-2.481v-0.043l3.255-16.79h2.643L253.825,116.431z\n\t\t\t M250.473,111.082l-1.225-7.584l-1.235,7.584H250.473z",TEXT_PATH_2:"M267.07,116.431h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V116.431z",TEXT_PATH_3:""},{OBJECT_ID:14,TYPE:"MINOR",KEY:"E:minor",POLY_PATH:"M290.592,152.688\n\t\tc9.764,2.167,18.64,6.474,27.348,11.227c6.883,3.758,12.798,8.85,18.78,13.784c3.113,2.568,5.272,2.012,7.726-0.384\n\t\tc12.198-11.901,24.384-23.822,36.604-35.707c2.254-2.188,4.761-4.123,6.932-6.388c1.257-1.314,3.459-2.401,2.377-4.932\n\t\tc-21.982-21.429-47.9-36.056-77.294-44.648c-1.819-0.533-3.534-1.484-4.426,1.737c-5.764,20.824-11.769,41.578-17.668,62.365\n\t\tC290.703,150.685,290.713,151.704,290.592,152.688z",TEXT_PATH_1:"M328.4,137.431h-6.972V120.62h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V137.431z",TEXT_PATH_2:"M341.957,137.431h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.896,0,1.343,0.44,1.343,1.321V137.431z",TEXT_PATH_3:""},{OBJECT_ID:15,TYPE:"MINOR",KEY:"B:minor",POLY_PATH:"M395.083,134.199\n\t\tc-8.664,6.751-16.017,14.908-23.94,22.447c-9.583,9.118-18.951,18.466-28.409,27.712c1.556,4.04,4.52,7.226,7.104,10.502\n\t\tc8.237,10.449,13.555,22.245,17.455,34.805c1.784,4.12,5.081,3.668,8.447,2.682c8.943-2.617,17.929-5.104,26.844-7.808\n\t\tc10.515-3.188,21.247-5.582,31.675-9.045c1.907-0.632,4.561-0.544,4.562-3.648l0.082,0.009c-0.941-9.429-5.073-17.832-8.696-26.359\n\t\tc-4.89-11.513-11.104-22.365-18.471-32.438C406.796,146.304,402.351,138.959,395.083,134.199z",TEXT_PATH_1:"M388.595,194.657c0,1.024-0.513,1.536-1.536,1.536h-6.714v-16.812h6.671c0.995,0,1.493,0.516,1.493,1.547v4.329\n\t\t\tc0,0.573-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.319-1.311,0.827c0.853,0.523,1.304,0.81,1.354,0.859\n\t\t\tc0.387,0.337,0.58,0.799,0.58,1.386V194.657z M386.006,185.569v-4.071h-3.147v4.931h1.934L386.006,185.569z M386.07,194.077\n\t\t\tv-4.791l-1.235-0.816h-1.977v5.607H386.07z",TEXT_PATH_2:"M402.409,196.193h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.572-0.093,1.143-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V196.193z",TEXT_PATH_3:""},{OBJECT_ID:16,TYPE:"MINOR",KEY:"F#:minor",POLY_PATH:"M445.768,309.746\n\t\tc-10.929-1.095-21.499-4.078-32.222-6.232c-12.968-2.606-25.875-5.521-38.809-8.305c-0.836-4.247-0.026-8.521,0.414-12.672\n\t\tc1.399-13.232-0.388-26.046-3.784-38.751c-0.686-4.437,2.346-5.814,5.719-6.773c8.962-2.554,17.891-5.237,26.875-7.703\n\t\tc10.594-2.907,20.952-6.603,31.621-9.23c1.95-0.479,4.149-1.97,5.805,0.659l0.064-0.052c4.229,8.479,5.212,17.79,6.691,26.936\n\t\tc2,12.348,2.525,24.842,1.662,37.292C449.226,293.261,449.38,301.845,445.768,309.746z",TEXT_PATH_1:"M402.01,256.222h-4.351v4.974h3.717v2.181h-3.717v7.434h-2.514v-16.812h6.864V256.222z",TEXT_PATH_2:"M413.869,260.293h-2.02l-0.688,4.265h1.934v2.052h-2.267l-0.677,4.2h-2.224l0.677-4.2h-1.772l-0.666,4.2h-2.245l0.688-4.2\n\t\t\th-1.676v-2.052h1.998l0.688-4.265h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245l-0.709,4.254\n\t\t\th1.697V260.293z M409.626,260.293h-1.783l-0.688,4.265h1.783L409.626,260.293z",TEXT_PATH_3:"M427.2,270.81h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.572-0.093,1.143-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V270.81z"},{OBJECT_ID:17,TYPE:"MINOR",KEY:"C#:minor",POLY_PATH:"M347.502,349.796\n\t\tc7.106-7.038,12.32-15.413,17.155-24.076c3.82-6.848,6.11-14.309,8.543-21.673c1.266-3.831,3.389-4.51,6.74-3.792\n\t\tc16.666,3.568,33.331,7.161,50.004,10.702c3.075,0.651,6.227,0.951,9.27,1.711c1.764,0.442,4.207,0.188,4.641,2.906\n\t\tc-7.179,29.849-21.312,56.038-41.602,78.975c-1.255,1.422-2.199,3.14-4.671,0.89c-15.976-14.548-32.119-28.906-48.189-43.35\n\t\tC348.664,351.433,348.129,350.564,347.502,349.796z",TEXT_PATH_1:"M385.664,349.19c0,1.024-0.512,1.536-1.536,1.536h-5.242c-0.995,0-1.493-0.512-1.493-1.536v-13.729\n\t\t\tc0-1.031,0.498-1.547,1.493-1.547h5.242c1.024,0,1.536,0.516,1.536,1.547v3.932h-2.503v-3.319h-3.255v12.493h3.255v-3.534h2.503\n\t\t\tV349.19z",TEXT_PATH_2:"M398.071,340.21h-2.02l-0.688,4.265h1.934v2.052h-2.267l-0.677,4.2h-2.224l0.677-4.2h-1.772l-0.666,4.2h-2.245l0.688-4.2\n\t\t\th-1.676v-2.052h1.998l0.688-4.265h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245l-0.709,4.254\n\t\t\th1.697V340.21z M393.828,340.21h-1.783l-0.688,4.265h1.783L393.828,340.21z",TEXT_PATH_3:"M411.402,350.727h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.896,0,1.343,0.44,1.343,1.321V350.727z"},{OBJECT_ID:18,TYPE:"MINOR",KEY:"G#:minor",POLY_PATH:"M313.708,449.145\n\t\tc-5.453-20.37-10.903-40.739-16.358-61.109c-0.917-0.646-1.215-1.595-1.296-2.651c-0.23-3.808,2.366-5.249,5.365-6.209\n\t\tc10.09-3.233,19.258-8.228,28-14.149c3.465-2.346,6.727-4.955,9.754-7.766c3.408-3.172,6.287-3.043,9.559-0.077\n\t\tc6.41,5.816,13,11.437,19.412,17.243c8.263,7.486,16.458,15.045,24.882,22.354c1.38,1.197,2.844,2.339,3.415,4.206\n\t\tc-2.08,5.561-6.88,8.862-11.083,12.401c-19.527,16.435-41.483,28.557-66.023,35.823\n\t\tC317.484,449.758,315.563,450.814,313.708,449.145z",TEXT_PATH_1:"M332.451,405.535c0,1.024-0.512,1.536-1.536,1.536h-5.285c-0.995,0-1.493-0.512-1.493-1.536v-13.729\n\t\t\tc0-1.031,0.508-1.547,1.525-1.547h5.253c1.024,0,1.536,0.516,1.536,1.547v3.588h-2.524v-2.976h-3.276v12.493h3.276v-4.705h-1.869\n\t\t\tv-2.138h4.394V405.535z",TEXT_PATH_2:"M344.891,396.555h-2.02l-0.688,4.265h1.934v2.052h-2.267l-0.677,4.2h-2.224l0.677-4.2h-1.772l-0.666,4.2h-2.245l0.688-4.2\n\t\t\th-1.676v-2.052h1.998l0.688-4.265h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245l-0.709,4.254\n\t\t\th1.697V396.555z M340.647,396.555h-1.783l-0.688,4.265h1.783L340.647,396.555z",TEXT_PATH_3:"M358.222,407.071h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.572-0.093,1.143-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V407.071z"},{OBJECT_ID:19,TYPE:"MINOR",KEY:"D#:minor",POLY_PATH:"M307.896,451.993\n\t\tc-20.525,5.055-41.28,5.982-62.286,3.959c-11.456-1.102-22.602-3.472-33.625-6.603c-1.73-0.493-3.374-1.297-5.058-1.956\n\t\tc5.464-17.742,10.987-35.466,16.329-53.246c0.798-2.66,2.217-5.045,2.61-7.938c0.411-3.038,2.491-4.234,5.917-3.094\n\t\tc17.892,5.95,36.161,6.027,54.575,3.053c3.046-0.491,5.206,0.268,6.067,3.546c5.25,19.982,10.527,39.958,15.832,59.928\n\t\tC308.497,450.554,308.301,451.254,307.896,451.993z",TEXT_PATH_1:"M250.389,424.901c0,0.988-0.294,1.764-0.881,2.325c-0.587,0.563-1.379,0.844-2.374,0.844h-5.124v-16.812h5.124\n\t\t\tc0.995,0,1.787,0.285,2.374,0.854c0.587,0.569,0.881,1.348,0.881,2.336V424.901z M247.864,424.482v-9.657\n\t\t\tc0-0.938-0.491-1.407-1.472-1.407h-1.869v12.493h1.805C247.352,425.911,247.864,425.436,247.864,424.482z",TEXT_PATH_2:"M262.764,417.554h-2.02l-0.688,4.265h1.934v2.052h-2.267l-0.677,4.2h-2.224l0.677-4.2h-1.772l-0.666,4.2h-2.245l0.688-4.2\n\t\t\th-1.676v-2.052h1.998l0.688-4.265h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245l-0.709,4.254\n\t\t\th1.697V417.554z M258.521,417.554h-1.783l-0.688,4.265h1.783L258.521,417.554z",TEXT_PATH_3:"M276.095,428.07h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V428.07z"},{OBJECT_ID:20,TYPE:"MINOR",KEY:"Bb:minor",POLY_PATH:"M221.495,380.471\n\t\tc-6.186,20.104-12.511,40.166-18.45,60.342c-1.303,4.43-2.836,4.905-6.906,3.244c-16.4-6.704-31.542-15.496-45.549-26.298\n\t\tc-1.034-0.799-1.867-1.937-3.361-1.928c-0.218-0.041-0.435-0.08-0.652-0.116c-1.934-1.113-3.367-2.804-4.977-4.294\n\t\tc-0.098-0.2-0.191-0.398-0.285-0.601c-5.619-6.054-11.237-12.112-16.855-18.168c-1.357-2.426,0.539-3.792,1.926-5\n\t\tc15.286-13.278,29.946-27.251,45.227-40.532c3.315-2.881,5.781-2.712,8.555,0.604c9.976,11.923,22.272,20.769,36.055,27.753\n\t\tC218.361,376.562,221.605,376.859,221.495,380.471z",TEXT_PATH_1:"M166.887,396.754c0,1.024-0.512,1.536-1.536,1.536h-6.714v-16.812h6.671c0.995,0,1.493,0.516,1.493,1.547v4.329\n\t\t\tc0,0.573-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.319-1.311,0.827c0.852,0.523,1.303,0.81,1.354,0.859\n\t\t\tc0.387,0.337,0.58,0.799,0.58,1.386V396.754z M164.298,387.667v-4.071h-3.147v4.931h1.934L164.298,387.667z M164.362,396.174\n\t\t\tv-4.791l-1.235-0.816h-1.977v5.607H164.362z",TEXT_PATH_2:"M175.975,396.11c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V396.11z\n\t\t\t M173.504,395.433v-5.94l-2.31,0.043v6.714h1.525C173.242,396.25,173.504,395.978,173.504,395.433z",TEXT_PATH_3:"M189.703,398.291h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V398.291z"},{OBJECT_ID:21,TYPE:"MINOR",KEY:"F:minor",POLY_PATH:"M171.98,339.15\n\t\tc-11.726,10.829-23.438,21.667-35.186,32.468c-4.528,4.164-9.36,8.022-13.636,12.429c-2.875,2.958-4.345,2.102-6.426-0.696\n\t\tc-12.719-17.098-22.424-35.719-28.775-56.07c-0.396-1.266-0.701-2.559-1.051-3.84c-1.031-2.975,1.456-3.278,3.161-3.88\n\t\tc4.224-1.492,8.559-2.665,12.878-3.838c14.575-3.954,28.957-8.557,43.466-12.729c1.914-0.55,3.827-1.139,5.842-1.164\n\t\tc1.984-0.024,3.686,0.584,4.287,2.671c3.332,11.553,8.525,22.229,15.109,32.257C172.116,337.471,172.214,338.305,171.98,339.15z",TEXT_PATH_1:"M122.443,330.307h-4.351v4.974h3.717v2.181h-3.717v7.434h-2.514v-16.812h6.864V330.307z",TEXT_PATH_2:"M135.71,344.895h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V344.895z",TEXT_PATH_3:""},{OBJECT_ID:22,TYPE:"MINOR",KEY:"C:minor",POLY_PATH:"M147.756,255.25\n\t\tc-15.692-2.91-31.379-5.837-47.076-8.715c-6.051-1.11-12.196-1.801-18.163-3.248c-4.01-0.971-4.796,0.536-5.066,4.014\n\t\tc-1.647,21.247,0.065,42.175,5.539,62.779c0.34,1.281,0.771,2.539,1.158,3.807c0.713,3.069,2.979,2,4.742,1.599\n\t\tc4.37-0.987,8.662-2.308,12.942-3.617c14.44-4.421,29.063-8.194,43.562-12.398c1.913-0.555,3.844-1.076,5.564-2.127\n\t\tc1.691-1.04,2.806-2.461,2.203-4.545c-3.339-11.552-4.634-23.352-4.409-35.348C148.768,256.6,148.405,255.841,147.756,255.25z",TEXT_PATH_1:"M107.633,279.018c0,1.024-0.512,1.536-1.536,1.536h-5.242c-0.996,0-1.493-0.512-1.493-1.536V265.29\n\t\t\tc0-1.031,0.498-1.547,1.493-1.547h5.242c1.024,0,1.536,0.516,1.536,1.547v3.932h-2.503v-3.319h-3.255v12.493h3.255v-3.534h2.503\n\t\t\tV279.018z",TEXT_PATH_2:"M121.447,280.554h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V280.554z",TEXT_PATH_3:""},{OBJECT_ID:23,TYPE:"MINOR",KEY:"G:minor",POLY_PATH:"M167.627,193.898\n\t\tc-15.949-13.714-31.994-27.317-47.773-41.222c-3.463-3.053-5.015-2.638-7.572,0.937c-10.304,14.414-24.234,46.744-24.234,46.744\n\t\tl-1.839,5.345l-1.747,5.969c0,0-3.903,15.523-5.43,23.642c0.146,2.777,2.479,2.922,4.296,3.205\n\t\tc20.011,3.088,39.862,7.095,59.871,10.188c4.341,0.669,6.338-0.786,6.917-5.071c2.086-15.406,7.776-29.444,15.714-42.7\n\t\tC167.059,198.875,169.646,196.895,167.627,193.898z",TEXT_PATH_1:"M120.893,206.911c0,1.024-0.512,1.536-1.536,1.536h-5.285c-0.996,0-1.493-0.512-1.493-1.536v-13.729\n\t\t\tc0-1.031,0.508-1.547,1.525-1.547h5.253c1.024,0,1.536,0.516,1.536,1.547v3.588h-2.524v-2.976h-3.276v12.493h3.276v-4.705H116.5\n\t\t\tv-2.138h4.394V206.911z",TEXT_PATH_2:"M134.74,208.447h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V208.447z",TEXT_PATH_3:""},{OBJECT_ID:24,TYPE:"MINOR",KEY:"D:minor",POLY_PATH:"M202.608,87.328\n\t\tc-20.06,6.665-38.115,16.944-54.81,29.85c-9.106,7.039-17.273,14.986-24.931,23.51c-1.201,1.34-2.163,2.896-3.237,4.35\n\t\tc14.08,12.101,28.199,24.153,42.195,36.349c2.094,1.825,4.566,3.088,6.439,5.325c1.967,2.352,4.365,2.255,6.656-0.534\n\t\tc11.967-14.571,27.383-24.376,44.548-31.674c2.84-1.208,4.263-3,3.244-6.233c-6.208-19.705-12.391-39.42-18.546-59.146\n\t\tC203.886,88.225,203.345,87.737,202.608,87.328z",TEXT_PATH_1:"M174.559,142.278c0,0.988-0.294,1.764-0.881,2.326c-0.587,0.563-1.379,0.843-2.374,0.843h-5.124v-16.812h5.124\n\t\t\tc0.995,0,1.787,0.285,2.374,0.854c0.587,0.569,0.881,1.348,0.881,2.336V142.278z M172.034,141.859v-9.657\n\t\t\tc0-0.938-0.491-1.407-1.472-1.407h-1.869v12.493h1.805C171.522,143.288,172.034,142.812,172.034,141.859z",TEXT_PATH_2:"M188.341,145.447h-2.438v-8.798l-2.31,0.043v8.755h-2.449v-8.798l-2.31,0.043v8.755h-2.46v-10.85h2.46v0.397\n\t\t\tc0.573-0.093,1.142-0.186,1.708-0.279c0.694-0.107,1.271-0.161,1.729-0.161c0.565,0,0.931,0.161,1.096,0.483\n\t\t\tc0.602-0.093,1.203-0.189,1.805-0.29c0.795-0.129,1.403-0.193,1.826-0.193c0.895,0,1.343,0.44,1.343,1.321V145.447z",TEXT_PATH_3:""}],It=[{OBJECT_ID:1,KEY:"C",POLY_PATH:"M208.085,86.906\n\t\tc6.244,20.115,12.49,40.23,18.732,60.346c-0.43,1.035-0.177,1.995,0.316,2.93c1.835,3.34,4.8,3.177,7.85,2.392\n\t\tc10.259-2.639,20.679-3.299,31.231-2.949c4.183,0.139,8.334,0.607,12.393,1.37c4.576,0.866,6.943-0.775,8.13-5.024\n\t\tc2.324-8.326,4.903-16.583,7.232-24.903c3.001-10.725,5.907-21.474,9.139-32.135c0.529-1.747,1.158-3.492,0.646-5.372\n\t\tc-4.723-3.592-10.543-3.827-15.987-4.58c-25.283-3.493-50.32-2.051-74.957,4.872C210.954,84.375,208.763,84.506,208.085,86.906z",TEXT_PATH_1:"M256.874,45.003c0,1.024-0.512,1.536-1.536,1.536h-5.242c-0.996,0-1.493-0.512-1.493-1.536V31.274\n\t\t\tc0-1.031,0.498-1.547,1.493-1.547h5.242c1.024,0,1.536,0.516,1.536,1.547v3.932h-2.503v-3.319h-3.255V44.38h3.255v-3.534h2.503\n\t\t\tV45.003z",TEXT_PATH_2:""},{OBJECT_ID:2,KEY:"G",POLY_PATH:"M290.592,152.688\n\t\tc9.764,2.167,18.64,6.474,27.348,11.227c6.883,3.758,12.798,8.85,18.78,13.784c3.113,2.568,5.272,2.012,7.726-0.384\n\t\tc12.198-11.901,24.384-23.822,36.604-35.707c2.254-2.188,4.761-4.123,6.932-6.388c1.257-1.314,3.459-2.401,2.377-4.932\n\t\tc-21.982-21.429-47.9-36.056-77.294-44.648c-1.819-0.533-3.534-1.484-4.426,1.737c-5.764,20.824-11.769,41.578-17.668,62.365\n\t\tC290.703,150.685,290.713,151.704,290.592,152.688z",TEXT_PATH_1:"M374.208,79.355c0,1.024-0.513,1.536-1.536,1.536h-5.285c-0.996,0-1.493-0.512-1.493-1.536V65.627\n\t\t\tc0-1.031,0.509-1.547,1.525-1.547h5.253c1.023,0,1.536,0.516,1.536,1.547v3.588h-2.524v-2.976h-3.276v12.493h3.276v-4.705h-1.869\n\t\t\tV71.89h4.394V79.355z",TEXT_PATH_2:""},{OBJECT_ID:3,KEY:"D",POLY_PATH:"M395.083,134.199\n\t\tc-8.664,6.751-16.017,14.908-23.94,22.447c-9.583,9.118-18.951,18.466-28.409,27.712c1.556,4.04,4.52,7.226,7.104,10.502\n\t\tc8.237,10.449,13.555,22.245,17.455,34.805c1.784,4.12,5.081,3.668,8.447,2.682c8.943-2.617,17.929-5.104,26.844-7.808\n\t\tc10.515-3.188,21.247-5.582,31.675-9.045c1.907-0.632,4.561-0.544,4.562-3.648l0.082,0.009c-0.941-9.429-5.073-17.832-8.696-26.359\n\t\tc-4.89-11.513-11.104-22.365-18.471-32.438C406.796,146.304,402.351,138.959,395.083,134.199z",TEXT_PATH_1:"M463.711,163.278c0,0.988-0.294,1.764-0.881,2.326c-0.588,0.563-1.379,0.843-2.374,0.843h-5.124v-16.812h5.124\n\t\t\tc0.995,0,1.786,0.285,2.374,0.854c0.587,0.569,0.881,1.348,0.881,2.336V163.278z M461.187,162.859v-9.657\n\t\t\tc0-0.938-0.491-1.407-1.472-1.407h-1.869v12.493h1.805C460.674,164.288,461.187,163.812,461.187,162.859z",TEXT_PATH_2:""},{OBJECT_ID:4,KEY:"A",POLY_PATH:"M445.768,309.746\n\t\tc-10.929-1.095-21.499-4.078-32.222-6.232c-12.968-2.606-25.875-5.521-38.809-8.305c-0.836-4.247-0.026-8.521,0.414-12.672\n\t\tc1.399-13.232-0.388-26.046-3.784-38.751c-0.686-4.437,2.346-5.814,5.719-6.773c8.962-2.554,17.891-5.237,26.875-7.703\n\t\tc10.594-2.907,20.952-6.603,31.621-9.23c1.95-0.479,4.149-1.97,5.805,0.659l0.064-0.052c4.229,8.479,5.212,17.79,6.691,26.936\n\t\tc2,12.348,2.525,24.842,1.662,37.292C449.226,293.261,449.38,301.845,445.768,309.746z",TEXT_PATH_1:"M489.227,265.667h-2.492l-0.505-3.19h-3.147l-0.505,3.19h-2.481v-0.043l3.255-16.79h2.643L489.227,265.667z\n\t\t\t M485.875,260.318l-1.225-7.584l-1.235,7.584H485.875z",TEXT_PATH_2:""},{OBJECT_ID:5,KEY:"E",POLY_PATH:"M347.502,349.796\n\t\tc7.106-7.038,12.32-15.413,17.155-24.076c3.82-6.848,6.11-14.309,8.543-21.673c1.266-3.831,3.389-4.51,6.74-3.792\n\t\tc16.666,3.568,33.331,7.161,50.004,10.702c3.075,0.651,6.227,0.951,9.27,1.711c1.764,0.442,4.207,0.188,4.641,2.906\n\t\tc-7.179,29.849-21.312,56.038-41.602,78.975c-1.255,1.422-2.199,3.14-4.671,0.89c-15.976-14.548-32.119-28.906-48.189-43.35\n\t\tC348.664,351.433,348.129,350.564,347.502,349.796z",TEXT_PATH_1:"M466.18,386.071h-6.972V369.26h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V386.071z",TEXT_PATH_2:""},{OBJECT_ID:6,KEY:"B",POLY_PATH:"M313.708,449.145\n\t\tc-5.453-20.37-10.903-40.739-16.358-61.109c-0.917-0.646-1.215-1.595-1.296-2.651c-0.23-3.808,2.366-5.249,5.365-6.209\n\t\tc10.09-3.233,19.258-8.228,28-14.149c3.465-2.346,6.727-4.955,9.754-7.766c3.408-3.172,6.287-3.043,9.559-0.077\n\t\tc6.41,5.816,13,11.437,19.412,17.243c8.263,7.486,16.458,15.045,24.882,22.354c1.38,1.197,2.844,2.339,3.415,4.206\n\t\tc-2.08,5.561-6.88,8.862-11.083,12.401c-19.527,16.435-41.483,28.557-66.023,35.823\n\t\tC317.484,449.758,315.563,450.814,313.708,449.145z",TEXT_PATH_1:"M384.2,469.541c0,1.025-0.513,1.537-1.536,1.537h-6.714v-16.813h6.671c0.995,0,1.493,0.516,1.493,1.547v4.33\n\t\t\tc0,0.572-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.318-1.311,0.826c0.853,0.523,1.304,0.811,1.354,0.859\n\t\t\tc0.387,0.338,0.58,0.799,0.58,1.387V469.541z M381.611,460.453v-4.07h-3.147v4.93h1.934L381.611,460.453z M381.676,468.961v-4.791\n\t\t\tl-1.235-0.816h-1.977v5.607H381.676z",TEXT_PATH_2:""},{OBJECT_ID:7,KEY:"F#",POLY_PATH:"M307.896,451.993\n\t\tc-20.525,5.055-41.28,5.982-62.286,3.959c-11.456-1.102-22.602-3.472-33.625-6.603c-1.73-0.493-3.374-1.297-5.058-1.956\n\t\tc5.464-17.742,10.987-35.466,16.329-53.246c0.798-2.66,2.217-5.045,2.61-7.938c0.411-3.038,2.491-4.234,5.917-3.094\n\t\tc17.892,5.95,36.161,6.027,54.575,3.053c3.046-0.491,5.206,0.268,6.067,3.546c5.25,19.982,10.527,39.958,15.832,59.928\n\t\tC308.497,450.554,308.301,451.254,307.896,451.993z",TEXT_PATH_1:"M255.146,487.094h-4.351v4.975h3.717v2.18h-3.717v7.434h-2.514v-16.811h6.864V487.094z",TEXT_PATH_2:"M267.006,491.166h-2.02l-0.688,4.264h1.934v2.053h-2.267l-0.677,4.199h-2.224l0.677-4.199h-1.772l-0.666,4.199h-2.245\n\t\t\tl0.688-4.199h-1.676v-2.053h1.998l0.688-4.264h-1.912v-2.041h2.245l0.677-4.254h2.224l-0.677,4.254h1.772l0.688-4.254h2.245\n\t\t\tl-0.709,4.254h1.697V491.166z M262.763,491.166h-1.783l-0.688,4.264h1.783L262.763,491.166z"},{OBJECT_ID:8,KEY:"Db",POLY_PATH:"M221.495,380.471\n\t\tc-6.186,20.104-12.511,40.166-18.45,60.342c-1.303,4.43-2.836,4.905-6.906,3.244c-16.4-6.704-31.542-15.496-45.549-26.298\n\t\tc-1.034-0.799-1.867-1.937-3.361-1.928c-0.218-0.041-0.435-0.08-0.652-0.116c-1.934-1.113-3.367-2.804-4.977-4.294\n\t\tc-0.098-0.2-0.191-0.398-0.285-0.601c-5.619-6.054-11.237-12.112-16.855-18.168c-1.357-2.426,0.539-3.792,1.926-5\n\t\tc15.286-13.278,29.946-27.251,45.227-40.532c3.315-2.881,5.781-2.712,8.555,0.604c9.976,11.923,22.272,20.769,36.055,27.753\n\t\tC218.361,376.562,221.605,376.859,221.495,380.471z",TEXT_PATH_1:"M135.644,457.281c0,0.988-0.294,1.764-0.881,2.326c-0.587,0.563-1.379,0.844-2.374,0.844h-5.124v-16.813h5.124\n\t\t\tc0.995,0,1.787,0.285,2.374,0.854c0.587,0.569,0.881,1.349,0.881,2.337V457.281z M133.119,456.863v-9.658\n\t\t\tc0-0.938-0.491-1.406-1.472-1.406h-1.869v12.492h1.805C132.607,458.291,133.119,457.815,133.119,456.863z",TEXT_PATH_2:"M144.699,458.27c0,0.682-0.204,1.215-0.612,1.602s-0.953,0.58-1.633,0.58h-4.995v-16.813h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.268c0.723-0.115,1.296-0.172,1.719-0.172c0.895,0,1.343,0.439,1.343,1.32V458.27z\n\t\t\t M142.229,457.594v-5.941l-2.31,0.043v6.715h1.525C141.967,458.41,142.229,458.138,142.229,457.594z"},{OBJECT_ID:9,KEY:"Ab",POLY_PATH:"M171.98,339.15\n\t\tc-11.726,10.829-23.438,21.667-35.186,32.468c-4.528,4.164-9.36,8.022-13.636,12.429c-2.875,2.958-4.345,2.102-6.426-0.696\n\t\tc-12.719-17.098-22.424-35.719-28.775-56.07c-0.396-1.266-0.701-2.559-1.051-3.84c-1.031-2.975,1.456-3.278,3.161-3.88\n\t\tc4.224-1.492,8.559-2.665,12.878-3.838c14.575-3.954,28.957-8.557,43.466-12.729c1.914-0.55,3.827-1.139,5.842-1.164\n\t\tc1.984-0.024,3.686,0.584,4.287,2.671c3.332,11.553,8.525,22.229,15.109,32.257C172.116,337.471,172.214,338.305,171.98,339.15z",TEXT_PATH_1:"M67.71,377.676h-2.492l-0.505-3.19h-3.147l-0.505,3.19H58.58v-0.043l3.255-16.79h2.643L67.71,377.676z M64.359,372.327\n\t\t\tl-1.225-7.584l-1.235,7.584H64.359z",TEXT_PATH_2:"M76.229,375.496c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V375.496z\n\t\t\t M73.758,374.819v-5.94l-2.31,0.043v6.714h1.525C73.497,375.635,73.758,375.363,73.758,374.819z"},{OBJECT_ID:10,KEY:"Eb",POLY_PATH:"M147.756,255.25\n\t\tc-15.692-2.91-31.379-5.837-47.076-8.715c-6.051-1.11-12.196-1.801-18.163-3.248c-4.01-0.971-4.796,0.536-5.066,4.014\n\t\tc-1.647,21.247,0.065,42.175,5.539,62.779c0.34,1.281,0.771,2.539,1.158,3.807c0.713,3.069,2.979,2,4.742,1.599\n\t\tc4.37-0.987,8.662-2.308,12.942-3.617c14.44-4.421,29.063-8.194,43.562-12.398c1.913-0.555,3.844-1.076,5.564-2.127\n\t\tc1.691-1.04,2.806-2.461,2.203-4.545c-3.339-11.552-4.634-23.352-4.409-35.348C148.768,256.6,148.405,255.841,147.756,255.25z",TEXT_PATH_1:"M41.833,284.554h-6.972v-16.812h6.907v2.224h-4.394v4.909h3.781v2.181h-3.781v5.274h4.458V284.554z",TEXT_PATH_2:"M50.663,282.374c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V282.374z\n\t\t\t M48.192,281.697v-5.94l-2.31,0.043v6.714h1.525C47.93,282.513,48.192,282.241,48.192,281.697z"},{OBJECT_ID:11,KEY:"Bb",POLY_PATH:"M167.627,193.898\n\t\tc-15.949-13.714-31.994-27.317-47.773-41.222c-3.463-3.053-5.015-2.638-7.572,0.937c-10.304,14.414-24.234,46.744-24.234,46.744\n\t\tl-1.839,5.345l-1.747,5.969c0,0-3.903,15.523-5.43,23.642c0.146,2.777,2.479,2.922,4.296,3.205\n\t\tc20.011,3.088,39.862,7.095,59.871,10.188c4.341,0.669,6.338-0.786,6.917-5.071c2.086-15.406,7.776-29.444,15.714-42.7\n\t\tC167.059,198.875,169.646,196.895,167.627,193.898z",TEXT_PATH_1:"M55.33,177.509c0,1.024-0.512,1.536-1.536,1.536H47.08v-16.812h6.671c0.995,0,1.493,0.516,1.493,1.547v4.329\n\t\t\tc0,0.573-0.179,1.017-0.537,1.332c-0.05,0.043-0.487,0.319-1.311,0.827c0.852,0.523,1.303,0.81,1.354,0.859\n\t\t\tc0.387,0.337,0.58,0.799,0.58,1.386V177.509z M52.741,168.421v-4.071h-3.147v4.931h1.934L52.741,168.421z M52.806,176.929v-4.791\n\t\t\tl-1.235-0.816h-1.977v5.607H52.806z",TEXT_PATH_2:"M64.418,176.865c0,0.681-0.204,1.214-0.612,1.601s-0.953,0.58-1.633,0.58h-4.995v-16.812h2.46v6.359\n\t\t\tc0.573-0.086,1.146-0.175,1.719-0.269c0.723-0.114,1.296-0.172,1.719-0.172c0.895,0,1.343,0.44,1.343,1.321V176.865z\n\t\t\t M61.947,176.188v-5.94l-2.31,0.043v6.714h1.525C61.686,177.004,61.947,176.732,61.947,176.188z"},{OBJECT_ID:12,KEY:"F",POLY_PATH:"M202.608,87.328\n\t\tc-20.06,6.665-38.115,16.944-54.81,29.85c-9.106,7.039-17.273,14.986-24.931,23.51c-1.201,1.34-2.163,2.896-3.237,4.35\n\t\tc14.08,12.101,28.199,24.153,42.195,36.349c2.094,1.825,4.566,3.088,6.439,5.325c1.967,2.352,4.365,2.255,6.656-0.534\n\t\tc11.967-14.571,27.383-24.376,44.548-31.674c2.84-1.208,4.263-3,3.244-6.233c-6.208-19.705-12.391-39.42-18.546-59.146\n\t\tC203.886,88.225,203.345,87.737,202.608,87.328z",TEXT_PATH_1:"M139.7,68.548h-4.351v4.974h3.717v2.181h-3.717v7.434h-2.514V66.324h6.864V68.548z",TEXT_PATH_2:""}],$t=[{CHORD:"C",ROOT:"C",THIRD:"E",FIFTH:"G"},{CHORD:"Db",ROOT:"Db",THIRD:"F",FIFTH:"Ab"},{CHORD:"D",ROOT:"D",THIRD:"F#",FIFTH:"A"},{CHORD:"Eb",ROOT:"Eb",THIRD:"G",FIFTH:"Bb"},{CHORD:"E",ROOT:"E",THIRD:"Ab",FIFTH:"B"},{CHORD:"F",ROOT:"F",THIRD:"A",FIFTH:"C"},{CHORD:"F#",ROOT:"F#",THIRD:"Bb",FIFTH:"Db"},{CHORD:"G",ROOT:"G",THIRD:"B",FIFTH:"D"},{CHORD:"Ab",ROOT:"Ab",THIRD:"C",FIFTH:"Eb"},{CHORD:"A",ROOT:"A",THIRD:"Db",FIFTH:"E"},{CHORD:"Bb",ROOT:"Bb",THIRD:"D",FIFTH:"F"},{CHORD:"B",ROOT:"B",THIRD:"Eb",FIFTH:"F#"},{CHORD:"Cm",ROOT:"C",THIRD:"Eb",FIFTH:"G"},{CHORD:"Dbm",ROOT:"Db",THIRD:"E",FIFTH:"Ab"},{CHORD:"Dm",ROOT:"D",THIRD:"F",FIFTH:"A"},{CHORD:"Ebm",ROOT:"Eb",THIRD:"F#",FIFTH:"Bb"},{CHORD:"Em",ROOT:"E",THIRD:"G",FIFTH:"B"},{CHORD:"Fm",ROOT:"F",THIRD:"Ab",FIFTH:"C"},{CHORD:"F#m",ROOT:"F#",THIRD:"A",FIFTH:"Db"},{CHORD:"Gm",ROOT:"G",THIRD:"Bb",FIFTH:"D"},{CHORD:"Abm",ROOT:"Ab",THIRD:"B",FIFTH:"Eb"},{CHORD:"Am",ROOT:"A",THIRD:"C",FIFTH:"E"},{CHORD:"Bbm",ROOT:"Bb",THIRD:"Db",FIFTH:"F"},{CHORD:"Bm",ROOT:"B",THIRD:"D",FIFTH:"F#"}];function Nt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ht(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Nt(e(t),n)}),{left:function(e,n,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){var i=r+o>>>1;t(e[i],n)<0?r=i+1:o=i}return r},right:function(e,n,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){var i=r+o>>>1;t(e[i],n)>0?o=i:r=i+1}return r}}}var Lt=Ht(Nt).right,Rt=Math.sqrt(50),zt=Math.sqrt(10),jt=Math.sqrt(2);function Dt(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=Rt?10:i>=zt?5:i>=jt?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=Rt?10:i>=zt?5:i>=jt?2:1)}function Yt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Xt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Bt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ft(){}var qt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wt=/^#([0-9a-f]{3,8})$/,Kt=new RegExp("^rgb\\("+[qt,qt,qt]+"\\)$"),Jt=new RegExp("^rgb\\("+[Vt,Vt,Vt]+"\\)$"),Zt=new RegExp("^rgba\\("+[qt,qt,qt,Gt]+"\\)$"),Ut=new RegExp("^rgba\\("+[Vt,Vt,Vt,Gt]+"\\)$"),Qt=new RegExp("^hsl\\("+[Gt,Vt,Vt]+"\\)$"),te=new RegExp("^hsla\\("+[Gt,Vt,Vt,Gt]+"\\)$"),ee={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ne(){return this.rgb().formatHex()}function re(){return this.rgb().formatRgb()}function oe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Wt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ie(e):3===n?new ue(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new ue(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new ue(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Kt.exec(t))?new ue(e[1],e[2],e[3],1):(e=Jt.exec(t))?new ue(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Zt.exec(t))?se(e[1],e[2],e[3],e[4]):(e=Ut.exec(t))?se(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Qt.exec(t))?de(e[1],e[2]/100,e[3]/100,1):(e=te.exec(t))?de(e[1],e[2]/100,e[3]/100,e[4]):ee.hasOwnProperty(t)?ie(ee[t]):"transparent"===t?new ue(NaN,NaN,NaN,0):null}function ie(t){return new ue(t>>16&255,t>>8&255,255&t,1)}function se(t,e,n,r){return r<=0&&(t=e=n=NaN),new ue(t,e,n,r)}function ae(t){return t instanceof Ft||(t=oe(t)),t?new ue((t=t.rgb()).r,t.g,t.b,t.opacity):new ue}function ce(t,e,n,r){return 1===arguments.length?ae(t):new ue(t,e,n,null==r?1:r)}function ue(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function le(){return"#"+fe(this.r)+fe(this.g)+fe(this.b)}function he(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function fe(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function de(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ye(t,e,n,r)}function pe(t){if(t instanceof ye)return new ye(t.h,t.s,t.l,t.opacity);if(t instanceof Ft||(t=oe(t)),!t)return new ye;if(t instanceof ye)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(s=e===i?(n-r)/a+6*(n<r):n===i?(r-e)/a+2:(e-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new ye(s,a,c,t.opacity)}function ye(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function me(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ge(t){return function(){return t}}function ve(t){return 1==(t=+t)?_e:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ge(isNaN(e)?n:e)}}function _e(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ge(isNaN(t)?e:t)}Xt(Ft,oe,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ne,formatHex:ne,formatHsl:function(){return pe(this).formatHsl()},formatRgb:re,toString:re}),Xt(ue,ce,Bt(Ft,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ue(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ue(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:le,formatHex:le,formatRgb:he,toString:he})),Xt(ye,(function(t,e,n,r){return 1===arguments.length?pe(t):new ye(t,e,n,null==r?1:r)}),Bt(Ft,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ye(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ye(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new ue(me(t>=240?t-240:t+120,o,r),me(t,o,r),me(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var be=function t(e){var n=ve(e);function r(t,e){var r=n((t=ce(t)).r,(e=ce(e)).r),o=n(t.g,e.g),i=n(t.b,e.b),s=_e(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=i(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function xe(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,o=e.slice();return function(i){for(n=0;n<r;++n)o[n]=t[n]*(1-i)+e[n]*i;return o}}function Me(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),s=new Array(r);for(n=0;n<o;++n)i[n]=Oe(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=i[n](t);return s}}function we(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Te(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ke(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Oe(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}var Ee=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ce=new RegExp(Ee.source,"g");function Pe(t,e){var n,r,o,i=Ee.lastIndex=Ce.lastIndex=0,s=-1,a=[],c=[];for(t+="",e+="";(n=Ee.exec(t))&&(r=Ce.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,c.push({i:s,x:Te(n,r)})),i=Ce.lastIndex;return i<e.length&&(o=e.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)a[(n=c[r]).i]=n.x(t);return a.join("")})}function Oe(t,e){var n,r,o=typeof e;return null==e||"boolean"===o?ge(e):("number"===o?Te:"string"===o?(n=oe(e))?(e=n,be):Pe:e instanceof oe?be:e instanceof Date?we:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?Me:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ke:Te:xe))(t,e)}function Ae(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Se(t){return+t}var Ie=[0,1];function $e(t){return t}function Ne(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function He(t,e,n){var r=t[0],o=t[1],i=e[0],s=e[1];return o<r?(r=Ne(o,r),i=n(s,i)):(r=Ne(r,o),i=n(i,s)),function(t){return i(r(t))}}function Le(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),i=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)o[s]=Ne(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(e){var n=Lt(t,e,1,r)-1;return i[n](o[n](e))}}function Re(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ze(){var t,e,n,r,o,i,s=Ie,a=Ie,c=Oe,u=$e;function l(){var t,e,n,c=Math.min(s.length,a.length);return u!==$e&&(t=s[0],e=s[c-1],t>e&&(n=t,t=e,e=n),u=function(n){return Math.max(t,Math.min(e,n))}),r=c>2?Le:He,o=i=null,h}function h(e){return isNaN(e=+e)?n:(o||(o=r(s.map(t),a,c)))(t(u(e)))}return h.invert=function(n){return u(e((i||(i=r(a,s.map(t),Te)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,Se),l()):s.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),l()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),c=Ae,l()},h.clamp=function(t){return arguments.length?(u=!!t||$e,l()):u!==$e},h.interpolate=function(t){return arguments.length?(c=t,l()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}function je(){return ze()($e,$e)}function De(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ye(t){return(t=De(Math.abs(t)))?t[1]:NaN}var Xe,Be=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fe(t){if(!(e=Be.exec(t)))throw new Error("invalid format: "+t);var e;return new qe({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function qe(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ge(t,e){var n=De(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}Fe.prototype=qe.prototype,qe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ve={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ge(100*t,e)},r:Ge,s:function(t,e){var n=De(t,e);if(!n)return t+"";var r=n[0],o=n[1],i=o-(Xe=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+De(t,Math.max(0,e+i-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function We(t){return t}var Ke,Je,Ze,Ue=Array.prototype.map,Qe=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function tn(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?We:(e=Ue.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var o=t.length,i=[],s=0,a=e[0],c=0;o>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),i.push(t.substring(o-=a,o+a)),!((c+=a+1)>r));)a=e[s=(s+1)%e.length];return i.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?We:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ue.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Fe(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,y=t.comma,m=t.precision,g=t.trim,v=t.type;"n"===v?(y=!0,v="g"):Ve[v]||(void 0===m&&(m=12),g=!0,v="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var _="$"===f?o:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===f?i:/[%p]/.test(v)?c:"",x=Ve[v],M=/[defgprs%]/.test(v);function w(t){var o,i,c,f=_,w=b;if("c"===v)w=x(t)+w,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:x(Math.abs(t),m),g&&(t=function(t){t:for(var e,n=t.length,r=1,o=-1;r<n;++r)switch(t[r]){case".":o=e=r;break;case"0":0===o&&(o=r),e=r;break;default:if(!+t[r])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t}(t)),T&&0==+t&&"+"!==h&&(T=!1),f=(T?"("===h?h:u:"-"===h||"("===h?"":h)+f,w=("s"===v?Qe[8+Xe/3]:"")+w+(T&&"("===h?")":""),M)for(o=-1,i=t.length;++o<i;)if(48>(c=t.charCodeAt(o))||c>57){w=(46===c?s+t.slice(o+1):t.slice(o))+w,t=t.slice(0,o);break}}y&&!d&&(t=r(t,1/0));var k=f.length+t.length+w.length,E=k<p?new Array(p-k+1).join(e):"";switch(y&&d&&(t=r(E+t,E.length?p-w.length:1/0),E=""),n){case"<":t=f+t+w+E;break;case"=":t=f+E+t+w;break;case"^":t=E.slice(0,k=E.length>>1)+f+t+w+E.slice(k);break;default:t=E+f+t+w}return a(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),w.toString=function(){return t+""},w}return{format:h,formatPrefix:function(t,e){var n=h(((t=Fe(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ye(e)/3))),o=Math.pow(10,-r),i=Qe[8+r/3];return function(t){return n(o*t)+i}}}}function en(t,e,n,r){var o,i=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return i>=Rt?o*=10:i>=zt?o*=5:i>=jt&&(o*=2),e<t?-o:o}(t,e,n);switch((r=Fe(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ye(e)/3)))-Ye(Math.abs(t)))}(i,s))||(r.precision=o),Ze(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ye(e)-Ye(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(t){return Math.max(0,-Ye(Math.abs(t)))}(i))||(r.precision=o-2*("%"===r.type))}return Je(r)}function nn(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,o,i,s,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(s=Dt(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),i=new Array(o=Math.ceil(e-t+1));++a<o;)i[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),i=new Array(o=Math.ceil(t-e+1));++a<o;)i[a]=(t-a)/s;return r&&i.reverse(),i}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return en(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o=e(),i=0,s=o.length-1,a=o[i],c=o[s];return c<a&&(r=a,a=c,c=r,r=i,i=s,s=r),(r=Dt(a,c,n))>0?r=Dt(a=Math.floor(a/r)*r,c=Math.ceil(c/r)*r,n):r<0&&(r=Dt(a=Math.ceil(a*r)/r,c=Math.floor(c*r)/r,n)),r>0?(o[i]=Math.floor(a/r)*r,o[s]=Math.ceil(c/r)*r,e(o)):r<0&&(o[i]=Math.ceil(a*r)/r,o[s]=Math.floor(c*r)/r,e(o)),t},t}function rn(){var t=je();return t.copy=function(){return Re(t,rn())},Yt.apply(t,arguments),nn(t)}Ke=tn({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Je=Ke.format,Ze=Ke.formatPrefix;class on{constructor({renderer:t}){t||(this._rendererOptions={output:"svg"}),t&&(!function(t){if(t.constructor!==Object||!("output"in t)||!["svg"].includes(t.output))throw new Error("Invalid renderer options: "+JSON.stringify(t))}(t),this._rendererOptions=t)}output(){return this._rendererOptions.output}}const sn={};function an(t){const e=void 0===t?0:t;if(e.constructor===Number)return{left:e,right:e,top:e,bottom:e};if(e.constructor===Object){if(4!==Object.keys(e).length)throw cn;for(const t of["left","right","top","bottom"])if(!(t in e))throw cn;return e}throw cn}const cn=new Error("Invalid padding specification");function un(t,e,n){return function(t,e,n){Math.abs(t[0]-t[1])<e+n&&console.warn("Padding cannot exceed width or height")}(t,e,n),t[0]<t[1]?[t[0]+e,t[1]-n]:[t[0]-n,t[1]+e]}function ln(t,e){return e?[t[1],t[0]]:t}function hn(t,e,n){return[t[0]*e+n,t[1]*e+n]}function fn(t){if(t<0)throw new Error("Zoom factors have to be positive")}function dn(t,e){if(t){const n=t.copy().range(e);return n.invert=function(t){if(t.invert)return t.invert;return function(e){const[n,r]=t.range(),o=Math.min(n,r),i=Math.max(n,r),s=r<n,a=t.domain(),c=a.length-1;if(e<o+t.padding()*t.step())return a[0];if(e>i-t.padding()*t.step())return a[c];let u;return function(t){return!("paddingInner"in t)}(t)&&(u=Math.round((e-o-t.padding()*t.step())/t.step())),function(t){return"paddingInner"in t}(t)&&(u=Math.round((e-o-t.padding()*t.step())/t.step()),u>c&&(u=c)),a[s?c-u:u]}}(n),n}if(!t)return rn().domain(e).range(e)}function pn({rangeX:t,rangeY:e},{finalRangeX:n,finalRangeY:r}){const o=rn().domain(t).range([0,2*Math.PI]),i=rn().domain(e).range([0,1]),s=rn().domain([-1,1]).range(n),a=rn().domain([-1,1]).range(r),c=function([t,e]){const n=function(t,e){const n=e*Math.sin(t),r=e*Math.cos(t);return[n,r]}(o(t),i(e));return[s(n[0]),a(n[1])]};return c.invert=function([t,e]){const n=[s.invert(t),a.invert(e)],[r,c]=function(t,e){const n=function(t,e){if(t>=0&&e>=0)return 1;if(t<0&&e>=0)return 2;if(t<0&&e<0)return 3;if(t>=0&&e<0)return 4}(t,e),r=Math.sqrt(e**2+t**2);let o=Math.atan(t/e);2===n&&(o+=2*Math.PI);3===n&&(o+=Math.PI);4===n&&(o+=Math.PI);return[o,r]}(...n);return[o.invert(r),i.invert(c)]},c}function yn(t){return void 0===t?{xNeedsScaling:!0,yNeedsScaling:!0}:t.constructor===Boolean?{xNeedsScaling:t,yNeedsScaling:t}:t.constructor===Object?t:void 0}function mn(t){const e=an(t.padding),n=function({coordinates:t}){return{rangeX:[t.x1,t.x2],rangeY:[t.y1,t.y2]}}(t),r=function(t,e,n){const{flipX:r,flipY:o,zoomIdentity:i}=t,{rangeX:s,rangeY:a}=e,{left:c,right:u,top:l,bottom:h}=n;let f=ln(s,r);f=un(f,c,u),i&&(fn(i.kx),f=hn(f,i.kx,i.x));let d=ln(a,o);return d=un(d,l,h),i&&(fn(i.ky),d=hn(d,i.ky,i.y)),{finalRangeX:f,finalRangeY:d}}(t,n,e),o=function({scaleX:t,scaleY:e,padding:n,...r},o,i,s,a,c){return{...r,padding:o,...i,...s,...a,...c,bbox:gn(i),paddedBbox:vn(i,o)}}(t,e,n,r,function({scaleX:t,scaleY:e},{rangeX:n,rangeY:r}){return{scaleX:dn(t,n),scaleY:dn(e,r)}}(t,n),function({rangeX:t,rangeY:e},{finalRangeX:n,finalRangeY:r}){return{finalScaleX:rn().domain(t).range(n),finalScaleY:rn().domain(e).range(r)}}(n,r));return function(t){const{transformation:e,rangeX:n,rangeY:r,finalRangeX:o,finalRangeY:i,scaleX:s,scaleY:a,finalScaleX:c,finalScaleY:u}=t;if("polar"!==e&&(t.getTotalTransformation=t=>{const{xNeedsScaling:e,yNeedsScaling:n}=yn(t);return([t,r])=>[c(e?s(t):t),u(n?a(r):r)]},t.inverseTotalTransformation=([t,e])=>[s.invert(c.invert(t)),a.invert(u.invert(e))]),"polar"===e){const e=t=>{const{xNeedsScaling:e,yNeedsScaling:n}=yn(t);return([t,r])=>[e?s(t):t,n?a(r):r]},c=pn({rangeX:n,rangeY:r},{finalRangeX:o,finalRangeY:i});t.getScaleTransformation=e,t.postScaleTransformation=c,t.getTotalTransformation=t=>{const n=e(t);return t=>c(n(t))};const u=([t,e])=>[s.invert(t),a.invert(e)];t.inverseTotalTransformation=t=>u(c.invert(t))}}(o),o}function gn({rangeX:t,rangeY:e}){return{minX:Math.min(...t),maxX:Math.max(...t),minY:Math.min(...e),maxY:Math.max(...e)}}function vn({rangeX:t,rangeY:e},{left:n,right:r,top:o,bottom:i}){return{minX:Math.min(...t)+n,maxX:Math.max(...t)-r,minY:Math.min(...e)+o,maxY:Math.max(...e)-i}}const _n={};const bn={};const xn={};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Mn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wn(t,e){return t(e={exports:{}},e.exports),e.exports}var Tn=wn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(n.hover=window.matchMedia("(hover: hover)").matches,n.none=window.matchMedia("(hover: none)").matches||window.matchMedia("(hover: on-demand)").matches,n.anyHover=window.matchMedia("(any-hover: hover)").matches,n.anyNone=window.matchMedia("(any-hover: none)").matches||window.matchMedia("(any-hover: on-demand)").matches)}};n.update(),e.default=n}));Mn(Tn);var kn=wn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(n.fine=window.matchMedia("(pointer: fine)").matches,n.coarse=window.matchMedia("(pointer: coarse)").matches,n.none=window.matchMedia("(pointer: none)").matches,n.anyFine=window.matchMedia("(any-pointer: fine)").matches,n.anyCoarse=window.matchMedia("(any-pointer: coarse)").matches,n.anyNone=window.matchMedia("(any-pointer: none)").matches)}};n.update(),e.default=n}));Mn(kn);var En=wn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={update:function(){"undefined"!=typeof window&&(n.hasSupport="ontouchstart"in window,n.browserSupportsApi=Boolean(window.TouchEvent))}};n.update(),e.default=n}));Mn(En);var Cn=wn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}}),r=function(){};window.addEventListener("testPassiveEventSupport",r,e),window.removeEventListener("testPassiveEventSupport",r,e),n.hasSupport=t}}};n.update(),e.default=n}));Mn(Cn);var Pn=Mn(wn((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=s(Tn),r=s(kn),o=s(En),i=s(Cn);function s(t){return t&&t.__esModule?t:{default:t}}var a={state:{detectHover:n.default,detectPointer:r.default,detectTouchEvents:o.default,detectPassiveEvents:i.default},update:function(){a.state.detectHover.update(),a.state.detectPointer.update(),a.state.detectTouchEvents.update(),a.state.detectPassiveEvents.update(),a.updateOnlyOwnProperties()},updateOnlyOwnProperties:function(){if("undefined"!=typeof window){a.passiveEvents=a.state.detectPassiveEvents.hasSupport||!1,a.hasTouch=a.state.detectTouchEvents.hasSupport||!1,a.deviceType=(e=a.hasTouch,n=a.state.detectHover.anyHover,r=a.state.detectPointer.anyFine,o=a.state,e&&(n||r)?"hybrid":e&&Object.keys(o.detectHover).filter((function(t){return"update"!==t})).every((function(t){return!1===o.detectHover[t]}))&&Object.keys(o.detectPointer).filter((function(t){return"update"!==t})).every((function(t){return!1===o.detectPointer[t]}))?window.navigator&&/android/.test(window.navigator.userAgent.toLowerCase())?"touchOnly":"hybrid":e?"touchOnly":"mouseOnly"),a.hasMouse="touchOnly"!==a.deviceType,a.primaryInput=("mouseOnly"===a.deviceType?"mouse":"touchOnly"===a.deviceType&&"touch")||a.state.detectPointer.fine&&"mouse"||a.state.detectPointer.coarse&&"touch"||"mouse";/windows/.test(window.navigator.userAgent.toLowerCase())&&/chrome/.test(window.navigator.userAgent.toLowerCase())&&((t=parseInt(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1],10))>=59&&t<62)&&a.hasTouch&&(a.deviceType="hybrid",a.hasMouse=!0,a.primaryInput="mouse")}var t,e,n,r,o}};a.updateOnlyOwnProperties(),e.default=a})));let On;class An{constructor(t,{eventName:e,nativeEventName:n,useWindow:r,preventDefault:o}){this._eventManager=t,this._eventName=e,this._nativeEventName=n,this._useWindow=r,this._preventDefault=o,this._numberOfActiveListeners=0,this._callbacks={}}setNativeEventName(t){this._nativeEventName=t}addListener(t,e){this._callbacks[t]=e,this._eventManagerHasBeenMounted()&&this._attachNativeListenerIfNecessary()}attachAllListeners(){for(const t in this._callbacks)this._attachNativeListenerIfNecessary()}removeListener(t){delete this._callbacks[t],this._eventManagerHasBeenMounted()&&this._removeNativeListenerIfNecessary()}_eventManagerHasBeenMounted(){return this._eventManager._mounted}_attachNativeListenerIfNecessary(){if(0===this._numberOfActiveListeners){On=this._handleEvent.bind(this);const t=this._nativeEventName;this._useWindow&&window.addEventListener(t,On),this._useWindow||this._eventManager._domNode.addEventListener(t,On)}this._numberOfActiveListeners++}_removeNativeListenerIfNecessary(){if(this._numberOfActiveListeners--,0===this._numberOfActiveListeners){const t=this._nativeEventName;this._useWindow&&window.removeEventListener(t,On),this._useWindow||this._eventManager._domNode.removeEventListener(t,On)}}_handleEvent(t){this._preventDefault&&t.preventDefault();const e=this._getScreenCoordinates(t);t.eventName=this._eventName;for(const n in this._callbacks)this._callbacks[n](e,t)}_getScreenCoordinates(t){return this._eventManager._getScreenCoordinates(t)}}class Sn{constructor(t,e){this._domNode=void 0,this._svgPoint=void 0,this._mounted=!1,this._trackers={},this._BROWSER_TYPE=void 0,this._managerType=e;for(const e of t)this._trackers[e.eventName]=new An(this,e)}addRootNode(t){this._domNode=t,this._svgPoint=this._domNode.createSVGPoint(),this._BROWSER_TYPE=window.navigator.pointerEnabled?"IE11 / MSEdge":window.navigator.msPointerEnabled?"IE10 / WP8":"other",this._mounted=!0}attachEventListeners(){if(!1===this._mounted)throw new Error("root node must be added first");for(const t in this._trackers)"mouse"===this._managerType&&this._trackers[t].setNativeEventName(this._getNativeMouseEventName(t,this._BROWSER_TYPE)),"touch"===this._managerType&&this._trackers[t].setNativeEventName(this._getNativeTouchEventName(t,this._BROWSER_TYPE)),this._trackers[t].attachAllListeners()}eventTracker(t){return this._trackers[t]}}var In=t=>t.charAt(0).toUpperCase()+t.slice(1);class $n extends Sn{constructor(){super(Ln,"mouse")}_getNativeMouseEventName(t,e){if("click"===t)return"click";if("wheel"===t)return"wheel";if("IE11 / MSEdge"===e){return"pointer"+Rn(t)}if("IE10 / WP8"===e){const e=Rn(t);return"MSPointer"+In(e)}return"other"===e?t:void 0}_getScreenCoordinates(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}}const Nn=["mousemove","mouseup"],Hn=["mousedown"],Ln=["mousedown","mouseup","mousemove","mouseout","click","wheel"].map(t=>({eventName:t,nativeEventName:void 0,useWindow:Nn.includes(t),preventDefault:Hn.includes(t)})),Rn=t=>t.slice(5,t.length);class zn extends Sn{constructor(){super(jn,"touch")}_getNativeTouchEventName(t,e){if("IE11 / MSEdge"===e){return"pointer"+Dn(t)}if("IE10 / WP8"===e){const e=Dn(t);return"MSPointer"+In(e)}if("other"===e)return t}_getScreenCoordinates(t){const e=function(t){return t.touches}(t);return 1===e.length?this._getScreenCoordinatesSingle(e[0]):e.length>1?this._getScreenCoordinatesMulti(e):void 0}_getScreenCoordinatesSingle(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}_getScreenCoordinatesMulti(t){const e=[];for(const n of t)e.push(this._getScreenCoordinatesSingle(n));return e}}const jn=["touchstart","touchend","touchmove","touchcancel"].map(t=>({eventName:t,nativeEventName:void 0,useWindow:!1,preventDefault:!0})),Dn=t=>t.slice(5,t.length);class Yn{constructor(){Pn.hasMouse&&(this._mouseEventManager=new $n),Pn.hasTouch&&(this._touchEventManager=new zn)}addRootNode(t){this._forEachManager(e=>{e.addRootNode(t)})}attachEventListeners(){this._forEachManager(t=>{t.attachEventListeners()})}mouse(){return this._mouseEventManager}touch(){return this._touchEventManager}_forEachManager(t){this._mouseEventManager&&t(this._mouseEventManager),this._touchEventManager&&t(this._touchEventManager)}}class Xn{constructor(){this._id=void 0,this._eventManager=void 0,this._section=void 0,this._markInteractionInterface=void 0,this._sectionInteractionInterface=void 0}setId(t){this._id=t}linkEventManager(t){this._eventManager=t}loadSection(t){this._section=t}marks(){return this._markInteractionInterface}section(){return this._sectionInteractionInterface}}class Bn{constructor(t,e){this._interactionManager=t,this._handlers={};for(const t in e)this._handlers[t]=new e[t](this._interactionManager)}_getHandler(t){const e=Fn(t);return this._handlers[e]}}const Fn=t=>In(t)+"Handler";function qn(t){const e=t.attributes,n=Vn(e);return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function Gn({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Wn(t,i),a=Vn(s);a.key=i,a.index=o,a.attributes=s,a.markType="Point",a.layerId=n,r.push(a)}return r}function Vn(t){const e=t.pixelGeometry.coordinates[0],n=t.pixelGeometry.coordinates[1];return{minX:e-t.radius,maxX:e+t.radius,minY:n-t.radius,maxY:n+t.radius}}function Wn(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}function Kn(){return new Jn}function Jn(){this.reset()}Jn.prototype={constructor:Jn,reset:function(){this.s=this.t=0},add:function(t){Un(Zn,t,this.t),Un(this,Zn.s,this.s),this.s?this.t+=Zn.t:this.s=Zn.t},valueOf:function(){return this.s}};var Zn=new Jn;function Un(t,e,n){var r=t.s=e+n,o=r-e,i=r-o;t.t=e-i+(n-o)}var Qn=2*Math.PI,tr=Math.abs,er=Math.sqrt;function nr(){}function rr(t,e){t&&ir.hasOwnProperty(t.type)&&ir[t.type](t,e)}var or={Feature:function(t,e){rr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)rr(n[r].geometry,e)}},ir={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){sr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)sr(n[r],e,0)},Polygon:function(t,e){ar(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)ar(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)rr(n[r],e)}};function sr(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();++o<i;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function ar(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)sr(t[n],e,1);e.polygonEnd()}function cr(t,e){t&&or.hasOwnProperty(t.type)?or[t.type](t,e):rr(t,e)}function ur(t){return t}var lr,hr,fr,dr,pr=Kn(),yr=Kn(),mr={point:nr,lineStart:nr,lineEnd:nr,polygonStart:function(){mr.lineStart=gr,mr.lineEnd=br},polygonEnd:function(){mr.lineStart=mr.lineEnd=mr.point=nr,pr.add(tr(yr)),yr.reset()},result:function(){var t=pr/2;return pr.reset(),t}};function gr(){mr.point=vr}function vr(t,e){mr.point=_r,lr=fr=t,hr=dr=e}function _r(t,e){yr.add(dr*t-fr*e),fr=t,dr=e}function br(){_r(lr,hr)}var xr=1/0,Mr=xr,wr=-xr,Tr=wr,kr={point:function(t,e){t<xr&&(xr=t);t>wr&&(wr=t);e<Mr&&(Mr=e);e>Tr&&(Tr=e)},lineStart:nr,lineEnd:nr,polygonStart:nr,polygonEnd:nr,result:function(){var t=[[xr,Mr],[wr,Tr]];return wr=Tr=-(Mr=xr=1/0),t}};var Er,Cr,Pr,Or,Ar=0,Sr=0,Ir=0,$r=0,Nr=0,Hr=0,Lr=0,Rr=0,zr=0,jr={point:Dr,lineStart:Yr,lineEnd:Fr,polygonStart:function(){jr.lineStart=qr,jr.lineEnd=Gr},polygonEnd:function(){jr.point=Dr,jr.lineStart=Yr,jr.lineEnd=Fr},result:function(){var t=zr?[Lr/zr,Rr/zr]:Hr?[$r/Hr,Nr/Hr]:Ir?[Ar/Ir,Sr/Ir]:[NaN,NaN];return Ar=Sr=Ir=$r=Nr=Hr=Lr=Rr=zr=0,t}};function Dr(t,e){Ar+=t,Sr+=e,++Ir}function Yr(){jr.point=Xr}function Xr(t,e){jr.point=Br,Dr(Pr=t,Or=e)}function Br(t,e){var n=t-Pr,r=e-Or,o=er(n*n+r*r);$r+=o*(Pr+t)/2,Nr+=o*(Or+e)/2,Hr+=o,Dr(Pr=t,Or=e)}function Fr(){jr.point=Dr}function qr(){jr.point=Vr}function Gr(){Wr(Er,Cr)}function Vr(t,e){jr.point=Wr,Dr(Er=Pr=t,Cr=Or=e)}function Wr(t,e){var n=t-Pr,r=e-Or,o=er(n*n+r*r);$r+=o*(Pr+t)/2,Nr+=o*(Or+e)/2,Hr+=o,Lr+=(o=Or*t-Pr*e)*(Pr+t),Rr+=o*(Or+e),zr+=3*o,Dr(Pr=t,Or=e)}function Kr(t){this._context=t}Kr.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Qn)}},result:nr};var Jr,Zr,Ur,Qr,to,eo=Kn(),no={point:nr,lineStart:function(){no.point=ro},lineEnd:function(){Jr&&oo(Zr,Ur),no.point=nr},polygonStart:function(){Jr=!0},polygonEnd:function(){Jr=null},result:function(){var t=+eo;return eo.reset(),t}};function ro(t,e){no.point=oo,Zr=Qr=t,Ur=to=e}function oo(t,e){Qr-=t,to-=e,eo.add(er(Qr*Qr+to*to)),Qr=t,to=e}function io(){this._string=[]}function so(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ao(t,e){var n,r,o=4.5;function i(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),cr(t,n(r))),r.result()}return i.area=function(t){return cr(t,n(mr)),mr.result()},i.measure=function(t){return cr(t,n(no)),no.result()},i.bounds=function(t){return cr(t,n(kr)),kr.result()},i.centroid=function(t){return cr(t,n(jr)),jr.result()},i.projection=function(e){return arguments.length?(n=null==e?(t=null,ur):(t=e).stream,i):t},i.context=function(t){return arguments.length?(r=null==t?(e=null,new io):new Kr(e=t),"function"!=typeof o&&r.pointRadius(o),i):e},i.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),i):o},i.projection(t).context(e)}function co(t){return null==t||t.constructor===Number&&!isFinite(t)}function uo(t){return void 0!==t}function lo(t){return void 0===t}function ho(t){const e=fo.bounds(t);return{x:[e[0][0],e[1][0]],y:[e[0][1],e[1][1]]}}io.prototype={_radius:4.5,_circle:so(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=so(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const fo=ao();function po(t){return t.constructor===Array}function yo(t){return t.constructor===Object&&"Polygon"===t.type}function mo(t){return t.constructor===Object&&"MultiPolygon"===t.type}function go(t){if(po(t))return vo(t);if(yo(t))return _o(t);if(mo(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=_o(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function vo(t){return Math.abs(function(t){let e=0;for(let n=0,r=t.length;n<r;n++){const r=t[n][0],o=t[n===t.length-1?0:n+1][1],i=t[n===t.length-1?0:n+1][0],s=t[n][1];e+=r*o*.5,e-=i*s*.5}return e}(t))}function _o(t){let e=vo(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){e-=vo(t.coordinates[n])}return e}function bo(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function xo(t){let e=0;for(let n=0;n<t.length-1;n++){e+=bo(t[n],t[n+1])}return e}function Mo(t){return po(t)?wo(t):yo(t)?wo(t.coordinates[0]):mo(t)?function(t){let e=0,n=0,r=0;for(let o=0;o<t.coordinates.length;o++){const i=t.coordinates[o],s=wo(i[0]),a=go(i[0]);e+=s[0]*a,n+=s[1]*a,r+=a}return[e/r,n/r]}(t):function(t){return t.constructor===Object&&"LineString"===t.type}(t)?wo(t.coordinates):function(t){return t.constructor===Object&&"MultiLineString"===t.type}(t)?function(t){let e=0,n=0,r=0;for(let o=0;o<t.coordinates.length;o++){const i=t.coordinates[o],s=wo(i),a=xo(i);e+=s[0]*a,n+=s[1]*a,r+=a}return[e/r,n/r]}(t):void 0}function wo(t){const e=t.length,n=t[0];let r,o,i,s=0,a=0,c=0;for(let u=0,l=e-1;u<e;l=u++)r=t[u],o=t[l],i=(r[0]-n[0])*(o[1]-n[1])-(o[0]-n[0])*(r[1]-n[1]),s+=i,a+=(r[0]+o[0]-2*n[0])*i,c+=(r[1]+o[1]-2*n[1])*i;return i=3*s,[a/i+n[0],c/i+n[1]]}function To(t,e,n){return function(t,e){const n=function(t,e){const n=t[0],r=t[1],o=e[0][0],i=e[0][1],s=e[1][0],a=e[1][1],c=s-o,u=a-i,l=(n-o)*c+(r-i)*u,h=c*c+u*u;let f,d,p=-1;0!==h&&(p=l/h);p<0?(f=o,d=i):p>1?(f=s,d=a):(f=o+p*c,d=i+p*u);return[f,d]}(t,e);return bo(t,n)}(t,e)<n/2}var ko=function(t,e,n){var r=t*e,o=Eo*t,i=o-(o-t),s=t-i,a=Eo*e,c=a-(a-e),u=e-c,l=s*u-(r-i*c-s*c-i*u);if(n)return n[0]=l,n[1]=r,n;return[l,r]},Eo=+(Math.pow(2,27)+1);var Co=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,o=t-(n-r)+(e-r);if(o)return[o,n];return[n]}(t[0],e[0]);var o,i,s=new Array(n+r),a=0,c=0,u=0,l=Math.abs,h=t[c],f=l(h),d=e[u],p=l(d);f<p?(i=h,(c+=1)<n&&(h=t[c],f=l(h))):(i=d,(u+=1)<r&&(d=e[u],p=l(d)));c<n&&f<p||u>=r?(o=h,(c+=1)<n&&(h=t[c],f=l(h))):(o=d,(u+=1)<r&&(d=e[u],p=l(d)));var y,m,g=o+i,v=g-o,_=i-v,b=_,x=g;for(;c<n&&u<r;)f<p?(o=h,(c+=1)<n&&(h=t[c],f=l(h))):(o=d,(u+=1)<r&&(d=e[u],p=l(d))),(_=(i=b)-(v=(g=o+i)-o))&&(s[a++]=_),b=x-((y=x+g)-(m=y-x))+(g-m),x=y;for(;c<n;)(_=(i=b)-(v=(g=(o=h)+i)-o))&&(s[a++]=_),b=x-((y=x+g)-(m=y-x))+(g-m),x=y,(c+=1)<n&&(h=t[c]);for(;u<r;)(_=(i=b)-(v=(g=(o=d)+i)-o))&&(s[a++]=_),b=x-((y=x+g)-(m=y-x))+(g-m),x=y,(u+=1)<r&&(d=e[u]);b&&(s[a++]=b);x&&(s[a++]=x);a||(s[a++]=0);return s.length=a,s};var Po=function(t,e,n){var r=t+e,o=r-t,i=e-o,s=t-(r-o);if(n)return n[0]=s+i,n[1]=r,n;return[s+i,r]};var Oo=function(t,e){var n=t.length;if(1===n){var r=ko(t[0],e);return r[0]?r:[r[1]]}var o=new Array(2*n),i=[.1,.1],s=[.1,.1],a=0;ko(t[0],e,i),i[0]&&(o[a++]=i[0]);for(var c=1;c<n;++c){ko(t[c],e,s);var u=i[1];Po(u,s[0],i),i[0]&&(o[a++]=i[0]);var l=s[1],h=i[1],f=l+h,d=h-(f-l);i[1]=f,d&&(o[a++]=d)}i[1]&&(o[a++]=i[1]);0===a&&(o[a++]=0);return o.length=a,o};var Ao=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,o=t-(n-r)+(e-r);if(o)return[o,n];return[n]}(t[0],-e[0]);var o,i,s=new Array(n+r),a=0,c=0,u=0,l=Math.abs,h=t[c],f=l(h),d=-e[u],p=l(d);f<p?(i=h,(c+=1)<n&&(h=t[c],f=l(h))):(i=d,(u+=1)<r&&(d=-e[u],p=l(d)));c<n&&f<p||u>=r?(o=h,(c+=1)<n&&(h=t[c],f=l(h))):(o=d,(u+=1)<r&&(d=-e[u],p=l(d)));var y,m,g=o+i,v=g-o,_=i-v,b=_,x=g;for(;c<n&&u<r;)f<p?(o=h,(c+=1)<n&&(h=t[c],f=l(h))):(o=d,(u+=1)<r&&(d=-e[u],p=l(d))),(_=(i=b)-(v=(g=o+i)-o))&&(s[a++]=_),b=x-((y=x+g)-(m=y-x))+(g-m),x=y;for(;c<n;)(_=(i=b)-(v=(g=(o=h)+i)-o))&&(s[a++]=_),b=x-((y=x+g)-(m=y-x))+(g-m),x=y,(c+=1)<n&&(h=t[c]);for(;u<r;)(_=(i=b)-(v=(g=(o=d)+i)-o))&&(s[a++]=_),b=x-((y=x+g)-(m=y-x))+(g-m),x=y,(u+=1)<r&&(d=-e[u]);b&&(s[a++]=b);x&&(s[a++]=x);a||(s[a++]=0);return s.length=a,s};var So=wn((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var o=n[r-1]=new Array(t.length-1),i=0,s=0;i<t.length;++i)i!==e&&(o[s++]=t[r][i]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],i=0;i<t.length;++i)o.push(["scale(",n(r(e(t,i))),",",(s=i,1&s?"-":""),t[0][i],")"].join(""));return o;var s}function o(t){for(var o=[],i=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],c=0;c<t;++c)0==(1&c)?o.push.apply(o,r(e(s,c))):i.push.apply(i,r(e(s,c))),a.push("m"+c);var u=n(o),l=n(i),h="orientation"+t+"Exact",f=["function ",h,"(",a.join(),"){var p=",u,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(Co,ko,Oo,Ao)}var i=o(3),s=o(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,o=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=o-s;if(o>0){if(s<=0)return a;r=o+s}else{if(!(o<0))return a;if(s>=0)return a;r=-(o+s)}var c=33306690738754716e-32*r;return a>=c||a<=-c?a:i(t,e,n)},function(t,e,n,r){var o=t[0]-r[0],i=e[0]-r[0],a=n[0]-r[0],c=t[1]-r[1],u=e[1]-r[1],l=n[1]-r[1],h=t[2]-r[2],f=e[2]-r[2],d=n[2]-r[2],p=i*l,y=a*u,m=a*c,g=o*l,v=o*u,_=i*c,b=h*(p-y)+f*(m-g)+d*(v-_),x=7771561172376103e-31*((Math.abs(p)+Math.abs(y))*Math.abs(h)+(Math.abs(m)+Math.abs(g))*Math.abs(f)+(Math.abs(v)+Math.abs(_))*Math.abs(d));return b>x||-b>x?b:s(t,e,n,r)}];function c(t){var e=a[t.length];return e||(e=a[t.length]=o(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(o(a.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[c].concat(a)),r=0;r<=5;++r)t.exports[r]=a[r]}()})),Io=function(t,e){for(var n=e[0],r=e[1],o=t.length,i=1,s=o,a=0,c=o-1;a<s;c=a++){var u=t[a],l=t[c],h=u[1],f=l[1];if(f<h){if(f<r&&r<h){if(0===(y=So(u,l,e)))return 0;i^=0<y|0}else if(r===h){var d=(p=t[(a+1)%o])[1];if(h<d){if(0===(y=So(u,l,e)))return 0;i^=0<y|0}}}else if(h<f){if(h<r&&r<f){if(0===(y=So(u,l,e)))return 0;i^=y<0|0}else if(r===h){var p=t[(a+1)%o];if((d=p[1])<h){var y;if(0===(y=So(u,l,e)))return 0;i^=y<0|0}}}else if(r===h){var m=Math.min(u[0],l[0]),g=Math.max(u[0],l[0]);if(0===a){for(;c>0;){var v=(c+o-1)%o;if((x=t[v])[1]!==r)break;var _=x[0];m=Math.min(m,_),g=Math.max(g,_),c=v}if(0===c)return m<=n&&n<=g?0:1;s=c+1}for(var b=t[(c+o-1)%o][1];a+1<s;){var x;if((x=t[a+1])[1]!==r)break;_=x[0];m=Math.min(m,_),g=Math.max(g,_),a+=1}if(m<=n&&n<=g)return 0;var M=t[(a+1)%o][1];n<m&&b<r!=M<r&&(i^=1)}}return 2*i-1};function $o(t,e){switch(e.type){case"Polygon":return function(t,e){const n=e.coordinates;return No(t,n)}(t,e);case"MultiPolygon":return function(t,e){const n=e.coordinates;for(let e=0;e<n.length;e++){const r=n[e];if(No(t,r))return!0}return!1}(t,e)}}function No(t,e){if(!Ho(t,e[0]))return!1;for(let n=1;n<e.length;n++){if(Ho(t,e[n]))return!1}return!0}function Ho(t,e){return-1===Io(e,t)}const Lo=new Error("Invalid input");function Ro(t){if("coordinates"in t)return"geojson";if("x"in t&&"y"in t)return"Point"!==t.type&&function(t,e){if(void 0!==t&&void 0!==e&&t.constructor===Array&&e.constructor===Array&&t.length===e.length&&t.length>1)return;throw Lo}(t.x,t.y),"xy";throw Lo}function zo([t,e],n){const r=10**n;return[Math.round(t*r)/r,Math.round(e*r)/r]}function jo(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function Do(t,e,n){return!n.simplify||t.length<3?function(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(e(t[r]));return n}(t,e):!0===n.simplify?function(t,e,n=1){const r=[e(t[0])];let o,i=r[0];for(let s=1;s<t.length-1;s++){o=e(t[s]),jo(i,o)>=n&&(r.push(o),i=o)}const s=e(t[t.length-1]);return r.push(s),r}(t,e,n.simplificationTreshold):void 0}function Yo(t,e,n){const r=[];for(let o=0;o<t.length;o++)r.push(Do(t[o],e,n));return r}function Xo({x:t,y:e},n,r){return!r.simplify||t.length<3?function(t,e,n){const r=[];for(let o=0;o<t.length;o++)r.push(n([t[o],e[o]]));return r}(t,e,n):!0===r.simplify?function(t,e,n,r=1){const o=[n([t[0],e[0]])];let i,s=o[0];for(let a=1;a<t.length-1;a++){i=n([t[a],e[a]]),jo(s,i)>=r&&(o.push(i),s=i)}const a=t.length-1,c=n([t[a],e[a]]);return o.push(c),o}(t,e,n,r.simplificationTreshold):void 0}const Bo={transformPoint:function(t,e){const n=Ro(t);if("geojson"===n)return{type:"Point",coordinates:e(t.coordinates)};if("xy"===n)return{type:"Point",coordinates:e([t.x,t.y])}},transformMultiPoint:function(t,e){const n=Ro(t);if("geojson"===n)return{type:"MultiPoint",coordinates:Do(t.coordinates,e,{})};if("xy"===n)return{type:"MultiPoint",coordinates:Xo(t,e,{})}},transformLineString:function(t,e,n){const r=Ro(t);if("geojson"===r)return{type:"LineString",coordinates:Do(t.coordinates,e,n)};if("xy"===r)return{type:"LineString",coordinates:Xo(t,e,n)}},transformMultiLineString:function(t,e,n){const r=Ro(t);if("geojson"===r)return{type:"MultiLineString",coordinates:Yo(t.coordinates,e,n)};if("xy"===r)return{type:"MultiLineString",coordinates:[Xo(t,e,n)]}},transformPolygon:function(t,e,n){const r=Ro(t);if("geojson"===r)return{type:"Polygon",coordinates:Yo(t.coordinates,e,n)};if("xy"===r)return{type:"Polygon",coordinates:[Xo(t,e,n)]}},transformMultiPolygon:function(t,e,n){const r=Ro(t);if("geojson"===r){const r=t.coordinates,o=[];for(let t=0;t<r.length;t++)o.push(Yo(r[t],e,n));return{type:"MultiPolygon",coordinates:o}}if("xy"===r)return{type:"MultiPolygon",coordinates:[[Xo(t,e,n)]]}}};function Fo(t,e,n={}){const r="transform"+t.type,o=n.decimals?t=>zo(e(t),n.decimals):e;return Bo[r](t,o,n)}function qo(t,e,n,r,{interpolationTreshold:o=1}){const i=n(t),s=n(e),a=function({finalRangeX:t,finalRangeY:e}){const n=Math.abs(t[0]-t[1])/2,r=Math.abs(e[0]-e[1])/2;return Math.max(n,r)}(r);if(function(t,e,n){return Math.abs(t[0]-e[0])*n<1}(i,s,a))return 0;const c=function({a:t,b:e,interval:n}){const[r,o]=n;if(0===t)return(o-r)*e;const i=t**2,s=e**2;return(i*Math.asinh((t*o+e)/t)+(t*o+e)*Math.sqrt(i*o**2+2*t*e*o+s+i)-i*Math.asinh((t*r+e)/t)+(-t*r-e)*Math.sqrt(i*r**2+2*t*e*r+s+i))/(2*t)}(function(t,e){const n=t[0]<e[0]?[t,e]:[e,t],[[r,o],[i,s]]=n,a=(s-o)/(i-r);return{a:a,b:o-r*a,interval:[r,i]}}(i,s))*a/o;return Math.floor(c)}function Go(t,e,n,r,o){const i=function(t,e){const n=e[0]-t[0],r=e[1]-t[1];return e=>[t[0]+e*n,t[1]+e*r]}(e,n);for(let e=0;e<o;e++){const n=(e+1)/(o+1);t.push(r(i(n)))}}function Vo(t,e,n,r){if(!r.simplify||t.length<3)return function(t,e,n,r){const o=[],{scaleTransformation:i,postScaleTransformation:s,toPolar:a}=n;for(let n=0;n<t.length-1;n++){const c=t[n],u=t[n+1],l=i(c),h=i(u);o.push(s(l));const f=qo(l,h,a,e,r);f>0&&Go(o,l,h,s,f)}const c=t[t.length-1];return o.push(s(i(c))),o}(t,e,n,r);r.simplify}function Wo(t,e,n,r){const o=[];for(let i=0;i<t.length;i++)o.push(Vo(t[i],e,n,r));return o}function Ko({x:t,y:e},n,r,o){if(!o.simplify||t.length<3)return function(t,e,n,r,o){const i=[],{scaleTransformation:s,postScaleTransformation:a,toPolar:c}=r;for(let r=0;r<t.length-1;r++){const u=[t[r],e[r]],l=[t[r+1],e[r+1]],h=s(u),f=s(l);i.push(a(h));const d=qo(h,f,c,n,o);d>0&&Go(i,h,f,a,d)}const u=t.length-1,l=[t[u],e[u]];return i.push(a(s(l))),i}(t,e,n,r,o);o.simplify}const Jo={interpolateLineString:function(t,e,n,r){const o=Ro(t);if("geojson"===o)return{type:"LineString",coordinates:Vo(t.coordinates,e,n,r)};if("xy"===o)return{type:"LineString",coordinates:Ko(t,e,n,r)}},interpolateMultiLineString:function(t,e,n,r){const o=Ro(t);if("geojson"===o)return{type:"MultiLineString",coordinates:Wo(t.coordinates,e,n,r)};if("xy"===o)return{type:"MultiLineString",coordinates:[Ko(t,e,n,r)]}},interpolatePolygon:function(t,e,n,r){const o=Ro(t);if("geojson"===o)return{type:"Polygon",coordinates:Wo(t.coordinates,e,n,r)};if("xy"===o)return{type:"Polygon",coordinates:[Ko(t,e,n,r)]}},interpolateMultiPolygon:function(t,e,n,r){const o=Ro(t);if("geojson"===o){const o=t.coordinates,i=[];for(let t=0;t<o.length;t++)i.push(Wo(o[t],e,n,r));return{type:"MultiPolygon",coordinates:i}}if("xy"===o)return{type:"MultiPolygon",coordinates:[[Ko(t,e,n,r)]]}}};function Zo(t,e,n,r={}){const o="interpolate"+t.type,{scaleTransformation:i,postScaleTransformation:s}=n,a=void 0!==r.decimals?t=>zo(s(t),r.decimals):s,c=rn().domain(e.rangeX).range([0,2*Math.PI]),u=rn().domain(e.rangeY).range([0,1]),l={scaleTransformation:i,postScaleTransformation:a,toPolar:([t,e])=>[c(t),u(e)]};return Jo[o](t,e,l,r)}var Uo=ti,Qo=ti;function ti(t,e,n){n=n||2;var r,o,i,s,a,c,u,l=e&&e.length,h=l?e[0]*n:t.length,f=ei(t,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=function(t,e,n,r){var o,i,s,a,c,u=[];for(o=0,i=e.length;o<i;o++)s=e[o]*r,a=o<i-1?e[o+1]*r:t.length,(c=ei(t,s,a,r,!1))===c.next&&(c.steiner=!0),u.push(fi(c));for(u.sort(ci),o=0;o<u.length;o++)ui(u[o],n),n=ni(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=i=t[0],o=s=t[1];for(var p=n;p<h;p+=n)(a=t[p])<r&&(r=a),(c=t[p+1])<o&&(o=c),a>i&&(i=a),c>s&&(s=c);u=0!==(u=Math.max(i-r,s-o))?1/u:0}return ri(f,d,n,r,o,u),d}function ei(t,e,n,r,o){var i,s;if(o===ki(t,e,n,r)>0)for(i=e;i<n;i+=r)s=Mi(i,t[i],t[i+1],s);else for(i=n-r;i>=e;i-=r)s=Mi(i,t[i],t[i+1],s);return s&&mi(s,s.next)&&(wi(s),s=s.next),s}function ni(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!mi(r,r.next)&&0!==yi(r.prev,r,r.next))r=r.next;else{if(wi(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function ri(t,e,n,r,o,i,s){if(t){!s&&i&&function(t,e,n,r){var o=t;do{null===o.z&&(o.z=hi(o.x,o.y,e,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,n,r,o,i,s,a,c,u=1;do{for(n=t,t=null,i=null,s=0;n;){for(s++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ);e++);for(c=u;a>0||c>0&&r;)0!==a&&(0===c||!r||n.z<=r.z)?(o=n,n=n.nextZ,a--):(o=r,r=r.nextZ,c--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;n=r}i.nextZ=null,u*=2}while(s>1)}(o)}(t,r,o,i);for(var a,c,u=t;t.prev!==t.next;)if(a=t.prev,c=t.next,i?ii(t,r,o,i):oi(t))e.push(a.i/n),e.push(t.i/n),e.push(c.i/n),wi(t),t=c.next,u=c.next;else if((t=c)===u){s?1===s?ri(t=si(ni(t),e,n),e,n,r,o,i,2):2===s&&ai(t,e,n,r,o,i):ri(ni(t),e,n,r,o,i,1);break}}}function oi(t){var e=t.prev,n=t,r=t.next;if(yi(e,n,r)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(di(e.x,e.y,n.x,n.y,r.x,r.y,o.x,o.y)&&yi(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function ii(t,e,n,r){var o=t.prev,i=t,s=t.next;if(yi(o,i,s)>=0)return!1;for(var a=o.x<i.x?o.x<s.x?o.x:s.x:i.x<s.x?i.x:s.x,c=o.y<i.y?o.y<s.y?o.y:s.y:i.y<s.y?i.y:s.y,u=o.x>i.x?o.x>s.x?o.x:s.x:i.x>s.x?i.x:s.x,l=o.y>i.y?o.y>s.y?o.y:s.y:i.y>s.y?i.y:s.y,h=hi(a,c,e,n,r),f=hi(u,l,e,n,r),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&di(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&&yi(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&di(o.x,o.y,i.x,i.y,s.x,s.y,p.x,p.y)&&yi(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&di(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&&yi(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&di(o.x,o.y,i.x,i.y,s.x,s.y,p.x,p.y)&&yi(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function si(t,e,n){var r=t;do{var o=r.prev,i=r.next.next;!mi(o,i)&&gi(o,r,r.next,i)&&bi(o,i)&&bi(i,o)&&(e.push(o.i/n),e.push(r.i/n),e.push(i.i/n),wi(r),wi(r.next),r=t=i),r=r.next}while(r!==t);return ni(r)}function ai(t,e,n,r,o,i){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&pi(s,a)){var c=xi(s,a);return s=ni(s,s.next),c=ni(c,c.next),ri(s,e,n,r,o,i),void ri(c,e,n,r,o,i)}a=a.next}s=s.next}while(s!==t)}function ci(t,e){return t.x-e.x}function ui(t,e){if(e=function(t,e){var n,r=e,o=t.x,i=t.y,s=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=o&&a>s){if(s=a,a===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(o===s)return n;var c,u=n,l=n.x,h=n.y,f=1/0;r=n;do{o>=r.x&&r.x>=l&&o!==r.x&&di(i<h?o:s,i,l,h,i<h?s:o,i,r.x,r.y)&&(c=Math.abs(i-r.y)/(o-r.x),bi(r,t)&&(c<f||c===f&&(r.x>n.x||r.x===n.x&&li(n,r)))&&(n=r,f=c)),r=r.next}while(r!==u);return n}(t,e)){var n=xi(e,t);ni(e,e.next),ni(n,n.next)}}function li(t,e){return yi(t.prev,t,e.prev)<0&&yi(e.next,t,t.next)<0}function hi(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function fi(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function di(t,e,n,r,o,i,s,a){return(o-s)*(e-a)-(t-s)*(i-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(i-a)-(o-s)*(r-a)>=0}function pi(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&gi(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(bi(t,e)&&bi(e,t)&&function(t,e){var n=t,r=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(yi(t.prev,t,e.prev)||yi(t,e.prev,e))||mi(t,e)&&yi(t.prev,t,t.next)>0&&yi(e.prev,e,e.next)>0)}function yi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function mi(t,e){return t.x===e.x&&t.y===e.y}function gi(t,e,n,r){var o=_i(yi(t,e,n)),i=_i(yi(t,e,r)),s=_i(yi(n,r,t)),a=_i(yi(n,r,e));return o!==i&&s!==a||(!(0!==o||!vi(t,n,e))||(!(0!==i||!vi(t,r,e))||(!(0!==s||!vi(n,t,r))||!(0!==a||!vi(n,e,r)))))}function vi(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _i(t){return t>0?1:t<0?-1:0}function bi(t,e){return yi(t.prev,t,t.next)<0?yi(t,e,t.next)>=0&&yi(t,t.prev,e)>=0:yi(t,e,t.prev)<0||yi(t,t.next,e)<0}function xi(t,e){var n=new Ti(t.i,t.x,t.y),r=new Ti(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function Mi(t,e,n,r){var o=new Ti(t,e,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function wi(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ti(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ki(t,e,n,r){for(var o=0,i=e,s=n-r;i<n;i+=r)o+=(t[s]-t[i])*(t[i+1]+t[s+1]),s=i;return o}function Ei(t){return t}function Ci(t,e){var n=e.id,r=e.bbox,o=null==e.properties?{}:e.properties,i=Pi(t,e);return null==n&&null==r?{type:"Feature",properties:o,geometry:i}:null==r?{type:"Feature",id:n,properties:o,geometry:i}:{type:"Feature",id:n,bbox:r,properties:o,geometry:i}}function Pi(t,e){var n=function(t){if(null==t)return Ei;var e,n,r=t.scale[0],o=t.scale[1],i=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var c=2,u=t.length,l=new Array(u);for(l[0]=(e+=t[0])*r+i,l[1]=(n+=t[1])*o+s;c<u;)l[c]=t[c],++c;return l}}(t.transform),r=t.arcs;function o(t,e){e.length&&e.pop();for(var o=r[t<0?~t:t],i=0,s=o.length;i<s;++i)e.push(n(o[i],i));t<0&&function(t,e){for(var n,r=t.length,o=r-e;o<--r;)n=t[o],t[o++]=t[r],t[r]=n}(e,s)}function i(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)o(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function c(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=c(e.arcs);break;case"MultiPolygon":n=e.arcs.map(c);break;default:return null}return{type:r,coordinates:n}}(e)}function Oi(t,e){var n={},r={},o={},i=[],s=-1;function a(t,e){for(var r in t){var o=t[r];delete e[o.start],delete o.start,delete o.end,o.forEach((function(t){n[t<0?~t:t]=1})),i.push(o)}}return e.forEach((function(n,r){var o,i=t.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(o=e[++s],e[s]=n,e[r]=o)})),e.forEach((function(e){var n,i,s=function(e){var n,r=t.arcs[e<0?~e:e],o=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,o]:[o,n]}(e),a=s[0],c=s[1];if(n=o[a])if(delete o[n.end],n.push(e),n.end=c,i=r[c]){delete r[i.start];var u=i===n?n:n.concat(i);r[u.start=n.start]=o[u.end=i.end]=u}else r[n.start]=o[n.end]=n;else if(n=r[c])if(delete r[n.start],n.unshift(e),n.start=a,i=o[a]){delete o[i.end];var l=i===n?n:i.concat(n);r[l.start=i.start]=o[l.end=n.end]=l}else r[n.start]=o[n.end]=n;else r[(n=[e]).start=a]=o[n.end=c]=n})),a(o,r),a(r,o),e.forEach((function(t){n[t<0?~t:t]||i.push([t])})),i}function Ai(t,e){var n={},r=[],o=[];function i(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,o=t[r-1],i=0;++n<r;)e=o,o=t[n],i+=e[0]*o[1]-e[1]*o[0];return Math.abs(i)}(Pi(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,o.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:o.map((function(e){var r,o=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&o.push(t)}))}))})),(r=(o=Oi(t,o)).length)>1)for(var i,a,c=1,u=s(o[0]);c<r;++c)(i=s(o[c]))>u&&(a=o[0],o[0]=o[c],o[c]=a,u=i);return o})).filter((function(t){return t.length>0}))}}function Si(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function Ii(t){let e=0;for(let n=0;n<t.length-1;n++){e+=Si(t[n],t[n+1])}return e}function $i(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(e(t[r],r));return n}function Ni(t){const e=$i(t,(t,e)=>e);return e.sort((e,n)=>t[n]-t[e]),e}function Hi(t,e){return $i(e,e=>t[e])}function Li(t,e){if(0===t.length)return 0;for(let n=t.length-1;n>=0;n--){if(e<=t[n])return n}return 0}function Ri(t){return t.pop(),t}function zi(t){let e=t[0];return t.push(e),t}function ji(t,e){let n=Xi(t);return n=Ri(n),n=Yi(n,e,{ring:!0}),n=zi(n),n}function Di(t,e){return Yi(Xi(t),e,{ring:!1})}function Yi(t,e,{ring:n}){const r=function(t,e){const n=[],r=e?t.length:t.length-1;for(let e=0;e<r;e++){const r=Bi(t,e);n.push(Si(r[0],r[1]))}return n}(t,n);let o=Ni(r);for(let n=0;n<e;n++){const e=o[0],n=Bi(t,e),i=r[e],s=Fi(n),a=i/2;o.shift(),t[e]=null,r[e]=null,o=qi(o,r,e,a),t[e]=s[0][0],t.splice(e+1,0,s[1][0]),r[e]=a,r.splice(e+1,0,a)}return t}function Xi(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].slice(0));return e}function Bi(t,e){return[t[e],t[(e+1)%t.length]]}function Fi(t){const e=Oe(t[0],t[1])(.5);return[[t[0],e],[e,t[1]]]}function qi(t,e,n,r){let o=!1;for(let i=0;i<t.length;i++){const s=t[i];s>n&&(t[i]=t[i]+1);const a=e[s];if(null!==a&&r>=a){t.splice(i,0,n),t.splice(i+1,0,n+1),o=!0;break}}return o||(t.push(n),t.push(n+1)),t}function Gi(t){return t.constructor===Array}function Vi(t){return t.constructor===Object&&"Polygon"===t.type}function Wi(t){return t.constructor===Object&&"MultiPolygon"===t.type}function Ki(t){return Vi(t)||Wi(t)}function Ji(t){return function(t){return t.constructor===Object&&"LineString"===t.type}(t)||function(t){return t.constructor===Object&&"MultiLineString"===t.type}(t)}function Zi(t){if(Gi(t))return Ui(t);if(Vi(t))return ts(t);if(Wi(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=ts(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function Ui(t){return Math.abs(Qi(t))}function Qi(t){let e=0;for(let n=0,r=t.length;n<r;n++){e+=t[n][0]*t[n===t.length-1?0:n+1][1]*.5,e-=t[n===t.length-1?0:n+1][0]*t[n][1]*.5}return e}function ts(t){let e=Ui(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){e-=Ui(t.coordinates[n])}return e}function es(t,e){return t.length>9?$i(t,(t,e)=>e):function(t,e){const n=$i(t,Zi),r=$i(e,Zi),o=Ni(n),i=Ni(r),s={};for(let t=0;t<i.length;t++){const e=o[t],n=i[t];s[n]=e}const a=[];for(let t=0;t<e.length;t++)a.push(s[t]);return a}(t,e)}function ns(t){return Gi(t)?rs(t):Vi(t)?rs(t.coordinates[0]):Wi(t)?function(t){let e=0,n=0,r=0;for(let o=0;o<t.coordinates.length;o++){const i=t.coordinates[o],s=rs(i[0]),a=Zi(i[0]);e+=s[0]*a,n+=s[1]*a,r+=a}return[e/r,n/r]}(t):void 0}function rs(t){const e=t.length,n=t[0];let r,o,i,s=0,a=0,c=0;for(let u=0,l=e-1;u<e;l=u++)r=t[u],o=t[l],i=(r[0]-n[0])*(o[1]-n[1])-(o[0]-n[0])*(r[1]-n[1]),s+=i,a+=(r[0]+o[0]-2*n[0])*i,c+=(r[1]+o[1]-2*n[1])*i;return i=3*s,[a/i+n[0],c/i+n[1]]}function os(t,e){const n=t.coordinates[0],r=e.coordinates[0],[o,i]=is(n,r);return function(t,e){return 1===t.coordinates.length&&1===e.coordinates.length}(t,e)?function(t,e,n,r){const o=Oe(n,r);return function(n){if(0===n)return t;if(1===n)return e;return{type:"Polygon",coordinates:[o(n)]}}}(t,e,o,i):function(t,e,n,r,o){const i=Oe(n,r);return function(n){if(0===n)return t;if(1===n)return e;return{type:"Polygon",coordinates:[i(n),...$i(o,t=>t(n))]}}}(t,e,o,i,function(t,e){let n=[];const r=Math.min(t.coordinates.length,e.coordinates.length)-1;r>0&&(n=n.concat(function(t,e,n){const r=[],o=ss(t,n),i=ss(e,n),s=$i(es(o,i),t=>o[t]);for(let t=0;t<n;t++){const e=s[t],n=i[t],[o,a]=is(e,n),c=Oe(o,a);r.push(c)}return r}(t,e,r)));const o=t.coordinates.length-e.coordinates.length;o>0&&(n=n.concat(as(t,o)));o<0&&(n=n.concat(function(t,e){return $i(as(t,e),t=>e=>t(1-e))}(e,-o)));return n}(t,e))}function is(t,e){const n=t.length-e.length;return n>0&&(e=ji(e,n)),n<0&&(t=ji(t,-n)),[function(t,e){let n=Xi(t);n=Ri(n);const r=n.length;let o,i,s,a=1/0;for(let t=0;t<r;t++)i=0,e.forEach((e,o)=>{const s=Si(n[(t+o)%r],e);i+=s*s}),i<a&&(a=i,o=t);return o&&(s=n.splice(0,o),n.splice(n.length,0,...s)),n=zi(n),n}(t,e),e]}function ss(t,e){const n=[];for(let r=1;r<=e;r++)n.push(t.coordinates[r]);return n}function as(t,e){const n=[];for(let r=t.coordinates.length-e;r<t.coordinates.length;r++){const e=t.coordinates[r],o=cs(ns(e)),[i,s]=is(e,o);n.push(Oe(i,s))}return n}function cs([t,e]){const n=t-1e-6,r=t+1e-6,o=e-1e-6,i=e+1e-6;return[[n,o],[n,i],[r,i],[r,o],[n,o]]}function us(t,e){const n=t[e],r=t[e+1],o=t[e+2];return[[n,r],[r,o],[o,n]]}function ls(t){return t[0]<t[1]?t.join(","):t[1]+","+t[0]}function hs(t,e){return[t[2*e],t[2*e+1]]}function fs(t,e){return{type:"Polygon",area:t,arcs:[e]}}function ds(t,e){return Math.abs(Zi($i(e,e=>hs(t,e[0]))))}ti.deviation=function(t,e,n,r){var o=e&&e.length,i=o?e[0]*n:t.length,s=Math.abs(ki(t,0,i,n));if(o)for(var a=0,c=e.length;a<c;a++){var u=e[a]*n,l=a<c-1?e[a+1]*n:t.length;s-=Math.abs(ki(t,u,l,n))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,d=r[a+1]*n,p=r[a+2]*n;h+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},ti.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var s=0;s<e;s++)n.vertices.push(t[o][i][s]);o>0&&(r+=t[o-1].length,n.holes.push(r))}return n},Uo.default=Qo;const ps=Ht(t=>t.area).left;function ys(t,e){const n=t.objects.triangles.geometries;for(;n.length>e;)r();if(e>n.length)throw new RangeError("Can't collapse topology into "+e+" pieces.");return $i(function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Ci(t,e)}))}:Ci(t,e)}(t,t.objects.triangles).features,t=>t.geometry);function r(){const e=n[0],r=function(t){const e=t[0].arcs[0].map(t=>t<0?~t:t);let n;for(let r=1;r<t.length;r++){const o=t[r].arcs[0].map(t=>t<0?~t:t);if(e.some(t=>o.includes(t))){n=r;break}}return n}(n),o=n[r],i=Ai(t,[e,o]);i.area=e.area+o.area,i.type="Polygon",i.arcs=i.arcs[0],n.splice(r,1),n.shift(),n.splice(ps(n,i.area),0,i)}}function ms(t){const e=t.coordinates[0][0],n=t.coordinates[0][1],r=t.coordinates[0][2],o=Oe(e,n)(.5);return[gs([e,o,r,e]),gs([n,r,o,n])]}function gs(t){return{type:"Polygon",coordinates:[t]}}function vs(t,e){if(e<2)throw new Error("Cannot cut polygon in less than 2 pieces");const n=Uo.flatten(t.coordinates),r=Uo(n.vertices,n.holes,2),o=function(t){return t.length/3}(r);if(o>=e){return ys(function(t,e){const n={},r={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};for(let o=0;o<e.length;o+=3){const i=[],s=us(e,o);s.forEach(e=>{const o=ls(e),s=$i(e,e=>hs(t,e));o in n?i.push(~n[o]):(i.push(n[o]=r.arcs.length),r.arcs.push(s))});const a=fs(ds(t,s),i);r.objects.triangles.geometries.push(a)}return r.objects.triangles.geometries.sort((t,e)=>t.area-e.area),r}(n.vertices,r),e)}if(o<e){return function(t,e){const n=$i(t,Zi),r=Ni(n),o=Hi(n,r),i=Hi(t,r);for(;i.length<e;){o.shift();const t=ms(i.shift()),e=$i(t,Zi);for(let n=0;n<t.length;n++){const r=e[n],s=t[n],a=Li(o,r);o.splice(a,0,r),i.splice(a,0,s)}}return i}(function(t,e){const n=[];for(let r=0;r<e.length;r+=3){const o=us(e,r);let i=$i(o,e=>hs(t,e[0]));i.push(hs(t,o[0][0])),Qi(i)<0&&(i=i.reverse()),n.push({type:"Polygon",coordinates:[i]})}return n}(n.vertices,r),e)}}function _s(t,e){if(e<1)throw bs;const n=xs($i(t,Zi),e);let r=[];for(let e=0;e<t.length;e++){const o=t[e],i=n[e];if(0===i&&r.push(o),i>0){const t=i+1;r=r.concat(vs(o,t))}}return r}const bs=new Error("Number of desired additional polygons must be larger than 0");function xs(t,e){const n=[];let r=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}(t);for(let o=0;o<t.length;o++){const i=t[o],s=Math.round(i/r*e);n.push(s),r-=i,e-=s}return n}function Ms(t){const e=[];for(const n of t.coordinates){const t={type:"Polygon",coordinates:void 0};t.coordinates=n,e.push(t)}return e}function ws(t,e,n,r){const o=es($i(n,t=>t.coordinates[0]),$i(r,t=>t.coordinates[0]));n=$i(o,t=>n[t]);const i=[];for(let t=0;t<n.length;t++){const e=n[t],o=r[t];i.push(os(e,o))}return function(n){return 0===n?t:1===n?e:function(t){const e={type:"MultiPolygon",coordinates:[]};for(const n of t)if("Polygon"===n.type&&e.coordinates.push(n.coordinates),"MultiPolygon"===n.type)for(const t of n.coordinates)e.coordinates.push(t);return e}($i(i,t=>t(n)))}}function Ts(t,e){const n=Ms(t);let r=[e];const o=n.length;return o-1>0&&(r=vs(e,o)),ws(t,e,n,r)}function ks(t,e){const[n,r]=Es(t.coordinates,e.coordinates);return function(t,e,n,r){const o=Oe(n,r);return function(n){return 0===n?t:1===n?e:{type:"LineString",coordinates:o(n)}}}(t,e,n,r)}function Es(t,e){const n=t.length-e.length;let r=t,o=e;return n>0&&(o=Di(e,n)),n<0&&(r=Di(t,-n)),r=function(t,e){const n=Cs(t,e),r=Xi(t).reverse(),o=Cs(r,e);return n<=o?t:r}(r,o),[r,o]}function Cs(t,e){let n=0;for(let r=0;r<t.length;r++)n+=Si(t[r],e[r]);return n}function Ps(t,e,n){return function(t,e,n){return[t[0]+e[0]*n,t[1]+e[1]*n]}(t,function(t,e){const n=Si(t,e),r=e[0]-t[0],o=e[1]-t[1];return[r/n,o/n]}(t,e),n)}function Os(t,e){const n=t.coordinates.length,r=As(e.coordinates,n);return Ns(t,e,$s(t.coordinates,r))}function As(t,e){const n=[],r=Ii(t)/e,o=t.length-1;let i=[],s=0;for(let e=0;e<o;e++){const o=t[e];i.push(o);const a=t[e+1],c=Si(o,a),u=s+c;if(u<r&&(s+=c),u>=r){const t=Ss(o,a,s,r,Math.floor(u/r));i=i.concat(t),n.push(i);const e=t[t.length-1];i=Is(e,a)?[]:[e],s=Si(e,a)}}return n}function Ss(t,e,n,r,o){const i=[];for(let s=1;s<=o;s++)i.push(Ps(t,e,r*s-n));return i}function Is(t,e){return t[0]===e[0]&&t[1]===e[1]}function $s(t,e){const n=[];for(let r=0;r<t.length;r++){const o=t[r],i=e[r],[s,a]=Es(o,i),c=Oe(s,a);n.push(c)}return n}function Ns(t,e,n){return function(r){return 0===r?t:1===r?e:{type:"MultiLineString",coordinates:$i(n,t=>t(r))}}}function Hs(t,e){return function(t,e){const n=$i(t,Ii),r=$i(e,Ii),o=Ni(n),i=Ni(r),s={};for(let t=0;t<i.length;t++){const e=o[t],n=i[t];s[e]=n}const a=[];for(let t=0;t<e.length;t++)a.push(s[t]);return a}(t,e).map(e=>t[e])}function Ls(t,e){const n=xs(function(t){const e=[];for(let n=0;n<t.length;n++)e.push(Ii(t[n]));return e}(t),e);let r=[];for(let e=0;e<n.length;e++){const o=t[e],i=n[e];if(0===i&&r.push(o),i>0){const t=i+1;r=r.concat(As(o,t))}}return r}function Rs(t,e){return function(t,e){if(function(t,e){return Ki(t)&&Ki(e)}(t,e)||function(t,e){return Ji(t)&&Ji(e)}(t,e))return;throw new Error("Invalid input")}(t,e),"Polygon"===t.type&&"Polygon"===e.type?os(t,e):"MultiPolygon"===t.type&&"Polygon"===e.type?Ts(t,e):"Polygon"===t.type&&"MultiPolygon"===e.type?function(t,e){const n=Ts(e,t);return function(t){return n(1-t)}}(t,e):"MultiPolygon"===t.type&&"MultiPolygon"===e.type?function(t,e){let n=Ms(t),r=Ms(e);const o=n.length-r.length;return o>0&&(r=_s(r,o)),o<0&&(n=_s(n,-o)),ws(t,e,n,r)}(t,e):"LineString"===t.type&&"LineString"===e.type?ks(t,e):"MultiLineString"===t.type&&"LineString"===e.type?Os(t,e):"LineString"===t.type&&"MultiLineString"===e.type?function(t,e){const n=Os(e,t);return function(t){return n(1-t)}}(t,e):"MultiLineString"===t.type&&"MultiLineString"===e.type?function(t,e){let n=t.coordinates,r=e.coordinates;const o=n.length-r.length;return o>0&&(r=Ls(r,o)),o<0&&(n=Ls(n,-o)),n=Hs(n,r),Ns(t,e,$s(n,r))}(t,e):void 0}function zs(t,e){if(function(t,e){return"Point"===t.type&&"Point"===e.type}(t,e))return Oe(t,e);if(function(t,e){return js.includes(t.type)&&js.includes(e.type)}(t,e))return Rs(t,e);if(function(t,e){return Ds.includes(t.type)&&Ds.includes(e.type)}(t,e))return Rs(t,e);throw new Error("Invalid input")}const js=["Polygon","MultiPolygon"];const Ds=["LineString","MultiLineString"];function Ys(t){return{minX:t.x[0],maxX:t.x[1],minY:t.y[0],maxY:t.y[1]}}function Xs(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Bs(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Fs(t,e,n,r){const o=[];for(let i=0;i<t.length-1;i++){const s=Gs([t[i],t[i+1]],e,i);r&&(s.lineStringIndex=r),s.markId=n,o.push(s)}return o}function qs(t,e,n){let r=[];for(let o=0;o<t.length;o++)r=r.concat(Fs(t[o],e,n,o));return r}function Gs(t,e,n){const r={type:"LineString",coordinates:t};let o=Ys(ho(r));return o=function(t,e){const n=e/2,r={minX:t.minX-n,maxX:t.maxX+n,minY:t.minY-n,maxY:t.maxY+n};return Object.assign(t,r)}(o,e.strokeWidth),o.attributes={},o.attributes.strokeWidth=e.strokeWidth,o.attributes.segmentGeometry=r,o.markType="Line",o.segmentIndex=n,o}function Vs(t,e){return{pixelGeometry:t.pixelGeometryObject[e],strokeWidth:t.strokeWidthObject[e]}}function Ws(t,e,n,r){for(let o=0;o<t.length;o++){const i=t[o];delete i.markId,i.layerId=e,i.key=n,i.index=r}return t}function Ks(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Js(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const Zs={Point:qn,Rectangle:function(t){const e=t.attributes,n=Ys(ho(e.screenGeometry));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=Ys(ho(e.screenGeometry));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Line:function(t){const e=t.attributes,n=t.markId,r=e.pixelGeometry,o=r.coordinates;return"LineString"===r.type?Fs(o,e,n):"MultiLineString"===r.type?qs(o,e,n):void 0},Label:qn,Area:function(t){const e=t.attributes,n=Ys(ho(e.screenGeometry));return n.attributes=e,n.markType="Area",n.markId=t.markId,n},Symbol:function(t){const e=t.attributes,n=Ys(ho(e.screenGeometry));return n.attributes=e,n.markType="Symbol",n.markId=t.markId,n}},Us={Point:Gn,Rectangle:function({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Xs(t,i),a=Ys(ho(s.screenGeometry));a.key=i,a.index=o,a.attributes=s,a.markType="Rectangle",a.layerId=n,r.push(a)}return r},Polygon:function({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Bs(t,i),a=Ys(ho(s.screenGeometry));a.key=i,a.index=o,a.attributes=s,a.markType="Polygon",a.layerId=n,r.push(a)}return r},Line:function({layerAttributes:t,keyArray:e,layerId:n}){let r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Vs(t,i),a=s.pixelGeometry,c=a.coordinates;if("LineString"===a.type){let t=Fs(c,s,i);t=Ws(t,n,i,o),r=r.concat(t)}if("MultiLineString"===a.type){let t=qs(c,s,i);t=Ws(t,n,i,o),r=r.concat(t)}}return r},Label:Gn,Area:function({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Ks(t,i),a=Ys(ho(s.screenGeometry));a.key=i,a.index=o,a.attributes=s,a.markType="Area",a.layerId=n,r.push(a)}return r},Symbol:function({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Js(t,i),a=Ys(ho(s.screenGeometry));a.key=i,a.index=o,a.attributes=s,a.markType="Symbol",a.layerId=n,r.push(a)}return r}};class Qs extends Bn{constructor(t,e){super(t,e),this._indexableMarks={},this._indexableLayers={}}loadMark(t,e){const n=(0,Zs[t])(e),r=e.markId;this._indexableMarks[r]=n}markIsLoaded(t){return t in this._indexableMarks}removeMark(t){delete this._indexableMarks[t]}loadLayer(t,e){const n=(0,Us[t])(e),r=e.layerId;this._indexableLayers[r]=n}layerIsLoaded(t){return t in this._indexableLayers}removeLayer(t){delete this._indexableLayers[t]}addMarkInteraction(t,e,n){this._getHandler(t).addMarkInteraction(e,n)}removeAllMarkInteractions(t){for(const e in this._handlers){const n=this._handlers[e];n.hasMark(t)&&n.removeMarkInteraction(t)}}addLayerInteraction(t,e,n){this._getHandler(t).addLayerInteraction(e,n)}removeAllLayerInteractions(t){for(const e in this._handlers){const n=this._handlers[e];n.hasLayer(t)&&n.removeLayerInteraction(t)}}}class ta extends Bn{addInteraction(t,e){this._getHandler(t).addInteraction(e)}removeAllInteractions(){for(const t in this._handlers){const e=this._handlers[t];e.hasInteraction()&&e.removeInteraction()}}}class ea{constructor(t,{eventName:e,interactionName:n}){this._interactionManager=t,this._eventName=e,this._interactionName=n}interactionManager(){return this._interactionManager}eventManager(){return this._interactionManager._eventManager}section(){return this._interactionManager._section}id(){return this._interactionManager._id}_addEventListener(){const t=this._handleEvent.bind(this),e=this.eventManager(),n=this.getId(),r=na(this._eventName)?this._eventName:[this._eventName];for(const o of r)e.eventTracker(o).addListener(n,t)}_removeEventListener(){const t=this.eventManager(),e=this.getId(),n=na(this._eventName)?this._eventName:[this._eventName];for(const r of n)t.eventTracker(r).removeListener(e)}}function na(t){return t.constructor===Array}var ra=wn((function(t,e){t.exports=function(){function t(t,r,o,i,s){!function t(n,r,o,i,s){for(;i>o;){if(i-o>600){var a=i-o+1,c=r-o+1,u=Math.log(a),l=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*l*(a-l)/a)*(c-a/2<0?-1:1);t(n,r,Math.max(o,Math.floor(r-c*l/a+h)),Math.min(i,Math.floor(r+(a-c)*l/a+h)),s)}var f=n[r],d=o,p=i;for(e(n,o,r),s(n[i],f)>0&&e(n,o,i);d<p;){for(e(n,d,p),d++,p--;s(n[d],f)<0;)d++;for(;s(n[p],f)>0;)p--}0===s(n[o],f)?e(n,o,p):e(n,++p,i),p<=r&&(o=p+1),r<=p&&(i=p-1)}}(t,r,o||0,i||t.length-1,s||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function i(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,o){o||(o=p(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i=e;i<n;i++){var s=t.children[i];a(o,t.leaf?r(s):s)}return o}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(e,n,r,o,i){for(var s=[n,r];s.length;)if(!((r=s.pop())-(n=s.pop())<=o)){var a=n+Math.ceil((r-n)/o/2)*o;t(e,a,n,r,i),s.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!d(t,e))return n;for(var r=this.toBBox,o=[];e;){for(var i=0;i<e.children.length;i++){var s=e.children[i],a=e.leaf?r(s):s;d(t,a)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):o.push(s))}e=o.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var o=e.children[r],i=e.leaf?this.toBBox(o):o;if(d(t,i)){if(e.leaf||f(t,i))return!0;n.push(o)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,i,s=this.data,a=this.toBBox(t),c=[],u=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=u.pop(),i=!0),s.leaf){var l=o(t,s.children,e);if(-1!==l)return s.children.splice(l,1),c.push(s),this._condense(c),this}i||s.leaf||!f(s,a)?r?(n++,s=r.children[n],i=!1):s=null:(c.push(s),u.push(n),n=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var o,s=n-e+1,a=this._maxEntries;if(s<=a)return i(o=p(t.slice(e,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(o=p([])).leaf=!1,o.height=r;var c=Math.ceil(s/a),u=c*Math.ceil(Math.sqrt(a));y(t,e,n,u,this.compareMinX);for(var l=e;l<=n;l+=u){var h=Math.min(l+u-1,n);y(t,l,h,c,this.compareMinY);for(var f=l;f<=h;f+=c){var d=Math.min(f+c-1,h);o.children.push(this._build(t,f,d,r-1))}}return i(o,this.toBBox),o},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var o=1/0,i=1/0,s=void 0,a=0;a<e.children.length;a++){var c=e.children[a],u=l(c),h=(f=t,d=c,(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-u);h<i?(i=h,o=u<o?u:o,s=c):h===i&&u<o&&(o=u,s=c)}e=s||e.children[0]}var f,d;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),o=[],i=this._chooseSubtree(r,this.data,e,o);for(i.children.push(t),a(i,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var s=this._chooseSplitIndex(n,o,r),a=p(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,i(n,this.toBBox),i(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,o,i,a,c,u,h,f=1/0,d=1/0,p=e;p<=n-e;p++){var y=s(t,0,p,this.toBBox),m=s(t,p,n,this.toBBox),g=(o=y,i=m,a=Math.max(o.minX,i.minX),c=Math.max(o.minY,i.minY),u=Math.min(o.maxX,i.maxX),h=Math.min(o.maxY,i.maxY),Math.max(0,u-a)*Math.max(0,h-c)),v=l(y)+l(m);g<f?(f=g,r=p,d=v<d?v:d):g===f&&v<d&&(d=v,r=p)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:c,o=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,o)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var o=this.toBBox,i=s(t,0,e,o),c=s(t,n-e,n,o),u=h(i)+h(c),l=e;l<n-e;l++){var f=t.children[l];a(i,t.leaf?o(f):f),u+=h(i)}for(var d=n-e-1;d>=e;d--){var p=t.children[d];a(c,t.leaf?o(p):p),u+=h(c)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():i(t[e],this.toBBox)},r}()}));function oa(t,e){return bo([t.x,t.y],e.pixelGeometry.coordinates)<e.radius}var ia={Point:oa,Rectangle:function(t,e){return $o([t.x,t.y],e.screenGeometry)},Polygon:function(t,e){return $o([t.x,t.y],e.screenGeometry)},Line:function(t,e){return To([t.x,t.y],e.segmentGeometry.coordinates,e.strokeWidth)},Label:oa,Symbol:function(t,e){return $o([t.x,t.y],e.screenGeometry)},Area:function(t,e){return $o([t.x,t.y],e.screenGeometry)}};class sa{constructor(t,e,n){this._rbush=new ra,this._interactionHandler=t,this._getMark=e.bind(t),this._getLayer=n.bind(t)}indexLayer(t){const e=this._getLayer(t);this._rbush.load(e)}unindexLayer(t){const e=this._getLayer(t);for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}}indexMark(t){const e=this._getMark(t);aa(e)?this._rbush.load(e):this._rbush.insert(e)}unindexMark(t){const e=this._getMark(t);if(aa(e))for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}else this._rbush.remove(e)}queryMouseCoordinates(t,e){const n=function(t,e=3){return{minX:t.x-e,maxX:t.x+e,minY:t.y-e,maxY:t.y+e}}(t,e),r=this._rbush.search(n);return this._getHits(t,r)}queryBoundingBox(t){return this._rbush.search(t)}_getHits(t,e){const n=[];for(let r=0;r<e.length;r++){const o=e[r];(0,ia[o.markType])(t,o.attributes)&&n.push(o)}return n}}function aa(t){return t.constructor===Array}class ca extends ea{constructor(t,e){super(t,e);this._spatialIndex=new sa(this,(function(t){return this._interactionManager.marks()._indexableMarks[t]}),(function(t){return this._interactionManager.marks()._indexableLayers[t]})),this._numberOfInteractions=0,this._markCallbacks={},this._layerCallbacks={}}addMarkInteraction(t,e){this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._markCallbacks[t]=e,this._spatialIndex.indexMark(t)}hasMark(t){return t in this._markCallbacks}removeMarkInteraction(t){this._removeEventListenerIfNecessary(),delete this._markCallbacks[t],this._numberOfInteractions--,this._spatialIndex.unindexMark(t)}addLayerInteraction(t,e){t in this._layerCallbacks||(this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._layerCallbacks[t]=e,this._spatialIndex.indexLayer(t))}hasLayer(t){return t in this._layerCallbacks}removeLayerInteraction(t){t in this._layerCallbacks&&(this._numberOfInteractions--,delete this._layerCallbacks[t],this._removeEventListenerIfNecessary(),this._spatialIndex.unindexLayer(t))}_addEventListenerIfNecessary(){0===this._numberOfInteractions&&this._addEventListener()}_removeEventListenerIfNecessary(){0===this._numberOfInteractions&&this._removeEventListener()}getId(){return`${this.id()}-mark-${this._interactionName}`}}function ua(t,e,n,r){return e.markType=n.markType,e.hitBbox=fa(n),e.hitSource="mark",da(t,e,r)}function la(t,e,n,r){return e.markType=n.markType,e.hitBbox=fa(n),e.key=n.key,e.index=n.index,e.hitSource="layer",da(t,e,r)}function ha(t,e,n){return e.hitSource="section",da(t,e,n)}function fa(t){return{minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY}}function da(t,e,n){const r=e;r.type=t,r.nativeType=n.type;for(const t of pa)r[t]=n[t];return r}const pa=["altKey","ctrlKey","shiftKey","clientX","clientY","pageX","pageY","screenX","screenY","timeStamp"];function ya(t,e){return{type:t,markType:e.markType,hitSource:"mark"}}function ma(t,e){return{type:t,markType:e.markType,key:e.key,index:e.index,hitSource:"layer"}}function ga(t,e){const n=e._section,r=n.inverseTotalTransformation,{minX:o,maxX:i,minY:s,maxY:a}=n.paddedBbox,c=va(t.x,o,i),u=va(t.y,s,a),[l,h]=r([c,u]);return{x:l,y:h}}function va(t,e,n){return Math.max(e,Math.min(t,n))}function _a(t,e){const n=e.bbox;return t.x>=n.minX&&t.x<=n.maxX&&t.y>=n.minY&&t.y<=n.maxY}function ba(t){return"markId"in t}function xa(t){return"layerId"in t}function Ma(t){return ba(t)?t.markId:xa(t)?t.layerId+"-"+t.key:void 0}var wa=Object.freeze({__proto__:null,ClickHandler:class extends ca{constructor(t){super(t,{interactionName:"click",eventName:"click"})}_handleEvent(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),r=ga(t,this.interactionManager());for(let o=0;o<n.length;o++){const i=n[o];if(ba(i)){const n=ua("click",{screenCoordinates:t,localCoordinates:r},i,e);this._markCallbacks[i.markId](n)}if(xa(i)){const n=la("click",{screenCoordinates:t,localCoordinates:r},i,e);this._layerCallbacks[i.layerId](n)}}}},MouseoverHandler:class extends ca{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"}),this._previousMouseoverIds={},this._currentMouseoverIds={}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let r=0;r<n.length;r++){const o=n[r],i=Ma(o);this._currentMouseoverIds[i]=!0,i in this._previousMouseoverIds||this._fireCallback(o,t,e)}this._previousMouseoverIds=this._currentMouseoverIds,this._currentMouseoverIds={}}_fireCallback(t,e,n){const r=ga(e,this.interactionManager());if(ba(t)){const o=ua("mouseover",{screenCoordinates:e,localCoordinates:r},t,n);this._markCallbacks[t.markId](o)}if(xa(t)){const o=la("mouseover",{screenCoordinates:e,localCoordinates:r},t,n);this._layerCallbacks[t.layerId](o)}}},MouseoutHandler:class extends ca{constructor(t){super(t,{interactionName:"mouseout",eventName:"mousemove"}),this._previousMouseoverHits={},this._currentMouseoverHits={}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],r=Ma(e);this._currentMouseoverHits[r]=e}for(const n in this._previousMouseoverHits)if(!(n in this._currentMouseoverHits)){const r=this._previousMouseoverHits[n];this._fireCallback(r,t,e)}this._previousMouseoverHits=this._currentMouseoverHits,this._currentMouseoverHits={}}_fireCallback(t,e,n){const r=ga(e,this.interactionManager());if(ba(t)){const o=ua("mouseout",{screenCoordinates:e,localCoordinates:r},t,n);this._markCallbacks[t.markId](o)}if(xa(t)){const o=la("mouseout",{screenCoordinates:e,localCoordinates:r},t,n);this._layerCallbacks[t.layerId](o)}}},MousedownHandler:class extends ca{constructor(t){super(t,{interactionName:"mousedown",eventName:"mousedown"})}_handleEvent(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),r=ga(t,this.interactionManager());for(let o=0;o<n.length;o++){const i=n[o];if(ba(i)){const n=ua("mousedown",{screenCoordinates:t,localCoordinates:r},i,e);this._markCallbacks[i.markId](n)}if(xa(i)){const n=la("mousedown",{screenCoordinates:t,localCoordinates:r},i,e);this._layerCallbacks[i.layerId](n)}}}},MouseupHandler:class extends ca{constructor(t){super(t,{interactionName:"mouseup",eventName:"mouseup"})}_handleEvent(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),r=ga(t,this.interactionManager());for(let o=0;o<n.length;o++){const i=n[o];if(ba(i)){const n=ua("mouseup",{screenCoordinates:t,localCoordinates:r},i,e);this._markCallbacks[i.markId](n)}if(xa(i)){const n=la("mouseup",{screenCoordinates:t,localCoordinates:r},i,e);this._layerCallbacks[i.layerId](n)}}}},MousedragHandler:class extends ca{constructor(t){super(t,{interactionName:"mousedrag",eventName:["mousedown","mousemove","mouseup"]}),this._currentHits={}}_handleEvent(t,e){"mousedown"===e.eventName&&this._handleMousedown(t,e),"mousemove"===e.eventName&&this._handleMousemove(t,e),"mouseup"===e.eventName&&this._handleMouseup(t,e)}_handleMousedown(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let r=0;r<n.length;r++){const o=n[r],i=Ma(o);this._currentHits[i]=o,this._fireCallback(o,t,e,"start")}}_handleMousemove(t,e){if(_a(t,this.section()))for(const n in this._currentHits){const r=this._currentHits[n];this._fireCallback(r,t,e,"drag")}}_handleMouseup(t,e){for(const n in this._currentHits){const r=this._currentHits[n];this._fireCallback(r,t,e,"end")}this._currentHits={}}_fireCallback(t,e,n,r){const o=ga(e,this.interactionManager());if(ba(t)){const i=ua("mousedrag",{screenCoordinates:e,localCoordinates:o,dragType:r},t,n);this._markCallbacks[t.markId](i)}if(xa(t)){const i=la("mousedrag",{screenCoordinates:e,localCoordinates:o,dragType:r},t,n);this._layerCallbacks[t.layerId](i)}}}});class Ta extends ea{constructor(t,e){super(t,e),this._callback=void 0}addInteraction(t){this._addEventListener(),this._callback=t}hasInteraction(){return void 0!==this._callback}removeInteraction(){this._callback&&(this._callback=void 0,this._removeEventListener())}getId(){return`${this.id()}-section-${this._interactionName}`}}let ka;var Ea=Object.freeze({__proto__:null,WheelHandler:class extends Ta{constructor(t){super(t,{interactionName:"wheel",eventName:"wheel"})}_handleEvent(t,e){e.preventDefault(),e.stopPropagation();const n=this.interactionManager();if(_a(t,this.section())){const r=ha("wheel",{screenCoordinates:t,localCoordinates:ga(t,n),delta:function(t){let e;"wheelDelta"in t&&0!==t.wheelDelta&&(e=-t.wheelDelta);"detail"in t&&0!==t.detail&&(e=-t.detail);"deltaY"in t&&0!==t.deltaY&&(e=-t.deltaY);ka||(ka=function(){var t,e=document.createElement("iframe");e.src="#",document.body.appendChild(e);var n=e.contentWindow.document;return n.open(),n.write("<!DOCTYPE html><html><head></head><body><span>a</span></body></html>"),n.close(),t=n.body.firstElementChild.offsetHeight,document.body.removeChild(e),t}());return e*(t.deltaMode?ka:1)/500}(e)},e);this._callback(r)}}},ClickHandler:class extends Ta{constructor(t){super(t,{interactionName:"click",eventName:"click"})}_handleEvent(t,e){const n=this.interactionManager();if(_a(t,this.section())){const r=ha("click",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r)}}},MousedownHandler:class extends Ta{constructor(t){super(t,{interactionName:"mousedown",eventName:"mousedown"})}_handleEvent(t,e){const n=this.interactionManager();if(_a(t,this.section())){const r=ha("mousedown",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r)}}},MouseupHandler:class extends Ta{constructor(t){super(t,{interactionName:"mouseup",eventName:"mouseup"})}_handleEvent(t,e){const n=this.interactionManager();if(_a(t,this.section())){const r=ha("mouseup",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r)}}},MouseoverHandler:class extends Ta{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"}),this._mouseCurrentlyOverSection=!1}_handleEvent(t,e){const n=this.interactionManager();if(_a(t,this.section())){if(!this._mouseCurrentlyOverSection){const r=ha("mouseover",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r),this._mouseCurrentlyOverSection=!0}}else this._mouseCurrentlyOverSection&&(this._mouseCurrentlyOverSection=!1)}},MouseoutHandler:class extends Ta{constructor(t){super(t,{interactionName:"mouseout",eventName:"mousemove"}),this._mouseCurrentlyOverSection=!1}_handleEvent(t,e){const n=this.interactionManager();if(_a(t,this.section()))this._mouseCurrentlyOverSection||(this._mouseCurrentlyOverSection=!0);else if(this._mouseCurrentlyOverSection){const r=ha("mouseout",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r),this._mouseCurrentlyOverSection=!1}}},MousemoveHandler:class extends Ta{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"})}_handleEvent(t,e){const n=this.interactionManager();if(_a(t,this.section())){const r=ha("mousemove",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r)}}}});class Ca extends Xn{constructor(){super(),this._markInteractionInterface=new Qs(this,wa),this._sectionInteractionInterface=new ta(this,Ea)}}function Pa(t){return t.constructor===Object?1:t.length}var Oa=Object.freeze({__proto__:null,TouchdownHandler:class extends ca{constructor(t){super(t,{interactionName:"touchdown",eventName:"touchstart"})}_handleEvent(t,e){if(1!==Pa(t))return;const n=this._spatialIndex.queryMouseCoordinates(t),r=ga(t,this.interactionManager());for(let o=0;o<n.length;o++){const i=n[o];if(ba(i)){const n=ua("touchdown",{screenCoordinates:t,localCoordinates:r},i,e);this._markCallbacks[i.markId](n)}if(xa(i)){const n=la("touchdown",{screenCoordinates:t,localCoordinates:r},i,e);this._layerCallbacks[i.layerId](n)}}}},TouchupHandler:class extends ca{constructor(t){super(t,{interactionName:"touchup",eventName:["touchend","touchcancel"]})}_handleEvent(t,e){if(1!==Pa(t))return;const n=this._spatialIndex.queryMouseCoordinates(t),r=ga(t,this.interactionManager());for(let o=0;o<n.length;o++){const i=n[o];if(ba(i)){const n=ua("touchup",{screenCoordinates:t,localCoordinates:r},i,e);this._markCallbacks[i.markId](n)}if(xa(i)){const n=la("touchup",{screenCoordinates:t,localCoordinates:r},i,e);this._layerCallbacks[i.layerId](n)}}}},TouchoverHandler:class extends ca{constructor(t){super(t,{interactionName:"touchover",eventName:["touchstart","touchmove"]}),this._previousHits={},this._currentHits={}}_handleEvent(t,e){1===Pa(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e))}_handleTouchstart(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=Ma(n[t]);this._previousHits[e]=!0}}_handleTouchmove(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let r=0;r<n.length;r++){const o=n[r],i=Ma(o);this._currentHits[i]=!0,i in this._previousHits||this._fireCallback(o,t,e)}this._previousHits=this._currentHits,this._currentHits={}}_fireCallback(t,e,n){const r=ga(e,this.interactionManager());if(ba(t)){const o=ua("touchover",{screenCoordinates:e,localCoordinates:r},t,n);this._markCallbacks[t.markId](o)}if(xa(t)){const o=la("touchover",{screenCoordinates:e,localCoordinates:r},t,n);this._layerCallbacks[t.layerId](o)}}},TouchoutHandler:class extends ca{constructor(t){super(t,{interactionName:"touchout",eventName:["touchstart","touchmove","touchend"]}),this._previousHits={},this._currentHits={}}_handleEvent(t,e){1===Pa(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend())}_handleTouchstart(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],r=Ma(e);this._previousHits[r]=e}}_handleTouchmove(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],r=Ma(e);this._currentHits[r]=e}for(const n in this._previousHits)if(!(n in this._currentHits)){const r=this._previousHits[n];this._fireCallback(r,t,e)}this._previousHits=this._currentHits,this._currentHits={}}_handleTouchend(){this._previousHits={},this._currentHits={}}_fireCallback(t,e,n){const r=ga(e,this.interactionManager());if(ba(t)){const o=ua("touchout",{screenCoordinates:e,localCoordinates:r},t,n);this._markCallbacks[t.markId](o)}if(xa(t)){const o=la("touchout",{screenCoordinates:e,localCoordinates:r},t,n);this._layerCallbacks[t.layerId](o)}}},TouchdragHandler:class extends ca{constructor(t){super(t,{interactionName:"touchdrag",eventName:["touchstart","touchmove","touchend"]}),this._currentHits={}}_handleEvent(t,e){1===Pa(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend(t,e))}_handleTouchstart(t,e){if(!_a(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let r=0;r<n.length;r++){const o=n[r],i=Ma(o);this._currentHits[i]=o,this._fireCallback(o,t,e,"start")}}_handleTouchmove(t,e){if(_a(t,this.section()))for(const n in this._currentHits){const r=this._currentHits[n];this._fireCallback(r,t,e,"drag")}}_handleTouchend(t,e){for(const n in this._currentHits){const r=this._currentHits[n];this._fireCallback(r,t,e,"end")}this._currentHits={}}_fireCallback(t,e,n,r){const o=ga(e,this.interactionManager());if(ba(t)){const i=ua("touchdrag",{screenCoordinates:e,localCoordinates:o,dragType:r},t,n);this._markCallbacks[t.markId](i)}if(xa(t)){const i=la("touchdrag",{screenCoordinates:e,localCoordinates:o,dragType:r},t,n);this._layerCallbacks[t.layerId](i)}}}});function Aa(t,e){return t.every(t=>_a(t,e))}function Sa(t){const[e,n]=t;return Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)}var Ia=Object.freeze({__proto__:null,TouchdownHandler:class extends Ta{constructor(t){super(t,{interactionName:"touchdown",eventName:"touchstart"})}_handleEvent(t,e){if(1!==Pa(t))return;const n=this.interactionManager();if(_a(t,this.section())){const r=ha("touchdown",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r)}}},TouchmoveHandler:class extends Ta{constructor(t){super(t,{interactionName:"touchmove",eventName:"touchmove"})}_handleEvent(t,e){if(1!==Pa(t))return;const n=this.interactionManager();if(_a(t,this.section())){const r=ha("touchmove",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r)}}},TouchupHandler:class extends Ta{constructor(t){super(t,{interactionName:"touchup",eventName:["touchend","touchcancel"]})}_handleEvent(t,e){if(1!==Pa(t))return;const n=this.interactionManager();if(_a(t,this.section())){const r=ha("touchup",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r)}}},TouchoverHandler:class extends Ta{constructor(t){super(t,{interactionName:"touchover",eventName:["touchstart","touchmove"]}),this._fingerCurrentlyOverSection=!1}_handleEvent(t,e){1===Pa(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e))}_handleTouchstart(t,e){_a(t,this.section())&&(this._fingerCurrentlyOverSection=!0)}_handleTouchmove(t,e){const n=this.interactionManager();if(_a(t,this.section())){if(!this._fingerCurrentlyOverSection){const r=ha("touchover",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r),this._fingerCurrentlyOverSection=!0}}else this._fingerCurrentlyOverSection&&(this._fingerCurrentlyOverSection=!1)}},TouchoutHandler:class extends Ta{constructor(t){super(t,{interactionName:"touchout",eventName:["touchstart","touchmove","touchend"]}),this._fingerCurrentlyOverSection=!1}_handleEvent(t,e){1===Pa(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend())}_handleTouchstart(t,e){_a(t,this.section())&&(this._fingerCurrentlyOverSection=!0)}_handleTouchmove(t,e){const n=this.interactionManager();if(_a(t,this.section()))this._fingerCurrentlyOverSection||(this._fingerCurrentlyOverSection=!0);else if(this._fingerCurrentlyOverSection){const r=ha("touchout",{screenCoordinates:t,localCoordinates:ga(t,n)},e);this._callback(r),this._fingerCurrentlyOverSection=!1}}_handleTouchend(){this._fingerCurrentlyOverSection=!1}},PinchHandler:class extends Ta{constructor(t){super(t,{interactionName:"pinch",eventName:["touchstart","touchmove","touchend"]}),this._previousTouchDistance=void 0}_handleEvent(t,e){"touchstart"===e.type&&this._handleTouchstart(t,e),"touchmove"===e.type&&this._handleTouchmove(t,e),"touchend"===e.type&&this._handleTouchend(t,e)}_handleTouchstart(t,e){if(2!==Pa(t))return;Aa(t,this.section())&&(this._previousTouchDistance=Sa(t))}_handleTouchmove(t,e){if(2!==Pa(t))return;if(void 0===this._previousTouchDistance)return;const n=this.section();if(Aa(t,n)){const r=n.maxY-n.minY,o=function(t){const[e,n]=t;return{x:(n.x+e.x)/2,y:(n.y+e.y)/2}}(t),i=Sa(t),s=(this._previousTouchDistance-i)/r;this._previousTouchDistance=i,this._fireCallback(t,e,s,o)}}_handleTouchend(t,e){this._previousTouchDistance=void 0}_fireCallback(t,e,n,r){const o=ha("pinch",{screenCenter:r,localCenter:ga(r,this.interactionManager()),screenCoordinates:t,localCoordinates:t.map(t=>ga(t,this.interactionManager())),delta:n},e);this._callback(o)}}});class $a extends Xn{constructor(){super(),this._markInteractionInterface=new Qs(this,Oa),this._sectionInteractionInterface=new ta(this,Ia)}}function Na(t){return{x:[t[0],t[0]],y:[t[1],t[1]]}}function Ha(t){const e=t.attributes,n=Ys(Na(e.pixelGeometry.coordinates));return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function La({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Ra(t,i),a=Ys(Na(s.pixelGeometry.coordinates));a.key=i,a.index=o,a.attributes=s,a.markType="Point",a.layerId=n,r.push(a)}return r}function Ra(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}function za(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function ja(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Da(t,e){return{screenGeometry:t.pixelGeometryObject[e]}}function Ya(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const Xa={Point:Ha,Rectangle:function(t){const e=t.attributes,n=Ys(Na(Mo(e.screenGeometry)));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=Ys(Na(Mo(e.screenGeometry)));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Line:function(t){const e=t.attributes,n=Ys(Na(Mo(e.pixelGeometry)));return n.attributes=e,n.markType="Line",n.markId=t.markId,n},Label:Ha,Area:function(t){const e=t.attributes,n=Ys(Na(Mo(e.screenGeometry)));return n.attributes=e,n.markType="Area",n.markId=t.markId,n}},Ba={Point:La,Rectangle:function({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=za(t,i),a=Ys(Na(Mo(s.screenGeometry)));a.key=i,a.index=o,a.attributes=s,a.markType="Rectangle",a.layerId=n,r.push(a)}return r},Polygon:function({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=ja(t,i),a=Ys(Na(Mo(s.screenGeometry)));a.key=i,a.index=o,a.attributes=s,a.markType="Polygon",a.layerId=n,r.push(a)}return r},Line:function({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Da(t,i),a=Ys(Na(Mo(s.screenGeometry)));a.key=i,a.index=o,a.attributes=s,a.markType="Line",a.layerId=n,r.push(a)}return r},Label:La,Area:function({layerAttributes:t,keyArray:e,layerId:n}){const r=[];for(let o=0;o<e.length;o++){const i=e[o],s=Ya(t,i),a=Ys(Na(Mo(s.screenGeometry)));a.key=i,a.index=o,a.attributes=s,a.markType="Area",a.layerId=n,r.push(a)}return r}};class Fa{constructor(){this._selectableMarks={},this._selectableLayers={},this._markCallbacks={},this._layerCallbacks={},this._previousSelection={},this._currentSelection={};this._spatialIndex=new sa(this,(function(t){return this._selectableMarks[t]}),(function(t){return this._selectableLayers[t]})),this._selectPolygon={start:void 0,points:[]}}loadMark(t,e,n){const r=(0,Xa[t])(e),o=e.markId;this._selectableMarks[o]=r,this._markCallbacks[o]=n,this._spatialIndex.indexMark(o)}markIsLoaded(t){return t in this._selectableMarks}removeMark(t){this._spatialIndex.unindexMark(t),delete this._selectableMarks[t],delete this._markCallbacks[t]}loadLayer(t,e,n){const r=(0,Ba[t])(e),o=e.layerId;this._selectableLayers[o]=r,this._layerCallbacks[o]=n,this._spatialIndex.indexLayer(o)}layerIsLoaded(t){return t in this._selectableLayers}removeLayer(t){this._spatialIndex.unindexLayer(t),delete this._selectableLayers[t],delete this._layerCallbacks[t]}selectRectangle(t){const e=this._spatialIndex.queryBoundingBox(qa(t));for(let t=0;t<e.length;t++){const n=e[t],r=Ma(n);this._currentSelection[r]=n,this._fireSelectCallback(n)}}updateSelectRectangle(t){this._previousSelection=this._currentSelection,this._currentSelection={};const e=this._spatialIndex.queryBoundingBox(qa(t));for(let t=0;t<e.length;t++){const n=e[t],r=Ma(n);this._currentSelection[r]=n,r in this._previousSelection||this._fireSelectCallback(n)}for(const t in this._previousSelection)if(!(t in this._currentSelection)){const e=this._previousSelection[t];this._fireDeselectCallback(e)}}resetSelectRectangle(){for(const t in this._currentSelection){const e=this._currentSelection[t];this._fireDeselectCallback(e)}this._previousSelection={},this._currentSelection={}}startSelectPolygon(t){this._selectPolygon.start=Ga(t)}addPointToSelectPolygon(t){if(this._selectPolygon.points.push(Ga(t)),this._selectPolygon.points.length>1){const t=this._getLastThreePointsPolygon(),e=ho(t),n=this._spatialIndex.queryBoundingBox(Va(e));for(let e=0;e<n.length;e++){const r=n[e];if($o([r.minX,r.minY],t)){const t=Ma(r);t in this._currentSelection?(this._fireDeselectCallback(r),delete this._currentSelection[t]):(this._fireSelectCallback(r),this._currentSelection[t]=r)}}}}moveSelectPolygon(t){this._previousSelection=this._currentSelection,this._currentSelection={};const e=Ga(t),n=this._selectPolygon.start,r=this._selectPolygon.points;this._selectPolygon.start=[n[0]+e[0],n[1]+e[1]],this._selectPolygon.points=r.map(t=>[t[0]+e[0],t[1]+e[1]]);const o=this.getSelectPolygon(),i=ho(o),s=this._spatialIndex.queryBoundingBox(Va(i));for(let t=0;t<s.length;t++){const e=s[t];if($o([e.minX,e.minY],o)){const t=Ma(e);this._currentSelection[t]=e,t in this._previousSelection||this._fireSelectCallback(e)}}for(const t in this._previousSelection)if(!(t in this._currentSelection)){const e=this._previousSelection[t];this._fireDeselectCallback(e)}}getSelectPolygon(){if(this._selectPolygon.start)return{type:"Polygon",coordinates:[[this._selectPolygon.start,...this._selectPolygon.points,this._selectPolygon.start]]}}resetSelectPolygon(){for(const t in this._currentSelection){const e=this._currentSelection[t];this._fireDeselectCallback(e)}this._selectPolygon={start:void 0,points:[]},this._currentSelection={}}_fireSelectCallback(t){if(ba(t)){const e=ya("select",t),n=this._markCallbacks[t.markId].onSelect;n&&n(e)}if(xa(t)){const e=ma("select",t),n=this._layerCallbacks[t.layerId].onSelect;n&&n(e)}}_fireDeselectCallback(t){if(ba(t)){const e=ya("deselect",t),n=this._markCallbacks[t.markId].onDeselect;n&&n(e)}if(xa(t)){const e=ma("deselect",t),n=this._layerCallbacks[t.layerId].onDeselect;n&&n(e)}}_getLastThreePointsPolygon(){const t=this._selectPolygon.points,e=t.length-1,n=this._selectPolygon.start;return{type:"Polygon",coordinates:[[n,t[e-1],t[e],n]]}}}function qa(t){return{minX:Math.min(t.x1,t.x2),maxX:Math.max(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxY:Math.max(t.y1,t.y2)}}function Ga(t){if(function(t){return t.constructor===Array&&2===t.length&&t.every(t=>t&&t.constructor===Number)}(t))return t;if(function(t){return"x"in t&&"y"in t&&t.x.constructor===Number&&t.y.constructor===Number}(t))return[t.x,t.y];throw new Error("Invalid input: "+t)}function Va(t){return{minX:Math.min(...t.x),maxX:Math.max(...t.x),minY:Math.min(...t.y),maxY:Math.max(...t.y)}}class Wa{constructor(){Pn.hasMouse&&(this._mouseInteractionManager=new Ca),Pn.hasTouch&&(this._touchInteractionManager=new $a),this._selectManager=new Fa}setId(t){this._forEachManager(e=>{e.setId(t)})}linkEventManager(t){this._mouseInteractionManager&&this._mouseInteractionManager.linkEventManager(t.mouse()),this._touchInteractionManager&&this._touchInteractionManager.linkEventManager(t.touch())}loadSection(t){this._forEachManager(e=>{e.loadSection(t)})}mouse(){return this._mouseInteractionManager}touch(){return this._touchInteractionManager}select(){return this._selectManager}_forEachManager(t){this._mouseInteractionManager&&t(this._mouseInteractionManager),this._touchInteractionManager&&t(this._touchInteractionManager)}}function Ka(t){let e,r=[{class:"content-background"},t[7],{fill:t[4]}],o={};for(let t=0;t<r.length;t+=1)o=n(o,r[t]);return{c(){e=w("rect"),O(e,o)},m(t,n){v(t,e,n)},p(t,n){O(e,yt(r,[{class:"content-background"},128&n[0]&&t[7],16&n[0]&&{fill:t[4]}]))},d(t){t&&b(e)}}}function Ja(t){let e,r=[{class:"padding-background"},{mask:`url(#${t[9]}-mask-padding-bg)`},t[8],{fill:t[5]}],o={};for(let t=0;t<r.length;t+=1)o=n(o,r[t]);return{c(){e=w("rect"),O(e,o)},m(t,n){v(t,e,n)},p(t,n){O(e,yt(r,[{class:"padding-background"},512&n[0]&&{mask:`url(#${t[9]}-mask-padding-bg)`},256&n[0]&&t[8],32&n[0]&&{fill:t[5]}]))},d(t){t&&b(e)}}}function Za(t){let e,r,o,i,s,a,c,u,h,f=[t[8],{fill:"white"}],d={};for(let t=0;t<f.length;t+=1)d=n(d,f[t]);let p=[t[7],{fill:"black"}],y={};for(let t=0;t<p.length;t+=1)y=n(y,p[t]);let m=t[4]&&Ka(t),_=t[5]&&Ja(t);const x=t[33].default,M=function(t,e,n,r){if(t){const o=l(t,e,n,r);return t[0](o)}}(x,t,t[32],null);return{c(){e=w("svg"),r=w("defs"),o=w("mask"),i=w("rect"),s=w("rect"),m&&m.c(),c=E(),_&&_.c(),u=E(),M&&M.c(),O(i,d),O(s,y),P(o,"id",a=t[9]+"-mask-padding-bg"),P(e,"width",t[1]),P(e,"height",t[2]),P(e,"viewBox",t[0]),P(e,"preserveAspectRatio",t[3])},m(n,a){v(n,e,a),g(e,r),g(r,o),g(o,i),g(o,s),m&&m.m(e,null),g(e,c),_&&_.m(e,null),g(e,u),M&&M.m(e,null),t[34](e),h=!0},p(t,n){O(i,yt(f,[256&n[0]&&t[8],{fill:"white"}])),O(s,yt(p,[128&n[0]&&t[7],{fill:"black"}])),t[4]?m?m.p(t,n):(m=Ka(t),m.c(),m.m(e,c)):m&&(m.d(1),m=null),t[5]?_?_.p(t,n):(_=Ja(t),_.c(),_.m(e,u)):_&&(_.d(1),_=null),M&&M.p&&2&n[1]&&M.p(l(x,t,t[32],null),function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(x,t[32],n,null)),(!h||2&n[0])&&P(e,"width",t[1]),(!h||4&n[0])&&P(e,"height",t[2]),(!h||1&n[0])&&P(e,"viewBox",t[0]),(!h||8&n[0])&&P(e,"preserveAspectRatio",t[3])},i(t){h||(ut(M,t),h=!0)},o(t){lt(M,t),h=!1},d(n){n&&b(e),m&&m.d(),_&&_.d(),M&&M.d(n),t[34](null)}}}let Ua=0;function Qa(t,e,n){let r,o;const i="gr"+Ua++;let{renderer:s}=e,{width:a=500}=e,{height:c=500}=e,{viewBox:l}=e,{preserveAspectRatio:h="xMidYMid meet"}=e,{scaleX:f}=e,{scaleY:d}=e,{transformation:p}=e,{flipX:y=!1}=e,{flipY:m=!1}=e,{padding:g=0}=e,{zoomIdentity:v}=e,{blockReindexing:_=!1}=e,{backgroundColor:b}=e,{paddingColor:x}=e;const M=function(){const t=Ct();return B(sn,t),t}(),w=function(){const t=Ct();return B(_n,t),t}();u(t,w,t=>n(26,o=t));const T=function(){const t=Ct();return B(bn,t),t}(),k=function(){const t=Ct();return B(xn,t),t}();let E;u(t,k,t=>n(25,r=t));const C=new Yn;!function(t,e){t.set(e)}(T,C);const P=new Wa;P.setId(i),P.linkEventManager(C),function(t,e){t.set(e)}(k,P);let O=a,A=c;const S=l;let I;void 0!==S&&(I=S.split(" ")),Y(()=>{C.addRootNode(E),C.attachEventListeners()});let $,N,H,{$$slots:L={},$$scope:R}=e;return t.$set=t=>{"renderer"in t&&n(12,s=t.renderer),"width"in t&&n(1,a=t.width),"height"in t&&n(2,c=t.height),"viewBox"in t&&n(0,l=t.viewBox),"preserveAspectRatio"in t&&n(3,h=t.preserveAspectRatio),"scaleX"in t&&n(13,f=t.scaleX),"scaleY"in t&&n(14,d=t.scaleY),"transformation"in t&&n(15,p=t.transformation),"flipX"in t&&n(16,y=t.flipX),"flipY"in t&&n(17,m=t.flipY),"padding"in t&&n(18,g=t.padding),"zoomIdentity"in t&&n(19,v=t.zoomIdentity),"blockReindexing"in t&&n(20,_=t.blockReindexing),"backgroundColor"in t&&n(4,b=t.backgroundColor),"paddingColor"in t&&n(5,x=t.paddingColor),"$$scope"in t&&n(32,R=t.$$scope)},t.$$.update=()=>{if(4096&t.$$.dirty[0]&&function(t,e){t.set(new on(e))}(M,{renderer:s}),8388614&t.$$.dirty[0]&&(a.constructor===Number&&c.constructor===Number?(n(21,O=a),n(22,A=c)):void 0!==S?(n(21,O=Number(I[2])),n(22,A=Number(I[3]))):void 0===S&&(n(21,O=100),n(22,A=100))),6291456&t.$$.dirty[0]&&n(24,$={x1:0,y1:0,x2:O,y2:A}),119529472&t.$$.dirty[0]){!function(t,e){t.set(mn(e))}(w,{sectionId:i,coordinates:$,scaleX:f,scaleY:d,padding:g,flipX:y,flipY:m,blockReindexing:_,transformation:p,zoomIdentity:v}),r.loadSection(o)}17039360&t.$$.dirty[0]&&n(7,N=function({x1:t,x2:e,y1:n,y2:r},o){const{left:i,right:s,top:a,bottom:c}=an(o);return{x:Math.min(t,e)+i,y:Math.min(n,r)+a,width:Math.abs(t-e)-(i+s),height:Math.abs(n-r)-(a+c)}}($,g)),16777216&t.$$.dirty[0]&&n(8,H=function({x1:t,x2:e,y1:n,y2:r}){return{x:Math.min(t,e),y:Math.min(n,r),width:Math.abs(t-e),height:Math.abs(n-r)}}($)),6291456&t.$$.dirty[0]&&void 0===S&&n(0,l=`0 0 ${O} ${A}`)},[l,a,c,h,b,x,E,N,H,i,w,k,s,f,d,p,y,m,g,v,_,O,A,I,$,r,o,M,T,C,P,S,R,L,function(t){G[t?"unshift":"push"](()=>{n(6,E=t)})}]}class tc extends xt{constructor(t){super(),bt(this,t,Qa,Za,a,{renderer:12,width:1,height:2,viewBox:0,preserveAspectRatio:3,scaleX:13,scaleY:14,transformation:15,flipX:16,flipY:17,padding:18,zoomIdentity:19,blockReindexing:20,backgroundColor:4,paddingColor:5},[-1,-1])}}function ec(t,e){if(t){if(t.constructor!==Array)throw new Error("'key' must be Array");if(t.length!==e)throw new Error("'key' must be of same length as positioning props");return t}return new Array(e).fill(0).map((t,e)=>e)}function nc(t,e,n,r){rc(t);const o="polar"===e.transformation&&!0===n.interpolate;if(o){const o=e.getScaleTransformation(r);return Zo(t,e,{scaleTransformation:o,postScaleTransformation:e.postScaleTransformation},n)}if(!o){return Fo(t,e.getTotalTransformation(r),n)}}function rc(t){if(!(uo(t)&&t.constructor===Object&&"type"in t&&"coordinates"in t))throw new Error("Invalid geometry")}function oc(t,e,n,r,o){const i=ec(e,t.length),s={};for(let e=0;e<i.length;e++){s[i[e]]=nc(t[e],n,r,o)}return s}const ic=JSON.stringify;function sc(t){if(ac(t.x1,t.x2))throw new Error(`Rectangle: invalid combination of 'x1' and 'x2': ${ic(t.x1)}, ${ic(t.x2)}. Either provide both or none.`);if(ac(t.y1,t.y2))throw new Error(`Rectangle: invalid combination of 'y1' and 'y2': ${ic(t.y1)}, ${ic(t.y2)}. Either provide both or none.`)}function ac(t,e){return lo(t)?uo(e):lo(e)}const cc=(t,e)=>new Error(`Rectangle: invalid coordinate value for '${e}': ${ic(t)}`);function uc(t,e){return uo(t)&&uo(e)}function lc(t,e,n){if(t.constructor===Function)return t(n);{const r=(["x1","x2"].includes(e)?n.scaleX:n.scaleY)(t);return function(t,e,n){const r=["x1","x2"].includes(n)?"scaleX":"scaleY";if(co(e))throw new Error(`Scale '${r}' received '${ic(t)}' and returned '${ic(e)}`)}(t,r,e),r}}function hc(t){return{type:"Polygon",coordinates:[[[t.x1,t.y1],[t.x2,t.y1],[t.x2,t.y2],[t.x1,t.y2],[t.x1,t.y1]]]}}var fc={x:{required:!1},y:{required:!1},geometry:{required:!1},radius:{required:!1,default:3},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},dc={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},pc={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},yc={x:{required:!1},y:{required:!1},geometry:{required:!1},strokeWidth:{required:!1,default:3},stroke:{required:!1,default:"black"},opacity:{required:!1,default:1}},mc={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1},text:{required:!1},fontFamily:{required:!1,default:"Helvetica"},fontSize:{required:!1,default:16},fontWeight:{required:!1,default:"normal"},rotation:{required:!1,default:0},anchorPoint:{required:!1,default:"center"}},gc={x:{required:!1},y:{required:!1},geometry:{required:!1},shape:{required:!1},size:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},vc={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},independentAxis:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},strokeOpacity:{required:!1},fillOpacity:{required:!1},opacity:{required:!1,default:1}};function _c(t,e){return"Point"===t?bc(e,fc):"Rectangle"===t?bc(e,dc):"Polygon"===t?bc(e,pc):"Line"===t?bc(e,yc):"Label"===t?bc(e,mc):"Symbol"===t?bc(e,gc):"Area"===t?bc(e,vc):void 0}function bc(t,e){const n={};for(const r in t){const o=t[r],i=e[r];if(uo(o)){if(!(r in e))throw xc(r);n[r]=o}if(lo(o)&&r in e){if(i.required)throw Mc(r);uo(i.default)?n[r]=i.default:n[r]=o}}return n}const xc=t=>new Error(`Aesthetic '${t}' not allowed`),Mc=t=>new Error(`Required aesthetic '${t}' is missing`);function wc({x:t,y:e,geometry:n},r){if(!(uo(t)&&uo(e)&&lo(n)||lo(t)&&lo(e)&&uo(n)))throw new Error(r+": Invalid combination of 'x', 'y', and 'geometry' props")}function Tc({x:t,y:e,geometry:n}){return lo(n)?"xy":uo(n)?"geometry":void 0}function kc(t){return t.constructor!==Function}function Ec(t,e,n){wc(t);const r=Tc(t);if("xy"===r){const r=kc(t.x),o=kc(t.y);return Fo({type:"Point",x:r?t.x:t.x(e),y:r?t.y:t.y(e)},e.getTotalTransformation({xNeedsScaling:r,yNeedsScaling:o}),n)}if("geometry"===r){const r=kc(t.geometry);return Fo(r?t.geometry:t.geometry(e),e.getTotalTransformation(r),n)}}function Cc({x:t,y:e},n,r,o,i){Pc(t,e);const s=function(t,e,n){return{type:n,x:t,y:e}}(t,e,o),a="polar"===n.transformation&&!0===r.interpolate;if(a){const t=n.getScaleTransformation(i);return Zo(s,n,{scaleTransformation:t,postScaleTransformation:n.postScaleTransformation},r)}if(!a){return Fo(s,n.getTotalTransformation(i),r)}}function Pc(t,e){if(t.constructor!==Array)throw new Error("'x' prop must be Array or function that returns array");if(e.constructor!==Array)throw new Error("'y' prop must be Array or function that returns array");if(t.length!==e.length)throw new Error("Arrays passed to 'x' and 'y' must have the same length")}function Oc({x:t,y:e},n,r,o,i,s){Pc(t,e);const a=ec(n,t.length),c={};for(let n=0;n<a.length;n++){c[a[n]]=Cc({x:t[n],y:e[n]},r,o,i,s)}return c}var Ac={cross:[[-.5,-1],[.5,-1],[.5,-.5],[1,-.5],[1,.5],[.5,.5],[.5,1],[-.5,1],[-.5,.5],[-1,.5],[-1,-.5],[-.5,-.5],[-.5,-1],[-.5,-1]],"cross-sharp":[[0,-1],[.2,-.2],[1,0],[.2,.2],[0,1],[-.2,.2],[-1,0],[-.2,-.2],[0,-1]],diamond:[[0,-1],[1,0],[0,1],[-1,0],[0,-1],[0,-1]],"triangle-up":[[0,-1],[1,1],[-1,1],[0,-1],[0,-1]],"triangle-down":[[1,-1],[0,1],[-1,-1],[1,-1],[1,-1]],"triangle-right":[[-1,-1],[1,0],[-1,1],[-1,-1],[-1,-1]],"triangle-left":[[1,-1],[-1,0],[1,1],[1,-1],[1,-1]],star4:[[0,.71],[1,1],[.71,0],[1,-1],[0,-.71],[-1,-1],[-.71,0],[-1,1],[0,.71],[0,.71]],star5:[[0,.5],[.6,.8],[.5,.1],[1,-.3],[.3,-.4],[0,-1],[-.3,-.4],[-1,-.3],[-.5,.1],[-.6,.8],[0,.5],[0,.5]],star:[[0,.5],[.6,.8],[.5,.1],[1,-.3],[.3,-.4],[0,-1],[-.3,-.4],[-1,-.3],[-.5,.1],[-.6,.8],[0,.5],[0,.5]],star6:[[0,.58],[.5,1],[.43,.29],[1,0],[.43,-.29],[.5,-1],[0,-.58],[-.5,-1],[-.43,-.29],[-1,0],[-.43,.29],[-.5,1],[0,.58]],star8:[[0,.54],[.41,1],[.38,.38],[1,.41],[.54,0],[1,-.41],[.38,-.38],[.41,-1],[0,-.54],[-.41,-1],[-.38,-.38],[-1,-.41],[-.54,0],[-1,.41],[-.38,.38],[-.41,1],[0,.54]],pentagon:[[-1,-.24],[0,-1],[1,-.24],[.62,1],[-.62,1],[-1,-.24],[-1,-.24]],hexagon:[[-1,0],[-.57,-1],[.57,-1],[1,0],[.57,1],[-.57,1],[-1,0],[-1,0]],heptagon:[[-1,.29],[-.8,-.6],[0,-1],[.8,-.6],[1,.29],[.45,1],[-.45,1],[-1,.29],[-1,.29]],septagon:[[-1,.29],[-.8,-.6],[0,-1],[.8,-.6],[1,.29],[.45,1],[-.45,1],[-1,.29],[-1,.29]],octagon:[[-1,-.41],[-.41,-1],[.41,-1],[1,-.41],[1,.41],[.41,1],[-.41,1],[-1,.41],[-1,-.41],[-1,-.41]],nonagon:[[.35,-1],[.88,-.55],[1,.15],[.65,.76],[0,1],[-.65,.76],[-1,.15],[-.88,-.55],[-.35,-1],[.35,-1],[.35,-1]],decagon:[[-1,0],[-.81,-.62],[-.31,-1],[.31,-1],[.81,-.62],[1,0],[.81,.62],[.31,1],[-.31,1],[-.81,.62],[-1,0],[-1,0]]};function Sc(t,{radius:e}){const n=t.coordinates[0],r=t.coordinates[1],o=2*Math.PI*e,i=Math.max(Math.ceil(o),9),s={type:"Polygon",coordinates:[[]]};for(let t=0;t<i;t++)s.coordinates[0].push([n+e*Math.cos(Math.PI*t/i*2-Math.PI/2),r+e*Math.sin(Math.PI*t/i*2-Math.PI/2)]);return s.coordinates[0].push(s.coordinates[0][0]),s}function Ic(t,e){const[n,r]=t.coordinates,o=e.shape||"circle",i=e.size||8;if("circle"===o)return function(t,e,n){return Sc({type:"Point",coordinates:[t,e]},{radius:n/2})}(n,r,i);if("square"===o)return function(t,e,n){const r=n/2;return hc({x1:t-r,x2:t+r,y1:e-r,y2:e+r})}(n,r,i);if(o in Ac){return $c(n,r,{type:"Polygon",coordinates:[Ac[o]]},i)}return $c(n,r,o,i)}function $c(t,e,n,r){const o=r/2;return Fo(n,n=>[n[0]*o+t,n[1]*o+e])}function Nc(t){const{independentAxis:e,...n}=t,r=["singleton","array"],o=Object.entries(n).filter(([t,e])=>r.includes(e.type)).reduce((t,[e,r])=>(t[e]=n[e],t),{}),i=Object.keys(o);if(!["x1","y1"].every(t=>i.includes(t)))throw new Error("At least x1 and y1 must be provided");if("singleton"===o.x1.type&&"singleton"===o.y1.type)throw new Error("At least x1 or y1 must be passed an array");if(e&&"x"!==e){if("y"!==e)throw new Error('independentAxis must be passed "x" or "y" or left blank');if("singleton"===o.y1.type||"array"===o.y1.type&&o.y1.arrayLength<2)throw new Error('y1 must be passed an array of at least length 2 when independentAxis is "y"');if(i.includes("y2"))throw new Error('independentAxis must be "x" when x1, y1 and y2 are specified')}else{if("singleton"===o.x1.type||"array"===o.x1.type&&o.x1.arrayLength<2)throw new Error('x1 must be passed an array of at least length 2 when independentAxis is "x" or undefined');if(i.includes("x2"))throw new Error('independentAxis must be "y" when x1, y1 and x2 are specified')}if(!Object.values(o).filter(t=>"array"===t.type).map(t=>t.value.length).every((t,e,n)=>t===n[0]))throw new Error("Arrays given must be of equal length");return t}function Hc({independentAxis:t,x1:e,y1:n,x2:r,y2:o}){const i=t&&"x"!==t?"y":"x",[s,a]="x"===i?["x1",e]:["y1",n],[c,u]="x"===i?["y1",n]:["x1",e],[l,h]="x"===i?["y2",o]:["x2",r],f=a.arrayLength,d={singleton:{value:Array(f).fill(u.value),type:"array",arrayLength:f},array:u},p={singleton:{value:Array(f).fill(h.value),type:"array",arrayLength:f},none:{value:Array(f).fill(0),type:"array",arrayLength:f},array:h};return{independentAxis:i,[s]:a,[c]:d[u.type],[l]:p[h.type]}}const Lc={x1:"scaleX",y1:"scaleY",x2:"scaleX",y2:"scaleY"};function Rc({independentAxis:t,...e},n){return{independentAxis:t,...Object.entries(e).reduce((t,[e,r])=>{if(r.scaled)t[e]=r.value;else{const o=n[Lc[e]];t[e]=r.value.map(t=>o(t))}return t},{})}}function zc({x1:t,y1:e,x2:n,y2:r,independentAxis:o}){let i,s;"x"===o?(i=r.map((e,n)=>[t[n],e]),s=e.map((e,n)=>[t[n],e]).reverse()):(i=n.map((t,n)=>[t,e[n]]),s=t.map((t,n)=>[t,e[n]]).reverse());const a=[i[0]];return{type:"Polygon",coordinates:[i.concat(s,a)]}}function jc(t,e,n,r){wc(t);const o=Tc(t);return"xy"===o?function({x:t,y:e},n,r,o){!function(t,e){if(![Array,Function].includes(t.constructor))throw new Error("'x' prop must be Array or Function");if(![Array,Function].includes(e.constructor))throw new Error("'y' prop must be Array or Function")}(t,e);const i=kc(t),s=kc(e),a=i?t:t(r),c=s?e:e(r),{xArray:u,yArray:l}=function(t,e){if(t.constructor!==Array&&e.constructor!==Array)throw new Error("Invalid input: cannot recycle all geometry props");return{xArray:t.constructor===Array?t:Dc(t,e.length),yArray:e.constructor===Array?e:Dc(e,t.length)}}(a,c);Pc(u,l);const h=ec(n,u.length),f=r.getTotalTransformation({xNeedsScaling:i,yNeedsScaling:s});return function(t,e,n,r){const o={};for(let i=0;i<n.length;i++){const s=n[i];o[s]={type:"Point",coordinates:r([t[i],e[i]])}}return o}(u,l,h,f)}(t,e,n):"geometry"===o?function(t,e,n,r){!function(t){if(![Array,Function].includes(t.constructor))throw new Error("'geometry' prop must be Array or Function")}(t.geometry);const o=kc(t.geometry),i=o?t.geometry:t.geometry(n);rc(i);const s=ec(e,i.length),a=n.getTotalTransformation(o);return function(t,e,n){const r={};for(let o=0;o<e.length;o++){const i=e[o];r[i]={type:"Point",coordinates:n(t[o].coordinates)}}return r}(i,s,a)}(t,e,n):void 0}function Dc(t,e){return new Array(e).fill(t)}function Yc(t,e){return new Array(e).fill(t)}const Xc=["x1","x2","y1","y2"];const Bc={x1:"minX",x2:"maxX",y1:"minY",y2:"maxY"};function Fc(t,e){return e.paddedBbox[Bc[t]]}const qc=new Error("RectangleLayer: invalid coordinate specification");function Gc(t,e,n,r,o){const i={};for(const s in t){const a=t[s];let c;const u=s.startsWith("x")?e.scaleX:e.scaleY;r[s]&&(c=Yc(a,o)),r[s]||(c=a),i[s]=n[s]?c.map(u):c}return i}function Vc(t,e){if(void 0===t)return()=>{};if(t.constructor===Function)return t;const n=function(t,e){const n=e.length,r={};if(t.constructor===Array){!function(t,e){if(t.length!==e)throw new Error("If provided as Arrays, all positioning props must be the same length")}(t,n);for(let o=0;o<n;o++){const n=e[o];r[n]=t[o]}}else for(let o=0;o<n;o++){const n=e[o];r[n]=t}return r}(t,e);return t=>n[t]}const Wc=new Proxy({Point:Ec,Rectangle:function(t,e,n){return nc(hc(function(t,e){sc(t),function(t){for(const e in t){const n=t[e];if(uo(n)){if(co(n))throw cc(n,e);if(![Number,String,Date,Function].includes(n.constructor))throw cc(n,e)}}}(t);const{x1:n,x2:r,y1:o,y2:i}=t,s={};uc(n,r)?(s.x1=lc(n,"x1",e),s.x2=lc(r,"x2",e)):(s.x1=e.rangeX[0],s.x2=e.rangeX[1]);uc(o,i)?(s.y1=lc(o,"y1",e),s.y2=lc(i,"y2",e)):(s.y1=e.rangeY[0],s.y2=e.rangeY[1]);return s}(t,e)),e,n,!1)},Polygon:function(t,e,n){wc(t);const r=Tc(t);if("xy"===r){const r=kc(t.x),o=kc(t.y);return Cc({x:r?t.x:t.x(e),y:o?t.y:t.y(e)},e,n,"Polygon",{xNeedsScaling:r,yNeedsScaling:o})}if("geometry"===r){const r=kc(t.geometry);return nc(r?t.geometry:t.geometry(e),e,n,r)}},Line:function(t,e,n){wc(t);const r=Tc(t);if("xy"===r){const r=kc(t.x),o=kc(t.y);return Cc({x:r?t.x:t.x(e),y:o?t.y:t.y(e)},e,n,"LineString",{xNeedsScaling:r,yNeedsScaling:o})}if("geometry"===r){const r=kc(t.geometry);return nc(r?t.geometry:t.geometry(e),e,n,r)}},Label:Ec,Symbol:function(t,e,n){return Ic(Ec(t,e,n),t)},Area:function(t,e,n){return nc(zc(Rc(Hc(Nc(function({independentAxis:t,...e},n){const r=Object.entries(e).reduce((t,[e,r])=>{const o="function"==typeof r?r(n):r;return t[e]={type:void 0===o?"none":Array.isArray(o)?"array":"singleton",...Array.isArray(o)&&{arrayLength:o.length},value:o,scaled:"function"==typeof r},t},{});return r.independentAxis=t&&t.toLowerCase(),r}((({x1:t,y1:e,x2:n,y2:r,independentAxis:o})=>({x1:t,y1:e,x2:n,y2:r,independentAxis:o}))(t),e))),e)),e,n,!1)}},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Mark type: '${e}'`)}});new Proxy({Point:jc,Rectangle:function(t,e,n,r){const{scaledCoordinates:o,length:i}=function(t,e){sc(t);const n=function(t){const e={};for(const n of Xc){const r=t[n];e[n]=uo(r)&&r.constructor!==Function}return e}(t),r=function(t,e){const n={};for(const r in t){const o=t[r];o.constructor===Function?n[r]=o(e):n[r]=o}return n}(function(t,e){const n={};for(const r of Xc){const o=t[r];n[r]=lo(o)?Fc(r,e):o}return n}(t,e),e),o=function(t){let e,n=!1;for(const r in t){const o=t[r];if(o.constructor===Array&&(n=!0,e=e||o.length,e!==o.length))throw qc}if(!n)throw qc;return e}(r),i=function(t){const e={};for(const n in t){const r=t[n];e[n]=r.constructor!==Array}return e}(r);return{scaledCoordinates:Gc(r,e,n,i,o),length:o}}(t,n);return oc(function(t,e){const n=[];for(let r=0;r<e;r++)n.push(hc({x1:t.x1[r],x2:t.x2[r],y1:t.y1[r],y2:t.y2[r]}));return n}(o,i),e,n,r,!1)},Polygon:function(t,e,n,r){wc(t);const o=Tc(t);if("xy"===o){const o=kc(t.x),i=kc(t.y);return Oc({x:o?t.x:t.x(n),y:i?t.y:t.y(n)},e,n,r,"Polygon",{xNeedsScaling:o,yNeedsScaling:i})}if("geometry"===o){const o=kc(t.geometry);return oc(o?t.geometry:t.geometry(n),e,n,r,o)}},Line:function(t,e,n,r){wc(t);const o=Tc(t);if("xy"===o){const o=kc(t.x),i=kc(t.y);return Oc({x:o?t.x:t.x(n),y:i?t.y:t.y(n)},e,n,r,"LineString",{xNeedsScaling:o,yNeedsScaling:i})}if("geometry"===o){const o=kc(t.geometry);return oc(o?t.geometry:t.geometry(n),e,n,r,o)}},Label:jc,Symbol:function(t,e,n,r){return function(t,e){const n=Object.keys(t),r=Vc(e.shape,n),o=Vc(e.size,n),i={};for(const e in t){const n=r(e),s=o(e);i[e]=Ic(t[e],{shape:n,size:s})}return i}(jc(t,e,n),t)},Area:function(t,e,n,r){const o=(({x1:t,y1:e,x2:n,y2:r,independentAxis:o})=>({x1:t,y1:e,x2:n,y2:r,independentAxis:o}))(t),{numAreas:i,independentAxis:s,...a}=function({numAreas:t,independentAxis:e,x1:n,y1:r,x2:o,y2:i}){const s=e&&"x"!==e?"y":"x",[a,c]="x"===s?["x1",n]:["y1",r],[u,l]="x"===s?["x2",o]:["y2",i],[h,f]="x"===s?["y1",r]:["x1",n],[d,p]="x"===s?["y2",i]:["x2",o],y={array:{value:Array(t).fill(c.value),type:"array of arrays",numAreas:t,scaled:c.scaled},"array of arrays":c};return{numAreas:t,independentAxis:s,[a]:y[c.type],[u]:l,[h]:f,[d]:p}}(function(t){const{independentAxis:e,...n}=t,{x1:r,x2:o,y1:i,y2:s}=n;Object.values(n).forEach(t=>{if("singleton"===t.type)throw new Error("Props passed to the AreaLayer must be either an array or an array of arrays")});const a=e&&"x"!==e?"y":"x",[c,u]="x"===a?["y1",i]:["x1",r],[l,h]="x"===a?["y2",s]:["x2",o];if("array"===u.type||"array"===h.type)throw new Error(`${c} and ${l} must be passed an array of arrays when independentAxis is "${a}"`);const f=Object.values(n).filter(t=>"array of arrays"===t.type).map(t=>t.numAreas);if(!f.every((t,e,n)=>t===n[0]))throw new Error("Number of areas declared per prop must be equal");return{numAreas:f[0],independentAxis:e,...t}}(function({independentAxis:t,...e},n){const r=Object.entries(e).reduce((t,[e,r])=>{const o="function"==typeof r?r(n):r,i=t=>void 0===t,s=t=>!i(t)&&!Array.isArray(t),a=t=>!i(t)&&!s(t)&&t.every(t=>Array.isArray(t));return t[e]={type:i(o)?"none":s(o)?"singleton":a(o)?"array of arrays":"array",...a(o)&&{numAreas:o.length},value:o,scaled:"function"==typeof r},t},{});return r.independentAxis=t&&t.toLowerCase(),r}(o,n)));return oc([...Array(i).keys()].map(t=>Object.entries(a).reduce((e,[n,r])=>{const o="array of arrays"===r.type;return e[n]={type:o?"array":"none",value:o?r.value[t]:r.value,...o&&{arrayLength:r.value[t].length},scaled:r.scaled},e.independentAxis=s,e},{})).map(t=>zc(Rc(Hc(Nc(t)),n))),e,n,r,!1)}},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Layer type: '${e}'`)}});function Kc(t,e){const n=t.length,r=n-1,o=e/2,i=new Array(n),s=new Array(n);for(let e=0;e<n;e++){if(0===e){const[e,n]=Jc(t,o);i[0]=e,s[r]=n}if(e===r){const[e,n]=Zc(t,o);i[r]=e,s[0]=n}if(e>0&&e<r){const[n,a]=Uc(t,e,o);i[e]=n,s[r-e]=a}}const a=i.concat(s);return function(t){const e=t[0],n=t[t.length-1];return!(e[0]===n[0]&&e[1]===n[1])}(a)&&a.push(a[0]),a}function Jc(t,e){const n=tu(0,t);return ru(n,n[0],e)}function Zc(t,e){const n=Qc(t.length-1,t);return ru(n,n[1],e)}function Uc(t,e,n){const r=Qc(e,t),o=tu(e,t),i=eu(r),s=eu(o);if(i[0]===s[0]&&i[1]===s[1]){return ru(r,r[1],n)}{const t=ru(r,r[0],n),e=ru(o,o[1],n);return[ou(t[0],i,e[0],s),ou(t[1],i,e[1],s)]}}const Qc=(t,e)=>[e[t-1],e[t]],tu=(t,e)=>[e[t],e[t+1]];function eu(t){const[e,n]=t,r=bo(e,n);return[(n[0]-e[0])/r,(n[1]-e[1])/r]}function nu(t,e,n){return[t[0]+e[0]*n,t[1]+e[1]*n]}function ru(t,e,n){const r=eu(t),o=[-(i=r)[1],i[0]];var i;return[nu(e,o,n),nu(e,o,-n)]}function ou(t,e,n,r){const o=function(t,e,n,r){const o=t[0]-n[0],i=t[1]-n[1],s=e[0],a=r[0],c=e[1],u=r[1];return(a*i-o*u)/(s*u-a*c)}(t,e,n,r);return[t[0]+e[0]*o,t[1]+e[1]*o]}const iu={Point:Sc,Line:function(t,{strokeWidth:e}){const n=t.coordinates;if("LineString"===t.type){return{type:"Polygon",coordinates:[Kc(n,e)]}}if("MultiLineString"===t.type){const t=[];for(let r=0;r<n.length;r++)t.push([Kc(n[r],e)]);return{type:"MultiPolygon",coordinates:t}}}};function su(t,e,n){if(lo(n)||lo(e))return Ct(e);if(n.constructor===Number){return At(e,au(t,n))}if(n.constructor===Object){if(!(t in n))return Ct(e);const r=n[t];if(r&&r.constructor===Number){return At(e,au(t,r))}if(r&&r.constructor===Object){return At(e,function(t,e){return"geometry"===t?Object.assign({interpolate:zs},e):Object.assign({interpolate:Oe},e)}(t,r))}}throw new Error("Invalid transition for "+t)}function au(t,e){return"geometry"===t?{duration:e,easing:Mt,interpolate:zs}:{duration:e,easing:Mt,interpolate:Oe}}function cu(t,e){return void 0===t||void 0===e||t.constructor!==Object?t===e:function(t,e){if(e.constructor!==Object)return!1;if(lu(t)!==lu(e))return!1;for(const n in t){const r=t[n],o=e[n];if(r.constructor!==Object)return r===o;if(!uu(r,o))return!1}return!0}(t,e)}function uu(t,e){if(e.constructor!==Object)return!1;if(lu(t)!==lu(e))return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function lu(t){return Object.keys(t).length}function hu(...t){for(const e of t)if(void 0!==e)return!0;return!1}function fu(t){return Object.assign({simplify:!1,simplificationTreshold:1,interpolate:!0,interpolationTreshold:5,decimals:2},t)}const du=ao();function pu(t){return du(t)}function yu(t){switch(t){case"center":return{textAnchor:"middle",dominantBaseline:"middle"};case"lb":return{textAnchor:"start",dominantBaseline:"alphabetic"};case"lt":return{textAnchor:"start",dominantBaseline:"hanging"};case"rt":return{textAnchor:"end",dominantBaseline:"hanging"};case"rb":return{textAnchor:"end",dominantBaseline:"alphabetic"};case"l":return{textAnchor:"start",dominantBaseline:"middle"};case"r":return{textAnchor:"end",dominantBaseline:"middle"};case"b":return{textAnchor:"middle",dominantBaseline:"alphabetic"};case"t":return{textAnchor:"middle",dominantBaseline:"hanging"};default:return{textAnchor:"middle",dominantBaseline:"middle"}}}function mu(t){let e,n,r,o,i=t[26]&&gu(t),s=t[27]&&vu(t),a=t[28]&&_u(t),c=t[29]&&bu(t);return{c(){i&&i.c(),e=k(),s&&s.c(),n=k(),a&&a.c(),r=k(),c&&c.c(),o=E()},m(t,u){i&&i.m(t,u),v(t,e,u),s&&s.m(t,u),v(t,n,u),a&&a.m(t,u),v(t,r,u),c&&c.m(t,u),v(t,o,u)},p(t,u){t[26]?i?i.p(t,u):(i=gu(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),t[27]?s?s.p(t,u):(s=vu(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t[28]?a?a.p(t,u):(a=_u(t),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),t[29]?c?c.p(t,u):(c=bu(t),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},d(t){i&&i.d(t),t&&b(e),s&&s.d(t),t&&b(n),a&&a.d(t),t&&b(r),c&&c.d(t),t&&b(o)}}}function gu(t){let e,n,r;return{c(){e=w("path"),P(e,"class",n=t[0].toLowerCase()),P(e,"d",r=pu(t[16])),P(e,"fill",t[18]),P(e,"stroke",t[19]),P(e,"stroke-width",t[20]),P(e,"fill-opacity",t[21]),P(e,"stroke-opacity",t[22]),P(e,"opacity",t[23])},m(t,n){v(t,e,n)},p(t,o){1&o[0]&&n!==(n=t[0].toLowerCase())&&P(e,"class",n),65536&o[0]&&r!==(r=pu(t[16]))&&P(e,"d",r),262144&o[0]&&P(e,"fill",t[18]),524288&o[0]&&P(e,"stroke",t[19]),1048576&o[0]&&P(e,"stroke-width",t[20]),2097152&o[0]&&P(e,"fill-opacity",t[21]),4194304&o[0]&&P(e,"stroke-opacity",t[22]),8388608&o[0]&&P(e,"opacity",t[23])},d(t){t&&b(e)}}}function vu(t){let e,n,r;return{c(){e=w("circle"),P(e,"class","point"),P(e,"cx",n=t[16].coordinates[0]),P(e,"cy",r=t[16].coordinates[1]),P(e,"r",t[17]),P(e,"fill",t[18]),P(e,"stroke",t[19]),P(e,"stroke-width",t[20]),P(e,"fill-opacity",t[21]),P(e,"stroke-opacity",t[22]),P(e,"opacity",t[23])},m(t,n){v(t,e,n)},p(t,o){65536&o[0]&&n!==(n=t[16].coordinates[0])&&P(e,"cx",n),65536&o[0]&&r!==(r=t[16].coordinates[1])&&P(e,"cy",r),131072&o[0]&&P(e,"r",t[17]),262144&o[0]&&P(e,"fill",t[18]),524288&o[0]&&P(e,"stroke",t[19]),1048576&o[0]&&P(e,"stroke-width",t[20]),2097152&o[0]&&P(e,"fill-opacity",t[21]),4194304&o[0]&&P(e,"stroke-opacity",t[22]),8388608&o[0]&&P(e,"opacity",t[23])},d(t){t&&b(e)}}}function _u(t){let e,n;return{c(){e=w("path"),P(e,"class","line"),P(e,"d",n=pu(t[16])),P(e,"fill","none"),P(e,"stroke-width",t[20]),P(e,"stroke",t[19]),P(e,"opacity",t[23])},m(t,n){v(t,e,n)},p(t,r){65536&r[0]&&n!==(n=pu(t[16]))&&P(e,"d",n),1048576&r[0]&&P(e,"stroke-width",t[20]),524288&r[0]&&P(e,"stroke",t[19]),8388608&r[0]&&P(e,"opacity",t[23])},d(t){t&&b(e)}}}function bu(t){let e,n,r,o,i,s,a,c=t[2].text+"";return{c(){e=w("text"),n=T(c),P(e,"class","label"),P(e,"x",r=t[16].coordinates[0]),P(e,"y",o=t[16].coordinates[1]),P(e,"fill",t[18]),P(e,"stroke",t[19]),P(e,"stroke-width",t[20]),P(e,"fill-opacity",t[21]),P(e,"stroke-opacity",t[22]),P(e,"opacity",t[23]),P(e,"transform",t[14]),P(e,"font-family",t[1]),P(e,"font-size",i=t[24]+"px"),P(e,"font-weight",t[25]),P(e,"text-anchor",s=t[15].textAnchor),P(e,"dominant-baseline",a=t[15].dominantBaseline)},m(t,r){v(t,e,r),g(e,n)},p(t,u){4&u[0]&&c!==(c=t[2].text+"")&&A(n,c),65536&u[0]&&r!==(r=t[16].coordinates[0])&&P(e,"x",r),65536&u[0]&&o!==(o=t[16].coordinates[1])&&P(e,"y",o),262144&u[0]&&P(e,"fill",t[18]),524288&u[0]&&P(e,"stroke",t[19]),1048576&u[0]&&P(e,"stroke-width",t[20]),2097152&u[0]&&P(e,"fill-opacity",t[21]),4194304&u[0]&&P(e,"stroke-opacity",t[22]),8388608&u[0]&&P(e,"opacity",t[23]),16384&u[0]&&P(e,"transform",t[14]),2&u[0]&&P(e,"font-family",t[1]),16777216&u[0]&&i!==(i=t[24]+"px")&&P(e,"font-size",i),33554432&u[0]&&P(e,"font-weight",t[25]),32768&u[0]&&s!==(s=t[15].textAnchor)&&P(e,"text-anchor",s),32768&u[0]&&a!==(a=t[15].dominantBaseline)&&P(e,"dominant-baseline",a)},d(t){t&&b(e)}}}function xu(e){let n,r="svg"===e[30].output(),o=r&&mu(e);return{c(){o&&o.c(),n=E()},m(t,e){o&&o.m(t,e),v(t,n,e)},p(t,e){1073741824&e[0]&&(r="svg"===t[30].output()),r?o?o.p(t,e):(o=mu(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&b(n)}}}let Mu=0;function wu(e,n,r){let o,i,s,a,l,h,f,d,p,y,m,g,v,_,b=t,x=()=>(b(),b=c(ne,t=>r(84,i=t)),ne),M=t,w=()=>(M(),M=c(Gt,t=>r(16,s=t)),Gt),T=t,k=()=>(T(),T=c(Vt,t=>r(17,a=t)),Vt),E=t,C=()=>(E(),E=c(Wt,t=>r(18,l=t)),Wt),P=t,O=()=>(P(),P=c(Kt,t=>r(19,h=t)),Kt),A=t,S=()=>(A(),A=c(Jt,t=>r(20,f=t)),Jt),I=t,$=()=>(I(),I=c(Zt,t=>r(21,d=t)),Zt),N=t,H=()=>(N(),N=c(Ut,t=>r(22,p=t)),Ut),L=t,R=()=>(L(),L=c(Qt,t=>r(23,y=t)),Qt),z=t,j=()=>(z(),z=c(te,t=>r(24,m=t)),te),B=t,q=()=>(B(),B=c(ee,t=>r(25,g=t)),ee);e.$$.on_destroy.push(()=>b()),e.$$.on_destroy.push(()=>M()),e.$$.on_destroy.push(()=>T()),e.$$.on_destroy.push(()=>E()),e.$$.on_destroy.push(()=>P()),e.$$.on_destroy.push(()=>A()),e.$$.on_destroy.push(()=>I()),e.$$.on_destroy.push(()=>N()),e.$$.on_destroy.push(()=>L()),e.$$.on_destroy.push(()=>z()),e.$$.on_destroy.push(()=>B());const G="mark"+Mu++;let V=!0;const W=()=>!V;let{type:K}=n,{x:J}=n,{y:Z}=n,{x1:U}=n,{x2:Q}=n,{y1:tt}=n,{y2:et}=n,{geometry:nt}=n,{shape:rt}=n,{size:ot}=n,{independentAxis:it}=n,{radius:st}=n,{fill:at}=n,{stroke:ct}=n,{strokeWidth:ut}=n,{strokeOpacity:lt}=n,{fillOpacity:ht}=n,{opacity:ft}=n,{text:dt}=n,{fontFamily:pt}=n,{fontSize:yt}=n,{fontWeight:mt}=n,{rotation:gt}=n,{anchorPoint:vt}=n,{transition:_t}=n,{onClick:bt}=n,{onMousedown:xt}=n,{onMouseup:Mt}=n,{onMouseover:wt}=n,{onMouseout:Tt}=n,{onMousedrag:kt}=n,{onTouchdown:Et}=n,{onTouchup:Ct}=n,{onTouchover:Pt}=n,{onTouchout:Ot}=n,{onTouchdrag:At}=n,{onSelect:St}=n,{onDeselect:It}=n,{renderSettings:$t}=n,{blockReindexing:Nt=!1}=n,{_asPolygon:Ht=!0}=n,Lt=_c(K,{x:J,y:Z,x1:U,x2:Q,y1:tt,y2:et,geometry:nt,shape:rt,size:ot,independentAxis:it,radius:st,fill:at,stroke:ct,strokeWidth:ut,strokeOpacity:lt,fillOpacity:ht,opacity:ft,text:dt,fontFamily:pt,fontSize:yt,fontWeight:mt,rotation:gt,anchorPoint:vt}),Rt={x:J,y:Z,x1:U,x2:Q,y1:tt,y2:et,geometry:nt,shape:rt,size:ot,independentAxis:it},zt=Wc[K],jt=iu[K],Dt=!0===Ht&&void 0!==iu[K];const Yt=F(sn);u(e,Yt,t=>r(30,_=t));const Xt=F(_n);u(e,Xt,t=>r(83,o=t));const Bt=F(xn);let Ft,qt;u(e,Bt,t=>r(88,v=t)),ue(),le();let Gt=su("geometry",qt,_t);w();let Vt=su("radius",Lt.radius,_t);k();let Wt=su("fill",Lt.fill,_t);C();let Kt=su("stroke",Lt.stroke,_t);O();let Jt=su("strokeWidth",Lt.strokeWidth,_t);S();let Zt=su("fillOpacity",Lt.fillOpacity,_t);$();let Ut=su("strokeOpacity",Lt.strokeOpacity,_t);H();let Qt=su("opacity",Lt.opacity,_t);R();let te=su("fontSize",Lt.fontSize,_t);j();let ee=su("fontWeight",Lt.fontWeight,_t);q();let ne=su("rotation",Lt.rotation,_t);x();let re,oe=`rotate(${i}, ${s.coordinates[0]}, ${s.coordinates[1]})`,ie=yu(Lt.anchorPoint),se=!1,ae=!1;var ce;function ue(){Ft=zt(Rt,o,fu($t))}function le(){r(79,qt=Dt?jt(Ft,Lt):Ft)}function he(){if(V||!Nt&&!o.blockReindexing){if(fe(),pe){const t=v.mouse().marks();t.loadMark(K,de()),bt&&t.addMarkInteraction("click",G,bt),xt&&t.addMarkInteraction("mousedown",G,xt),Mt&&t.addMarkInteraction("mouseup",G,Mt),Tt&&t.addMarkInteraction("mouseout",G,Tt),wt&&t.addMarkInteraction("mouseover",G,wt),kt&&t.addMarkInteraction("mousedrag",G,kt)}if(ye){const t=v.touch().marks();t.loadMark(K,de()),Et&&t.addMarkInteraction("touchdown",G,Et),Ct&&t.addMarkInteraction("touchup",G,Ct),Pt&&t.addMarkInteraction("touchover",G,Pt),Ot&&t.addMarkInteraction("touchout",G,Ot),At&&t.addMarkInteraction("touchdrag",G,At)}}if(function(){const t=v.select();t.markIsLoaded(G)&&t.removeMark(G)}(),me){v.select().loadMark(K,de(),{onSelect:St,onDeselect:It})}}function fe(){if(Pn.hasMouse){const t=v.mouse().marks();t.markIsLoaded(G)&&(t.removeAllMarkInteractions(G),t.removeMark(G))}if(Pn.hasTouch){const t=v.touch().marks();t.markIsLoaded(G)&&(t.removeAllMarkInteractions(G),t.removeMark(G))}}function de(){return function(t,e,n,r){const o={markId:e};let i;return"Point"===t&&(i={pixelGeometry:n.pixelGeometry,radius:r.radius}),"Label"===t&&(i={pixelGeometry:n.pixelGeometry,radius:r.fontSize}),"Rectangle"===t&&(i={screenGeometry:n.screenGeometry}),"Polygon"===t&&(i={screenGeometry:n.screenGeometry}),"Line"===t&&(i={pixelGeometry:n.pixelGeometry,strokeWidth:r.strokeWidth}),"Symbol"===t&&(i={screenGeometry:n.screenGeometry}),"Area"===t&&(i={screenGeometry:n.screenGeometry}),o.attributes=i,o}(K,G,{screenGeometry:qt,pixelGeometry:Ft},Lt)}let pe,ye,me,ge,ve,_e,be;return ce=()=>{cu(re,_t)||(re=_t,w(r(3,Gt=su("geometry",s,_t))),k(r(4,Vt=su("radius",a,_t))),C(r(5,Wt=su("fill",l,_t))),O(r(6,Kt=su("stroke",h,_t))),S(r(7,Jt=su("strokeWidth",f,_t))),$(r(8,Zt=su("fillOpacity",d,_t))),H(r(9,Ut=su("strokeOpacity",p,_t))),R(r(10,Qt=su("opacity",y,_t))),j(r(11,te=su("fontSize",m,_t))),q(r(12,ee=su("fontWeight",g,_t))),x(r(13,ne=su("rotation",i,_t))))},D().$$.before_update.push(ce),X(()=>{V=!1}),Y(()=>{he()}),function(t){D().$$.on_destroy.push(t)}(()=>{fe()}),e.$set=t=>{"type"in t&&r(0,K=t.type),"x"in t&&r(34,J=t.x),"y"in t&&r(35,Z=t.y),"x1"in t&&r(36,U=t.x1),"x2"in t&&r(37,Q=t.x2),"y1"in t&&r(38,tt=t.y1),"y2"in t&&r(39,et=t.y2),"geometry"in t&&r(40,nt=t.geometry),"shape"in t&&r(41,rt=t.shape),"size"in t&&r(42,ot=t.size),"independentAxis"in t&&r(43,it=t.independentAxis),"radius"in t&&r(44,st=t.radius),"fill"in t&&r(45,at=t.fill),"stroke"in t&&r(46,ct=t.stroke),"strokeWidth"in t&&r(47,ut=t.strokeWidth),"strokeOpacity"in t&&r(48,lt=t.strokeOpacity),"fillOpacity"in t&&r(49,ht=t.fillOpacity),"opacity"in t&&r(50,ft=t.opacity),"text"in t&&r(51,dt=t.text),"fontFamily"in t&&r(1,pt=t.fontFamily),"fontSize"in t&&r(52,yt=t.fontSize),"fontWeight"in t&&r(53,mt=t.fontWeight),"rotation"in t&&r(54,gt=t.rotation),"anchorPoint"in t&&r(55,vt=t.anchorPoint),"transition"in t&&r(56,_t=t.transition),"onClick"in t&&r(57,bt=t.onClick),"onMousedown"in t&&r(58,xt=t.onMousedown),"onMouseup"in t&&r(59,Mt=t.onMouseup),"onMouseover"in t&&r(60,wt=t.onMouseover),"onMouseout"in t&&r(61,Tt=t.onMouseout),"onMousedrag"in t&&r(62,kt=t.onMousedrag),"onTouchdown"in t&&r(63,Et=t.onTouchdown),"onTouchup"in t&&r(64,Ct=t.onTouchup),"onTouchover"in t&&r(65,Pt=t.onTouchover),"onTouchout"in t&&r(66,Ot=t.onTouchout),"onTouchdrag"in t&&r(67,At=t.onTouchdrag),"onSelect"in t&&r(68,St=t.onSelect),"onDeselect"in t&&r(69,It=t.onDeselect),"renderSettings"in t&&r(70,$t=t.renderSettings),"blockReindexing"in t&&r(71,Nt=t.blockReindexing),"_asPolygon"in t&&r(72,Ht=t._asPolygon)},e.$$.update=()=>{3&e.$$.dirty[0]|33554424&e.$$.dirty[1]&&W()&&r(2,Lt=_c(K,{x:J,y:Z,x1:U,x2:Q,y1:tt,y2:et,geometry:nt,shape:rt,size:ot,independentAxis:it,radius:st,fill:at,stroke:ct,strokeWidth:ut,strokeOpacity:lt,fillOpacity:ht,opacity:ft,text:dt,fontFamily:pt,fontSize:yt,fontWeight:mt,rotation:gt,anchorPoint:vt})),8184&e.$$.dirty[1]&&W()&&r(74,Rt={x:J,y:Z,x1:U,x2:Q,y1:tt,y2:et,geometry:nt,shape:rt,size:ot,independentAxis:it}),1&e.$$.dirty[0]&&W()&&(zt=Wc[K],jt=iu[K]),1&e.$$.dirty[0]|1024&e.$$.dirty[2]&&W()&&r(77,Dt=!0===Ht&&void 0!==iu[K]),2101504&e.$$.dirty[2]&&W()&&(fu($t),r(81,se=!0),r(82,ae=!0)),148&e.$$.dirty[0]|32768&e.$$.dirty[2]&&W()&&(Dt||(Vt.set(Lt.radius),Jt.set(Lt.strokeWidth)),Dt&&r(82,ae=!0)),36&e.$$.dirty[0]&&W()&&Wt.set(Lt.fill),68&e.$$.dirty[0]&&W()&&Kt.set(Lt.stroke),132&e.$$.dirty[0]&&W()&&Jt.set(Lt.strokeWidth),260&e.$$.dirty[0]&&W()&&Zt.set(Lt.fillOpacity),516&e.$$.dirty[0]&&W()&&Ut.set(Lt.strokeOpacity),1028&e.$$.dirty[0]&&W()&&Qt.set(Lt.opacity),2052&e.$$.dirty[0]&&W()&&te.set(Lt.fontSize),4100&e.$$.dirty[0]&&W()&&ee.set(Lt.fontWeight),8196&e.$$.dirty[0]&&W()&&ne.set(Lt.rotation),8&e.$$.dirty[0]|1703936&e.$$.dirty[2]&&W()&&(se&&ue(),ae&&(le(),Gt.set(qt),he()),r(81,se=!1),r(82,ae=!1)),65536&e.$$.dirty[0]|4194304&e.$$.dirty[2]&&W()&&r(14,oe=`rotate(${i}, ${s.coordinates[0]}, ${s.coordinates[1]})`),4&e.$$.dirty[0]&&W()&&r(15,ie=yu(Lt.anchorPoint)),2080374784&e.$$.dirty[1]|1&e.$$.dirty[2]&&(pe=Pn.hasMouse&&hu(bt,xt,Mt,wt,Tt,kt)),62&e.$$.dirty[2]&&(ye=Pn.hasTouch&&hu(Et,Ct,Pt,Ot,At)),192&e.$$.dirty[2]&&(me=void 0!==St||void 0!==It),1&e.$$.dirty[0]|32768&e.$$.dirty[2]&&r(26,ge=!["Point","Line","Label"].includes(K)||Dt),1&e.$$.dirty[0]|32768&e.$$.dirty[2]&&r(27,ve="Point"===K&&!Dt),1&e.$$.dirty[0]|32768&e.$$.dirty[2]&&r(28,_e="Line"===K&&!Dt),1&e.$$.dirty[0]&&r(29,be="Label"===K)},[K,pt,Lt,Gt,Vt,Wt,Kt,Jt,Zt,Ut,Qt,te,ee,ne,oe,ie,s,a,l,h,f,d,p,y,m,g,ge,ve,_e,be,_,Yt,Xt,Bt,J,Z,U,Q,tt,et,nt,rt,ot,it,st,at,ct,ut,lt,ht,ft,dt,yt,mt,gt,vt,_t,bt,xt,Mt,wt,Tt,kt,Et,Ct,Pt,Ot,At,St,It,$t,Nt,Ht]}class Tu extends xt{constructor(t){super(),bt(this,t,wu,xu,a,{type:0,x:34,y:35,x1:36,x2:37,y1:38,y2:39,geometry:40,shape:41,size:42,independentAxis:43,radius:44,fill:45,stroke:46,strokeWidth:47,strokeOpacity:48,fillOpacity:49,opacity:50,text:51,fontFamily:1,fontSize:52,fontWeight:53,rotation:54,anchorPoint:55,transition:56,onClick:57,onMousedown:58,onMouseup:59,onMouseover:60,onMouseout:61,onMousedrag:62,onTouchdown:63,onTouchup:64,onTouchover:65,onTouchout:66,onTouchdrag:67,onSelect:68,onDeselect:69,renderSettings:70,blockReindexing:71,_asPolygon:72},[-1,-1,-1,-1])}}function ku(t){let e;const n=new Tu({props:{type:"Point",x:t[0],y:t[1],geometry:t[2],radius:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],renderSettings:t[24],blockReindexing:t[25],_asPolygon:!1}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,[e]){const r={};1&e&&(r.x=t[0]),2&e&&(r.y=t[1]),4&e&&(r.geometry=t[2]),8&e&&(r.radius=t[3]),16&e&&(r.fill=t[4]),32&e&&(r.stroke=t[5]),64&e&&(r.strokeWidth=t[6]),128&e&&(r.strokeOpacity=t[7]),256&e&&(r.fillOpacity=t[8]),512&e&&(r.opacity=t[9]),1024&e&&(r.transition=t[10]),2048&e&&(r.onClick=t[11]),4096&e&&(r.onMousedown=t[12]),8192&e&&(r.onMouseup=t[13]),16384&e&&(r.onMouseover=t[14]),32768&e&&(r.onMouseout=t[15]),65536&e&&(r.onMousedrag=t[16]),131072&e&&(r.onTouchdown=t[17]),262144&e&&(r.onTouchup=t[18]),524288&e&&(r.onTouchover=t[19]),1048576&e&&(r.onTouchout=t[20]),2097152&e&&(r.onTouchdrag=t[21]),4194304&e&&(r.onSelect=t[22]),8388608&e&&(r.onDeselect=t[23]),16777216&e&&(r.renderSettings=t[24]),33554432&e&&(r.blockReindexing=t[25]),n.$set(r)},i(t){e||(ut(n.$$.fragment,t),e=!0)},o(t){lt(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Eu(t,e,n){let{x:r}=e,{y:o}=e,{geometry:i}=e,{radius:s}=e,{fill:a}=e,{stroke:c}=e,{strokeWidth:u}=e,{strokeOpacity:l}=e,{fillOpacity:h}=e,{opacity:f}=e,{transition:d}=e,{onClick:p}=e,{onMousedown:y}=e,{onMouseup:m}=e,{onMouseover:g}=e,{onMouseout:v}=e,{onMousedrag:_}=e,{onTouchdown:b}=e,{onTouchup:x}=e,{onTouchover:M}=e,{onTouchout:w}=e,{onTouchdrag:T}=e,{onSelect:k}=e,{onDeselect:E}=e,{renderSettings:C}=e,{blockReindexing:P=!1}=e;return t.$set=t=>{"x"in t&&n(0,r=t.x),"y"in t&&n(1,o=t.y),"geometry"in t&&n(2,i=t.geometry),"radius"in t&&n(3,s=t.radius),"fill"in t&&n(4,a=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,u=t.strokeWidth),"strokeOpacity"in t&&n(7,l=t.strokeOpacity),"fillOpacity"in t&&n(8,h=t.fillOpacity),"opacity"in t&&n(9,f=t.opacity),"transition"in t&&n(10,d=t.transition),"onClick"in t&&n(11,p=t.onClick),"onMousedown"in t&&n(12,y=t.onMousedown),"onMouseup"in t&&n(13,m=t.onMouseup),"onMouseover"in t&&n(14,g=t.onMouseover),"onMouseout"in t&&n(15,v=t.onMouseout),"onMousedrag"in t&&n(16,_=t.onMousedrag),"onTouchdown"in t&&n(17,b=t.onTouchdown),"onTouchup"in t&&n(18,x=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,w=t.onTouchout),"onTouchdrag"in t&&n(21,T=t.onTouchdrag),"onSelect"in t&&n(22,k=t.onSelect),"onDeselect"in t&&n(23,E=t.onDeselect),"renderSettings"in t&&n(24,C=t.renderSettings),"blockReindexing"in t&&n(25,P=t.blockReindexing)},[r,o,i,s,a,c,u,l,h,f,d,p,y,m,g,v,_,b,x,M,w,T,k,E,C,P]}class Cu extends xt{constructor(t){super(),bt(this,t,Eu,ku,a,{x:0,y:1,geometry:2,radius:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,renderSettings:24,blockReindexing:25})}}function Pu(t){let e;const n=new Tu({props:{type:"Line",x:t[0],y:t[1],geometry:t[2],strokeWidth:t[3],stroke:t[4],opacity:t[5],transition:t[6],onClick:t[7],onMousedown:t[8],onMouseup:t[9],onMouseover:t[10],onMouseout:t[11],onMousedrag:t[12],onTouchdown:t[13],onTouchup:t[14],onTouchover:t[15],onTouchout:t[16],onTouchdrag:t[17],onSelect:t[18],onDeselect:t[19],renderSettings:t[20],blockReindexing:t[21],_asPolygon:!1}});return{c(){mt(n.$$.fragment)},m(t,r){gt(n,t,r),e=!0},p(t,[e]){const r={};1&e&&(r.x=t[0]),2&e&&(r.y=t[1]),4&e&&(r.geometry=t[2]),8&e&&(r.strokeWidth=t[3]),16&e&&(r.stroke=t[4]),32&e&&(r.opacity=t[5]),64&e&&(r.transition=t[6]),128&e&&(r.onClick=t[7]),256&e&&(r.onMousedown=t[8]),512&e&&(r.onMouseup=t[9]),1024&e&&(r.onMouseover=t[10]),2048&e&&(r.onMouseout=t[11]),4096&e&&(r.onMousedrag=t[12]),8192&e&&(r.onTouchdown=t[13]),16384&e&&(r.onTouchup=t[14]),32768&e&&(r.onTouchover=t[15]),65536&e&&(r.onTouchout=t[16]),131072&e&&(r.onTouchdrag=t[17]),262144&e&&(r.onSelect=t[18]),524288&e&&(r.onDeselect=t[19]),1048576&e&&(r.renderSettings=t[20]),2097152&e&&(r.blockReindexing=t[21]),n.$set(r)},i(t){e||(ut(n.$$.fragment,t),e=!0)},o(t){lt(n.$$.fragment,t),e=!1},d(t){vt(n,t)}}}function Ou(t,e,n){let{x:r}=e,{y:o}=e,{geometry:i}=e,{strokeWidth:s}=e,{stroke:a}=e,{opacity:c}=e,{transition:u}=e,{onClick:l}=e,{onMousedown:h}=e,{onMouseup:f}=e,{onMouseover:d}=e,{onMouseout:p}=e,{onMousedrag:y}=e,{onTouchdown:m}=e,{onTouchup:g}=e,{onTouchover:v}=e,{onTouchout:_}=e,{onTouchdrag:b}=e,{onSelect:x}=e,{onDeselect:M}=e,{renderSettings:w}=e,{blockReindexing:T=!1}=e;return t.$set=t=>{"x"in t&&n(0,r=t.x),"y"in t&&n(1,o=t.y),"geometry"in t&&n(2,i=t.geometry),"strokeWidth"in t&&n(3,s=t.strokeWidth),"stroke"in t&&n(4,a=t.stroke),"opacity"in t&&n(5,c=t.opacity),"transition"in t&&n(6,u=t.transition),"onClick"in t&&n(7,l=t.onClick),"onMousedown"in t&&n(8,h=t.onMousedown),"onMouseup"in t&&n(9,f=t.onMouseup),"onMouseover"in t&&n(10,d=t.onMouseover),"onMouseout"in t&&n(11,p=t.onMouseout),"onMousedrag"in t&&n(12,y=t.onMousedrag),"onTouchdown"in t&&n(13,m=t.onTouchdown),"onTouchup"in t&&n(14,g=t.onTouchup),"onTouchover"in t&&n(15,v=t.onTouchover),"onTouchout"in t&&n(16,_=t.onTouchout),"onTouchdrag"in t&&n(17,b=t.onTouchdrag),"onSelect"in t&&n(18,x=t.onSelect),"onDeselect"in t&&n(19,M=t.onDeselect),"renderSettings"in t&&n(20,w=t.renderSettings),"blockReindexing"in t&&n(21,T=t.blockReindexing)},[r,o,i,s,a,c,u,l,h,f,d,p,y,m,g,v,_,b,x,M,w,T]}class Au extends xt{constructor(t){super(),bt(this,t,Ou,Pu,a,{x:0,y:1,geometry:2,strokeWidth:3,stroke:4,opacity:5,transition:6,onClick:7,onMousedown:8,onMouseup:9,onMouseover:10,onMouseout:11,onMousedrag:12,onTouchdown:13,onTouchup:14,onTouchover:15,onTouchout:16,onTouchdrag:17,onSelect:18,onDeselect:19,renderSettings:20,blockReindexing:21})}}var Su=wn((function(t,e){t.exports=function(){var t,e,n,r="undefined"!=typeof Symbol,o="undefined"!=typeof Map,i="undefined"!=typeof Set,s=r?Symbol("immer-nothing"):((t={})["immer-nothing"]=!0,t),a=r?Symbol("immer-draftable"):"__$immer_draftable",c=r?Symbol("immer-state"):"__$immer_state",u=r?Symbol.iterator:"@@iterator",l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function h(t,e){function n(){this.constructor=t}l(t,e),t.prototype=(n.prototype=e.prototype,new n)}function f(t){return!!t&&!!t[c]}function d(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[a]||!!t.constructor[a]||b(t)||x(t))}(function(t){t[t.Object=0]="Object",t[t.Array=1]="Array",t[t.Map=2]="Map",t[t.Set=3]="Set"})(e||(e={})),function(t){t[t.ProxyObject=0]="ProxyObject",t[t.ProxyArray=1]="ProxyArray",t[t.ES5Object=2]="ES5Object",t[t.ES5Array=3]="ES5Array",t[t.Map=4]="Map",t[t.Set=5]="Set"}(n||(n={}));var p="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function y(t,n){m(t)===e.Object?p(t).forEach((function(e){return n(e,t[e],t)})):t.forEach((function(e,r){return n(r,e,t)}))}function m(t){if(t||E(),t[c])switch(t[c].type){case n.ES5Object:case n.ProxyObject:return e.Object;case n.ES5Array:case n.ProxyArray:return e.Array;case n.Map:return e.Map;case n.Set:return e.Set}return Array.isArray(t)?e.Array:b(t)?e.Map:x(t)?e.Set:e.Object}function g(t,n){return m(t)===e.Map?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function v(t,n){return m(t)===e.Map?t.get(n):t[n]}function _(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function b(t){return o&&t instanceof Map}function x(t){return i&&t instanceof Set}function M(t){return t.copy||t.base}function w(t,e){if(void 0===e&&(e=!1),Array.isArray(t))return t.slice();var n=Object.create(Object.getPrototypeOf(t));return p(t).forEach((function(r){if(r!==c){var o=Object.getOwnPropertyDescriptor(t,r),i=o.value;if(o.get){if(!e)throw new Error("Immer drafts cannot have computed properties");i=o.get.call(t)}o.enumerable?n[r]=i:Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0})}})),n}function T(t,n){if(d(t)&&!f(t)&&!Object.isFrozen(t)){var r=m(t);r===e.Set?t.add=t.clear=t.delete=k:r===e.Map&&(t.set=t.clear=t.delete=k),Object.freeze(t),n&&y(t,(function(t,e){return T(e,!0)}))}}function k(){throw new Error("This object has been frozen and should not be mutated")}function E(){throw new Error("Illegal state, please file a bug")}var C=function(){function t(t,e){this.drafts=[],this.parent=t,this.immer=e,this.canAutoFreeze=!0}return t.prototype.usePatches=function(t){t&&(this.patches=[],this.inversePatches=[],this.patchListener=t)},t.prototype.revoke=function(){this.leave(),this.drafts.forEach(P),this.drafts=null},t.prototype.leave=function(){this===t.current&&(t.current=this.parent)},t.enter=function(e){var n=new t(t.current,e);return t.current=n,n},t}();function P(t){var e=t[c];e.type===n.ProxyObject||e.type===n.ProxyArray?e.revoke():e.revoked=!0}function O(t,e,n){var r=n.drafts[0],o=void 0!==e&&e!==r;if(t.willFinalize(n,e,o),o){if(r[c].modified)throw n.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");d(e)&&(e=A(t,e,n),n.parent||I(t,e)),n.patches&&(n.patches.push({op:"replace",path:[],value:e}),n.inversePatches.push({op:"replace",path:[],value:r[c].base}))}else e=A(t,r,n,[]);return n.revoke(),n.patches&&n.patchListener(n.patches,n.inversePatches),e!==s?e:void 0}function A(t,e,r,o){var i=e[c];if(!i)return Object.isFrozen(e)?e:S(t,e,r);if(i.scope!==r)return e;if(!i.modified)return I(t,i.base,!0),i.base;if(!i.finalized){if(i.finalized=!0,S(t,i.draft,r,o),t.onDelete&&i.type!==n.Set)if(t.useProxies)y(i.assigned,(function(e,n){n||t.onDelete(i,e)}));else{var s=i.base,a=i.copy;y(s,(function(e){g(a,e)||t.onDelete(i,e)}))}t.onCopy&&t.onCopy(i),t.autoFreeze&&r.canAutoFreeze&&T(i.copy,!1),o&&r.patches&&function(t,e,r,o){switch(t.type){case n.ProxyObject:case n.ES5Object:case n.Map:return function(t,e,n,r){var o=t.base,i=t.copy;y(t.assigned,(function(t,s){var a=v(o,t),c=v(i,t),u=s?g(o,t)?"replace":"add":"remove";if(a!==c||"replace"!==u){var l=e.concat(t);n.push("remove"===u?{op:u,path:l}:{op:u,path:l,value:c}),r.push("add"===u?{op:"remove",path:l}:"remove"===u?{op:"add",path:l,value:a}:{op:"replace",path:l,value:a})}}))}(t,e,r,o);case n.ES5Array:case n.ProxyArray:return function(t,e,n,r){var o,i,s=t.base,a=t.assigned,c=t.copy;c||E(),c.length<s.length&&(s=(o=[c,s])[0],c=o[1],n=(i=[r,n])[0],r=i[1]);for(var u=c.length-s.length,l=0;s[l]===c[l]&&l<s.length;)++l;for(var h=s.length;h>l&&s[h-1]===c[h+u-1];)--h;for(var f=l;f<h;++f)if(a[f]&&c[f]!==s[f]){var d=e.concat([f]);n.push({op:"replace",path:d,value:c[f]}),r.push({op:"replace",path:d,value:s[f]})}var p=n.length;for(f=h+u-1;f>=h;--f)d=e.concat([f]),n[p+f-h]={op:"add",path:d,value:c[f]},r.push({op:"remove",path:d})}(t,e,r,o);case n.Set:!function(t,e,n,r){var o=t.base,i=t.copy,s=0;o.forEach((function(t){if(!i.has(t)){var o=e.concat([s]);n.push({op:"remove",path:o,value:t}),r.unshift({op:"add",path:o,value:t})}s++})),s=0,i.forEach((function(t){if(!o.has(t)){var i=e.concat([s]);n.push({op:"add",path:i,value:t}),r.unshift({op:"remove",path:i,value:t})}s++}))}(t,e,r,o)}}(i,o,r.patches,r.inversePatches)}return i.copy}function S(t,r,o,i){var s=r[c];return s&&(s.type!==n.ES5Object&&s.type!==n.ES5Array||(s.copy=w(s.draft,!0)),r=s.copy),y(r,(function(n,a){return function t(n,r,o,i,s,a,c,u){if(c===s)throw Error("Immer forbids circular references");var l=!!i&&s===o,h=x(s);if(f(c)){var p=u&&l&&!h&&!g(i.assigned,a)?u.concat(a):void 0;c=A(n,c,r,p),function(t,n,r){switch(m(t)){case e.Map:t.set(n,r);break;case e.Set:t.delete(n),t.add(r);break;default:t[n]=r}}(s,a,c),f(c)&&(r.canAutoFreeze=!1)}else{if(l&&_(c,v(i.base,a)))return;d(c)&&(y(c,(function(e,s){return t(n,r,o,i,c,e,s,u)})),r.parent||I(n,c))}l&&n.onAssign&&!h&&n.onAssign(i,a,c)}(t,o,r,s,r,n,a,i)})),r}function I(t,e,n){void 0===n&&(n=!1),t.autoFreeze&&!f(e)&&T(e,n)}var $={get:function(t,e){if(e===c)return t;var n=t.drafts;if(!t.modified&&g(n,e))return n[e];var r=M(t)[e];if(t.finalized||!d(r))return r;if(t.modified){if(r!==H(t.base,e))return r;n=t.copy}return n[e]=t.scope.immer.createProxy(r,t)},has:function(t,e){return e in M(t)},ownKeys:function(t){return Reflect.ownKeys(M(t))},set:function(t,e,n){if(!t.modified){var r=H(t.base,e);if(n?_(r,n)||n===t.drafts[e]:_(r,n)&&e in t.base)return!0;R(t),L(t)}return t.assigned[e]=!0,t.copy[e]=n,!0},deleteProperty:function(t,e){return void 0!==H(t.base,e)||e in t.base?(t.assigned[e]=!1,R(t),L(t)):t.assigned[e]&&delete t.assigned[e],t.copy&&delete t.copy[e],!0},getOwnPropertyDescriptor:function(t,e){var r=M(t),o=Reflect.getOwnPropertyDescriptor(r,e);return o&&(o.writable=!0,o.configurable=t.type!==n.ProxyArray||"length"!==e),o},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(t){return Object.getPrototypeOf(t.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},N={};function H(t,e){var n=t[c],r=Reflect.getOwnPropertyDescriptor(n?M(n):t,e);return r&&r.value}function L(t){if(!t.modified){if(t.modified=!0,t.type===n.ProxyObject||t.type===n.ProxyArray){var e=t.copy=w(t.base);y(t.drafts,(function(t,n){e[t]=n})),t.drafts=void 0}t.parent&&L(t.parent)}}function R(t){t.copy||(t.copy=w(t.base))}function z(t,e,r){t.drafts.forEach((function(t){t[c].finalizing=!0})),r?f(e)&&e[c].scope===t&&G(t.drafts):(t.patches&&function t(e){if(e&&"object"==typeof e){var r=e[c];if(r){var o=r.base,i=r.draft,s=r.assigned,a=r.type;if(a===n.ES5Object)y(i,(function(e){e!==c&&(void 0!==o[e]||g(o,e)?s[e]||t(i[e]):(s[e]=!0,Y(r)))})),y(o,(function(t){void 0!==i[t]||g(i,t)||(s[t]=!1,Y(r))}));else if(a===n.ES5Array){if(W(r)&&(Y(r),s.length=!0),i.length<o.length)for(var u=i.length;u<o.length;u++)s[u]=!1;else for(u=o.length;u<i.length;u++)s[u]=!0;var l=Math.min(i.length,o.length);for(u=0;u<l;u++)void 0===s[u]&&t(i[u])}}}}(t.drafts[0]),G(t.drafts))}function j(t,e){var r=Array.isArray(t),o=B(t);y(o,(function(e){!function(t,e,n){var r=F[e];r?r.enumerable=n:F[e]=r={configurable:!0,enumerable:n,get:function(){return function(t,e){q(t);var n=D(M(t),e);return t.finalizing?n:n===D(t.base,e)&&d(n)?(X(t),t.copy[e]=t.scope.immer.createProxy(n,t)):n}(this[c],e)},set:function(t){!function(t,e,n){if(q(t),t.assigned[e]=!0,!t.modified){if(_(n,D(M(t),e)))return;Y(t),X(t)}t.copy[e]=n}(this[c],e,t)}},Object.defineProperty(t,e,r)}(o,e,r||function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(!n||!n.enumerable)}(t,e))}));var i,s,a,u={type:r?n.ES5Array:n.ES5Object,scope:e?e.scope:C.current,modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:e,base:t,draft:o,copy:null,revoked:!1,isManual:!1};return i=o,s=c,a=u,Object.defineProperty(i,s,{value:a,enumerable:!1,writable:!0}),o}function D(t,e){var n=t[c];if(n&&!n.finalizing){n.finalizing=!0;var r=t[e];return n.finalizing=!1,r}return t[e]}function Y(t){t.modified||(t.modified=!0,t.parent&&Y(t.parent))}function X(t){t.copy||(t.copy=B(t.base))}function B(t){var e=t&&t[c];if(e){e.finalizing=!0;var n=w(e.draft,!0);return e.finalizing=!1,n}return w(t)}y($,(function(t,e){N[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),N.deleteProperty=function(t,e){if(isNaN(parseInt(e)))throw new Error("Immer only supports deleting array indices");return $.deleteProperty.call(this,t[0],e)},N.set=function(t,e,n){if("length"!==e&&isNaN(parseInt(e)))throw new Error("Immer only supports setting array indices and the 'length' property");return $.set.call(this,t[0],e,n,t[0])};var F={};function q(t){if(!0===t.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(M(t)))}function G(t){for(var e=t.length-1;e>=0;e--){var r=t[e][c];if(!r.modified)switch(r.type){case n.ES5Array:W(r)&&Y(r);break;case n.ES5Object:V(r)&&Y(r)}}}function V(t){for(var e=t.base,n=t.draft,r=Object.keys(n),o=r.length-1;o>=0;o--){var i=r[o],s=e[i];if(void 0===s&&!g(e,i))return!0;var a=n[i],u=a&&a[c];if(u?u.base!==s:!_(a,s))return!0}return r.length!==Object.keys(e).length}function W(t){var e=t.draft;if(e.length!==t.base.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!n||n.get)}var K=function(t){if(!t)throw new Error("Map is not polyfilled");function e(t,e){return this[c]={type:n.Map,parent:e,scope:e?e.scope:C.current,modified:!1,finalized:!1,copy:void 0,assigned:void 0,base:t,draft:this,isManual:!1,revoked:!1},this}h(e,t);var r=e.prototype;return Object.defineProperty(r,"size",{get:function(){return M(this[c]).size},enumerable:!0,configurable:!0}),r.has=function(t){return M(this[c]).has(t)},r.set=function(t,e){var n=this[c];return q(n),M(n).get(t)!==e&&(J(n),n.scope.immer.markChanged(n),n.assigned.set(t,!0),n.copy.set(t,e),n.assigned.set(t,!0)),this},r.delete=function(t){if(!this.has(t))return!1;var e=this[c];return q(e),J(e),e.scope.immer.markChanged(e),e.assigned.set(t,!1),e.copy.delete(t),!0},r.clear=function(){var t=this[c];return q(t),J(t),t.scope.immer.markChanged(t),t.assigned=new Map,t.copy.clear()},r.forEach=function(t,e){var n=this;M(this[c]).forEach((function(r,o,i){t.call(e,n.get(o),o,n)}))},r.get=function(t){var e=this[c];q(e);var n=M(e).get(t);if(e.finalized||!d(n))return n;if(n!==e.base.get(t))return n;var r=e.scope.immer.createProxy(n,e);return J(e),e.copy.set(t,r),r},r.keys=function(){return M(this[c]).keys()},r.values=function(){var t,e=this,n=this.keys();return(t={})[u]=function(){return e.values()},t.next=function(){var t=n.next();return t.done?t:{done:!1,value:e.get(t.value)}},t},r.entries=function(){var t,e=this,n=this.keys();return(t={})[u]=function(){return e.entries()},t.next=function(){var t=n.next();if(t.done)return t;var r=e.get(t.value);return{done:!1,value:[t.value,r]}},t},r[u]=function(){return this.entries()},e}(Map);function J(t){t.copy||(t.assigned=new Map,t.copy=new Map(t.base))}var Z=function(t){if(!t)throw new Error("Set is not polyfilled");function e(t,e){return this[c]={type:n.Set,parent:e,scope:e?e.scope:C.current,modified:!1,finalized:!1,copy:void 0,base:t,draft:this,drafts:new Map,revoked:!1,isManual:!1},this}h(e,t);var r=e.prototype;return Object.defineProperty(r,"size",{get:function(){return M(this[c]).size},enumerable:!0,configurable:!0}),r.has=function(t){var e=this[c];return q(e),e.copy?!!e.copy.has(t)||!(!e.drafts.has(t)||!e.copy.has(e.drafts.get(t))):e.base.has(t)},r.add=function(t){var e=this[c];return q(e),e.copy?e.copy.add(t):e.base.has(t)||(U(e),e.scope.immer.markChanged(e),e.copy.add(t)),this},r.delete=function(t){if(!this.has(t))return!1;var e=this[c];return q(e),U(e),e.scope.immer.markChanged(e),e.copy.delete(t)||!!e.drafts.has(t)&&e.copy.delete(e.drafts.get(t))},r.clear=function(){var t=this[c];return q(t),U(t),t.scope.immer.markChanged(t),t.copy.clear()},r.values=function(){var t=this[c];return q(t),U(t),t.copy.values()},r.entries=function(){var t=this[c];return q(t),U(t),t.copy.entries()},r.keys=function(){return this.values()},r[u]=function(){return this.values()},r.forEach=function(t,e){for(var n=this.values(),r=n.next();!r.done;)t.call(e,r.value,r.value,this),r=n.next()},e}(Set);function U(t){t.copy||(t.copy=new Set,t.base.forEach((function(e){if(d(e)){var n=t.scope.immer.createProxy(e,t);t.drafts.set(e,n),t.copy.add(n)}else t.copy.add(e)})))}function Q(t,n){return n.forEach((function(n){var r=n.path,o=n.op;r.length||E();for(var i=t,s=0;s<r.length-1;s++)if(!(i=v(i,r[s]))||"object"!=typeof i)throw new Error("Cannot apply patch, path doesn't resolve: "+r.join("/"));var a=m(i),c=tt(n.value),u=r[r.length-1];switch(o){case"replace":switch(a){case e.Map:return i.set(u,c);case e.Set:throw new Error('Sets cannot have "replace" patches.');default:return i[u]=c}case"add":switch(a){case e.Array:return i.splice(u,0,c);case e.Map:return i.set(u,c);case e.Set:return i.add(c);default:return i[u]=c}case"remove":switch(a){case e.Array:return i.splice(u,1);case e.Map:return i.delete(u);case e.Set:return i.delete(n.value);default:return delete i[u]}default:throw new Error("Unsupported patch operation: "+o)}})),t}function tt(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(tt);if(b(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],tt(t[1])]})));if(x(t))return new Set(Array.from(t).map(tt));var e=Object.create(Object.getPrototypeOf(t));for(var n in t)e[n]=tt(t[n]);return e}
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation. All rights reserved.
      Licensed under the Apache License, Version 2.0 (the "License"); you may not use
      this file except in compliance with the License. You may obtain a copy of the
      License at http://www.apache.org/licenses/LICENSE-2.0

      THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
      KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
      WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
      MERCHANTABLITY OR NON-INFRINGEMENT.

      See the Apache Version 2.0 License for specific language governing permissions
      and limitations under the License.
      ***************************************************************************** */function et(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}var nt={useProxies:"undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,autoFreeze:"undefined"!=typeof process?"production"!==process.env.NODE_ENV:"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},rt=new(function(){function t(t){var e=this;this.useProxies=!1,this.autoFreeze=!1,y(nt,(function(n,r){var o,i;e[n]=null!=(i=null===(o=t)||void 0===o?void 0:o[n])?i:r})),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}return t.prototype.produce=function(t,e,n){var r,o=this;if("function"==typeof t&&"function"!=typeof e){var i=e;e=t;var a=this;return function(t){var n=arguments,r=this;void 0===t&&(t=i);for(var o=[],s=1;s<arguments.length;s++)o[s-1]=n[s];return a.produce(t,(function(t){return e.call.apply(e,et([r,t],o))}))}}if("function"!=typeof e)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("The third argument to `produce` must be a function or undefined");if(d(t)){var c=C.enter(this),u=this.createProxy(t,void 0),l=!0;try{r=e(u),l=!1}finally{l?c.revoke():c.leave()}return"undefined"!=typeof Promise&&r instanceof Promise?r.then((function(t){return c.usePatches(n),O(o,t,c)}),(function(t){throw c.revoke(),t})):(c.usePatches(n),O(this,r,c))}if((r=e(t))!==s)return void 0===r&&(r=t),I(this,r,!0),r},t.prototype.produceWithPatches=function(t,e,n){var r,o,i=this;return"function"==typeof t?function(e){for(var n=arguments,r=[],o=1;o<arguments.length;o++)r[o-1]=n[o];return i.produceWithPatches(e,(function(e){return t.apply(void 0,et([e],r))}))}:(n&&E(),[this.produce(t,e,(function(t,e){r=t,o=e})),r,o])},t.prototype.createDraft=function(t){if(!d(t))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var e=C.enter(this),n=this.createProxy(t,void 0);return n[c].isManual=!0,e.leave(),n},t.prototype.finishDraft=function(t,e){var n=t&&t[c];if(!n||!n.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(n.finalized)throw new Error("The given draft is already finalized");var r=n.scope;return r.usePatches(e),O(this,void 0,r)},t.prototype.setAutoFreeze=function(t){this.autoFreeze=t},t.prototype.setUseProxies=function(t){this.useProxies=t},t.prototype.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}return f(t)?Q(t,e):this.produce(t,(function(t){return Q(t,e.slice(n+1))}))},t.prototype.createProxy=function(t,e){var r=b(t)?function(t,e){return new K(t,e)}(t,e):x(t)?function(t,e){return new Z(t,e)}(t,e):this.useProxies?function(t,e){var r=Array.isArray(t),o={type:r?n.ProxyArray:n.ProxyObject,scope:e?e.scope:C.current,modified:!1,finalized:!1,assigned:{},parent:e,base:t,draft:null,drafts:{},copy:null,revoke:null,isManual:!1},i=o,s=$;r&&(i=[o],s=N);var a=Proxy.revocable(i,s),c=a.revoke,u=a.proxy;return o.draft=u,o.revoke=c,u}(t,e):j(t,e);return(e?e.scope:C.current).drafts.push(r),r},t.prototype.willFinalize=function(t,e,n){this.useProxies||z(t,e,n)},t.prototype.markChanged=function(t){this.useProxies?L(t):Y(t)},t}()),ot=rt.produce;function it(t){at(t,ct)}function st(t){at(t,lt)}function at(t,e){let n=null;for(const r in t){e(r);const o=t[r];if(n=n||o.length,0===n)throw new Error("Invalid data: columns cannot be empty");if(n!==o.length)throw new Error("Invalid data: columns must be of same length")}}function ct(t){if(t.match(ut))throw new Error(`Invalid column name '${t}': '$' and '/' are not allowed'`)}rt.produceWithPatches.bind(rt),rt.setAutoFreeze.bind(rt),rt.setUseProxies.bind(rt),rt.applyPatches.bind(rt),rt.createDraft.bind(rt),rt.finishDraft.bind(rt);const ut=/[/$]/;function lt(t){["$key","$geometry","$grouped"].includes(t)||ct(t)}function ht(){return new ft}function ft(){this.reset()}ft.prototype={constructor:ft,reset:function(){this.s=this.t=0},add:function(t){pt(dt,t,this.t),pt(this,dt.s,this.s),this.s?this.t+=dt.t:this.s=dt.t},valueOf:function(){return this.s}};var dt=new ft;function pt(t,e,n){var r=t.s=e+n,o=r-e,i=r-o;t.t=e-i+(n-o)}var yt=2*Math.PI,mt=Math.abs,gt=Math.sqrt;function vt(){}function _t(t,e){t&&xt.hasOwnProperty(t.type)&&xt[t.type](t,e)}var bt={Feature:function(t,e){_t(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)_t(n[r].geometry,e)}},xt={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Mt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)Mt(n[r],e,0)},Polygon:function(t,e){wt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)wt(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)_t(n[r],e)}};function Mt(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();++o<i;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function wt(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Mt(t[n],e,1);e.polygonEnd()}function Tt(t,e){t&&bt.hasOwnProperty(t.type)?bt[t.type](t,e):_t(t,e)}function kt(t){return t}var Et,Ct,Pt,Ot,At=ht(),St=ht(),It={point:vt,lineStart:vt,lineEnd:vt,polygonStart:function(){It.lineStart=$t,It.lineEnd=Lt},polygonEnd:function(){It.lineStart=It.lineEnd=It.point=vt,At.add(mt(St)),St.reset()},result:function(){var t=At/2;return At.reset(),t}};function $t(){It.point=Nt}function Nt(t,e){It.point=Ht,Et=Pt=t,Ct=Ot=e}function Ht(t,e){St.add(Ot*t-Pt*e),Pt=t,Ot=e}function Lt(){Ht(Et,Ct)}var Rt,zt,jt,Dt,Yt=1/0,Xt=Yt,Bt=-Yt,Ft=Bt,qt={point:function(t,e){t<Yt&&(Yt=t),t>Bt&&(Bt=t),e<Xt&&(Xt=e),e>Ft&&(Ft=e)},lineStart:vt,lineEnd:vt,polygonStart:vt,polygonEnd:vt,result:function(){var t=[[Yt,Xt],[Bt,Ft]];return Bt=Ft=-(Xt=Yt=1/0),t}},Gt=0,Vt=0,Wt=0,Kt=0,Jt=0,Zt=0,Ut=0,Qt=0,te=0,ee={point:ne,lineStart:re,lineEnd:se,polygonStart:function(){ee.lineStart=ae,ee.lineEnd=ce},polygonEnd:function(){ee.point=ne,ee.lineStart=re,ee.lineEnd=se},result:function(){var t=te?[Ut/te,Qt/te]:Zt?[Kt/Zt,Jt/Zt]:Wt?[Gt/Wt,Vt/Wt]:[NaN,NaN];return Gt=Vt=Wt=Kt=Jt=Zt=Ut=Qt=te=0,t}};function ne(t,e){Gt+=t,Vt+=e,++Wt}function re(){ee.point=oe}function oe(t,e){ee.point=ie,ne(jt=t,Dt=e)}function ie(t,e){var n=t-jt,r=e-Dt,o=gt(n*n+r*r);Kt+=o*(jt+t)/2,Jt+=o*(Dt+e)/2,Zt+=o,ne(jt=t,Dt=e)}function se(){ee.point=ne}function ae(){ee.point=ue}function ce(){le(Rt,zt)}function ue(t,e){ee.point=le,ne(Rt=jt=t,zt=Dt=e)}function le(t,e){var n=t-jt,r=e-Dt,o=gt(n*n+r*r);Kt+=o*(jt+t)/2,Jt+=o*(Dt+e)/2,Zt+=o,Ut+=(o=Dt*t-jt*e)*(jt+t),Qt+=o*(Dt+e),te+=3*o,ne(jt=t,Dt=e)}function he(t){this._context=t}he.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,yt)}},result:vt};var fe,de,pe,ye,me,ge=ht(),ve={point:vt,lineStart:function(){ve.point=_e},lineEnd:function(){fe&&be(de,pe),ve.point=vt},polygonStart:function(){fe=!0},polygonEnd:function(){fe=null},result:function(){var t=+ge;return ge.reset(),t}};function _e(t,e){ve.point=be,de=ye=t,pe=me=e}function be(t,e){ye-=t,me-=e,ge.add(gt(ye*ye+me*me)),ye=t,me=e}function xe(){this._string=[]}function Me(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function we(t){return null==t||t.constructor===Number&&!isFinite(t)}function Te(t){return void 0!==t}function ke(t){return void 0===t}xe.prototype={_radius:4.5,_circle:Me(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Me(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const Ee=function(t,e){var n,r,o=4.5;function i(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Tt(t,n(r))),r.result()}return i.area=function(t){return Tt(t,n(It)),It.result()},i.measure=function(t){return Tt(t,n(ve)),ve.result()},i.bounds=function(t){return Tt(t,n(qt)),qt.result()},i.centroid=function(t){return Tt(t,n(ee)),ee.result()},i.projection=function(e){return arguments.length?(n=null==e?(t=null,kt):(t=e).stream,i):t},i.context=function(t){return arguments.length?(r=null==t?(e=null,new xe):new he(e=t),"function"!=typeof o&&r.pointRadius(o),i):e},i.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),i):o},i.projection(t).context(e)}();function Ce(t,e){const n=Ee.bounds(e);return t[0][0]=t[0][0]<n[0][0]?t[0][0]:n[0][0],t[0][1]=t[0][1]<n[0][1]?t[0][1]:n[0][1],t[1][0]=t[1][0]>n[1][0]?t[1][0]:n[1][0],t[1][1]=t[1][1]>n[1][1]?t[1][1]:n[1][1],t}function Pe(t){process||console.warn(t),process&&"test"!==process.env.NODE_ENV&&console.warn(t)}function Oe(t,e){if("$grouped"===e)throw new Error(`Cannot calculate domain of column '${e}'.`);const{firstValidValue:n,nValidValues:r}=Ae(t);if(0===r)throw new Error(`Cannot calculate domain of column '${t}'. Column contains only missing values.`);if(r>0){Re(n);const o=Le(n);if("$geometry"===e)return function(t){let e=[[1/0,1/0],[-1/0,-1/0]];for(let n=0;n<t.length;n++){const r=t[n];we(r)||(e=Ce(e,r))}return{x:[e[0][0],e[1][0]],y:[e[0][1],e[1][1]]}}(t);if("$geometry"!==e)return function(t,e,n,r,o){let i;const s=function(t,e){const n={};if(["quantitative","categorical"].includes(e))for(let e=0;e<t.length;e++){const r=t[e];we(r)||(n[r]=0)}if("temporal"===e)for(let e=0;e<t.length;e++){const r=t[e];we(r)||(n[r.getTime()]=0)}if("interval"===e)for(let e=0;e<t.length;e++){const r=t[e];if(!we(r)){const t=JSON.stringify(r);n[t]=0}}return Object.keys(n).length}(t,o);return i=function(t,e){return 1===t||1===e}(n,s)?function(t,e,n,r,o){const i=function(t,e){let n;return"quantitative"===t&&(n=[e-1,e+1]),"categorical"===t&&(n=[e]),"temporal"===t&&(n=[Ne(e,-1),Ne(e,1)]),"interval"===t&&(n=e.sort((t,e)=>t-e)),n}(n,r),s=1===t?"valid":"unique";return"categorical"!==n&&Pe(`Column '${o}' contains only 1 ${s} value: ${r}.\nUsing domain `+JSON.stringify(i)),i}(n,0,o,r,e):function(t,e,n){let r=function(t){let e;switch(t){case"quantitative":e=[1/0,-1/0];break;case"categorical":e=[];break;case"temporal":e=[Ie,Se];break;case"interval":e=[1/0,-1/0]}return e}(t);for(let o=0;o<e.length;o++){const i=e[o];if(!we(i)){if(Le(i)!==t)throw new Error(`Invalid column ${n}: column contains multiple data types`);r=$e(r,i,t)}}return r}(o,t,e),i}(t,e,r,n,o)}}function Ae(t){let e,n=0;for(let r=0;r<t.length&&(we(t[r])||(n++,e=e||t[r]),!(n>1));r++);return{firstValidValue:e,nValidValues:n}}const Se=new Date(0),Ie=new Date("19 January 2038");function $e(t,e,n){if(!["quantitative","categorical","temporal","interval"].includes(n))throw new Error(`Cannot set domain for column of type '${n}'`);if("quantitative"===n&&(t[0]>=e&&(t[0]=e),t[1]<=e&&(t[1]=e)),"categorical"===n&&(t.includes(e)||t.push(e)),"temporal"===n){const n=e.getTime();t[0].getTime()>=n&&(t[0]=e),t[1].getTime()<=n&&(t[1]=e)}return"interval"===n&&(t=$e(t,e[0],"quantitative"),t=$e(t,e[1],"quantitative")),t}function Ne(t,e){const n=new Date(t.getTime());return new Date(n.setDate(n.getDate()+e))}function He(t){const{firstValidValue:e}=Ae(t);return Le(e)}function Le(t){if(!we(t))return t.constructor===Number?"quantitative":t.constructor===String?"categorical":t.constructor===Date?"temporal":function(t){return t.constructor===Array&&2===t.length&&t.every(t=>t.constructor===Number)}(t)?"interval":function(t){return t.constructor===Object&&"type"in t&&"coordinates"in t}(t)?"geometry":t.constructor===In?"grouped":void 0}function Re(t){if(we(Le(t)))throw new Error("Invalid data")}function ze(t,e){if(t.length!==e)throw new Error("Key column must be of same length as rest of the data");!function(t){for(let e=0;e<t.length;e++)je(t[e])}(t),function(t){if(t.length!==new Set(t).size)throw new Error("Keys must be unique")}(t)}function je(t){if("quantitative"!==Le(t)||!Number.isInteger(t))throw new Error("Key column can contain only integers")}function De(t){return t[Object.keys(t)[0]].length}function Ye(t){!function(t){if(0===t.length)throw new Error("Received empty Array while trying to load row-oriented data. This is not allowed.")}(t);let e=function(t){let e=t[0],n=Object.keys(e),r={};for(let t of n)r[t]=[];return r}(t);for(let n of t)for(let t in n)e[t].push(n[t]);return e}const Xe={_setColumnData(t,e){!1===e.validate?st(t):it(t),this._storeData(t,e)},_setRowData(t,e){const n=Ye(t);this._setColumnData(n,e)},_setGeoJSON(t,e){const n=function(t){const e=[],n={},r=t.features,o=r[0];if("properties"in o)for(const t in o.properties)n[t]=[];for(let t=0;t<r.length;t++){const{geometry:o,properties:i}=r[t];e.push(o);for(const t in i)n[t].push(i[t])}return it(n),n.$geometry=e,n}(t);this._storeData(n,e)},_setGroup(t,e){const n=t.data;st(n),this._storeData(n,e)},_storeData(t,e){this._data=t,this._setupKeyColumn(),!0===e.validate&&this.validateAllColumns()},_setupKeyColumn(){const t=De(this._data);if("$key"in this._data)ze(this._data.$key,t),this._syncKeyToRowNumber();else{const e=function(t){return new Array(t).fill(0).map((t,e)=>e)}(t);this._setKeyColumn(e)}},_setKeyColumn(t){this._data=ot(this._data,e=>{e.$key=t}),this._syncKeyToRowNumber()},_syncKeyToRowNumber(){const t=De(this._data);for(let e=0;e<t;e++){const t=this._data.$key[e];this._keyToRowNumber[t]=e}}};function Be(t,e){const n=De(t),r={};for(const e in t)r[e]=[];for(let o=0;o<n;o++){const n={};for(const e in t)n[e]=t[e][o];if(!0===e(n,o))for(const t in n)r[t].push(n[t])}return r}const Fe={quantitative:{ascending:(t,e)=>t<e?-1:t>e?1:t>=e?0:NaN,descending:(t,e)=>e<t?-1:e>t?1:e>=t?0:NaN},categorical:{ascending:(t,e)=>[t,e].sort()[0]===t?-1:1,descending:(t,e)=>[t,e].sort()[0]===t?1:-1},temporal:{ascending:(t,e)=>t<e?-1:t>e?1:t>=e?0:NaN,descending:(t,e)=>e<t?-1:e>t?1:e>=t?0:NaN}};function qe(t,e){if(1!==Object.keys(e).length)throw new Error("Only one key-value pair allowed");const n=Object.keys(e)[0],r=e[n];Re(t[n][0]);const o=Le(t[n][0]);let i;r.constructor===String&&(i=Fe[o][r]),r.constructor===Function&&(i=r);const s=t[n],a=s.map((t,e)=>e).sort((t,e)=>i(s[t],s[e]));for(const e in t)t[e]=Ge(t[e],a)}function Ge(t,e){return e.map(e=>t[e])}function Ve(t,e){const n=De(t),r={};for(const t in e)r[t]=new Array(n);for(let o=0;o<n;o++){const i={};let s={},a={};for(const e in t)i[e]=t[e][o],s[e]=t[e][o-1],a[e]=t[e][o+1];0===o&&(s=void 0),o===n-1&&(a=void 0);for(const t in e){const n=e[t];r[t][o]=n(i,o,s,a)}}Object.assign(t,r)}var We={count:Ke,sum:Je,mean:function(t){return Je(t)/Ke(t)},median:function(t){const e=t.sort((t,e)=>t>e),n=Ke(t);if(n%2==1)return e[Math.floor(n/2)];{const t=e[n/2-1],r=e[n/2];return(t+r)/2}},mode:function(t){const e={};for(const n of t)n in e?e[n]++:e[n]=1;let n,r=0;for(const t in e)e[t]>r&&(r=e[t],n=t);return n},min:function(t){let e=1/0;for(const n of t)n<e&&(e=n);return e},max:function(t){let e=-1/0;for(const n of t)n>e&&(e=n);return e}};function Ke(t){return t.length}function Je(t){let e=0;for(const n of t)e+=n;return e}function Ze(t,e){const n=Object.keys(t);if(1!==n.length)throw new Error("Invalid transformation syntax");const r=n[0];if(!e.includes(r))throw new Error("Unknown transformation "+r);return r}function Ue(t,e){const n={};for(const e in t)n[e]=[];if(e&&"$grouped"in e)for(const t in e)"$grouped"!==t&&(n[t]=[]);return n}function Qe(t,e,n){for(const r in e){const o=e[r];if(o.constructor===Object){const e=Ze(o,Object.keys(t)),i=o[e];if(i.constructor===String){if(!(i in We))throw new Error(`Unkown summaryMethod: '${i}'.`);n[r].push(We[i](t[e]))}else{if(i.constructor!==Function)throw new Error(`Invalid summaryMethod: '${i}'. Must be String or Function`);n[r].push(i(t[e]))}}}return n}function tn(t,e){for(const n in t){const r=t[n],o=Object.keys(r)[0];if(ct(o),o in e)throw new Error(`Cannot summarise the column '${o}': used for grouping`)}}function en(t,e,n){for(let r=0;r<n;r++)for(const n in e)t[n].push(e[n][0]);return t}function nn(t,e,n){const r=[];for(const o of n)r.push(t[o][e]);return r}class rn{constructor(t,e){this.data={},this.groupedValues=e;for(const e in t)this.data[e]=[]}addRow(t,e){for(const n in t)this.data[n].push(t[n][e])}}function on(t){this.objectID="",this.separator=" - ",this.legendSeparator=this.separator,this.method="",this.precision=0,this.precisionflag="auto",this.roundlength=2,this.is_uniqueValues=!1,this.debug=!1,this.silent=!1,this.bounds=[],this.ranges=[],this.inner_ranges=null,this.colors=[],this.counter=[],this.stat_sorted=null,this.stat_mean=null,this.stat_median=null,this.stat_sum=null,this.stat_max=null,this.stat_min=null,this.stat_pop=null,this.stat_variance=null,this.stat_stddev=null,this.stat_cov=null,this.log=function(t,e){!0!==this.debug&&null==e||console.log(this.objectID+"(object id) :: "+t)},this.setBounds=function(t){this.log("Setting bounds ("+t.length+") : "+t.join()),this.bounds=[],this.bounds=t},this.setSerie=function(t){this.log("Setting serie ("+t.length+") : "+t.join()),this.serie=[],this.serie=t,this.resetStatistics(),this.setPrecision()},this.setColors=function(t){this.log("Setting color ramp ("+t.length+") : "+t.join()),this.colors=t},this.doCount=function(){if(!this._nodata()){var t=this.sorted();this.counter=[];for(let t=0;t<this.bounds.length-1;t++)this.counter[t]=0;for(let n=0;n<t.length;n++){var e=this.getClass(t[n]);this.counter[e]++}}},this.setPrecision=function(t){if(void 0!==t&&(this.precisionflag="manual",this.precision=t),"auto"===this.precisionflag)for(var e=0;e<this.serie.length;e++){var n;(n=isNaN(this.serie[e]+"")||-1===(this.serie[e]+"").toString().indexOf(".")?0:(this.serie[e]+"").split(".")[1].length)>this.precision&&(this.precision=n)}this.precision>20&&(this.log("this.precision value ("+this.precision+') is greater than max value. Automatic set-up to 20 to prevent "Uncaught RangeError: toFixed()" when calling decimalFormat() method.'),this.precision=20),this.log("Calling setPrecision(). Mode : "+this.precisionflag+" - Decimals : "+this.precision),this.serie=this.decimalFormat(this.serie)},this.decimalFormat=function(t){for(var e,n=[],r=0;r<t.length;r++)e=t[r],!isNaN(parseFloat(e))&&isFinite(e)?n[r]=parseFloat(parseFloat(t[r]).toFixed(this.precision)):n[r]=t[r];return n},this.setRanges=function(){this.ranges=[];for(let t=0;t<this.bounds.length-1;t++)this.ranges[t]=this.bounds[t]+this.separator+this.bounds[t+1]},this.min=function(){if(!this._nodata()){this.stat_min=this.serie[0];for(let t=0;t<this.pop();t++)this.serie[t]<this.stat_min&&(this.stat_min=this.serie[t]);return this.stat_min}},this.max=function(){if(!this._nodata()){this.stat_max=this.serie[0];for(let t=0;t<this.pop();t++)this.serie[t]>this.stat_max&&(this.stat_max=this.serie[t]);return this.stat_max}},this.sum=function(){if(!this._nodata()){if(null===this.stat_sum){this.stat_sum=0;for(let t=0;t<this.pop();t++)this.stat_sum+=parseFloat(this.serie[t])}return this.stat_sum}},this.pop=function(){if(!this._nodata())return null===this.stat_pop&&(this.stat_pop=this.serie.length),this.stat_pop},this.mean=function(){if(!this._nodata())return null===this.stat_mean&&(this.stat_mean=parseFloat(this.sum()/this.pop())),this.stat_mean},this.median=function(){if(!this._nodata()){if(null===this.stat_median){this.stat_median=0;var t=this.sorted();t.length%2?this.stat_median=parseFloat(t[Math.ceil(t.length/2)-1]):this.stat_median=(parseFloat(t[t.length/2-1])+parseFloat(t[t.length/2]))/2}return this.stat_median}},this.variance=function(t){if(t=void 0===t,!this._nodata()){if(null===this.stat_variance){for(var e=0,n=this.mean(),r=0;r<this.pop();r++)e+=Math.pow(this.serie[r]-n,2);this.stat_variance=e/this.pop(),!0===t&&(this.stat_variance=Math.round(this.stat_variance*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))}return this.stat_variance}},this.stddev=function(t){if(t=void 0===t,!this._nodata())return null===this.stat_stddev&&(this.stat_stddev=Math.sqrt(this.variance()),!0===t&&(this.stat_stddev=Math.round(this.stat_stddev*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_stddev},this.cov=function(t){if(t=void 0===t,!this._nodata())return null===this.stat_cov&&(this.stat_cov=this.stddev()/this.mean(),!0===t&&(this.stat_cov=Math.round(this.stat_cov*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_cov},this.resetStatistics=function(){this.stat_sorted=null,this.stat_mean=null,this.stat_median=null,this.stat_sum=null,this.stat_max=null,this.stat_min=null,this.stat_pop=null,this.stat_variance=null,this.stat_stddev=null,this.stat_cov=null},this._nodata=function(){if(0===this.serie.length){if(!this.silent)throw new TypeError("Error. You should first enter a serie!");return this.log("[silent mode] Error. You should first enter a serie!",!0),1}return 0},this._nbClassInt=function(t){var e=parseInt(t,10);if(!isNaN(e))return e;if(!this.silent)throw new TypeError("'"+e+"' is not a valid integer. Enable to set class number.");this.log("[silent mode] '"+e+"' is not a valid integer. Enable to set class number.",!0)},this._hasNegativeValue=function(){for(let t=0;t<this.serie.length;t++)if(this.serie[t]<0)return!0;return!1},this._hasZeroValue=function(){for(let t=0;t<this.serie.length;t++)if(0===parseFloat(this.serie[t]))return!0;return!1},this.sorted=function(){return null===this.stat_sorted&&(!1===this.is_uniqueValues?this.stat_sorted=this.serie.sort((function(t,e){return t-e})):this.stat_sorted=this.serie.sort((function(t,e){var n=t.toString().toLowerCase(),r=e.toString().toLowerCase();return n<r?-1:n>r?1:0}))),this.stat_sorted},this.setClassManually=function(t){if(!this._nodata()){if(t[0]===this.min()&&t[t.length-1]===this.max())return this.setBounds(t),this.setRanges(),this.method="manual classification ("+(t.length-1)+" classes)",this.bounds;if(!this.silent)throw new TypeError("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max());this.log("[silent mode] Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max(),!0)}},this.getClassEqInterval=function(t,e,n){if(t=this._nbClassInt(t),!this._nodata()){var r=void 0===e?this.min():e,o=void 0===n?this.max():n,i=[],s=r,a=(o-r)/t;for(let e=0;e<=t;e++)i[e]=s,s+=a;return i[t]=o,this.setBounds(i),this.setRanges(),this.method="eq. intervals ("+t+" classes)",this.bounds}},this.getQuantiles=function(t){t=this._nbClassInt(t);for(var e=this.sorted(),n=[],r=this.pop()/t,o=1;o<t;o++){var i=Math.round(o*r+.49);n.push(e[i-1])}return n},this.getClassQuantile=function(t){if(t=this._nbClassInt(t),!this._nodata()){var e=this.sorted(),n=this.getQuantiles(t);return n.unshift(e[0]),n[e.length-1]!==e[e.length-1]&&n.push(e[e.length-1]),this.setBounds(n),this.setRanges(),this.method="quantile ("+t+" classes)",this.bounds}},this.getClassStdDeviation=function(t,e){if(t=this._nbClassInt(t),!this._nodata()){var n=this.max(),r=this.min(),o=this.stddev(),i=this.mean(),s=[];if(t%2==1){var a=Math.floor(t/2),c=a+1;s[a]=i-o/2,s[c]=i+o/2;for(let t=a-1;t>0;t--){let e=s[t+1]-o;s[t]=e}for(let e=c+1;e<t;e++){let t=s[e-1]+o;s[e]=t}}else{var u=t/2;s[u]=i;for(let t=u-1;t>0;t--){let e=s[t+1]-o;s[t]=e}for(let e=u+1;e<t;e++){let t=s[e-1]+o;s[e]=t}}return s[0]=void 0===e?s[1]-o:r,s[t]=void 0===e?s[t-1]+o:n,this.setBounds(s),this.setRanges(),this.method="std deviation ("+t+" classes)",this.bounds}},this.getClassGeometricProgression=function(t){if(t=this._nbClassInt(t),!this._nodata()){if(!this._hasNegativeValue()&&!this._hasZeroValue()){var e=[],n=this.min(),r=this.max(),o=Math.log(r)/Math.LN10,i=Math.log(n)/Math.LN10,s=(o-i)/t;for(let n=0;n<t;n++)e[n]=0===n?i:e[n-1]+s;return(e=e.map((function(t){return Math.pow(10,t)}))).push(this.max()),this.setBounds(e),this.setRanges(),this.method="geometric progression ("+t+" classes)",this.bounds}if(!this.silent)throw new TypeError("geometric progression can't be applied with a serie containing negative or zero values.");this.log("[silent mode] geometric progression can't be applied with a serie containing negative or zero values.",!0)}},this.getClassArithmeticProgression=function(t){if(t=this._nbClassInt(t),!this._nodata()){var e=0;for(let n=1;n<=t;n++)e+=n;var n=[],r=this.min(),o=(this.max()-r)/e;for(let e=0;e<=t;e++)n[e]=0===e?r:n[e-1]+e*o;return this.setBounds(n),this.setRanges(),this.method="arithmetic progression ("+t+" classes)",this.bounds}},this.getClassJenks=function(t){if(t=this._nbClassInt(t),this._nodata())return;let e=this.sorted();for(var n=[],r=0;r<e.length+1;r++){for(var o=[],i=0,s=t+1;i<s;i++)o.push(0);n.push(o)}for(var a=[],c=0;c<e.length+1;c++){for(var u=[],l=0,h=t+1;l<h;l++)u.push(0);a.push(u)}for(var f=1,d=t+1;f<d;f++){n[0][f]=1,a[0][f]=0;for(var p=1,y=e.length+1;p<y;p++)a[p][f]=1/0;var m=0}for(var g=2,v=e.length+1;g<v;g++){for(var _=0,b=0,x=0,M=1,w=g+1;M<w;M++){var T=g-M+1,k=parseFloat(e[T-1]);m=(b+=k*k)-(_+=k)*_/(x+=1);var E=T-1;if(0!==E)for(var C=2,P=t+1;C<P;C++)a[g][C]>=m+a[E][C-1]&&(n[g][C]=T,a[g][C]=m+a[E][C-1])}n[g][1]=1,a[g][1]=m}var O=e.length,A=[];for(c=0;c<=t;c++)A.push(0);A[t]=parseFloat(e[e.length-1]),A[0]=parseFloat(e[0]);for(var S=t;S>=2;){var I=parseInt(n[O][S]-2);A[S-1]=e[I],O=parseInt(n[O][S]-1),S-=1}return A[0]===A[1]&&(A[0]=0),this.setBounds(A),this.setRanges(),this.method="Jenks ("+t+" classes)",this.bounds},this.getClassUniqueValues=function(){if(!this._nodata()){this.is_uniqueValues=!0;var t=this.sorted(),e=[];for(let n=0;n<this.pop();n++)-1===e.indexOf(t[n])&&e.push(t[n]);return this.bounds=e,this.method="unique values",e}},this.getClass=function(t){for(let e=0;e<this.bounds.length;e++)if(!0===this.is_uniqueValues){if(t===this.bounds[e])return e}else if(parseFloat(t)<=this.bounds[e+1])return e;return"Unable to get value's class."},this.getRanges=function(){return this.ranges},this.getRangeNum=function(t){var e,n;for(n=0;n<this.ranges.length;n++)if(e=this.ranges[n].split(/ - /),t<=parseFloat(e[1]))return n},this.getInnerRanges=function(){if(null!=this.inner_ranges)return this.inner_ranges;var t=[],e=this.sorted(),n=1;for(let r=0;r<e.length;r++){let o;if(0===r&&(o=e[r]),parseFloat(e[r])>parseFloat(this.bounds[n])&&(t[n-1]=""+o+this.separator+e[r-1],o=e[r],n++),n===this.bounds.length-1)return t[n-1]=""+o+this.separator+e[e.length-1],this.inner_ranges=t,this.inner_ranges}},this.getSortedlist=function(){return this.sorted().join(", ")},this.objectID=(new Date).getUTCMilliseconds(),this.log("Creating new geostats object"),void 0!==t&&t.length>0?(this.serie=t,this.setPrecision(),this.log("Setting serie ("+t.length+") : "+t.join())):this.serie=[],this.getJenks=this.getClassJenks,this.getGeometricProgression=this.getClassGeometricProgression,this.getEqInterval=this.getClassEqInterval,this.getQuantile=this.getClassQuantile,this.getStdDeviation=this.getClassStdDeviation,this.getUniqueValues=this.getClassUniqueValues,this.getArithmeticProgression=this.getClassArithmeticProgression}function sn(t,e){const{groupBy:n,method:r,numClasses:o}=function(t){if(t.constructor!==Object)throw new Error("Bin only accepts an Object");const e=t.groupBy;if(e.constructor!==String)throw new Error("groupBy only accepts a String variable name");let n=t.method;n||(Pe("No binning method specified, defaulting to EqualInterval"),n="EqualInterval"),n.constructor!==String&&(Pe("Binning method not recognized, defaulting to EqualInterval"),n="EqualInterval");let r=t.numClasses;return r||(Pe("numClasses not specified, defaulting to 5"),r=5),{groupBy:e,method:n,numClasses:r}}(e),i=t[n];if(!i)throw new Error(`groupBy column '${n}' does not exist`);return"IntervalSize"===r?function(t,e){if(!e)throw new Error("Missing required option 'binSize'");const n=Oe(t),r=Math.floor((n[1]-n[0])/e);let o=n[0];const i=[o];for(let t=0;t<r-1;t++){const t=o+e;i.push(t),o=t}return i.push(n[1]),i}(i,e.binSize):"Manual"===r?e.manualClasses:new on(i)[an[r]](o)}const an={EqualInterval:"getClassEqInterval",StandardDeviation:"getClassStdDeviation",ArithmeticProgression:"getClassArithmeticProgression",GeometricProgression:"getClassGeometricProgression",Quantile:"getClassQuantile",Jenks:"getClassJenks"};function cn(t){const e=t.length,n=[];for(let r=0;r<e-1;r++)n.push([t[r],t[r+1]]);return n}function un(t,e){return t.findIndex((function(n,r){return r===t.length-1?e>=n[0]&&e<=n[1]:e>=n[0]&&e<n[1]}))}function ln(t,e,n,r){const o=[];for(let i=0;i<n.length;i++){const s=t[n[i]][e];o.push(un(r[i],s))}return o}function hn(t){return t.every(t=>t>-1)}function fn(t,e,n,r){let o=t;for(let t=0;t<e.length;t++){const i=e[t];dn(t,e.length)?(i in o||(o[i]=pn(n)),o[i]=yn(o[i],n,r)):(i in o||(o[i]={}),o=o[i])}return t}function dn(t,e){return t===e-1}function pn(t){const e={};for(const n in t)e[n]=[];return e}function yn(t,e,n){for(const r in e)t[r].push(e[r][n]);return t}function mn(t){return"bins_"+t}function gn(t,e){for(const n of e)if(!(n in t))throw new Error(`Column '${n}' not found`)}function vn(t,e){!function t(e,n,r){if(null!==e)for(var o,i,s,a,c,u,l,h,f=0,d=0,p=e.type,y="FeatureCollection"===p,m="Feature"===p,g=y?e.features.length:1,v=0;v<g;v++){c=(h=!!(l=y?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<c;_++){var b=0,x=0;if(null!==(a=h?l.geometries[_]:l)){u=a.coordinates;var M=a.type;switch(f=!r||"Polygon"!==M&&"MultiPolygon"!==M?0:1,M){case null:break;case"Point":if(!1===n(u,d,v,b,x))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(o=0;o<u.length;o++){if(!1===n(u[o],d,v,b,x))return!1;d++,"MultiPoint"===M&&b++}"LineString"===M&&b++;break;case"Polygon":case"MultiLineString":for(o=0;o<u.length;o++){for(i=0;i<u[o].length-f;i++){if(!1===n(u[o][i],d,v,b,x))return!1;d++}"MultiLineString"===M&&b++,"Polygon"===M&&x++}"Polygon"===M&&b++;break;case"MultiPolygon":for(o=0;o<u.length;o++){for(x=0,i=0;i<u[o].length;i++){for(s=0;s<u[o][i].length-f;s++){if(!1===n(u[o][i][s],d,v,b,x))return!1;d++}x++}b++}break;case"GeometryCollection":for(o=0;o<a.geometries.length;o++)if(!1===t(a.geometries[o],n,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}(t,t=>{const n=e(t);t[0]=n[0],t[1]=n[1]})}const _n=new Error("Invalid rowCumsum instrutions");function bn(t){if(t.constructor!==String&&(t.constructor!==Object||1!==Object.keys(t).length))throw _n}const xn={filter:Be,select:ot((function(t,e){if(e.constructor===String&&(e=[e]),e.constructor!==Array)throw new Error("select can only be used with a string or array of strings");!function(t,e){for(const n of e)if(!(n in t))throw new Error(`Column '${n}' not found`)}(t,e);for(const n in t)e.includes(n)||delete t[n]})),arrange:ot((function(t,e){if(e.constructor===Object)qe(t,e);else{if(e.constructor!==Array)throw new Error("arrange requires a key-value object or array of key-value objects");for(let n=e.length-1;n>=0;n--)qe(t,e[n])}})),rename:ot((function(t,e){if(e.constructor!==Object)throw new Error("Rename only accepts an object");for(const n in e)if(n in t){const r=e[n];ct(r),t[r]=t[n],delete t[n]}else Pe(`Rename: column '${n}' not found`)})),mutate:ot(Ve),transmute:ot((function(t,e){t=Ve(t,e);for(const n in t)n in e||delete t[n]})),summarise:function(t,e){if(e.constructor!==Object)throw new Error("summarise must be an object");let n=Ue(e,t);if("$grouped"in t){tn(e,t);for(const e in t)"$grouped"!==e&&(n[e]=t[e]);for(const r of t.$grouped)n=Qe(r.data(),e,n)}else n=Qe(t,e,n);return n},mutarise:function(t,e){if(e.constructor!==Object)throw new Error("mutarise must be an object");let n=Ue(e);if("$grouped"in t){tn(e,t);for(const r of t.$grouped){let t=Ue(e);const o=r.data();t=Qe(o,e,t),n=en(n,t,De(o))}t=function(t){const e=Ue(t.$grouped[0].data());for(const n of t.$grouped){const t=n.data();for(const n in e)e[n].push(...t[n])}return e}(t)}else{let r=Ue(e);r=Qe(t,e,r),n=en(n,r,De(t))}return function(t,e){for(const n in e)t[n]=e[n];return t}(t,n)},groupBy:function(t,e){const n={},r=function(t,e){const n=e.constructor;if(![String,Array].includes(n))throw new Error("groupBy can only be used with a string or array of strings");const r=n===String?[e]:e;for(const e of r)if(!(e in t))throw new Error(`Column '${e}' not found`);if(r.length===Object.keys(t).length)throw new Error("Cannot group by all columns");return r}(t,e),o=function(t,e){const n={},r=De(t);for(let o=0;o<r;o++){const r=nn(t,o,e),i=JSON.stringify(r);n[i]=n[i]||new rn(t,r),n[i].addRow(t,o)}return Object.keys(n).map(t=>n[t])}(t,r);n.$grouped=o.map(t=>new In(t));for(const t of r)n[t]=[];for(let t=0;t<r.length;t++){const e=r[t];for(const r of o)n[e].push(r.groupedValues[t])}return n},bin:function(t,e){if(e.constructor===Object){const n=cn(sn(t,e));return function(t,e,n){const r=Array(n.length);for(let e=0;e<r.length;e++){r[e]={};for(const n in t)r[e][n]=[]}const o=De(t);for(let i=0;i<o;i++){const o=t[e][i],s=un(n,o);if(-1!==s)for(const e in t)r[s][e].push(t[e][i])}const i=function(t){const e=[];for(let n=0;n<t.length;n++)De(t[n])>0&&e.push(n);return e}(r),s=i.map(t=>n[t]),a=i.map(t=>r[t]);return{bins:s,$grouped:a.map(t=>new In(t,{validate:!1}))}}(t,e.groupBy,n)}if(e.constructor===Array){const n=e.map(e=>sn(t,e)).map(t=>cn(t)),r=e.map(t=>t.groupBy);return function(t,e,n){const r=function(t,e,n){const r=function(t){const e={$grouped:[]};for(let n=0;n<t.length;n++){const r=mn(t[n]);e[r]=[]}return e}(e),o=e.length;return function(t,e){for(const n of function*(t){const e=new Set;yield*function*t(n,r=[]){if(!e.has(n)){e.add(n);for(const e of Object.keys(n)){const o=r.concat(e);"$key"in n[e]?(o.push(n[e]),yield o):yield*t(n[e],o)}}}(t)}(t))e(n)}(t,t=>{for(let o=0;o<e.length;o++){const i=t[o],s=n[o][i],a=mn(e[o]);r[a].push(s)}r.$grouped.push(t[o])}),r}(function(t,e,n){let r={};const o=De(t);for(let i=0;i<o;i++){const o=ln(t,i,e,n);hn(o)&&(r=fn(r,o,t,i))}return r}(t,e,n),e,n);return r.$grouped=r.$grouped.map(t=>new In(t,{validate:!1})),r}(t,r,n)}},dropNA:function(t,e){let n;if(e)if(e.constructor===String)gn(t,[e]),n=t=>!we(t[e]);else{if(e.constructor!==Array)throw new Error("dropNA can only be passed undefined, a String or an Array of Strings");gn(t,e),n=t=>{let n=!0;for(const r of e)if(we(t[r])){n=!1;break}return n}}else n=t=>{let e=!0;for(const n in t)if(we(t[n])){e=!1;break}return e};return Be(t,n)},reproject:function(t,e){if(!("$geometry"in t))return Pe("No geometry column found. Skipping reproject-transformation."),t;const n=function(t,e){const n=JSON.parse(JSON.stringify(t));if(n.constructor===Array)for(let t=0;t<n.length;t++)vn(n[t],e);if(n.constructor===Object)for(const t in n)vn(n[t],e);return n}(t.$geometry,e);return t.$geometry=n,t},transform:ot((function(t,e){if(e.constructor!==Function)throw new Error("Invalid 'transform' transformation: must be a Function");e(t)})),cumsum:ot((function(t,e,n={asInterval:!1}){const r=n.asInterval,o=De(t),i={};for(const n in e){ct(n);const s=e[n];if("quantitative"!==He(t[s]))throw new Error("cumsum columns can only be of type 'quantitative'");let a=0,c=0;i[n]=[];for(let e=0;e<o;e++){const o=t[s][e];we(o)||(c+=o),r?i[n].push([a,c]):i[n].push(c),a=c}}Object.assign(t,i)})),rowCumsum:ot((function(t,e,n={asInterval:!1}){const r=n.asInterval,o=function(t){if(t&&t.constructor===Array){const e=[];for(const n of t)if(bn(n),n.constructor===String&&e.push([n,n]),n.constructor===Object){const t=Object.keys(n)[0],r=n[t];e.push([t,r])}return e}throw _n}(e);!function(t,e){for(const[,n]of e){const e=t[n];if(!e)throw new Error(`Column '${n}' does not exist`);if("quantitative"!==He(e))throw new Error("rowCumsum columns can only be of type 'quantitative'")}}(t,o);const i={};let s;for(const[e,n]of o){ct(e);const o=t[n];if(void 0===s)i[e]=r?o.map(t=>[0,t]):o;else{const t=i[s];let n;n=r?o.map((e,n)=>{const r=t[n][1];return[r,r+e]}):o.map((e,n)=>e+t[n]),i[e]=n}s=e}Object.assign(t,i)}))},Mn={arrange(t){const e=xn.arrange(this._data,t);return new In(e,{validate:!1})},bin(t){const e=xn.bin(this._data,t);return new In(e,{validate:!1})},cumsum(t,e){const n=xn.cumsum(this._data,t,e);return new In(n,{validate:!1})},dropNA(t){const e=xn.dropNA(this._data,t);return new In(e,{validate:!1})},filter(t){const e=xn.filter(this._data,t);return new In(e,{validate:!1})},groupBy(t){const e=xn.groupBy(this._data,t);return new In(e,{validate:!1})},mutarise(t){const e=xn.mutarise(this._data,t);return new In(e,{validate:!1})},mutarize(t){const e=xn.mutarise(this._data,t);return new In(e,{validate:!1})},mutate(t){const e=xn.mutate(this._data,t);return new In(e,{validate:!1})},transmute(t){const e=xn.transmute(this._data,t);return new In(e,{validate:!1})},rename(t){const e=xn.rename(this._data,t);return new In(e,{validate:!1})},reproject(t){const e=xn.reproject(this._data,t);return new In(e,{validate:!1})},rowCumsum(t,e){const n=xn.rowCumsum(this._data,t,e);return new In(n,{validate:!1})},select(t){const e=xn.select(this._data,t);return new In(e,{validate:!1})},summarise(t){const e=xn.summarise(this._data,t);return new In(e,{validate:!1})},summarize(t){const e=xn.summarise(this._data,t);return new In(e,{validate:!1})},transform(t){const e=xn.transform(this._data,t);return new In(e,{validate:!1})}};function wn(t,e){if(ke(e._keyToRowNumber[t]))throw new Error(`Key '${t}' not found`)}function Tn(t,e,n){if(!we(t)){const r=He(n._data[e]);Re(t);const o=Le(t);if(r!==o)throw new Error(`Column '${e}' is of type '${r}'. Received value of type '${o}'`)}}function kn(t,e){const{nValidValues:n}=Ae(t);if(0===n)throw new Error(`Invalid column '${e}'. Column contains only invalid values.`);const r=He(t);if(void 0===r)throw new Error(`Column '${e}' contains data of unknown type`);!function(t,e){if("$geometry"===t&&"geometry"!==e)throw new Error(`Column '$geometry' can only contain data of type 'geometry', received '${e}'`);if("$geometry"!==t&&"geometry"===e)throw new Error("Only the '$geometry' column can contain data of type 'geometry'")}(r),function(t,e,n){if(!En(t,e))throw new Error(`Column '${n}' mixes types`)}(t,r,e)}function En(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(!we(r)&&Le(r)!==e)return!1}return!0}function Cn(t,e){return t in e._data}function Pn(t,e){if(!Cn(t,e))throw new Error(`Invalid column name: '${t}'`)}const On={addRow(t){!function(t,e){for(const n in t)if(!(n in e._data))throw new Error(`Column '${n}' not found`);for(const n in e._data)if("$key"===n){if(n in t)throw new Error("Cannot set '$key' column")}else{if(!(n in t))throw new Error(`Missing column '${n}'`);Tn(t[n],n,e)}}(t,this);const e=this;this._data=ot(this._data,n=>{for(const r in t){const o=t[r];n[r].push(o),e._updateDomainIfNecessary(r,o)}});const n=De(this._data)-1,r=this.domain("$key");r[1]++;const o=r[1];this._data=ot(this._data,t=>{t.$key.push(o)}),this._keyToRowNumber[o]=n},updateRow(t,e){if(e.constructor===Function){const n=e(this.row(t));if(!n||n.constructor!==Object)throw new Error("updateRow function must return Object");this.updateRow(t,n)}wn(t,this),function(t,e){for(const n in t){if(!(n in e._data))throw new Error(`Column '${n}' not found`);Tn(t[n],n,e)}}(e,this);const n=this,r=this._keyToRowNumber[t];this._data=ot(this._data,t=>{for(const o in e){An(o);const i=e[o];t[o][r]=i,n._resetDomainIfNecessary(o)}})},deleteRow(t){wn(t,this);const e=this,n=this._keyToRowNumber[t];delete this._keyToRowNumber[t],this._data=ot(this._data,t=>{for(const r in t)t[r].splice(n,1),e._resetDomainIfNecessary(r)})},addColumn(t,e){this._validateNewColumn(t,e),this._data=ot(this._data,n=>{n[t]=e})},replaceColumn(t,e){this.deleteColumn(t),this.addColumn(t,e)},deleteColumn(t){if(Pn(t,this),An(t),2===Object.keys(this._data).length)throw new Error("Cannot delete last column");this._data=ot(this._data,e=>{delete e[t]})},_updateDomainIfNecessary(t,e){const n=Le(e);t in this._domains&&(this._domains[t]=$e(this._domains[t],e,n))},_resetDomainIfNecessary(t){t in this._domains&&delete this._domains[t]},_validateNewColumn(t,e){if(ct(t),t in this._data)throw new Error(`Column '${t}' already exists`);if(De(this._data)!==e.length)throw new Error("Column must be of same length as rest of data");kn(e)}};function An(t){if("$key"===t)throw new Error("Cannot modify key column")}function Sn(t,e,n){const r=t.data(),o=function(t){if(!(t instanceof In))throw new Error("It is only possible to join another DataContainer");return t.data()}(e);if(ke(n)){const t=De(r);if(De(o)<t)throw new Error("Without 'by', the right DataContainer must be the same length as or longer than left DataContainer")}Te(n)&&(function(t,e,n){if(n.constructor!==Array||2!==n.length||!n.every(t=>t.constructor===String))throw new Error("Invalid format of 'by'. Must be Array of two column names.");const[r,o]=n;if(!(r in t))throw new Error(`Column '${r}' not found`);if(!(o in e))throw new Error(`Column '${o}' not found`)}(r,o,n),function(t,e,n){const[r,o]=n,i=t[r],s=e[o],a=He(i),c=He(s);if(a!==c)throw new Error("'by' columns must be of the same type");(function(t){if(t.length!==new Set(t).size)throw new Error("Right 'by' column must contain only unique values")})(e[o]),function(t,e){const n=new Set(e);for(let e=0;e<t.length;e++){const r=t[e];if(!n.has(r))throw new Error("Left 'by' column must be subset of right column")}}(i,s)}(r,o,n),function(t,e,n){const r=n[1];for(const n in e)if("$key"!==n&&n in t&&n!==r)throw new Error(`Duplicate column name: '${n}'`)}(r,o,n))}class In{constructor(t,e={validate:!0}){if(this._data={},this._keyToRowNumber={},this._domains={},function(t){return t.constructor===Object&&Object.keys(t).map(e=>t[e]).every(t=>t.constructor===Array)}(t))this._setColumnData(t,e);else if(function(t){return t.constructor===Array&&t.every(t=>t.constructor===Object)}(t))this._setRowData(t,e);else if(function(t){const e="FeatureCollection"===t.type,n=t.features&&t.features.length>0;return e&&n}(t))this._setGeoJSON(t,e);else{if(!(t instanceof rn))throw Nn;this._setGroup(t,e)}}data(){return this._data}row(t){const e=this._keyToRowNumber[t];return this._row(e)}prevRow(t){const e=this._keyToRowNumber[t]-1;return this._row(e)}nextRow(t){const e=this._keyToRowNumber[t]+1;return this._row(e)}rows(){const t=[],e=De(this._data);for(let n=0;n<e;n++)t.push(this._row(n));return t}column(t){return Pn(t,this),this._data[t]}map(t,e){return this.column(t).map(e)}domain(t){if(t in this._domains)return this._domains[t];const e=Oe(this.column(t),t);return this._domains[t]=e,e}type(t){return He(this.column(t))}columnNames(){return Object.keys(this._data)}hasColumn(t){return Cn(t,this)}columnIsValid(t){return function(t,e){const n=He(t);return void 0!==n&&!!function(t,e){return!("$geometry"===t&&"geometry"!==e||"$geometry"!==t&&"geometry"===e)}(e,n)&&!!En(t,n)}(this.column(t),t)}validateColumn(t){kn(this.column(t),t)}validateAllColumns(){for(const t in this._data)this.validateColumn(t)}join(t,{by:e}={}){Sn(this,t,e);const n=function(t,e,n){const r=t.data(),o=e.data();if(ke(n)){const t=De(r),e={};for(const n in o)if("$key"!==n){const r=o[n];e[n]=r.slice(0,t)}return e}if(Te(n)){const t=function(t,e){const n={};for(const r in t)"$key"!==r&&r!==e&&(n[r]=[]);return n}(o,n[1]),e=function(t,e){const n={},r=t[e];for(let o=0;o<r.length;o++){const i=r[o],s={};for(const n in t)"$key"!==n&&n!==e&&(s[n]=t[n][o]);n[i]=s}return n}(o,n[1]),i=r[n[0]];for(let n=0;n<i.length;n++){const r=e[i[n]];for(const e in r)t[e].push(r[e])}return t}}(this,t,e);for(const t in n)this.addColumn(t,n[t])}_row(t){const e=De(this._data);if(t<0||t>=e)return;const n={};for(const e in this._data){const r=this._data[e][t];n[e]=r}return n}}var $n;$n=In,Object.assign($n.prototype,Xe),function(t){Object.assign(t.prototype,Mn)}(In),function(t){Object.assign(t.prototype,On)}(In);const Nn=new Error("Data passed to DataContainer is of unknown format");return In}()})),Iu={},$u={};function Nu(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Hu(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Lu(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Ru(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Lu(-e,6):e>9999?"+"+Lu(e,6):Lu(e,4))+"-"+Lu(t.getUTCMonth()+1,2)+"-"+Lu(t.getUTCDate(),2)+(i?"T"+Lu(n,2)+":"+Lu(r,2)+":"+Lu(o,2)+"."+Lu(i,3)+"Z":o?"T"+Lu(n,2)+":"+Lu(r,2)+":"+Lu(o,2)+"Z":r||n?"T"+Lu(n,2)+":"+Lu(r,2)+"Z":"")}var zu=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,o=[],i=t.length,s=0,a=0,c=i<=0,u=!1;function l(){if(c)return $u;if(u)return u=!1,Iu;var e,r,o=s;if(34===t.charCodeAt(o)){for(;s++<i&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=i?c=!0:10===(r=t.charCodeAt(s++))?u=!0:13===r&&(u=!0,10===t.charCodeAt(s)&&++s),t.slice(o+1,e-1).replace(/""/g,'"')}for(;s<i;){if(10===(r=t.charCodeAt(e=s++)))u=!0;else if(13===r)u=!0,10===t.charCodeAt(s)&&++s;else if(r!==n)continue;return t.slice(o,e)}return c=!0,t.slice(o,i)}for(10===t.charCodeAt(i-1)&&--i,13===t.charCodeAt(i-1)&&--i;(r=l())!==$u;){for(var h=[];r!==Iu&&r!==$u;)h.push(r),r=l();e&&null==(h=e(h,a++))||o.push(h)}return o}function o(e,n){return e.map((function(e){return n.map((function(t){return s(e[t])})).join(t)}))}function i(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?Ru(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,o,i=r(t,(function(t,r){if(n)return n(t,r-1);o=t,n=e?function(t,e){var n=Nu(t);return function(r,o){return e(n(r),o,t)}}(t,e):Nu(t)}));return i.columns=o||[],i},parseRows:r,format:function(e,n){return null==n&&(n=Hu(e)),[n.map(s).join(t)].concat(o(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Hu(t)),o(t,e).join("\n")},formatRows:function(t){return t.map(i).join("\n")},formatRow:i,formatValue:s}}(",").parse;function ju(t,e,n){const r=t.slice();return r[146]=e[n],r[148]=n,r}function Du(t,e,n){const r=t.slice();return r[143]=e[n],r[145]=n,r}function Yu(t,e,n){const r=t.slice();return r[140]=e[n],r[142]=n,r}function Xu(t,e,n){const r=t.slice();return r[154]=e[n],r[148]=n,r}function Bu(t,e,n){const r=t.slice();return r[156]=e[n],r[145]=n,r}function Fu(t,e,n){const r=t.slice();return r[152]=e[n],r[142]=n,r}function qu(t,e,n){const r=t.slice();return r[149]=e[n],r[151]=n,r}function Gu(t,e,n){const r=t.slice();return r[158]=e[n],r[142]=n,r}function Vu(t,e,n){const r=t.slice();return r[161]=e[n],r[163]=n,r}function Wu(t,e,n){const r=t.slice();return r[154]=e[n],r[148]=n,r}function Ku(t,e,n){const r=t.slice();return r[156]=e[n],r[145]=n,r}function Ju(t,e,n){const r=t.slice();return r[152]=e[n],r[142]=n,r}function Zu(t){let e,n,r,o,s,a,c,u,l,h,f,d,p,y,m,_,x,w,T,E,O,A,S,I=1===t[22]&&Uu(),$=2===t[22]&&Qu(),N=3===t[22]&&tl(),H=4===t[22]&&el(),L=5===t[22]&&nl();return{c(){e=M("div"),n=M("div"),r=M("a"),r.textContent="Feature: Select Key and Select Artist",o=k(),I&&I.c(),s=k(),a=M("div"),c=M("a"),c.textContent="Feature: Colour Music Scales",u=k(),$&&$.c(),l=k(),h=M("div"),f=M("a"),f.textContent="Feature: View Chords and Highlight",d=k(),N&&N.c(),p=k(),y=M("div"),m=M("a"),m.textContent="Feature: Change Mark Sizes",_=k(),H&&H.c(),x=k(),w=M("div"),T=M("a"),T.textContent="Feature: Number of Columns Displayed",E=k(),L&&L.c(),P(r,"href","#s"),P(n,"id","help-1"),P(n,"class","helpBoundary"),P(c,"href","#s"),P(a,"id","help-2"),P(a,"class","helpBoundary"),P(f,"href","#s"),P(h,"id","help-3"),P(h,"class","helpBoundary"),P(m,"href","#s"),P(y,"id","help-4"),P(y,"class","helpBoundary"),P(T,"href","#s"),P(w,"id","help-5"),P(w,"class","helpBoundary"),P(e,"id","help-box")},m(b,M,k){v(b,e,M),g(e,n),g(n,r),g(n,o),I&&I.m(n,null),g(e,s),g(e,a),g(a,c),g(a,u),$&&$.m(a,null),g(e,l),g(e,h),g(h,f),g(h,d),N&&N.m(h,null),g(e,p),g(e,y),g(y,m),g(y,_),H&&H.m(y,null),g(e,x),g(e,w),g(w,T),g(w,E),L&&L.m(w,null),A=!0,k&&i(S),S=[C(r,"click",t[113]),C(c,"click",t[114]),C(f,"click",t[115]),C(m,"click",t[116]),C(T,"click",t[117])]},p(t,e){1===t[22]?I?ut(I,1):(I=Uu(),I.c(),ut(I,1),I.m(n,null)):I&&(at(),lt(I,1,1,()=>{I=null}),ct()),2===t[22]?$?ut($,1):($=Qu(),$.c(),ut($,1),$.m(a,null)):$&&(at(),lt($,1,1,()=>{$=null}),ct()),3===t[22]?N?ut(N,1):(N=tl(),N.c(),ut(N,1),N.m(h,null)):N&&(at(),lt(N,1,1,()=>{N=null}),ct()),4===t[22]?H?ut(H,1):(H=el(),H.c(),ut(H,1),H.m(y,null)):H&&(at(),lt(H,1,1,()=>{H=null}),ct()),5===t[22]?L?ut(L,1):(L=nl(),L.c(),ut(L,1),L.m(w,null)):L&&(at(),lt(L,1,1,()=>{L=null}),ct())},i(t){A||(ut(I),ut($),ut(N),ut(H),ut(L),Z(()=>{O||(O=dt(e,kt,{duration:300},!0)),O.run(1)}),A=!0)},o(t){lt(I),lt($),lt(N),lt(H),lt(L),O||(O=dt(e,kt,{duration:300},!1)),O.run(0),A=!1},d(t){t&&b(e),I&&I.d(),$&&$.d(),N&&N.d(),H&&H.d(),L&&L.d(),t&&O&&O.end(),i(S)}}}function Uu(t){let e,n,r,o,i;return{c(){e=M("p"),e.textContent="Choose song to inspect by selecting Artist and the Song Key.",n=k(),r=M("div"),r.innerHTML='<img id="tut1" src="./img/Tut_1.gif" alt="tut1">'},m(t,o){v(t,e,o),v(t,n,o),v(t,r,o),i=!0},i(t){i||(Z(()=>{o||(o=dt(r,kt,{duration:300},!0)),o.run(1)}),i=!0)},o(t){o||(o=dt(r,kt,{duration:300},!1)),o.run(0),i=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&o&&o.end()}}}function Qu(t){let e,n,r,o,i,s,a;return{c(){e=M("p"),e.innerHTML="Choose different sets of colours based on existing colour music scales invented.<br>",n=k(),r=M("p"),r.textContent="Hover each triad to see how the colour notes reflect on the scale.",o=k(),i=M("div"),i.innerHTML='<img id="tut2" src="./img/Tut_2.gif" alt="tut2">'},m(t,s){v(t,e,s),v(t,n,s),v(t,r,s),v(t,o,s),v(t,i,s),a=!0},i(t){a||(Z(()=>{s||(s=dt(i,kt,{duration:300},!0)),s.run(1)}),a=!0)},o(t){s||(s=dt(i,kt,{duration:300},!1)),s.run(0),a=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(o),t&&b(i),t&&s&&s.end()}}}function tl(t){let e,n,r,o,i,s,a;return{c(){e=M("p"),e.innerHTML="Tick the checkbox to show relevant chords.<br>",n=k(),r=M("p"),r.textContent="Click on triads to highlight all of the same kind.",o=k(),i=M("div"),i.innerHTML='<img id="tut3" src="./img/Tut_3.gif" alt="tut3">'},m(t,s){v(t,e,s),v(t,n,s),v(t,r,s),v(t,o,s),v(t,i,s),a=!0},i(t){a||(Z(()=>{s||(s=dt(i,kt,{duration:300},!0)),s.run(1)}),a=!0)},o(t){s||(s=dt(i,kt,{duration:300},!1)),s.run(0),a=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(o),t&&b(i),t&&s&&s.end()}}}function el(t){let e,n,r,o,i;return{c(){e=M("p"),e.textContent="Toggle between 3 square sizes",n=k(),r=M("div"),r.innerHTML='<img id="tut4" src="./img/Tut_4.gif" alt="tut4">'},m(t,o){v(t,e,o),v(t,n,o),v(t,r,o),i=!0},i(t){i||(Z(()=>{o||(o=dt(r,kt,{duration:300},!0)),o.run(1)}),i=!0)},o(t){o||(o=dt(r,kt,{duration:300},!1)),o.run(0),i=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&o&&o.end()}}}function nl(t){let e,n,r,o,i,s,a;return{c(){e=M("p"),e.innerHTML="Scale the number of columns the data is displayed by dragging the scale.<br>",n=k(),r=M("p"),r.textContent="Patterns can possibly be discerned easier",o=k(),i=M("div"),i.innerHTML='<img id="tut5" src="./img/Tut_5.gif" alt="tut5">'},m(t,s){v(t,e,s),v(t,n,s),v(t,r,s),v(t,o,s),v(t,i,s),a=!0},i(t){a||(Z(()=>{s||(s=dt(i,kt,{duration:300},!0)),s.run(1)}),a=!0)},o(t){s||(s=dt(i,kt,{duration:300},!1)),s.run(0),a=!1},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(o),t&&b(i),t&&s&&s.end()}}}function rl(e){let n,r,o;return{c(){n=w("path"),P(n,"class","polygon"),P(n,"fill-rule","evenodd"),P(n,"clip-rule","evenodd"),P(n,"stroke",""),P(n,"stroke-miterlimit","10"),P(n,"d",r=e[152]),P(n,"id",o=e[142])},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}function ol(e){let n,r,o;return{c(){n=w("path"),P(n,"class","innerRing"),P(n,"fill-rule","evenodd"),P(n,"clip-rule","evenodd"),P(n,"stroke",""),P(n,"stroke-miterlimit","10"),P(n,"d",r=e[152]),P(n,"id",o=e[142])},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}function il(e){let n,r,o;return{c(){n=w("path"),P(n,"class","outerRing"),P(n,"fill-rule","evenodd"),P(n,"clip-rule","evenodd"),P(n,"stroke",""),P(n,"stroke-miterlimit","10"),P(n,"d",r=e[152]),P(n,"id",o=e[142])},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}function sl(e){let n,r=e[145]===e[142]&&""!==e[156]&&function(e){let n,r;return{c(){n=w("path"),P(n,"class","polyTextColor"),P(n,"fill",""),P(n,"d",r=e[156])},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}(e);return{c(){r&&r.c(),n=E()},m(t,e){r&&r.m(t,e),v(t,n,e)},p(t,e){t[145]===t[142]&&""!==t[156]&&r.p(t,e)},d(t){r&&r.d(t),t&&b(n)}}}function al(e){let n,r=e[148]===e[142]&&""!==e[154]&&function(e){let n,r;return{c(){n=w("path"),P(n,"class","polyTextColor"),P(n,"fill",""),P(n,"d",r=e[154])},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}(e);return{c(){r&&r.c(),n=E()},m(t,e){r&&r.m(t,e),v(t,n,e)},p(t,e){t[148]===t[142]&&""!==t[154]&&r.p(t,e)},d(t){r&&r.d(t),t&&b(n)}}}function cl(e){let n,r=e[163]===e[142]&&""!==e[161]&&function(e){let n,r;return{c(){n=w("path"),P(n,"class","polyTextColor"),P(n,"fill",""),P(n,"d",r=e[161])},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}(e);return{c(){r&&r.c(),n=E()},m(t,e){r&&r.m(t,e),v(t,n,e)},p(t,e){t[163]===t[142]&&""!==t[161]&&r.p(t,e)},d(t){r&&r.d(t),t&&b(n)}}}function ul(t){let e,n,r,o,s;let a=function(t,e){return t[142]<=11?il:t[142]<=23&&t[142]>=12?ol:rl}(t)(t),c=t[30],u=[];for(let e=0;e<c.length;e+=1)u[e]=sl(Ku(t,c,e));let l=t[31],h=[];for(let e=0;e<l.length;e+=1)h[e]=al(Wu(t,l,e));let f=t[32],d=[];for(let e=0;e<f.length;e+=1)d[e]=cl(Vu(t,f,e));function p(...e){return t[120](t[142],...e)}function y(...e){return t[121](t[142],...e)}function m(...e){return t[122](t[142],...e)}return{c(){e=w("g"),a.c(),n=E();for(let t=0;t<u.length;t+=1)u[t].c();r=E();for(let t=0;t<h.length;t+=1)h[t].c();o=E();for(let t=0;t<d.length;t+=1)d[t].c();P(e,"class","boundary")},m(t,c,l){v(t,e,c),a.m(e,null),g(e,n);for(let t=0;t<u.length;t+=1)u[t].m(e,null);g(e,r);for(let t=0;t<h.length;t+=1)h[t].m(e,null);g(e,o);for(let t=0;t<d.length;t+=1)d[t].m(e,null);l&&i(s),s=[C(e,"mouseover",p),C(e,"mouseout",y),C(e,"click",m)]},p(n,i){if(t=n,a.p(t,i),1073741824&i[0]){let n;for(c=t[30],n=0;n<c.length;n+=1){const o=Ku(t,c,n);u[n]?u[n].p(o,i):(u[n]=sl(o),u[n].c(),u[n].m(e,r))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}if(1&i[1]){let n;for(l=t[31],n=0;n<l.length;n+=1){const r=Wu(t,l,n);h[n]?h[n].p(r,i):(h[n]=al(r),h[n].c(),h[n].m(e,o))}for(;n<h.length;n+=1)h[n].d(1);h.length=l.length}if(2&i[1]){let n;for(f=t[32],n=0;n<f.length;n+=1){const r=Vu(t,f,n);d[n]?d[n].p(r,i):(d[n]=cl(r),d[n].c(),d[n].m(e,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=f.length}},d(t){t&&b(e),a.d(),x(u,t),x(h,t),x(d,t),i(s)}}}function ll(t){let e,n=t[29],r=[];for(let e=0;e<n.length;e+=1)r[e]=ul(Ju(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=E()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);v(t,e,n)},p(t,o){if(1610612736&o[0]|227&o[1]){let i;for(n=t[29],i=0;i<n.length;i+=1){const s=Ju(t,n,i);r[i]?r[i].p(s,o):(r[i]=ul(s),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){x(r,t),t&&b(e)}}}function hl(e){let n,r,o,s,a,c,u,l,h,f,d,p,y,m,_,x,w,E,O,A,S,I,$,N,H,L,R,z,j,D,Y,X,B,F,q;return{c(){n=M("div"),r=M("div"),o=M("span"),o.textContent="Compos-In-Colour",s=k(),a=M("p"),c=T("The Compos-In-Colour is a prototype of an experimental approach to visualization of music data specifically, recorded songs. "),u=M("br"),l=T("\n\t\t\t\tThe main idea is to explore music data visually through colour space such that the layman may discern patterns without prior musical theory knowledge. "),h=M("br"),f=T("\n\t\t\t\tThis tool may also be used casually as a visualization along the lines of 'what is the colour of the song'"),d=M("br"),p=T("\n\t\t\t\tExisting tools of music and colours such as the Colour Music Scale, Colour Wheel and the Circle of Fifths, inspired the design of UI components in the prototype. "),y=M("br"),m=T("\n\t\t\t\tDo check out the "),_=M("a"),_.textContent="Tutorial",x=T(" located near circle of fifth interface."),w=k(),E=M("br"),O=k(),A=M("span"),A.textContent="Colour Music Scale",S=k(),I=M("p"),I.innerHTML=' Rather than assigning each musical pitch arbitrary colours, why not map these colours to <i>existing</i> colour music scales which have empirical basis? <br> \n\t\t\t\t\t<a target="_blank" href="http://rhythmiclight.com/timeline/">Fred Callopy</a> has compiled these colour music scales over the centuries. The colour music scales used in this\n\t\t\t\t\tprototype are referenced from the compilation. \n\t\t\t\t\t',$=k(),N=M("br"),H=k(),L=M("span"),L.textContent="Data",R=k(),z=M("p"),z.innerHTML=' Music data is free for use; sourced from <a target="_blank" href="http://isophonics.net/datasets">isophonics.net</a>',j=k(),D=M("br"),Y=k(),X=M("span"),X.textContent="Notes",B=k(),F=M("p"),F.innerHTML="-Some of the original data had to be simplified (kept to major and minor triads) due to scope considerations. <br>\n\t\t\t\t\t-Original data had some inconsistencies such as uppercase etc. These were cleaned up. <br>\n\t\t\t\t\t-Not all the data available from isophonics has been transcribed due to scope considerations. Hence, there will be keys that do not have songs <br>\n\t\t\t\t\t-Not all the data available is being utilized in this visualization due to scope considerations. <br>\n\t\t\t\t\t-Due to RGB colour space limitations, colours used in colour music scale are cannot be accurately replicated. <br>\n\t\t\t\t\t- 3 May 2020\n\t\t\t\t\t",P(o,"class","description-header"),P(_,"id","pingSource"),P(_,"href","#"),P(A,"class","description-header"),P(L,"class","description-header"),P(X,"class","description-header"),P(r,"class","introBox"),P(n,"class","song-detail")},m(t,b,M){v(t,n,b),g(n,r),g(r,o),g(r,s),g(r,a),g(a,c),g(a,u),g(a,l),g(a,h),g(a,f),g(a,d),g(a,p),g(a,y),g(a,m),g(a,_),g(a,x),g(r,w),g(r,E),g(r,O),g(r,A),g(r,S),g(r,I),g(r,$),g(r,N),g(r,H),g(r,L),g(r,R),g(r,z),g(r,j),g(r,D),g(r,Y),g(r,X),g(r,B),g(r,F),M&&i(q),q=[C(_,"mouseover",e[123]),C(_,"mouseout",e[124])]},p:t,d(t){t&&b(n),i(q)}}}function fl(t){let e,n,r,o,i,s,a,c,u,l,h,f,d,p,y,m,_,x,w,E=t[0].column("KEY")+"",C=[],O=new Map,S=t[1];const I=t=>t[158];for(let e=0;e<S.length;e+=1){let n=Gu(t,S,e),r=I(n);O.set(r,C[e]=dl(r,n))}let $=!0===t[16]&&pl(),N=t[11]&&!1===t[16]&&yl(t);return{c(){e=M("div"),n=M("div"),r=M("div"),o=M("span"),i=T("Songs by "),s=T(t[2]),a=k(),c=M("span"),u=T("containing "),l=M("u"),h=T(E),f=T(" key"),d=k(),p=M("div"),y=M("ul");for(let t=0;t<C.length;t+=1)C[t].c();m=k(),$&&$.c(),_=k(),N&&N.c(),P(o,"class","description-header"),P(c,"class","description-header"),P(r,"class","list-header"),P(p,"class","list-container"),P(n,"class","song-detail-left"),P(e,"class","song-detail")},m(t,b){v(t,e,b),g(e,n),g(n,r),g(r,o),g(o,i),g(o,s),g(r,a),g(r,c),g(c,u),g(c,l),g(l,h),g(c,f),g(n,d),g(n,p),g(p,y);for(let t=0;t<C.length;t+=1)C[t].m(y,null);g(e,m),$&&$.m(e,null),g(e,_),N&&N.m(e,null),w=!0},p(t,n){if((!w||4&n[0])&&A(s,t[2]),(!w||1&n[0])&&E!==(E=t[0].column("KEY")+"")&&A(h,E),2&n[0]|512&n[1]){const e=t[1];at(),C=function(t,e,n,r,o,i,s,a,c,u,l,h){let f=t.length,d=i.length,p=f;const y={};for(;p--;)y[t[p].key]=p;const m=[],g=new Map,v=new Map;for(p=d;p--;){const t=h(o,i,p),a=n(t);let c=s.get(a);c?r&&c.p(t,e):(c=u(a,t),c.c()),g.set(a,m[p]=c),a in y&&v.set(a,Math.abs(p-y[a]))}const _=new Set,b=new Set;function x(t){ut(t,1),t.m(a,l,s.has(t.key)),s.set(t.key,t),l=t.first,d--}for(;f&&d;){const e=m[d-1],n=t[f-1],r=e.key,o=n.key;e===n?(l=e.first,f--,d--):g.has(o)?!s.has(r)||_.has(r)?x(e):b.has(o)?f--:v.get(r)>v.get(o)?(b.add(r),x(e)):(_.add(o),f--):(c(n,s),f--)}for(;f--;){const e=t[f];g.has(e.key)||c(e,s)}for(;d;)x(m[d-1]);return m}(C,n,I,1,t,e,O,y,pt,dl,null,Gu),ct()}!0===t[16]?$?ut($,1):($=pl(),$.c(),ut($,1),$.m(e,_)):$&&($.d(1),$=null),t[11]&&!1===t[16]?N?(N.p(t,n),ut(N,1)):(N=yl(t),N.c(),ut(N,1),N.m(e,null)):N&&(at(),lt(N,1,1,()=>{N=null}),ct())},i(t){if(!w){for(let t=0;t<S.length;t+=1)ut(C[t]);ut($),ut(N),Z(()=>{x||(x=dt(e,Tt,{delay:0,duration:400,x:-30},!0)),x.run(1)}),w=!0}},o(t){for(let t=0;t<C.length;t+=1)lt(C[t]);lt(N),x||(x=dt(e,Tt,{delay:0,duration:400,x:-30},!1)),x.run(0),w=!1},d(t){t&&b(e);for(let t=0;t<C.length;t+=1)C[t].d();$&&$.d(),N&&N.d(),t&&x&&x.end()}}}function dl(t,e){let n,r,o,i,s,a,c,u,l=e[158]+"";function h(...t){return e[125](e[158],e[142],...t)}return{key:t,first:null,c(){n=M("li"),r=M("a"),o=T(l),s=k(),P(r,"id",i=e[142]+e[158]),P(r,"href","#"),this.first=n},m(t,e,i){v(t,n,e),g(n,r),g(r,o),g(n,s),c=!0,i&&u(),u=C(r,"click",h)},p(t,n){e=t,(!c||2&n[0])&&l!==(l=e[158]+"")&&A(o,l),(!c||2&n[0]&&i!==(i=e[142]+e[158]))&&P(r,"id",i)},i(t){c||(Z(()=>{a||(a=dt(n,Tt,{delay:0,duration:400,x:-30},!0)),a.run(1)}),c=!0)},o(t){a||(a=dt(n,Tt,{delay:0,duration:400,x:-30},!1)),a.run(0),c=!1},d(t){t&&b(n),t&&a&&a.end(),u()}}}function pl(e){let n,r;return{c(){n=M("div"),n.innerHTML='<div class="bounding-border">\n\t\t\tOops!  <br><br>\n\t\t\tThereâs no data yet. <br><br>\n\t\t\tPlease make a different selection.\n\t\t\t</div> \n\t\t\t<p><img id="hoverGhost" src="./img/err_img.png" alt="error"> \n\t\t\t\t<img id="hoverGhostBoo" src="./img/err_img_hvr.png" alt="error_boo"></p>',P(n,"class","error-msg")},m(t,e){v(t,n,e)},i(t){r||Z(()=>{r=ft(n,wt,{delay:100,duration:300}),r.start()})},o:t,d(t){t&&b(n)}}}function yl(t){let e,n,r,o,s,a,c,u,l,h,f,d,p,y,m,_,x,w,E,O,I,$,N,H,L,R,z,j,D,Y,X,B,F,q,G,V,W,K,J,U,Q,tt,et,nt,rt,ot,it=!0===t[15]&&ml(t),st=!0===t[13]&&Tl(t);return{c(){e=M("div"),it&&it.c(),n=k(),r=M("div"),o=M("div"),s=M("label"),s.textContent="â",a=k(),c=M("input"),u=k(),l=M("hr"),h=k(),f=M("div"),d=M("p"),p=T("\n\tView Chords :"),y=M("input"),m=k(),_=M("button"),_.textContent="Clear Highlight",x=k(),w=M("div"),E=T("Mark Size :\n\t\t\t"),O=M("input"),$=k(),N=M("label"),N.textContent="S",H=k(),L=M("input"),z=k(),j=M("label"),j.textContent="M",D=k(),Y=M("input"),B=k(),F=M("label"),F.textContent="L",q=k(),G=M("p"),V=T("Group by "),W=M("u"),K=M("b"),J=T(t[20]),U=T(" columns"),Q=k(),tt=M("input"),et=k(),st&&st.c(),P(s,"for","toggleShowHideCheck"),P(c,"id","toggleShowHideCheck"),P(c,"type","checkbox"),P(c,"class","check-box"),P(o,"id","blinder"),P(y,"type","checkbox"),P(y,"name","check-box"),P(O,"id","radioS"),P(O,"type","radio"),P(O,"name","mark-size"),O.__value=I=12,O.value=O.__value,t[132][0].push(O),P(N,"class","radio-label"),P(N,"for","radioS"),P(L,"id","radioM"),P(L,"type","radio"),P(L,"name","mark-size"),L.__value=R=15,L.value=L.__value,t[132][0].push(L),P(j,"class","radio-label"),P(j,"for","radioM"),P(Y,"id","radioL"),P(Y,"type","radio"),P(Y,"name","mark-size"),Y.__value=X=20,Y.value=Y.__value,t[132][0].push(Y),P(F,"class","radio-label"),P(F,"for","radioL"),P(w,"class","radio-div"),P(tt,"type","range"),P(tt,"min","2"),P(tt,"max","12"),P(tt,"class","slider"),P(f,"id","scaleBar"),P(r,"id","right-inner-right"),P(e,"class","song-detail-right")},m(b,M,T){v(b,e,M),it&&it.m(e,null),g(e,n),g(e,r),g(r,o),g(o,s),g(o,a),g(o,c),c.checked=t[15],g(o,u),g(o,l),g(r,h),g(r,f),g(f,d),g(f,p),g(f,y),y.checked=t[14],g(f,m),g(f,_),g(f,x),g(f,w),g(w,E),g(w,O),O.checked=O.__value===t[21],g(w,$),g(w,N),g(w,H),g(w,L),L.checked=L.__value===t[21],g(w,z),g(w,j),g(w,D),g(w,Y),Y.checked=Y.__value===t[21],g(w,B),g(w,F),g(f,q),g(f,G),g(G,V),g(G,W),g(W,K),g(K,J),g(G,U),g(f,Q),g(f,tt),S(tt,t[20]),g(r,et),st&&st.m(r,null),rt=!0,T&&i(ot),ot=[C(c,"change",t[128]),C(y,"change",t[129]),C(_,"click",t[130]),C(O,"change",t[131]),C(L,"change",t[133]),C(Y,"change",t[134]),C(tt,"change",t[135]),C(tt,"input",t[135]),C(tt,"change",t[136])]},p(t,o){!0===t[15]?it?(it.p(t,o),ut(it,1)):(it=ml(t),it.c(),ut(it,1),it.m(e,n)):it&&(at(),lt(it,1,1,()=>{it=null}),ct()),32768&o[0]&&(c.checked=t[15]),16384&o[0]&&(y.checked=t[14]),2097152&o[0]&&(O.checked=O.__value===t[21]),2097152&o[0]&&(L.checked=L.__value===t[21]),2097152&o[0]&&(Y.checked=Y.__value===t[21]),(!rt||1048576&o[0])&&A(J,t[20]),1048576&o[0]&&S(tt,t[20]),!0===t[13]?st?(st.p(t,o),ut(st,1)):(st=Tl(t),st.c(),ut(st,1),st.m(r,null)):st&&(at(),lt(st,1,1,()=>{st=null}),ct())},i(t){rt||(ut(it),ut(st),nt||Z(()=>{nt=ft(e,wt,{delay:0,duration:300}),nt.start()}),rt=!0)},o(t){lt(it),lt(st),rt=!1},d(n){n&&b(e),it&&it.d(),t[132][0].splice(t[132][0].indexOf(O),1),t[132][0].splice(t[132][0].indexOf(L),1),t[132][0].splice(t[132][0].indexOf(Y),1),st&&st.d(),i(ot)}}}function ml(t){let e,n,r,o,s,a,c,u,l,h,f,d,p,y,m,_,x,w,E,O,A,S,$,N,H,L,R,z,j,D,Y=!0===t[13]&&gl(t);const X=new tc({props:{width:380,height:380,viewBox:"0 0 600 600",preserveAspectRatio:"xMidYMid",$$slots:{default:[wl]},$$scope:{ctx:t}}});return{c(){e=M("div"),n=M("div"),Y&&Y.c(),r=k(),o=M("div"),s=T("Filter Colour Scale:\n\t\t\t"),a=M("select"),c=M("option"),c.textContent="Louis Bertrand Castel\n            ",l=M("option"),l.textContent="D. D.Jameson\n            ",f=M("option"),f.textContent="Theodor Seeman\n\t\t\t",p=M("option"),p.textContent="A. Wallace Rimington\n\t\t\t",m=M("option"),m.textContent="Bainbridge Bishop\n\t\t\t",x=M("option"),x.textContent="H. von Helmholtz\n\t\t\t",E=M("option"),E.textContent="Alexander Scriabin\n\t\t\t",A=M("option"),A.textContent="Adrian Bernard Klein\n\t\t\t",$=M("option"),$.textContent="I. J. Belmont\n\t\t\t",H=M("option"),H.textContent="Steve Zieverink",R=k(),mt(X.$$.fragment),P(n,"id","song-info"),c.__value=u="Louis Bertrand Castel",c.value=c.__value,l.__value=h="D. D.Jameson",l.value=l.__value,f.__value=d="Theodor Seeman",f.value=f.__value,p.__value=y="A. Wallace Rimington",p.value=p.__value,m.__value=_="Bainbridge Bishop",m.value=m.__value,x.__value=w="H. von Helmholtz",x.value=x.__value,E.__value=O="Alexander Scriabin",E.value=E.__value,A.__value=S="Adrian Bernard Klein",A.value=A.__value,$.__value=N="I. J. Belmont",$.value=$.__value,H.__value=L="Steve Zieverink",H.value=H.__value,P(a,"class","select-module"),void 0===t[10]&&Z(()=>t[126].call(a)),P(o,"id","colourMusicScale"),P(e,"class","right-inner-left")},m(u,h,d){v(u,e,h),g(e,n),Y&&Y.m(n,null),g(e,r),g(e,o),g(o,s),g(o,a),g(a,c),g(a,l),g(a,f),g(a,p),g(a,m),g(a,x),g(a,E),g(a,A),g(a,$),g(a,H),I(a,t[10]),g(o,R),gt(X,o,null),j=!0,d&&i(D),D=[C(a,"change",t[126]),C(a,"change",t[127])]},p(t,e){!0===t[13]?Y?Y.p(t,e):(Y=gl(t),Y.c(),Y.m(n,null)):Y&&(Y.d(1),Y=null),1024&e[0]&&I(a,t[10]);const r={};529007104&e[0]|2048&e[5]&&(r.$$scope={dirty:e,ctx:t}),X.$set(r)},i(t){j||(ut(X.$$.fragment,t),Z(()=>{z||(z=dt(e,kt,{duration:300},!0)),z.run(1)}),j=!0)},o(t){lt(X.$$.fragment,t),z||(z=dt(e,kt,{duration:300},!1)),z.run(0),j=!1},d(t){t&&b(e),Y&&Y.d(),vt(X),t&&z&&z.end(),i(D)}}}function gl(t){let e,n,r,o,i,s,a,c,u,l,h,f,d;return{c(){e=M("span"),e.textContent="Details",n=k(),r=M("p"),o=T("Title: "),i=T(t[7]),s=k(),a=M("p"),c=T("Album: "),u=T(t[6]),l=k(),h=M("p"),f=T("Chords used: "),d=T(t[8]),P(e,"class","description-header"),P(r,"class","p-subheader"),P(a,"class","p-subheader"),P(h,"class","p-subheader")},m(t,p){v(t,e,p),v(t,n,p),v(t,r,p),g(r,o),g(r,i),v(t,s,p),v(t,a,p),g(a,c),g(a,u),v(t,l,p),v(t,h,p),g(h,f),g(h,d)},p(t,e){128&e[0]&&A(i,t[7]),64&e[0]&&A(u,t[6]),256&e[0]&&A(d,t[8])},d(t){t&&b(e),t&&b(n),t&&b(r),t&&b(s),t&&b(a),t&&b(l),t&&b(h)}}}function vl(e){let n,r=e[145]===e[142]&&""!==e[156]&&function(e){let n,r;return{c(){n=w("path"),P(n,"class","polyTextColor"),P(n,"fill",""),P(n,"d",r=e[156])},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}(e);return{c(){r&&r.c(),n=E()},m(t,e){r&&r.m(t,e),v(t,n,e)},p(t,e){t[145]===t[142]&&""!==t[156]&&r.p(t,e)},d(t){r&&r.d(t),t&&b(n)}}}function _l(e){let n,r=e[148]===e[142]&&""!==e[154]&&function(e){let n,r;return{c(){n=w("path"),P(n,"class","polyTextColor"),P(n,"fill",""),P(n,"d",r=e[154])},m(t,e){v(t,n,e)},p:t,d(t){t&&b(n)}}}(e);return{c(){r&&r.c(),n=E()},m(t,e){r&&r.m(t,e),v(t,n,e)},p(t,e){t[148]===t[142]&&""!==t[154]&&r.p(t,e)},d(t){r&&r.d(t),t&&b(n)}}}function bl(t){let e,n,r,o=""!==t[142]&&t[142]===t[151]&&function(t){let e,n,r,o,i;return{c(){e=w("path"),P(e,"class","colourRing"),P(e,"fill-rule","evenodd"),P(e,"clip-rule","evenodd"),P(e,"fill",n="rgb("+t[149]+")"),P(e,"stroke",""),P(e,"stroke-miterlimit","10"),P(e,"d",r=t[152]),P(e,"id",o=t[142]+"colourRing"),P(e,"name",i=t[33][0][t[142]])},m(t,n){v(t,e,n)},p(t,r){512&r[0]&&n!==(n="rgb("+t[149]+")")&&P(e,"fill",n)},d(t){t&&b(e)}}}(t),i=t[34],s=[];for(let e=0;e<i.length;e+=1)s[e]=vl(Bu(t,i,e));let a=t[35],c=[];for(let e=0;e<a.length;e+=1)c[e]=_l(Xu(t,a,e));return{c(){e=w("g"),o&&o.c(),n=E();for(let t=0;t<s.length;t+=1)s[t].c();r=E();for(let t=0;t<c.length;t+=1)c[t].c();P(e,"class","boundary")},m(t,i){v(t,e,i),o&&o.m(e,null),g(e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null);g(e,r);for(let t=0;t<c.length;t+=1)c[t].m(e,null)},p(t,n){if(""!==t[142]&&t[142]===t[151]&&o.p(t,n),8&n[1]){let o;for(i=t[34],o=0;o<i.length;o+=1){const a=Bu(t,i,o);s[o]?s[o].p(a,n):(s[o]=vl(a),s[o].c(),s[o].m(e,r))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}if(16&n[1]){let r;for(a=t[35],r=0;r<a.length;r+=1){const o=Xu(t,a,r);c[r]?c[r].p(o,n):(c[r]=_l(o),c[r].c(),c[r].m(e,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=a.length}},d(t){t&&b(e),o&&o.d(),x(s,t),x(c,t)}}}function xl(t){let e,n=t[33][1],r=[];for(let e=0;e<n.length;e+=1)r[e]=bl(Fu(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=E()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);v(t,e,n)},p(t,o){if(512&o[0]|28&o[1]){let i;for(n=t[33][1],i=0;i<n.length;i+=1){const s=Fu(t,n,i);r[i]?r[i].p(s,o):(r[i]=bl(s),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){x(r,t),t&&b(e)}}}function Ml(t){let e,n,r,o,i,s;const a=new Cu({props:{x:t[23],y:t[24],radius:7,fill:"rgb(255,255,255)"}}),c=new Cu({props:{x:t[25],y:t[26],radius:7,fill:"rgb(255,255,255)"}}),u=new Cu({props:{x:t[27],y:t[28],radius:7,fill:"rgb(255,255,255)"}}),l=new Au({props:{x:[t[23],t[25]],y:[t[24],t[26]],stroke:"rgb(255,255,255)"}}),h=new Au({props:{x:[t[25],t[27]],y:[t[26],t[28]],stroke:"rgb(255,255,255)"}}),f=new Au({props:{x:[t[27],t[23]],y:[t[28],t[24]],stroke:"rgb(255,255,255)"}});return{c(){mt(a.$$.fragment),e=k(),mt(c.$$.fragment),n=k(),mt(u.$$.fragment),r=k(),mt(l.$$.fragment),o=k(),mt(h.$$.fragment),i=k(),mt(f.$$.fragment)},m(t,d){gt(a,t,d),v(t,e,d),gt(c,t,d),v(t,n,d),gt(u,t,d),v(t,r,d),gt(l,t,d),v(t,o,d),gt(h,t,d),v(t,i,d),gt(f,t,d),s=!0},p(t,e){const n={};8388608&e[0]&&(n.x=t[23]),16777216&e[0]&&(n.y=t[24]),a.$set(n);const r={};33554432&e[0]&&(r.x=t[25]),67108864&e[0]&&(r.y=t[26]),c.$set(r);const o={};134217728&e[0]&&(o.x=t[27]),268435456&e[0]&&(o.y=t[28]),u.$set(o);const i={};41943040&e[0]&&(i.x=[t[23],t[25]]),83886080&e[0]&&(i.y=[t[24],t[26]]),l.$set(i);const s={};167772160&e[0]&&(s.x=[t[25],t[27]]),335544320&e[0]&&(s.y=[t[26],t[28]]),h.$set(s);const d={};142606336&e[0]&&(d.x=[t[27],t[23]]),285212672&e[0]&&(d.y=[t[28],t[24]]),f.$set(d)},i(t){s||(ut(a.$$.fragment,t),ut(c.$$.fragment,t),ut(u.$$.fragment,t),ut(l.$$.fragment,t),ut(h.$$.fragment,t),ut(f.$$.fragment,t),s=!0)},o(t){lt(a.$$.fragment,t),lt(c.$$.fragment,t),lt(u.$$.fragment,t),lt(l.$$.fragment,t),lt(h.$$.fragment,t),lt(f.$$.fragment,t),s=!1},d(t){vt(a,t),t&&b(e),vt(c,t),t&&b(n),vt(u,t),t&&b(r),vt(l,t),t&&b(o),vt(h,t),t&&b(i),vt(f,t)}}}function wl(t){let e,n,r,o=t[9],i=[];for(let e=0;e<o.length;e+=1)i[e]=xl(qu(t,o,e));let s=!0===t[19]&&Ml(t);return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=k(),s&&s.c(),n=E()},m(t,o){for(let e=0;e<i.length;e+=1)i[e].m(t,o);v(t,e,o),s&&s.m(t,o),v(t,n,o),r=!0},p(t,r){if(512&r[0]|28&r[1]){let n;for(o=t[9],n=0;n<o.length;n+=1){const s=qu(t,o,n);i[n]?i[n].p(s,r):(i[n]=xl(s),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}!0===t[19]?s?(s.p(t,r),ut(s,1)):(s=Ml(t),s.c(),ut(s,1),s.m(n.parentNode,n)):s&&(at(),lt(s,1,1,()=>{s=null}),ct())},i(t){r||(ut(s),r=!0)},o(t){lt(s),r=!1},d(t){x(i,t),t&&b(e),s&&s.d(t),t&&b(n)}}}function Tl(t){let e,n,r=t[4],o=[];for(let e=0;e<r.length;e+=1)o[e]=Al(Yu(t,r,e));const i=t=>lt(o[t],1,1,()=>{o[t]=null});return{c(){e=M("div");for(let t=0;t<o.length;t+=1)o[t].c();P(e,"id","swatchContainer")},m(t,r){v(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,n){if(2121784&n[0]|131072&n[1]){let s;for(r=t[4],s=0;s<r.length;s+=1){const i=Yu(t,r,s);o[s]?(o[s].p(i,n),ut(o[s],1)):(o[s]=Al(i),o[s].c(),ut(o[s],1),o[s].m(e,null))}for(at(),s=r.length;s<o.length;s+=1)i(s);ct()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)ut(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)lt(o[t]);n=!1},d(t){t&&b(e),x(o,t)}}}function kl(t){let e,n,r=t[5][t[142]]+"";return{c(){e=M("span"),n=T(r),P(e,"class","span-chordHeader")},m(t,r){v(t,e,r),g(e,n)},p(t,e){32&e[0]&&r!==(r=t[5][t[142]]+"")&&A(n,r)},d(t){t&&b(e)}}}function El(t){let e,n,r=!0===t[13]&&Cl(t);return{c(){r&&r.c(),e=E()},m(t,o){r&&r.m(t,o),v(t,e,o),n=!0},p(t,n){!0===t[13]?r?(r.p(t,n),ut(r,1)):(r=Cl(t),r.c(),ut(r,1),r.m(e.parentNode,e)):r&&(at(),lt(r,1,1,()=>{r=null}),ct())},i(t){n||(ut(r),n=!0)},o(t){lt(r),n=!1},d(t){r&&r.d(t),t&&b(e)}}}function Cl(n){let r,o,a,c,u,l,h,d;return{c(){r=w("rect"),P(r,"name",o="set"+n[142]),P(r,"width",n[21]),P(r,"height",n[21]),P(r,"x",a=20*n[145]),P(r,"y",c=0),P(r,"id",u=n[143][0]),P(r,"fill",l="rgb("+n[146].colour+")")},m(t,e){v(t,r,e),d=!0},p(t,e){(!d||2097152&e[0])&&P(r,"width",t[21]),(!d||2097152&e[0])&&P(r,"height",t[21]),(!d||16&e[0]&&u!==(u=t[143][0]))&&P(r,"id",u),(!d||8&e[0]&&l!==(l="rgb("+t[146].colour+")"))&&P(r,"fill",l)},i(t){d||(h&&h.end(1),d=!0)},o(n){h=function(n,r,o){let a,c=r(n,o),u=!0;const l=st;function h(){const{delay:r=0,duration:o=300,easing:s=e,tick:h=t,css:d}=c||ht;d&&(a=R(n,1,0,o,r,s,d));const p=f()+r,y=p+o;Z(()=>ot(n,!1,"start")),m(t=>{if(u){if(t>=y)return h(0,1),ot(n,!1,"end"),--l.r||i(l.c),!1;if(t>=p){const e=s((t-p)/o);h(1-e,e)}}return u})}return l.r+=1,s(c)?rt().then(()=>{c=c(),h()}):h(),{end(t){t&&c.tick&&c.tick(1,0),u&&(a&&z(n,a),u=!1)}}}(r,wt,{delay:0,duration:100}),d=!1},d(t){t&&b(r),t&&h&&h.end()}}}function Pl(t){let e,n,r=t[146].pitch===t[143][0]&&El(t);return{c(){r&&r.c(),e=E()},m(t,o){r&&r.m(t,o),v(t,e,o),n=!0},p(t,n){t[146].pitch===t[143][0]?r?(r.p(t,n),ut(r,1)):(r=El(t),r.c(),ut(r,1),r.m(e.parentNode,e)):r&&(at(),lt(r,1,1,()=>{r=null}),ct())},i(t){n||(ut(r),n=!0)},o(t){lt(r),n=!1},d(t){r&&r.d(t),t&&b(e)}}}function Ol(t){let e,n,r=t[3],o=[];for(let e=0;e<r.length;e+=1)o[e]=Pl(ju(t,r,e));const i=t=>lt(o[t],1,1,()=>{o[t]=null});return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=E()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);v(t,e,r),n=!0},p(t,n){if(2105368&n[0]){let s;for(r=t[3],s=0;s<r.length;s+=1){const i=ju(t,r,s);o[s]?(o[s].p(i,n),ut(o[s],1)):(o[s]=Pl(i),o[s].c(),ut(o[s],1),o[s].m(e.parentNode,e))}for(at(),s=r.length;s<o.length;s+=1)i(s);ct()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)ut(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)lt(o[t]);n=!1},d(t){x(o,t),t&&b(e)}}}function Al(t){let e,n,r,o,s,a,c,u,l,h,f,d,p=!0===t[14]&&kl(t),y=t[4][t[142]],m=[];for(let e=0;e<y.length;e+=1)m[e]=Ol(Du(t,y,e));const _=t=>lt(m[t],1,1,()=>{m[t]=null});function T(...e){return t[137](t[142],...e)}function E(...e){return t[138](t[142],...e)}return{c(){e=M("div"),p&&p.c(),n=k(),r=M("a"),o=w("svg"),s=w("g");for(let t=0;t<m.length;t+=1)m[t].c();l=k(),P(s,"class","swatches"),P(o,"width",a=60),P(o,"height",c=20),P(r,"href","#s"),P(r,"id",u=t[142]+"eachSwatch"),P(r,"class","eachSwatch"),P(e,"class","wrap-chord-swatch"),P(e,"name",h="select"+t[5][t[142]])},m(t,a,c){v(t,e,a),p&&p.m(e,null),g(e,n),g(e,r),g(r,o),g(o,s);for(let t=0;t<m.length;t+=1)m[t].m(s,null);g(e,l),f=!0,c&&i(d),d=[C(r,"mouseover",T),C(r,"click",E)]},p(r,o){if(!0===(t=r)[14]?p?p.p(t,o):(p=kl(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null),2105368&o[0]){let e;for(y=t[4][t[142]],e=0;e<y.length;e+=1){const n=Du(t,y,e);m[e]?(m[e].p(n,o),ut(m[e],1)):(m[e]=Ol(n),m[e].c(),ut(m[e],1),m[e].m(s,null))}for(at(),e=y.length;e<m.length;e+=1)_(e);ct()}(!f||32&o[0]&&h!==(h="select"+t[5][t[142]]))&&P(e,"name",h)},i(t){if(!f){for(let t=0;t<y.length;t+=1)ut(m[t]);f=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)lt(m[t]);f=!1},d(t){t&&b(e),p&&p.d(),x(m,t),i(d)}}}function Sl(t){let e,n,r,o,s,a,c,u,l,h,f,d,p,y,m,_,x,w,T,E,O,A,S,$,N,H,L,R,z=!0===t[18]&&Zu(t);const j=new tc({props:{width:580,height:580,$$slots:{default:[ll]},$$scope:{ctx:t}}});let D=!0===t[17]&&hl(t),Y=!0===t[12]&&!1===t[17]&&fl(t);return{c(){e=M("div"),n=M("div"),r=M("div"),o=M("div"),s=M("p"),a=M("button"),a.textContent="Tutorial",c=k(),z&&z.c(),u=k(),l=M("p"),h=M("span"),h.textContent="Filter by Artist:",f=k(),d=M("select"),p=M("option"),p.textContent="The Beatles\n            ",m=M("option"),m.textContent="Queen",x=k(),mt(j.$$.fragment),w=k(),D&&D.c(),T=k(),Y&&Y.c(),E=k(),O=M("footer"),A=M("span"),A.textContent="Compos-In-Colour",S=k(),$=M("br"),N=k(),H=M("p"),H.innerHTML='created by <a href="https://github.com/5v1n0" target="_blank">5v1n0</a>',P(a,"id","tutBtn"),P(o,"id","help"),P(h,"class","select-descriptor"),p.__value=y="THE_BEATLES",p.value=p.__value,m.__value=_="QUEEN",m.value=m.__value,P(d,"class","select-module"),void 0===t[2]&&Z(()=>t[118].call(d)),P(l,"class","select-container"),P(r,"class","COF-wheel"),P(n,"class","mini-container"),P(e,"class","container"),P(A,"id","home")},m(y,_,b){v(y,e,_),g(e,n),g(n,r),g(r,o),g(o,s),g(s,a),g(o,c),z&&z.m(o,null),g(r,u),g(r,l),g(l,h),g(l,f),g(l,d),g(d,p),g(d,m),I(d,t[2]),g(r,x),gt(j,r,null),g(n,w),D&&D.m(n,null),g(n,T),Y&&Y.m(n,null),v(y,E,_),v(y,O,_),g(O,A),g(O,S),g(O,$),g(O,N),g(O,H),L=!0,b&&i(R),R=[C(a,"click",t[112]),C(d,"change",t[118]),C(d,"change",t[119]),C(A,"click",t[139])]},p(t,e){!0===t[18]?z?(z.p(t,e),ut(z,1)):(z=Zu(t),z.c(),ut(z,1),z.m(o,null)):z&&(at(),lt(z,1,1,()=>{z=null}),ct()),4&e[0]&&I(d,t[2]);const r={};2048&e[5]&&(r.$$scope={dirty:e,ctx:t}),j.$set(r),!0===t[17]?D?D.p(t,e):(D=hl(t),D.c(),D.m(n,T)):D&&(D.d(1),D=null),!0===t[12]&&!1===t[17]?Y?(Y.p(t,e),ut(Y,1)):(Y=fl(t),Y.c(),ut(Y,1),Y.m(n,null)):Y&&(at(),lt(Y,1,1,()=>{Y=null}),ct())},i(t){L||(ut(z),ut(j.$$.fragment,t),ut(Y),L=!0)},o(t){lt(z),lt(j.$$.fragment,t),lt(Y),L=!1},d(t){t&&b(e),z&&z.d(),vt(j),D&&D.d(),Y&&Y.d(),t&&b(E),t&&b(O),i(R)}}}async function Il(t){const e=await fetch(t),n=await e.text();return zu(n)}function $l(t){let e=t;return[e.x+e.width/2,e.y+e.height/2]}function Nl(){let t=document.getElementsByClassName("wrap-chord-swatch");for(let e=0;e<t.length;e++)t[e].style.background=""}function Hl(t,e,n){let r,o,i,s,a,c,l,h,f,d,p=!1;async function y(){n(53,[l,h]=await Promise.all([Il("data/MAC.csv"),Il("data/ColourMusicScale.csv")]),l,n(54,h)),n(52,p=!0)}y();const m=new Su(St);let g=m.data(),v=g.POLY_PATH,b=g.KEY,x=g.TEXT_PATH_1,M=g.TEXT_PATH_2,w=g.TEXT_PATH_3,T="";const k=new Su(It);let E=k.data(),C=E.KEY,P=E.POLY_PATH,O=[C,P],A=E.TEXT_PATH_1,S=E.TEXT_PATH_2;const I=new Su($t);let N,H,L,R,z,j,D,Y,B,F,q,G,V,W=[],K=[],J="",Z="",U="",Q="",tt="",et="",nt=!1,rt=!1,ot=!1,it=!1,st=!1,at=!0,ct=!1,ut=!0,lt=!1,ht=!1,ft=!1;function dt(t){""===tt&&(tt=t),"CLICK"===K[t]&&document.getElementById(t).setAttribute("style","opacity:0.8")}function pt(t){"CLICK"===K[t]&&document.getElementById(t).setAttribute("style","opacity:0.2")}function yt(t){""===tt&&(tt=t),""!==tt&&("CLICK"===K[t]&&tt===t&&(document.getElementById(t).setAttribute("style","opacity:0.2"),K[t]="BLOCK",tt=t),"CLICK"===K[t]&&tt!==t&&(K[tt]="CLICK",document.getElementById(tt).setAttribute("style","opacity:0.2"),tt=t,K[t]="BLOCK"),tt===t&&(document.getElementById(t).setAttribute("style","opacity:0.8"),K[t]="BLOCK",tt=t)),n(17,ut=!1),Z="",n(1,U=""),n(7,Y=""),n(6,D=""),n(8,B=""),n(20,Ut=12),n(13,it=!1),n(14,st=!1),n(16,ct=!1),n(18,lt=!1);try{mt(t)}catch(t){n(16,ct=!0)}}function mt(t){n(16,ct=!1),n(12,rt=!0),ot=!0,n(0,T=m.filter(e=>e.OBJECT_ID===t+1));let e=T.column("KEY")[0];J=f.filter(t=>t.KEY===e&&"Silence"!==t.KEY&&t.ARTIST===Q),Z=_.uniq(J.column("ALBUM")),n(1,U=_.uniq(J.column("SONG_TITLE")))}function gt(){n(12,rt=!1),ot=!1,""!==W&&(W=W.splice(0,W.length))}let vt,_t,bt,xt="",wt="";function Tt(t,e){let r;wt=document.getElementById(e+t),""===xt&&(xt=wt,wt.style.background="#f6f6f6"),wt!==xt&&(xt.style.background="#EDEAE5",wt.style.background="#f6f6f6",xt=wt),n(11,nt=!0);f.filter(e=>e.SONG_TITLE===t);et=f.filter(e=>e.SONG_TITLE===t),R=_.uniq(_.compact(et.column("CHORD_START"))),n(6,D=_.uniq(_.compact(et.column("ALBUM")))),n(7,Y=t),n(8,B=_.pull(_.uniq(et.column("CHORD")),"N")),r=et.column("CHORD"),n(5,j=_.pull(r,"N")),z=_.uniq(_.compact(et.column("CHORD_END"))),Nl(),kt()}function kt(){let t,e;F=d.filter(t=>t.Inventor===V),n(9,q=F.column("Colour")),G=[q,F.column("Scale")],W=[];for(let e=0;e<j.length;e++)t=I.filter(t=>t.CHORD===j[e]),W.push([t.column("ROOT"),t.column("THIRD"),t.column("FIFTH")]);N=[];for(let t=0;t<G[1].length;t++)for(let n=0;n<W.length;n++)for(let r=0;r<W[n].length;r++)G[1][t]===W[n][r][0]&&(e={pitch:W[n][r][0],colour:G[0][t]},N.push(e));ht=!0,n(13,it=!0),Ht(N,W)}X(()=>{!0===ht&&!1===ft&&(Nt(),ft=!0)});let Et,Ct,Pt,Ot=[];function Nt(){for(let t=0;t<O[1].length;t++)Et=t+"colourRing",Ct=document.getElementById(Et).getBBox(),Pt=$l(Ct),bt=O[0][t],vt=Math.round(Pt[0]),_t=Math.round(Pt[1]),Ot.push({pitchCentroid:bt,pointX:vt,pointY:_t})}function Ht(t,e){Bt(),n(3,H=t.reduce((function(t,e){var n=[e.pitch,e.colour].join("|");return-1===t.temp.indexOf(n)&&(t.out.push(e),t.temp.push(n)),t}),{temp:[],out:[]}).out),n(4,L=e)}let Lt=0,Rt=0,zt=0,jt=0,Dt=0,Yt=0,Xt=!1;function Bt(){n(79,Lt=Math.floor(600*Math.random())),n(80,Rt=Math.floor(300*Math.random())),n(81,zt=Math.floor(200*Math.random())),n(82,jt=Math.floor(300*Math.random())),n(83,Dt=Math.floor(600*Math.random())),n(84,Yt=Math.floor(600*Math.random())),n(19,Xt=!1)}const Ft=At(0,{duration:600,easing:Mt});u(t,Ft,t=>n(23,r=t));const qt=At(0,{duration:600,easing:Mt});u(t,qt,t=>n(25,i=t));const Gt=At(0,{duration:600,easing:Mt});u(t,Gt,t=>n(27,a=t));const Vt=At(0,{duration:600,easing:Mt});u(t,Vt,t=>n(24,o=t));const Wt=At(0,{duration:600,easing:Mt});u(t,Wt,t=>n(26,s=t));const Kt=At(0,{duration:600,easing:Mt});function Jt(t,e){let r=document.getElementById(e).querySelectorAll("svg > g > rect");for(let t=0;t<Ot.length;t++){for(let e=0;e<r.length;e++)Ot[t].pitchCentroid===r[0].id&&(n(79,Lt=Ot[t].pointX),n(80,Rt=Ot[t].pointY));Ot[t].pitchCentroid===r[1].id&&(n(81,zt=Ot[t].pointX),n(82,jt=Ot[t].pointY)),Ot[t].pitchCentroid===r[2].id&&(n(83,Dt=Ot[t].pointX),n(84,Yt=Ot[t].pointY))}n(19,Xt=!0)}u(t,Kt,t=>n(28,c=t)),window.onload=function(){n(10,V="Louis Bertrand Castel"),n(2,Q="QUEEN")};let Zt,Ut=12;function Qt(){let t=document.getElementById("swatchContainer");Zt=Math.round(66.25*Ut),t.style.width=Zt+"px"}let te=15;function ee(){n(22,ne=0),re=0,n(18,lt=!1===lt)}let ne=0,re=0;function oe(t){t===re?(n(22,ne=0),re=0):(re=t,n(22,ne=t))}return t.$$.update=()=>{if(14680064&t.$$.dirty[1]&&p&&(f=new Su(l),d=new Su(h)),4&t.$$.dirty[0]&&""!==Q){tt="";for(let t=0;t<v.length;t++)K[t]="CLICK",document.getElementById(t).setAttribute("style","opacity:0.2")}131072&t.$$.dirty[2]&&Ft.set(Lt),262144&t.$$.dirty[2]&&Vt.set(Rt),524288&t.$$.dirty[2]&&qt.set(zt),1048576&t.$$.dirty[2]&&Wt.set(jt),2097152&t.$$.dirty[2]&&Gt.set(Dt),4194304&t.$$.dirty[2]&&Kt.set(Yt)},[T,U,Q,H,L,j,D,Y,B,q,V,nt,rt,it,st,at,ct,ut,lt,Xt,Ut,te,ne,r,o,i,s,a,c,v,x,M,w,O,A,S,dt,pt,yt,gt,Tt,kt,Ft,qt,Gt,Vt,Wt,Kt,Jt,Qt,ee,oe,p,l,h,f,d,W,K,N,J,Z,tt,et,R,z,F,G,ot,ht,ft,xt,wt,vt,_t,bt,Et,Ct,Pt,Lt,Rt,zt,jt,Dt,Yt,Zt,re,y,m,g,b,k,E,C,P,I,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,mt,Ot,Nt,Ht,Bt,void 0,void 0,function(){n(21,te)},()=>ee(),()=>oe(1),()=>oe(2),()=>oe(3),()=>oe(4),()=>oe(5),function(){Q=$(this),n(2,Q)},()=>gt(),t=>dt(t),t=>pt(t),t=>yt(t),()=>(document.getElementById("tutBtn").style.background="#026670",document.getElementById("tutBtn").style.color="white",document.getElementById("pingSource").style.color="#026670",void(document.getElementById("pingSource").style.cursor="default")),()=>(document.getElementById("tutBtn").style.background="#EDEAE5",document.getElementById("tutBtn").style.color="rgb(173,170,165)",void(document.getElementById("pingSource").style.color="rgb(173,170,165)")),(t,e)=>Tt(t,e),function(){V=$(this),n(10,V)},()=>kt(),function(){at=this.checked,n(15,at)},function(){st=this.checked,n(14,st)},()=>Nl(),function(){te=this.__value,n(21,te)},[[]],function(){te=this.__value,n(21,te)},function(){te=this.__value,n(21,te)},function(){var t;t=this.value,Ut=""===t?void 0:+t,n(20,Ut)},()=>Qt(),t=>Jt(0,t+"eachSwatch"),t=>function(t){let e=document.getElementsByName(t);for(let t=0;t<e.length;t++)e[t].style.background="rgb(159, 237, 215)"}("select"+j[t]),()=>{n(17,ut=!0)}]}return new class extends xt{constructor(t){super(),bt(this,t,Hl,Sl,a,{},[-1,-1,-1,-1,-1,-1])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
